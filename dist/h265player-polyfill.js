/*! h265player built @2020/10/13 ‰∏ãÂçà5:44:06 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.h265player=e():t.h265player=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=174)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(50);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(11),i=n(1);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){var r=n(12),i=n(19),o=n(31),a=n(25),s=n(35),u=function(t,e,n){var c,l,f,h,d=t&u.F,p=t&u.G,y=t&u.S,v=t&u.P,g=t&u.B,m=p?r:y?r[e]||(r[e]={}):(r[e]||{}).prototype,b=p?i:i[e]||(i[e]={}),w=b.prototype||(b.prototype={});for(c in p&&(n=e),n)f=((l=!d&&m&&void 0!==m[c])?m:n)[c],h=g&&l?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,m&&a(m,c,f,t&u.U),b[c]!=f&&o(b,c,h),v&&w[c]!=f&&(w[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return a}));var r={projectName:"GOLDPLAY",projectAbbreviation:"GP",mode:"production",basePath:"./",get distPath(){var t="";return("development"==this.mode||"test"==this.mode)&&(t="/dist/"),t},get libPath(){return this.distPath+"lib/"},hideBarBoxTime:300,speedList:[{name:"0.5X",value:.5},{name:"1.0X",value:1},{name:"1.5X",value:1.5},{name:"2.0X",value:2},{name:"3.0X",value:3}]},i={maxDuration:30,maxSize:1024e6,maxRetryCount:3},o=1/9e4,a={READYBUFFERLENGTH:1e3,MAXBUFFERLENGTH:5e3}},function(t,e,n){"use strict";var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(0),u=n.n(s),c=n(9),l=console||{};function f(t,e){if(l[t]){if(this.disabled||this.level<0)return;if("production"===c.c.mode&&("error"!==t||"warn"!==t))return;if(1===this.level&&["info"].includes(t))return;if(2===this.level&&["log","info"].includes(t))return;if(this.level>2&&"error"!==t)return;for(var n=(new Date).toLocaleString(),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=["[32m".concat(e,"[39m")].concat(i,[n]);"error"!==t&&"warn"!==t||(a=[e].concat(i,[n])),"function"==typeof l[t]&&l[t].apply(l,a)}}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),u()(this,"prefix",c.c.projectName),u()(this,"joiner",">"),u()(this,"left","["),u()(this,"right","]"),u()(this,"disabled",!1),u()(this,"level",0),Object.assign(this,n),"string"==typeof e?this.file=e:e&&e.constructor&&(this.file=e.constructor.name)}return a()(t,[{key:"setDisabled",value:function(t){this.disabled=t}},{key:"setLevel",value:function(t){this.level=t}}],[{key:"get",value:function(e,n){return new t(e,n)}}]),t}();["info","log","debug","warn","error"].forEach((function(t){h.prototype[t]=function(e,n){n=void 0===n?"":this.joiner+n;for(var r=this.left+e+n+this.right,i=this.left+this.prefix+" "+this.file+this.right+r,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];f.apply(this,[t,i].concat(a))}})),e.a=h},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(15);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(79)("wks"),i=n(53),o=n(12).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(37),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){t.exports=n(78)},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(14),i=n(139),o=n(48),a=Object.defineProperty;e.f=n(20)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(42);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(0),u=n.n(s),c=n(9),l={eval:EvalError,range:RangeError,reference:ReferenceError,syntax:SyntaxError,type:TypeError,uri:URIError,default:Error},f=null,h=(f||(f=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1001;return i()(this,t),u()(this,"type",""),u()(this,"errorName","DefaultError"),u()(this,"code",null),u()(this,"message",""),u()(this,"stack",""),this.type=e,this.code=n,this.throws.bind(this)}return a()(t,[{key:"throws",value:function(t){for(var e="",n=Error,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(t instanceof Error){for(var a in l)if(t instanceof l[a]){this.errorName=l[a].name,n=t.constructor;break}this.stack=t.stack,i&&i.splice&&(e=i[0],i.splice(0,1))}else e=t.toString();this.message="[".concat(c.c.projectName," ERROR:")+this.type+"-"+this.code+"]"+e;try{throw new n(this.message,"[args]:",i)}catch(t){this.stack=this.stack||t.stack,console.error(t,"[message]:",e,"[args]:",i)}}}]),t}())),f)},function(t,e){t.exports=function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}},function(t,e,n){var r=n(12),i=n(31),o=n(30),a=n(53)("src"),s=n(179),u=(""+s).split("toString");n(19).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,n){var r=n(7),i=n(13),o=n(42),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},function(t,e,n){var r=n(50),i=n(92);function o(e,n,a){return i()?t.exports=o=Reflect.construct:t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}t.exports=o},function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,u,"next",t)}function u(t){n(a,i,o,s,u,"throw",t)}s(void 0)}))}}},function(t,e){t.exports=function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(21),i=n(52);t.exports=n(20)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(71),i=n(42);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";var r=n(13);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){var r=n(2),i=n(50),o=n(93),a=n(27);function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},s(e)}t.exports=s},function(t,e,n){var r=n(36);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(72),i=n(52),o=n(32),a=n(48),s=n(30),u=n(139),c=Object.getOwnPropertyDescriptor;e.f=n(20)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(7),i=n(19),o=n(13);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(t,e,n){var r=n(35),i=n(71),o=n(22),a=n(17),s=n(155);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f,d=e||s;return function(e,s,p){for(var y,v,g=o(e),m=i(g),b=r(s,p,3),w=a(m.length),_=0,k=n?d(e,w):u?d(e,0):void 0;w>_;_++)if((h||_ in m)&&(v=b(y=m[_],_,g),t))if(n)k[_]=v;else if(v)switch(t){case 3:return!0;case 5:return y;case 6:return _;case 2:k.push(y)}else if(l)return!1;return f?-1:c||l?l:k}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";if(n(20)){var r=n(54),i=n(12),o=n(13),a=n(7),s=n(90),u=n(134),c=n(35),l=n(68),f=n(52),h=n(31),d=n(69),p=n(37),y=n(17),v=n(166),g=n(56),m=n(48),b=n(30),w=n(73),_=n(15),k=n(22),x=n(126),P=n(57),E=n(59),S=n(58).f,T=n(128),R=n(53),B=n(16),L=n(40),A=n(80),D=n(74),C=n(130),O=n(66),I=n(83),M=n(67),N=n(129),U=n(157),F=n(21),H=n(38),j=F.f,W=H.f,$=i.RangeError,V=i.TypeError,Y=i.Uint8Array,z=Array.prototype,X=u.ArrayBuffer,G=u.DataView,q=L(0),K=L(2),Q=L(3),J=L(4),Z=L(5),tt=L(6),et=A(!0),nt=A(!1),rt=C.values,it=C.keys,ot=C.entries,at=z.lastIndexOf,st=z.reduce,ut=z.reduceRight,ct=z.join,lt=z.sort,ft=z.slice,ht=z.toString,dt=z.toLocaleString,pt=B("iterator"),yt=B("toStringTag"),vt=R("typed_constructor"),gt=R("def_constructor"),mt=s.CONSTR,bt=s.TYPED,wt=s.VIEW,_t=L(1,(function(t,e){return St(D(t,t[gt]),e)})),kt=o((function(){return 1===new Y(new Uint16Array([1]).buffer)[0]})),xt=!!Y&&!!Y.prototype.set&&o((function(){new Y(1).set({})})),Pt=function(t,e){var n=p(t);if(n<0||n%e)throw $("Wrong offset!");return n},Et=function(t){if(_(t)&&bt in t)return t;throw V(t+" is not a typed array!")},St=function(t,e){if(!_(t)||!(vt in t))throw V("It is not a typed array constructor!");return new t(e)},Tt=function(t,e){return Rt(D(t,t[gt]),e)},Rt=function(t,e){for(var n=0,r=e.length,i=St(t,r);r>n;)i[n]=e[n++];return i},Bt=function(t,e,n){j(t,e,{get:function(){return this._d[n]}})},Lt=function(t){var e,n,r,i,o,a,s=k(t),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=T(s);if(null!=h&&!x(h)){for(a=h.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),e=0,n=y(s.length),i=St(this,n);n>e;e++)i[e]=f?l(s[e],e):s[e];return i},At=function(){for(var t=0,e=arguments.length,n=St(this,e);e>t;)n[t]=arguments[t++];return n},Dt=!!Y&&o((function(){dt.call(new Y(1))})),Ct=function(){return dt.apply(Dt?ft.call(Et(this)):Et(this),arguments)},Ot={copyWithin:function(t,e){return U.call(Et(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return J(Et(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(Et(this),arguments)},filter:function(t){return Tt(this,K(Et(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Z(Et(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Et(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){q(Et(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Et(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Et(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Et(this),arguments)},lastIndexOf:function(t){return at.apply(Et(this),arguments)},map:function(t){return _t(Et(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Et(this),arguments)},reduceRight:function(t){return ut.apply(Et(this),arguments)},reverse:function(){for(var t,e=Et(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return Q(Et(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(Et(this),t)},subarray:function(t,e){var n=Et(this),r=n.length,i=g(t,r);return new(D(n,n[gt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,y((void 0===e?r:g(e,r))-i))}},It=function(t,e){return Tt(this,ft.call(Et(this),t,e))},Mt=function(t){Et(this);var e=Pt(arguments[1],1),n=this.length,r=k(t),i=y(r.length),o=0;if(i+e>n)throw $("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Nt={entries:function(){return ot.call(Et(this))},keys:function(){return it.call(Et(this))},values:function(){return rt.call(Et(this))}},Ut=function(t,e){return _(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ft=function(t,e){return Ut(t,e=m(e,!0))?f(2,t[e]):W(t,e)},Ht=function(t,e,n){return!(Ut(t,e=m(e,!0))&&_(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?j(t,e,n):(t[e]=n.value,t)};mt||(H.f=Ft,F.f=Ht),a(a.S+a.F*!mt,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:Ht}),o((function(){ht.call({})}))&&(ht=dt=function(){return ct.call(this)});var jt=d({},Ot);d(jt,Nt),h(jt,pt,Nt.values),d(jt,{slice:It,set:Mt,constructor:function(){},toString:ht,toLocaleString:Ct}),Bt(jt,"buffer","b"),Bt(jt,"byteOffset","o"),Bt(jt,"byteLength","l"),Bt(jt,"length","e"),j(jt,yt,{get:function(){return this[bt]}}),t.exports=function(t,e,n,u){var c=t+((u=!!u)?"Clamped":"")+"Array",f="get"+t,d="set"+t,p=i[c],g=p||{},m=p&&E(p),b=!p||!s.ABV,k={},x=p&&p.prototype,T=function(t,n){j(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[f](n*e+r.o,kt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,kt)}(this,n,t)},enumerable:!0})};b?(p=n((function(t,n,r,i){l(t,p,c,"_d");var o,a,s,u,f=0,d=0;if(_(n)){if(!(n instanceof X||"ArrayBuffer"==(u=w(n))||"SharedArrayBuffer"==u))return bt in n?Rt(p,n):Lt.call(p,n);o=n,d=Pt(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw $("Wrong length!");if((a=g-d)<0)throw $("Wrong length!")}else if((a=y(i)*e)+d>g)throw $("Wrong length!");s=a/e}else s=v(n),o=new X(a=s*e);for(h(t,"_d",{b:o,o:d,l:a,e:s,v:new G(o)});f<s;)T(t,f++)})),x=p.prototype=P(jt),h(x,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&I((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=n((function(t,n,r,i){var o;return l(t,p,c),_(n)?n instanceof X||"ArrayBuffer"==(o=w(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,Pt(r,e),i):void 0!==r?new g(n,Pt(r,e)):new g(n):bt in n?Rt(p,n):Lt.call(p,n):new g(v(n))})),q(m!==Function.prototype?S(g).concat(S(m)):S(g),(function(t){t in p||h(p,t,g[t])})),p.prototype=x,r||(x.constructor=p));var R=x[pt],B=!!R&&("values"==R.name||null==R.name),L=Nt.values;h(p,vt,!0),h(x,bt,c),h(x,wt,!0),h(x,gt,p),(u?new p(1)[yt]==c:yt in x)||j(x,yt,{get:function(){return c}}),k[c]=p,a(a.G+a.W+a.F*(p!=g),k),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){g.of.call(p,1)})),c,{from:Lt,of:At}),"BYTES_PER_ELEMENT"in x||h(x,"BYTES_PER_ELEMENT",e),a(a.P,c,Ot),M(c),a(a.P+a.F*xt,c,{set:Mt}),a(a.P+a.F*!B,c,Nt),r||x.toString==ht||(x.toString=ht),a(a.P+a.F*o((function(){new p(1).slice()})),c,{slice:It}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){x.toLocaleString.call([1,2])}))),c,{toLocaleString:Ct}),O[c]=B?R:L,r||B||h(x,pt,L)}}else t.exports=function(){}},function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t,e,r){var o={};o[r]=[];var a=e.toString(),s=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var u,c=s[1],l=new RegExp("(\\\\n|\\W)"+i(c)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=l.exec(a);)"dll-reference"!==u[3]&&o[r].push(u[3]);for(l=new RegExp("\\("+i(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=l.exec(a);)t[u[2]]||(o[r].push(u[1]),t[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var f,h=Object.keys(o),d=0;d<h.length;d++)for(var p=0;p<o[h[d]].length;p++)f=o[h[d]][p],isNaN(1*f)||(o[h[d]][p]=1*o[h[d]][p]);return o}function a(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){e=e||{};var i={main:n.m},s=e.all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};a(n);)for(var s=Object.keys(n),u=0;u<s.length;u++){var c=s[u],l=n[c].pop();if(i[c]=i[c]||{},!i[c][l]&&t[c][l]){i[c][l]=!0,r[c]=r[c]||[],r[c].push(l);for(var f=o(t,t[c][l],c),h=Object.keys(f),d=0;d<h.length;d++)n[h[d]]=n[h[d]]||[],n[h[d]]=n[h[d]].concat(f[h[d]])}}return r}(i,t),u="";Object.keys(s).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;s[t][e];)e++;s[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),u=u+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var c=new window.Blob([u],{type:"text/javascript"});if(e.bare)return c;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),f=new window.Worker(l);return f.objectURL=l,f}},function(t,e,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){var t=function(){},e={},n={},r={};function i(t,e){if(t){var i=r[t];if(n[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function a(e,n,r,i){var o,s,u=document,c=r.async,l=(r.numRetries||0)+1,f=r.before||t,h=e.replace(/[\?|#].*$/,""),d=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(h)?((s=u.createElement("link")).rel="stylesheet",s.href=d,(o="hideFocus"in s)&&s.relList&&(o=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(s=u.createElement("img")).src=d:((s=u.createElement("script")).src=e,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(t){var u=t.type[0];if(o)try{s.sheet.cssText.length||(u="e")}catch(t){18!=t.code&&(u="e")}if("e"==u){if((i+=1)<l)return a(e,n,r,i)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(e,u,t.defaultPrevented)},!1!==f(e,s)&&u.head.appendChild(s)}function s(t,n,r){var s,u;if(n&&n.trim&&(s=n),u=(s?r:n)||{},s){if(s in e)throw"LoadJS";e[s]=!0}function c(e,n){!function(t,e,n){var r,i,o=(t=t.push?t:[t]).length,s=o,u=[];for(r=function(t,n,r){if("e"==n&&u.push(t),"b"==n){if(!r)return;u.push(t)}--o||e(u)},i=0;i<s;i++)a(t[i],r,n)}(t,(function(t){o(u,t),e&&o({success:e,error:n},t),i(s,t)}),u)}if(u.returnPromise)return new Promise(c);c()}return s.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,o,a,s=[],u=t.length,c=u;for(i=function(t,n){n.length&&s.push(t),--c||e(s)};u--;)o=t[u],(a=n[o])?i(o,a):(r[o]=r[o]||[]).push(i)}(t,(function(t){o(e,t)})),s},s.done=function(t){i(t,[])},s.reset=function(){e={},n={},r={}},s.isDefined=function(t){return t in e},s})?r.apply(e,i):r)||(t.exports=o)},function(t,e){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e,n){"use strict";
/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */var r=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(n,1),n>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var n=e.length,r=0;r<n;++r)e[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=e.length,a=0;a<o;++a)e[a].apply(this,i)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();t.exports=r},function(t,e,n){var r=n(15);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(53)("meta"),i=n(15),o=n(30),a=n(21).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(13)((function(){return u(Object.preventExtensions({}))})),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!o(t,r)&&l(t),t}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){!function(){"use strict";function e(t,e){throw new Error("abstract")}e.prototype.drawFrame=function(t){throw new Error("abstract")},e.prototype.clear=function(){throw new Error("abstract")},t.exports=e}()},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var r=n(141),i=n(113);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(37),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(14),i=n(142),o=n(113),a=n(112)("IE_PROTO"),s=function(){},u=function(){var t,e=n(110)("iframe"),r=o.length;for(e.style.display="none",n(114).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(141),i=n(113).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(30),i=n(22),o=n(112)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(16)("unscopables"),i=Array.prototype;null==i[r]&&n(31)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){var r=n(15);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){var n={validateDimension:function(t){if(t<=0||t!==(0|t))throw"YUV plane dimensions must be a positive integer"},validateOffset:function(t){if(t<0||t!==(0|t))throw"YUV plane offsets must be a non-negative integer"},format:function(t){var e=t.width,n=t.height,r=t.chromaWidth||e,i=t.chromaHeight||n,o=t.cropLeft||0,a=t.cropTop||0,s=t.cropWidth||e-o,u=t.cropHeight||n-a,c=t.displayWidth||s,l=t.displayHeight||u;return this.validateDimension(e),this.validateDimension(n),this.validateDimension(r),this.validateDimension(i),this.validateOffset(o),this.validateOffset(a),this.validateDimension(s),this.validateDimension(u),this.validateDimension(c),this.validateDimension(l),{width:e,height:n,chromaWidth:r,chromaHeight:i,cropLeft:o,cropTop:a,cropWidth:s,cropHeight:u,displayWidth:c,displayHeight:l}},allocPlane:function(t,e){return n.validateDimension(t),n.validateDimension(e),{bytes:new Uint8Array(t*e),stride:t}},suitableStride:function(t){n.validateDimension(t);var e=t%4;return 0==e?t:t+(4-e)},allocPlane:function(t,e,n,r,i){var o,a;if(this.validateDimension(t),this.validateDimension(e),i=i||0,r=r||this.suitableStride(t),this.validateDimension(r),r<t)throw"Invalid input stride for YUV plane; must be larger than width";if(o=r*e,n){if(n.length-i<o)throw"Invalid input buffer for YUV plane; must be large enough for stride times height";a=n.slice(i,i+o)}else a=new Uint8Array(o),r=r||this.suitableStride(t);return{bytes:a,stride:r}},lumaPlane:function(t,e,n,r){return this.allocPlane(t.width,t.height,e,n,r)},chromaPlane:function(t,e,n,r){return this.allocPlane(t.chromaWidth,t.chromaHeight,e,n,r)},frame:function(t,e,n,r){return{format:t,y:e=e||this.lumaPlane(t),u:n=n||this.chromaPlane(t),v:r=r||this.chromaPlane(t)}},copyPlane:function(t){return{bytes:t.bytes.slice(),stride:t.stride}},copyFrame:function(t){return{format:t.format,y:this.copyPlane(t.y),u:this.copyPlane(t.u),v:this.copyPlane(t.v)}},transferables:function(t){return[t.y.bytes.buffer,t.u.bytes.buffer,t.v.bytes.buffer]}};t.exports=n},function(t,e,n){var r=n(105),i=n(106),o=n(107),a=n(109);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()}},function(t,e,n){var r=n(21).f,i=n(30),o=n(16)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(7),i=n(42),o=n(13),a=n(116),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,n){var i={},s=o((function(){return!!a[t]()||"‚Äã¬Ö"!="‚Äã¬Ö"[t]()})),u=i[t]=s?e(f):a[t];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(12),i=n(21),o=n(20),a=n(16)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(25);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(41);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(41),i=n(16)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(14),i=n(36),o=n(16)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e,n){"use strict";(function(e){var r,i=(r=n(98))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=function(t){for(var n,r=(n=t,i.atob?i.atob(n):e.from(n,"base64").toString("binary")),o=new Uint8Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return o}}).call(this,n(94).Buffer)},function(t,e,n){!function(){"use strict";var e=n(51),r=n(99),i=n(102),o={FrameSink:e,SoftwareFrameSink:r,WebGLFrameSink:i,attach:function(t,e){return("webGL"in(e=e||{})?e.webGL:i.isAvailable())?new i(t,e):new r(t,e)}};t.exports=o}()},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new x(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};p[i]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(P([])));v&&v!==e&&n.call(v,i)&&(p=v);var g=d.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=g.constructor=d,d.constructor=h,h.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[o]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(19),i=n(12),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(54)?"pure":"global",copyright:"¬© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(32),i=n(17),o=n(56);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(41);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(16)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(14);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(73),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";n(159);var r=n(25),i=n(31),o=n(13),a=n(42),s=n(16),u=n(131),c=s("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var h=s(t),d=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[h](""),!e})):void 0;if(!d||!p||"replace"===t&&!l||"split"===t&&!f){var y=/./[h],v=n(a,h,""[t],(function(t,e,n,r,i){return e.exec===u?d&&!i?{done:!0,value:y.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=v[0],m=v[1];r(String.prototype,t,g),i(RegExp.prototype,h,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},function(t,e,n){var r=n(35),i=n(154),o=n(126),a=n(14),s=n(17),u=n(128),c={},l={};(e=t.exports=function(t,e,n,f,h){var d,p,y,v,g=h?function(){return t}:u(t),m=r(n,f,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=s(t.length);d>b;b++)if((v=e?m(a(p=t[b])[0],p[1]):m(t[b]))===c||v===l)return v}else for(y=g.call(t);!(p=y.next()).done;)if((v=i(y,m,p.value,e))===c||v===l)return v}).BREAK=c,e.RETURN=l},function(t,e,n){var r=n(12).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(12),i=n(7),o=n(25),a=n(69),s=n(49),u=n(87),c=n(68),l=n(15),f=n(13),h=n(83),d=n(64),p=n(117);t.exports=function(t,e,n,y,v,g){var m=r[t],b=m,w=v?"set":"add",_=b&&b.prototype,k={},x=function(t){var e=_[t];o(_,t,"delete"==t||"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(g||_.forEach&&!f((function(){(new b).entries().next()})))){var P=new b,E=P[w](g?{}:-0,1)!=P,S=f((function(){P.has(1)})),T=h((function(t){new b(t)})),R=!g&&f((function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)}));T||((b=e((function(e,n){c(e,b,t);var r=p(new m,e,b);return null!=n&&u(n,v,r[w],r),r}))).prototype=_,_.constructor=b),(S||R)&&(x("delete"),x("has"),v&&x("get")),(R||E)&&x(w),g&&_.clear&&delete _.clear}else b=y.getConstructor(e,t,v,w),a(b.prototype,n),s.NEED=!0;return d(b,t),k[t]=b,i(i.G+i.W+i.F*(b!=m),k),g||y.setStrong(b,t,v),b}},function(t,e,n){for(var r,i=n(12),o=n(31),a=n(53),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(1),u=n.n(s),c=n(5),l=n.n(c),f=n(6),h=n.n(f),d=n(2),p=n.n(d),y=n(0),v=n.n(y),g=n(24),m=n.n(g),b=n(29),w=n.n(b),_=n(10);function k(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var P=_.a.get("Events.js"),E=function(){function t(e){i()(this,t),v()(this,"eventsQueue",{}),v()(this,"target",{}),v()(this,"disallowRepeat",!1),this.target=e}return a()(t,[{key:"add",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=k(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;this.on(o,n,r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"on",value:function(t,e,n){if(void 0===this.eventsQueue[t]&&(this.eventsQueue[t]={methods:[],once:!1}),"function"==typeof e){if(!this.disallowRepeat||!this.eventsQueue[t].methods.includes(e))return this.eventsQueue[t].methods.push(e),void 0!==n&&(this.eventsQueue[t].once=n),this.target}else P.error("on","the argument is not function.",e)}},{key:"once",value:function(t,e){this.on(t,e,!0)}},{key:"off",value:function(t,e){var n=this.eventsQueue[t];if(n){var r=n.methods;if(e)for(var i=r.length;i--;)r[i]===e&&r.splice(i,1);else delete this.eventsQueue[t];return this.target}}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this.eventsQueue[t];if(o){var a=o.methods;return a.forEach((function(t){t.apply(e.target,r)})),o.once&&this.off(t),this.target}}},{key:"clear",value:function(t){delete this.eventsQueue[t]}},{key:"clearAll",value:function(){this.eventsQueue={}}}]),t}(),S=function(t){var e=new E(t);return function(t){return e.target=t,e}},T=n(11),R=n.n(T),B=_.a.get("Element.js"),L=function(){function t(){i()(this,t)}return a()(t,null,[{key:"createEl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1?arguments[1]:void 0;if("string"!=typeof t)return B.error("please input element name"),null;var n=document.createElement(t,e);return n}},{key:"registerElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HTMLElement,n=arguments.length>2?arguments[2]:void 0,r=document.registerElement(t,{prototype:Object.create(e.prototype),extends:n});return r}},{key:"addEl",value:function(t,e){if(t&&e)try{e.appendChild(t)}catch(t){B.error(t)}}},{key:"removeEl",value:function(t){try{var e=t.parentNode;e&&e.removeChild(t)}catch(t){B.error(t)}}},{key:"addClass",value:function(t){try{for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=t.classList).add.apply(e,r)}catch(t){B.error(t)}}},{key:"removeClass",value:function(){}},{key:"hasClass",value:function(){}},{key:"isElement",value:function(t){try{return t instanceof HTMLElement}catch(e){return"object"===R()(t)&&1===t.nodeType&&"object"===R()(t.style)&&"object"===R()(t.ownerDocument)}}},{key:"setAttributes",value:function(e,n){if(t.isElement(e))for(var r=0,i=n.length;r<i;r++){var o=n[r],a=o.name;a=o.name.replace(/["|']/g,""),e.setAttribute(a,o.value)}}},{key:"syncAttributes",value:function(e,n){var r=n.attributes;t.setAttributes(e,r);var i=e.attributes;t.setAttributes(n,i)}},{key:"getClientWidth",value:function(){return document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth}},{key:"getClientHeight",value:function(){return document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight}},{key:"adaptSizeElement",value:function(t,e,n,r){var i=n,o=r;o.width=t||o.width||i.offsetWidth,o.height=e||o.height||i.offsetHeight;var a=o.width,s=o.height,u=0;o.style.position="absolute",i.offsetWidth<=0&&(i.style.width=a+"px"),i.offsetHeight<=0&&(i.style.height=s+"px");var c=i.offsetWidth/a,l=i.offsetHeight/s;u=l>c?c:l,o.style.top=i.offsetTop+(i.offsetHeight-s*u)/2+"px",o.style.left=i.offsetLeft+(i.offsetWidth-a*u)/2+"px",o.style.transform="scale(".concat(u,", ").concat(u,")"),o.style["transform-origin"]="top left",o.style.display="inline-block"}}]),t}(),A=n(27),D=n.n(A),C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),v()(this,"logger",null),v()(this,"__instance__",null),v()(this,"__singleton__",null),this.options=e,this.setLogger(this.constructor.name+".js")}return a()(t,[{key:"setLogger",value:function(t){this.logger=new _.a(t)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):S(this)}}],[{key:"getInstance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.__instance__=D()(this,e),this.__instance__}},{key:"getSingleton",value:function(){if(!this.__singleton__){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.__singleton__=D()(this,e)}return this.__singleton__}}]),t}();function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var I=function(t){l()(n,t);var e=O(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"component",null),r.component=t.component,r}return a()(n,[{key:"confirm",value:function(){}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.component.data.content=t,"default"!==this.component.data.display&&""!==this.component.data.display||this.component.showBox(),"show"!==this.component.data.display&&this.component.show()}},{key:"hide",value:function(){this.component.hide()}}]),n}(C),M=n(23),N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),v()(this,"logger",null),this.options=e,this.debug=e.debug||!1,this.setLogger(this.constructor.name+".js")}return a()(t,[{key:"setLogger",value:function(t){this.logger=new _.a(t)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):S(this)}},{key:"alert",get:function(){var t="";return this.options&&this.options.alertError&&(t=this.options.alertError),t}}]),t}(),U=n(9);function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var H=function(t){l()(n,t);var e=F(n);function n(){var t;return i()(this,n),t=e.call(this),v()(u()(t),"loadData",null),v()(u()(t),"sourceURL",""),t}return a()(n,[{key:"init",value:function(){}},{key:"setLoadData",value:function(t){this.loadData=t}},{key:"setSourceURL",value:function(t){this.sourceURL=t}},{key:"getLoadData",value:function(){return this.getLoadData}},{key:"getSourceURL",value:function(){return this.getSourceURL}}]),n}(N),j={LOAD_PLAYLIST:10,get 10(){return"loading playlist"},LOADED_PLAYLIST:11,get 11(){return"playlist is loaded"},IDLE:0,get 0(){return"is free"},LOADING:1,get 1(){return"loading segment"},DONE:2,get 2(){return"segment is loaded"},ERROR:3,get 3(){return"load get error"}},W=_.a.get("M3U8Parser.js",{level:2}),$={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",streamInf:"STREAM-INF",isComment:function(t){return t&&"#"===t[0]&&!t.startsWith($.tagPrefix)},isBlank:function(t){return""===t},canStrip:function(t){return $.isBlank(t)||$.isComment(t)}},V=0,Y=1,z={file:void 0,name:void 0,start:0,end:0,discontinuity:void 0,duration:void 0},X=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),v()(this,"source",""),v()(this,"segments",[]),v()(this,"_currentSegment",null),v()(this,"discontinuous",null),v()(this,"tags",{VERSION:void 0,TARGETDURATION:void 0}),v()(this,"_state",null),this.source=e,this.options=n,this.parse(this.source)}return a()(t,[{key:"readSegment",value:function(t){var e=$.segmentParse.exec(t);if(null!==e){var n=parseFloat(e[1],10),r=e[3];n%1!=0&&this.tags.VERSION>=3&&W.info("readsegment","Version must be 3 or higher to support floating.","duration:",n),n<this.tags.TARGETDURATION&&W.info("readsegment","Segment duration must be less than the TARGETDURATION","duration:",n),n*=1e3,this._currentSegment=Object.assign({},z,{duration:n,name:r,discontinuity:this.discontinuous});var i=this.segments[this.segments.length-1]||{start:0,end:0};this._currentSegment.start=i.end,this._currentSegment.end=i.end+n,this.discontinuous=!1,this._state=Y}else W.warn("readsegment","read segment failed","line:",t)}},{key:"readTag",value:function(t){var e=$.tagParse.exec(t);if(null!==e)return{name:e[1],value:e[3]}}},{key:"readLine",value:function(t){if(t.startsWith($.segmentPrefix))return this.readSegment(t);var e=this.readTag(t);if(e)switch(e.name){case $.version:this.tags.VERSION=parseFloat(e.value,10);break;case $.mediaSequence:this.tags.MEDIA_SEQUENCE=parseFloat(e.value,10);break;case $.allowCache:this.tags.ALLOW_CACHE=!!/\s*(YES|yes)\s*/.test(e.value);break;case $.discontinuity:this.tags.DISCONTINUITY=!0,this.discontinuous=!0;break;case $.targetDuration:this.tags.TARGETDURATION=parseFloat(e.value,10);break;case $.combined:this.tags.COMBINED=e.value;break;case $.streamInf:this.tags.STREAM_INF=e.value;break;case $.endList:this.tags.ENDLIST="EOF";break;default:W.warn("readLine","unknow line","line:",t)}}},{key:"addFile",value:function(t){if("#"!==t[0]){this._currentSegment.file=t;var e=this.parseSDParam(t);if(e>=0){this._currentSegment.start=e,this._currentSegment.end=e+this._currentSegment.duration;var n=this.segments[this.segments.length-1]||{sd:0,start:0,end:0};n.duration=e-n.start,n.end=e}this._currentSegment.name||(this._currentSegment.name=t.substr(Math.max(0,t.lastIndexOf("/")),t.lastIndexOf("."))),this.segments.push(this._currentSegment),this._state=V}else{var r=this.readTag(t);switch(r.name){case"PROGRAM-DATE-TIME":var i=new Date(r.value);this._currentSegment.time=i;break;default:W.warn("addFile","Invalid tag.","tag.name:",r.name)}}}},{key:"parseSDParam",value:function(t){var e=-1;try{var n=new URL(t).searchParams.get("sd");n&&(e=parseInt(n,10))}catch(t){}return e}},{key:"parse",value:function(t){var e=this;if("string"==typeof(t=t||this.source)){this._state=V,this.discontinuous=!1;var n=t.split($.lineDelimiter);if(n[0]==$.extensionHeader)return n.forEach((function(t){if(!$.canStrip(t))switch(e._state){case V:e.readLine(t);break;case Y:e.addFile(t);break;default:Object(M.a)("parsing m3u8 get an error, it is unknow state.")}})),this;W.error("parse","it is not a valid  m3u8 header","header:",n[0])}else Object(M.a)("m3u8 file is not text.",t)}},{key:"version",get:function(){return this.tags.VERSION}},{key:"duration",get:function(){return this.segments.length?this.segments.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n="number"==typeof t?t:t.duration;return n+e.duration})):0}},{key:"targetDuration",get:function(){return this.tags.TARGETDURATION}},{key:"mediaSequence",get:function(){return this.tags.MEDIA_SEQUENCE}},{key:"allowCache",get:function(){return this.tags.ALLOW_CACHE}},{key:"length",get:function(){return this.segments.length}}]),t}(),G=n(45),q=n.n(G);function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Object";return function(e){var n="[object "+t+"]";return Object.prototype.toString.call(e)==n}}var Q=function(){function t(){i()(this,t)}return a()(t,null,[{key:"importScripts",value:function(t,e,n){var r="ready"+Date.now();t instanceof Array?q()(t,r):q()([t],r),q.a.ready(r,{success:e,error:n})}},{key:"blobData",value:function(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}},{key:"escapeHTML",value:function(e){if(t.isString(e))return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"getInnerWidthHeight",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"Fullscreen",value:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&(t.webkitRequestFullScreen(),setTimeout((function(){console.error("fullscreen success"),document.dispatchEvent(new Event("fullscreenchange"))}),0))}},{key:"exitFullscreen",value:function(){var t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&(t.webkitExitFullscreen(),setTimeout((function(){console.error("exitfullscreen success"),document.dispatchEvent(new Event("fullscreenchange"))}),0))}},{key:"buildFilePath",value:function(t,e){return t.map((function(t){return e+t}))}},{key:"insertSort",value:function(t,e,n){var r,i,o=t.length;if(0!==o)if(n){var a=n(e);r=a.key,i=a.value;for(var s=0;s<o;s++)if(i<t[s][r]){for(var u=o;u>s;)t[u]=t[u-1],u--;return void(t[s]=e)}t.push(e)}else{i=e;for(var c=0;c<o;c++)if(i<t[c]){for(var l=o;l>c;)t[l]=t[l-1],l--;return void(t[c]=i)}t.push(i)}else t.push(e)}},{key:"isSafari",value:function(){var t=navigator.userAgent;return/Safari/.test(t)&&!/Chrome/.test(t)}},{key:"msec2sec",value:function(t){var e=(t/1e3).toFixed(3);return parseFloat(e,10)}}]),t}();v()(Q,"isObject",(function(){return K("Object")})),v()(Q,"isString",(function(){return K("String")})),v()(Q,"isFunction",(function(){return K("Function")}));var J=n(34),Z=n.n(J);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var et=function(t){l()(n,t);var e=tt(n);function n(){return i()(this,n),e.call(this)}return a()(n,[{key:"add",value:function(t){this.push(Object.freeze(t))}},{key:"addAll",value:function(t){var e=this;t.forEach((function(t){e.add(t)}))}},{key:"get",value:function(t){return this[t]}},{key:"getLast",value:function(){return this[this.length-1]}},{key:"getBy",value:function(t){var e=this;if("function"==typeof t){var n=new this.constructor;return this.every((function(r,i){return!0===t.call(e,r,i,e)&&n.add(r),!0})),n}}},{key:"indexOfByTime",value:function(t,e){e||(e=function(e){return t>=e.start&&t<e.end});for(var n=this.length-1,r=0;r<=n;){var i=Math.floor((n+r)/2),o=this[i];if(e(o))return i;o.start>t?n=i-1:r=i+1}return-1}},{key:"getByTime",value:function(t){var e=this.indexOfByTime(t);if(e>=0)return this[e]}},{key:"getByKey",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.getBy((function(t){var n=!1;return e.every((function(e){return!Object.prototype.hasOwnProperty.call(t,e)||(n=!0,!1)})),n}))}},{key:"getByValue",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.getBy((function(t){var n=!1;return t.each((function(t,r){if(e.includes(r))return n=!0,!1})),n}))}},{key:"getByKeyValue",value:function(t,e){return this.getBy((function(n){return n[t]===e}))}},{key:"getValues",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.map((function(t){return e.length?t.get(t,e):t.getValues(t)}))}},{key:"indexOfBy",value:function(t){var e=0,n=this.length;for(t=t||function(){return!1};e<n;){if(!0===t.call(this,this[e],e,this))return e;e++}return-1}},{key:"indexOfByKey",value:function(t,e){return this.indexOfBy((function(n){return n[t]===e}))}},{key:"indexOfByKeyValue",value:function(t,e){return this.indexOfByKey(t,e)}},{key:"each",value:function(t){if("function"==typeof t)return this.forEach(t),this}},{key:"remove",value:function(t,e){return this.length<=0||(t=t<0?0:t,e=e||t+1,this.splice(t,e-t)),this}},{key:"removeItem",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.removeBy((function(t){return e.includes(t)}))}},{key:"removeBy",value:function(t){for(var e=0,n=this.length;e<n;e++)!0===t.call(this,this[e],e,this)&&(this.splice(e,1),n--,e--);return this}},{key:"removeByKeyValue",value:function(t,e){return this.removeBy((function(n){return n[t]===e}))}},{key:"toJSON",value:function(){var t=Array.from(this);return t.forEach((function(e,n){t[n]=e&&"function"==typeof e.toJSON?e.toJSON():e})),t}},{key:"toArray",value:function(){return Array.from(this)}},{key:"size",get:function(){return this.length}}]),n}(Z()(Array)),nt=function(){function t(){i()(this,t)}return a()(t,[{key:"pair",value:function(){return Object.entries(this)}},{key:"keys",value:function(){return Object.keys(this)}},{key:"set",value:function(t,e){return this[t]=e,this}},{key:"get",value:function(t){return this[t]}},{key:"add",value:function(t,e){return Object.prototype.hasOwnProperty.call(this,t)||this.set(t,e),this}},{key:"addAll",value:function(t){for(var e in t)this.add(e,t[e]);return this}},{key:"toJSON",value:function(){var t={};for(var e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t[e]=this[e]);return t}}]),t}();function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var it=function(t){l()(n,t);var e=rt(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"no",0),v()(u()(r),"name",null),v()(u()(r),"duration",0),v()(u()(r),"file",null),v()(u()(r),"start",0),v()(u()(r),"end",0),Object.assign(u()(r),t),r}return n}(nt);function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var at=function(t){l()(n,t);var e=ot(n);function n(t){return i()(this,n),e.call(this,t)}return a()(n,[{key:"add",value:function(t){t instanceof it||(t=new it(t)),t.no=this.length+1,Q.isObject(t)&&this.push(t)}}]),n}(et),st={ProcessorResetEnd:"DataProcessorController.processorResetEnd",DataProcessorReady:"DataProcessorController.dataProcessorReady",DecodeStartDecode:"DecodeController.startDecode",DecodeFlush:"DecodeController.flush",DecodeDecoded:"DecodeController.decoded",DecodeApppendEnd:"DecodeController.appendEnd",DecodeFlushEnd:"DecodeController.flushEnd",DecodeReady:"DecodeController.ready",DemuxResetEnd:"DemuxController.resetEnd",DemuxStartDemux:"DemuxController.startDemux",DemuxLast:"DemuxController.last",DemuxVideo:"DemuxController.video",DemuxAAC:"DemuxController.AAC",DemuxReady:"DemuxController.ready",ImagePlayerRenderEnd:"ImagePlayer.renderEnd",ImagePlayerWait:"ImagePlayer.wait",ImagePlayerReady:"ImagePlayer.ready",ImagePlayerEnd:"ImagePlayer.end",ImagePlayerBuffeUpdate:"ImagePlayer.bufferUpdate",ControlBarPlay:"ControlBar.onPlay",ControlBarPause:"ControlBar.onPause",ControlBarPauseLoading:"ControlBar.onPauseLoading",LoadDataReadBufferByNo:"LoadData.readBufferByNo",LoadDataReadBuffer:"LoadData.readBuffer",LoadDataRead:"LoadData.onRead",LoadDataSeek:"LoadData.onSeek",LoadDataFirstLoaded:"LoadData.onFirstLoaded",LoaderPlayListStart:"Loader.playlistStart",LoaderLoading:"Loader.onLoading",LoaderError:"Loader.onError",LoaderLoaded:"Loader.onLoaded",LoaderUpdateSpeed:"Loader.updateSpeed",LoaderLoadFile:"Loader.loadFile",LoaderPlayListLoaded:"Loader.playlistLoaded",AudioPlayerReady:"AudioPlayer.MSEReady",AudioPlayerDataReady:"AudioPlayer.dataReady",AudioPlayerWait:"AudioPlayer.wait",AudioPlayerEnd:"AudioPlayer.end",AudioPlayerPlaySuccess:"AudioPlayer.playSuccess",AudioPlayerPlayFail:"AudioPlayer.playFail",PlayerMaxPTS:"DemuxController.maxpts",PlayerSeekEnd:"Player.seekend",PlayerSpeedTo:"Player.speedTo",PlayerChangeRate:"Player.changeRate",PlayerChangeSrc:"Player.changeSrc",PlayerPlaying:"Player.playing",PlayerTimeUpdate:"Player.timeUpdate",PlayerbufferUpdate:"Player.bufferupdate",PlayerResetReady:"Player.resetReady",PlayerWait:"Player.wait",PlayerLoadNext:"Player.loadNext",PlayerOnPlay:"Player.onPlay",PlayerOnPause:"Player.onPause",PlayerOnSeek:"Player.onSeek",PlayerOnVolume:"Player.onVolume",PlayerReady:"Player.ready",PlayerPlay:"Player.play",PlayerReset:"Player.reset",PlayerLoadedMetaData:"Player.loadedMetaData",PlayerEnd:"Player.end",PlayerPause:"Player.pause",PlayerSeeking:"Player.seeking",PlayerAlert:"Player.alert",PlayerThrowError:"Player.throwError",StreamDataReady:"StreamController.dataReady"},ut=n(46),ct=n.n(ut),lt=n(47),ft=n.n(lt),ht=n(75),dt=n.n(ht),pt=n(76),yt=n.n(pt),vt=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return ct()(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(ft.a),gt=function(t){for(var e,n=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},i=n.length;i--;)""!==n[i]&&((e=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),r[e[0]]=e[1]);return r},mt=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}ct()(e,t);var n=e.prototype;return n.push=function(t){var e,n,r=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,n){var r=n(t);return r===t?e:e.concat([r])}),[t]).forEach((function(t){for(var i=0;i<r.customParsers.length;i++)if(r.customParsers[i].call(r,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void r.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void r.trigger("data",n);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},e[1]&&(n.duration=parseInt(e[1],10)),void r.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void r.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void r.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void r.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void r.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),void r.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void r.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},e[1]){var o=gt(e[1]);if(o.URI&&(n.uri=o.URI),o.BYTERANGE){var a=o.BYTERANGE.split("@"),s=a[0],u=a[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),u&&(n.byterange.offset=parseInt(u,10))}}r.trigger("data",n)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},e[1]){if(n.attributes=gt(e[1]),n.attributes.RESOLUTION){var c=n.attributes.RESOLUTION.split("x"),l={};c[0]&&(l.width=parseInt(c[0],10)),c[1]&&(l.height=parseInt(c[1],10)),n.attributes.RESOLUTION=l}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}r.trigger("data",n)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=gt(e[1])),void r.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))r.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void r.trigger("data",n);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},e[1]&&(n.attributes=gt(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void r.trigger("data",n);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return n={type:"tag",tagType:"start"},e[1]&&(n.attributes=gt(e[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void r.trigger("data",n);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out-cont"},e[1]?n.data=e[1]:n.data="",void r.trigger("data",n);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out"},e[1]?n.data=e[1]:n.data="",void r.trigger("data",n);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-in"},e[1]?n.data=e[1]:n.data="",void r.trigger("data",n);r.trigger("data",{type:"tag",data:t.slice(4)})}}}else r.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},n.addParser=function(t){var e=this,n=t.expression,r=t.customType,i=t.dataParser,o=t.segment;"function"!=typeof i&&(i=function(t){return t}),this.customParsers.push((function(t){if(n.exec(t))return e.trigger("data",{type:"custom",data:i(t),customType:r,segment:o}),!0}))},n.addTagMapper=function(t){var e=t.expression,n=t.map;this.tagMappers.push((function(t){return e.test(t)?n(t):t}))},e}(ft.a),bt=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new vt,e.parseStream=new mt,e.lineStream.pipe(e.parseStream);var n,r,i=u()(e),o=[],a={},s=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var f=0;return e.parseStream.on("data",(function(t){var e,u;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(a.byterange=e,e.length=t.length,"offset"in t||(t.offset=f)),"offset"in t&&(a.byterange=e,e.offset=t.offset),f=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(a.duration=t.duration),0===t.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:yt()(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(r.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,l=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){n={},t.uri&&(n.uri=t.uri),t.byterange&&(n.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes?(a.attributes||(a.attributes={}),dt()(a.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var n=this.manifest.mediaGroups[t.attributes.TYPE];n[t.attributes["GROUP-ID"]]=n[t.attributes["GROUP-ID"]]||{},e=n[t.attributes["GROUP-ID"]],(u={default:/yes/i.test(t.attributes.DEFAULT)}).default?u.autoselect=!0:u.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(u.language=t.attributes.LANGUAGE),t.attributes.URI&&(u.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(u.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(u.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(u.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=u}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),a.dateTimeString=t.dateTimeString,a.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=t.data},"cue-out-cont":function(){a.cueOutCont=t.data},"cue-in":function(){a.cueIn=t.data}}[t.tagType]||s).call(i)},uri:function(){a.uri=t.uri,o.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),r&&(a.key=r),a.timeline=l,n&&(a.map=n),a={}},comment:function(){},custom:function(){t.segment?(a.custom=a.custom||{},a.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(i)})),e}ct()(e,t);var n=e.prototype;return n.push=function(t){this.lineStream.push(t)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(t){this.parseStream.addParser(t)},n.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(ft.a);function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var _t={};function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){v()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Et={HLS:function(t){l()(n,t);var e=wt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"state",j.IDLE),v()(u()(r),"maxBufferDuration",U.b.maxDuration),v()(u()(r),"maxBufferSize",U.b.maxSize),v()(u()(r),"baseUrl",""),v()(u()(r),"options",null),v()(u()(r),"httpWorker",null),v()(u()(r),"sourceData",null),v()(u()(r),"segmentPool",[]),v()(u()(r),"currentNo",null),v()(u()(r),"maxRetryCount",U.b.maxRetryCount),r.options=t,r.loaderController=r.options.loaderController,r.dataController=r.loaderController.dataController,r.httpWorker=t.httpWorker,r.setSegmentPool(new at),r}return a()(n,[{key:"loadPlaylist",value:function(t){var e=this;this.options.player.options.beforeLoad?this.options.player.options.beforeLoad(this.sourceURL,this.options.sourceURL).then((function(t){e.options.sourceURL=t,e.httpWorker.postMessage({type:"invoke",fileType:"m3u8",method:"get",name:"playlist",url:t})})):this.httpWorker.postMessage({type:"invoke",fileType:"m3u8",method:"get",name:"playlist",url:this.sourceURL}),this.httpWorker.onmessage=function(n){var r=n.data,i=n.data.data;if(i)"playlist"==r.name&&e.parsePlaylist(i,t);else{var o="Get the ".concat(r.fileType," file error. URL: ").concat(r.url);e.events.emit(st.PlayerAlert,o),e.events.emit(st.LoaderError,o,r);var a=[e.state,"request playlist error.","data:",r,o];e.events.emit(st.PlayerThrowError,a)}}}},{key:"parsePlaylist",value:function(t,e){var n,r=new bt;r.push(t),r.end();var i=r.manifest,o=null===(n=i.playlists)||void 0===n?void 0:n.length;if(o){var a=i.playlists[o-1];return this.sourceURL=a.uri,void this.loadPlaylist(e)}var s=new X(t);if(s.segments&&s.segments.length){s.segments.forEach((function(t){t.start=Q.msec2sec(t.start),t.end=Q.msec2sec(t.end),t.duration=Q.msec2sec(t.duration)})),this.setSourceData(Object.freeze(s)),this.segmentPool.addAll(s.segments),e.call(this,s)}else{this.events.emit(st.LoaderError,s),this.events.emit(st.PlayerAlert,"Parse playlist file error.");var u=[this.state,"Parse playlist error.","data:",s];this.events.emit(st.PlayerThrowError,u)}}},{key:"setSourceData",value:function(t){this.sourceData=t}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setSegmentPool",value:function(t){this.segmentPool=t}},{key:"getSegmentPool",value:function(){return this.segmentPool}},{key:"isNotFree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t="["+t+"]loader is not free. please wait.",this.state!==j.IDLE&&this.state!==j.DONE&&(this.logger.warn("isNotFree","check status for loader","notice:",t),!0)}},{key:"getBaseUrl",value:function(t){var e=this.options.sourceURL;if(!(t.indexOf("//")>-1)){var n=e.lastIndexOf("/");return e.substr(0,n+1)}return""}},{key:"checkLoadCondition",value:function(t){return!(t.no>this.segmentPool.length)&&(!(this.dataController.getLoadDataBufferPool().bufferDuration>this.maxBufferDuration)||(this.logger.info("checkLoadCondition","stop load next segment.","bufferDuration:",this.dataController.getLoadDataBufferPool().bufferDuration,"maxBufferDuration:",this.maxBufferDuration),!1))}},{key:"loadFile",value:function(t,e,n){var r=this;if(t instanceof it)if(this.isNotFree()&&"seek"!==e&&"start"!==e)this.logger.warn("loadFile","is loading","segment:",t,"type:",e);else{if(!this.checkLoadCondition(t))return this.state=j.IDLE,void this.logger.warn("loadFile","checkLoadCondition failed","segment:",t,"type:",e);this.currentNo=t.no;var i=this.getBaseUrl(t.file)+t.file,o=1,a=function(i){var o=_t[i];return!o||(r.state=j.IDLE,r.events.emit(st.LoaderLoaded,o,t,e,n),!1)},s=function(){if(r.options.player.options.beforeLoad)r.options.player.options.beforeLoad(t.file,r.options.sourceURL).then((function(e){a(e)&&r.httpWorker.postMessage({type:"invoke",fileType:"ts",method:"get",name:t.no,url:e})}));else{var e=function(t,e){return"function"==typeof r.options.processURL?r.options.processURL(t,e):t}(i,t);a(e)&&r.httpWorker.postMessage({type:"invoke",fileType:"ts",method:"get",name:t.no,url:e})}};this.state=j.LOADING,this.events.emit(st.LoaderLoading,t,e,n),this.httpWorker.onmessage=function(i){r.state=j.DONE;var a=i.data;if(r.logger.info("loadfile","httpWorker","onmessage get data"),a&&"error"!==a.type)"notice"===a.type?"speed"===a.noticeType&&r.events.emit(st.LoaderUpdateSpeed,a.data):"ts"===a.fileType&&a.name===t.no?(r.logger.info("loadFile","read success","data no:",a.name),r.state=j.IDLE,r.events.emit(st.LoaderLoaded,a,t,e,n),_t[a.url]=a):r.logger.warn("loadFile","is not ts file or the segment'no is not equal.","fileType:",a.fileType,"data:",a);else if(r.state=j.ERROR,o<=r.maxRetryCount)r.logger.warn("loadFile","retry to load","count:",o,"segment:",t),s(),o+=1;else{r.events.emit(st.LoaderError,t,e,n);r.events.emit(st.PlayerAlert,"Load file error, please concat administrator.");var u=[r.state,"Load File error.","load count:",o,"segment:",t];r.events.emit(st.PlayerThrowError,u)}},s()}}},{key:"destroy",value:function(){this.httpWorker&&this.httpWorker.terminate()}}]),n}(H)},St=function(t){l()(n,t);var e=Pt(n);function n(t,r){var o;return i()(this,n),o=e.call(this),v()(u()(o),"state",null),v()(u()(o),"exeLoader",null),v()(u()(o),"loadData",null),v()(u()(o),"type","HLS"),v()(u()(o),"options",null),v()(u()(o),"dataController",null),o.type=t||o.type,o.player=r.player,o.options=r.player.options,o.dataController=o.player.dataController,o.init(o.type,o.options),o}return a()(n,[{key:"init",value:function(t,e){this.bindEvent(),this.setExeLoader(new Et[t](xt(xt({},e),{},{player:this.player,loaderController:this}))),this.setSourceURL(e.sourceURL),this.player.loadData?this.setLoadData(this.player.loadData):this.setLoadData(this.dataController.getDataInstance("load",e)),this.exeLoader.setLoadData(this.loadData)}},{key:"run",value:function(){this.state=j.LOAD_PLAYLIST,this.events.emit(st.LoaderPlayListStart,this),this.logger.info("run",j[this.state],"url:",this.options.sourceURL),this.loadPlaylist()}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderLoadFile,(function(e,n,r){t.exeLoader.loadFile(e,n,r)}))}},{key:"loadPlaylist",value:function(t){var e=this;this.exeLoader.loadPlaylist((function(n){n?(e.dataController.setLoadDataSourceData(e.exeLoader.getSourceData()),e.dataController.setLoadDataSegmentPool(e.exeLoader.getSegmentPool()),e.state=j.LOADED_PLAYLIST,e.events.emit(st.LoaderPlayListLoaded,e),"function"==typeof t&&t.call(e,n)):e.logger.error("run","start load m3u8","data:",n)}))}},{key:"switchPlaylist",value:function(t,e){this.setSourceURL(t),this.dataController.clearLoadData(),this.state=j.LOAD_PLAYLIST,this.events.emit(st.LoaderPlayListStart,this),this.logger.info("switchPlaylist",j[this.state],"url:",t),this.loadPlaylist(e)}},{key:"setExeLoader",value:function(t){this.exeLoader=t}},{key:"getExeLoader",value:function(){return this.exeLoader}},{key:"setSourceURL",value:function(t){this.exeLoader.setSourceURL(t)}},{key:"getSourceURL",value:function(){return this.exeLoader.getSourceURL()}},{key:"setLoadData",value:function(t){this.loadData=t}},{key:"getLoadData",value:function(){return this.loadData}},{key:"getSourceData",value:function(){return this.exeLoader.getSourceData()}},{key:"destroy",value:function(){this.exeLoader.destroy()}}]),n}(C);function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Rt=function(t){l()(n,t);var e=Tt(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"no",0),v()(u()(r),"start",0),v()(u()(r),"end",0),v()(u()(r),"blob",null),v()(u()(r),"arrayBuffer",null),v()(u()(r),"duration",0),Object.assign(u()(r),t),r}return a()(n,[{key:"size",get:function(){return this.blob.size}}]),n}(nt);function Bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Lt=function(t){l()(n,t);var e=Bt(n);function n(t){return i()(this,n),e.call(this,t)}return a()(n,[{key:"add",value:function(t){t instanceof Rt||(t=new Rt(t));var e=this.length;if(0!==e){for(;e--;)if(t.no<=this[e].no)return void this.splice(e,1,t);return this.push(t),this}this.push(t)}},{key:"getBufferSize",value:function(){return this.length<=0?0:this.reduce((function(t,e){return isNaN(t)&&(t=t.blob.size),t+e.blob.size}))}},{key:"getBufferDuration",value:function(){return this.length<=0?0:this.reduce((function(t,e){return isNaN(t)&&(t=t.end-t.start),t+(e.end-e.start)}))}},{key:"bufferSize",get:function(){return this.getBufferSize()}},{key:"bufferDuration",get:function(){return this.getBufferDuration()}}]),n}(et);function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Dt=function(t){l()(n,t);var e=At(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this),v()(u()(t),"bufferPool",[]),v()(u()(t),"sourceData",{}),v()(u()(t),"options",{}),v()(u()(t),"segmentPool",[]),v()(u()(t),"readBufferNo",null),v()(u()(t),"startLoadTime",null),v()(u()(t),"currentSeekTime",null),t.options=r,t.init(),t}return a()(n,[{key:"init",value:function(){var t=this;this.setBufferPool(new Lt),this.events.on(st.LoadDataReadBufferByNo,(function(e,n){t.readBufferByNo(e,n)})),this.events.on(st.LoadDataReadBuffer,(function(e,n){t.readBuffer(e,n)})),this.events.on(st.LoaderLoaded,(function(e,n,r,i){var o=t.createBuffer({arrayBuffer:e.arrayBuffer},n);if(t.segmentLoaded(n,o),"seek"===r&&i===t.currentSeekTime)return t.events.emit(st.LoadDataSeek,o,i),void t.removeBufferByNo(o.no);i===t.startLoadTime&&t.events.emit(st.LoadDataFirstLoaded,o,i)}))}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"startLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.logger.info("startLoad","begin to load ts data","time:",t),isNaN(t)?this.logger.error("seekTime","seek","time:",t):(this.startLoadTime=t,this.loadSegmentByTime(t,"start"))}},{key:"readBuffer",value:function(t,e){var n=this.getSegmentByTime(t);n&&this.readBufferByNo(n.no,e)}},{key:"segmentLoaded",value:function(t,e){e&&this.addBufferPool(e),t.no===this.options.player.currentIndex&&this.readBufferByNo(t.no),t.no<this.segmentPool.getLast().no&&this.loadSegmentByNo(t.no+1)}},{key:"seekTime",value:function(t){if(isNaN(t))this.logger.error("seekTime","seek","time:",t);else{var e;this.currentSeekTime=t;var n=this.bufferPool.indexOfByTime(t);n>-1?(e=this.bufferPool[n],this.events.emit(st.LoadDataSeek,e,t)):(this.removeBufferPool(this.bufferPool.length),this.loadSegmentByTime(t,"seek"))}}},{key:"loadSegmentByTime",value:function(t,e){if(!isNaN(t)){var n=this.segmentPool.indexOfByTime(t);if(n>=0){var r=this.segmentPool[n];this.events.emit(st.LoaderLoadFile,r,e,t)}else this.logger.error("loadSegmentByTime","time over","time:",t,"type:",e)}}},{key:"createBuffer",value:function(t,e){if(t){var n={start:e.start,end:e.end,no:e.no,duration:e.end-e.start,arrayBuffer:t.arrayBuffer};return new Rt(n)}}},{key:"isValidSegmentNo",value:function(t){return!isNaN(t)&&t>0&&t<=this.segmentPool.length}},{key:"loadSegmentByNo",value:function(t){var e=t-1,n=this.segmentPool.get(e);n&&this.events.emit(st.LoaderLoadFile,n,"play")}},{key:"readBufferByNo",value:function(t,e){this.isValidSegmentNo(t)?(this.readBufferNo=t,e=e||function(t){this.events.emit(st.LoadDataRead,t)},this.getBlobByNo(t,e)):this.logger.error("readBufferByNo","check buffer no","is not valid no",t)}},{key:"getSegmentByTime",value:function(t){var e=this.segmentPool.indexOfByTime(t);return this.segmentPool[e]}},{key:"getBlobByNo",value:function(t,e){if(isNaN(t))this.logger.error("getBlobByNo","isNaN","no:",t);else{var n;if(!this.isBufferReading)return this.isBufferReading=!0,n=this.bufferPool.getByKeyValue("no",t)[0],"function"==typeof e&&(e.call(this,n),n&&this.removeBufferByNo(n.no)),this.isBufferReading=!1,n;this.logger.warn("getBlobByNo","isBufferReading","no:",t)}}},{key:"addBufferPool",value:function(t){if(this.bufferPool.length){if(this.bufferPool[0].no===t.no+1)return this.bufferPool.unshift(t),!0;var e=this.bufferPool.getLast();if(t.no-e.no==1)return this.bufferPool.push(t),!0;if(this.bufferPool.indexOfByKey("no",t.no))return!0;this.bufferPool.splice(0,this.bufferPool.length)}this.bufferPool.push(t)}},{key:"removeBufferPool",value:function(t){this.bufferPool.splice(0,t+1)}},{key:"removeBufferByNo",value:function(t){var e=this.bufferPool.indexOfByKey("no",t);if(!(e<=-1))return this.removeBufferPool(e),this.bufferPool.length?this.bufferPool.getLast().no<this.segmentPool.getLast().no&&this.loadSegmentByNo(this.bufferPool.getLast().no+1):t<this.segmentPool.getLast().no&&this.loadSegmentByNo(t+1),!0}},{key:"clear",value:function(){this.sourceData={},this.readBufferNo=null,this.currentSeekTime=null,this.bufferPool.length=0,this.segmentPool.length=0}},{key:"getSegmentByNo",value:function(t){return this.segmentPool.get(t-1)}},{key:"getSegment",value:function(t){return this.segmentPool.getByTime(t)}},{key:"setSourceData",value:function(t){this.sourceData=t}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setBufferPool",value:function(t){this.bufferPool=t}},{key:"getBufferPool",value:function(){return this.bufferPool}},{key:"setSegmentPool",value:function(t){this.segmentPool=t}},{key:"getSegmentPool",value:function(){return this.segmentPool}}]),n}(N);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ot=function(t){l()(n,t);var e=Ct(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"loadData",null),r.options=t,r}return a()(n,[{key:"setLoadData",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.loadData=D()(Dt,e)}},{key:"getLoadData",value:function(){return this.loadData}},{key:"getLoadDataBufferPool",value:function(){return this.loadData.bufferPool}},{key:"setLoadDataSourceData",value:function(t){this.loadData.setSourceData(t)}},{key:"setLoadDataSegmentPool",value:function(t){this.loadData.setSegmentPool(t)}},{key:"startLoad",value:function(t){t=Math.max(t,0),this.startLoadData(t)}},{key:"startLoadData",value:function(t){this.loadData.startLoad(t)}},{key:"clearLoadData",value:function(){this.loadData.clear()}},{key:"getDataInstance",value:function(t){if(t)switch(t){case"load":if(!this.loadData){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.setLoadData.apply(this,n)}return this.loadData;default:return null}}}]),n}(C);function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Mt,Nt,Ut=function(t){l()(n,t);var e=It(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"checkHanlder",null),v()(u()(r),"resetStatus",{processor:!1,audioPlayer:!1}),r.player=t.player,r.player?(r.audioPlayer=t.audioPlayer,r.imagePlayer=t.imagePlayer,r.loadData=t.loadData,r.bindEvent(),r):h()(r)}return a()(n,[{key:"bindEvent",value:function(){var t=this;this.events.on(st.ProcessorResetEnd,(function(){t.checkResetReady("processor")})),this.events.on(st.AudioPlayerReady,(function(){t.checkResetReady("audioPlayer")})),this.events.on(st.PlayerResetReady,(function(){t.onResetReady()})),this.events.on(st.LoadDataSeek,(function(e,n){t.onSeek(e,n)})),this.events.on(st.ImagePlayerRenderEnd,(function(e,n){t.onRenderEnd(e,n)})),this.events.on(st.ImagePlayerWait,(function(){t.audioPlayer.pause()}))}},{key:"play",value:function(t){this.logger.warn("play","play start"),this.sync(t)}},{key:"sync",value:function(t){var e=this.player,n=this.audioPlayer,r=this.imagePlayer,i=n.offset,o=r.offset,a=Math.min(i,o),s=Math.max(i,o);n.need||(a=o,s=o);var u=e.playbackRate;if(e.seeking&&(e.seeking=!1),!e.reseting&&"pause"!==e.status&&"waiting"!==n.status&&"wait"!==r.status)if("end"!==e.status){if(this.setCurrentTime(t),!(t<a))return n.need&&t>=i&&t<=o?(this.events.once(st.AudioPlayerPlaySuccess,(function(){r.render(o)})),n.playbackRate=u,void n.play()):void(t>=o&&(!n.need||t<=i)?r.render(t):t>s&&(this.audioPlayer.playbackRate=u,this.audioPlayer.play(),r.render(t)));this.sync(a)}else n.paused||n.pause()}},{key:"setCurrentTime",value:function(t){this.player.currentTime=t,this.events.emit(st.PlayerTimeUpdate,t)}},{key:"pause",value:function(){this.audioPlayer.pause(),this.clearDrawHanlder()}},{key:"seek",value:function(t){var e=this,n=this.imagePlayer.isBuffered(t),r=this.audioPlayer.isBuffered(t);this.player.pause(),n&&r?(this.logger.warn("seek","seek in buffer, time: ".concat(t,", buffer: ").concat(this.player.buffer()[0],", ").concat(this.player.buffer()[1])),this.audioPlayer.onSeekedHandler=function(){e.imagePlayer.render(t,!1)},this.audioPlayer.currentTime=t):this.reset()}},{key:"reset",value:function(t){this.logger.info("reset","reset start"),this.player.reseting=!0,this.events.emit(st.PlayerReset,t),this.resetStatus={processor:!1,audioPlayer:!1},this.player.processController.reset(),this.player.streamController.reset(),this.player.audioPlayer.reset(t),this.player.imagePlayer.reset(),this.player.currentIndex=null}},{key:"checkResetReady",value:function(t){var e=this.resetStatus;if(t&&"string"==typeof t){e[t]=!0;for(var n=Object.keys(e),r=0;r<n.length;r++)if(!e[n[r]])return!1;this.logger.warn("checkResetReady","reset ready"),this.events.emit(st.PlayerResetReady)}}},{key:"onResetReady",value:function(){this.player.reseting=!1,this.logger.info("onResetReady","reset Ready"),this.player.changing&&this.events.emit(st.DataProcessorReady),this.player.seeking&&this.player.loadData.seekTime(this.player.currentTime/1e3)}},{key:"onSeek",value:function(t,e){var n=this.player.currentTime;this.logger.info("onseek",n,t,t.no,e),t&&t.no&&Math.abs(n-Math.floor(1e3*e))<2?(this.player.currentIndex=t.no,this.logger.info("seektime:",t.no,e,this.player.currentTime),this.player.seekSegmentNo=t.no,this.player.streamController.startLoad(t.no)):this.logger.warn("seek failue, not found data",n,t,e)}},{key:"clearDrawHanlder",value:function(){clearTimeout(this.drawFrameHanlder),this.drawFrameHanlder=null}},{key:"onRenderEnd",value:function(t,e){this.player.seekTime&&(this.logger.info("onRenderEnd","seektoRenderTime:",Date.now()-this.player.seekTime),this.player.seekTime=null);var n=this.imagePlayer,r=this.audioPlayer,i=this.player.playbackRate,o=r.currentTime,a=n.currentTime,s=r.offset,u=n.fragDuration,c=o-a,l=0;r.need?a<s?this.drawNext(a+u*i,u):(c>0&&c>u?u=(l=a+Math.ceil(c/u+i)*u)-o:(l=a+u*i,u-=c),this.drawNext(l,u)):this.drawNext(t+e,Math.ceil(e/i))}},{key:"drawNext",value:function(t,e){var n=this;this.drawFrameHanlder&&this.clearDrawHanlder(),this.drawFrameHanlder=setTimeout((function(){n.sync(t)}),e)}}]),n}(N);function Ft(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ht(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function Wt(t){if(Mt){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Mt.apply(void 0,[t].concat(n))}}function $t(t){if(Nt){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Nt.apply(void 0,[t].concat(n))}}var Vt=function(){function t(e){i()(this,t),this.payload=e,this.nri=(96&this.payload[0])>>5,this.ntype=31&this.payload[0]}return a()(t,null,[{key:"type",value:function(e){return e.ntype in t.TYPES?t.TYPES[e.ntype]:"UNKNOWN"}},{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var e;return e={},v()(e,t.IDR,"IDR"),v()(e,t.SEI,"SEI"),v()(e,t.SPS,"SPS"),v()(e,t.PPS,"PPS"),v()(e,t.NDR,"NDR"),v()(e,t.AUD,"AUD"),e}}]),a()(t,[{key:"toString",value:function(){return"".concat(t.type(this),": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri>>6}},{key:"type",value:function(){return this.ntype}},{key:"isKeyframe",value:function(){return this.ntype==t.IDR}},{key:"getSize",value:function(){return 4+this.payload.byteLength}},{key:"getData",value:function(){var t=new Uint8Array(this.getSize());return new DataView(t.buffer).setUint32(0,this.getSize()-4),t.set(this.payload,4),t}}]),t}(),Yt=function(){function t(e){i()(this,t),this.data=e,this.index=0,this.bitLength=8*e.byteLength}return a()(t,[{key:"skipBits",value:function(t){if(this.bitsAvailable<t)return!1;this.index+=t}},{key:"readBits",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getBits(t,this.index,e);return n}},{key:"getBits",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.bitsAvailable<t)return 0;var r=e%8,i=this.data[e/8|0]&255>>>r,o=8-r;if(o>=t)return n&&(this.index+=t),i>>o-t;n&&(this.index+=o);var a=t-o;return i<<a|this.getBits(a,e+o,n)}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitLength-this.index;++t)if(0!==this.getBits(1,this.index+t,!1))return this.index+=t,t;return t}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readBits(8*t)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}}]),t}(),zt=function(){function t(e){i()(this,t),this.remuxer=e,this.track=e.mp4track}return a()(t,null,[{key:"extractNALu",value:function(t){for(var e,n,r=0,i=t.byteLength,o=0,a=[];r<i;)switch(e=t[r++],o){case 0:0===e&&(o=1);break;case 1:o=0===e?2:0;break;case 2:case 3:0===e?o=3:1===e&&r<i?(n&&a.push(t.subarray(n,r-o-1)),n=r,o=0):o=0}return n&&a.push(t.subarray(n,i)),a}},{key:"skipScalingList",value:function(t,e){for(var n=8,r=8,i=0;i<e;i++)0!==r&&(r=(n+t.readEG()+256)%256),n=0===r?n:r}},{key:"readSPS",value:function(e){var n,r,i,o,a,s,u=new Yt(e),c=0,l=0,f=0,h=0,d=1;if(u.readUByte(),n=u.readUByte(),u.readBits(5),u.skipBits(3),u.readUByte(),u.skipUEG(),100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n){var p=u.readUEG();if(3===p&&u.skipBits(1),u.skipUEG(),u.skipUEG(),u.skipBits(1),u.readBoolean()){s=3!==p?8:12;for(var y=0;y<s;++y)u.readBoolean()&&(y<6?t.skipScalingList(u,16):t.skipScalingList(u,64))}}u.skipUEG();var v=u.readUEG();if(0===v)u.readUEG();else if(1===v){u.skipBits(1),u.skipEG(),u.skipEG(),r=u.readUEG();for(var g=0;g<r;++g)u.skipEG()}if(u.skipUEG(),u.skipBits(1),i=u.readUEG(),o=u.readUEG(),0===(a=u.readBits(1))&&u.skipBits(1),u.skipBits(1),u.readBoolean()&&(c=u.readUEG(),l=u.readUEG(),f=u.readUEG(),h=u.readUEG()),u.readBoolean()){if(u.readBoolean()){var m;switch(u.readUByte()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[u.readUByte()<<8|u.readUByte(),u.readUByte()<<8|u.readUByte()]}m&&(d=m[0]/m[1])}if(u.readBoolean()&&u.skipBits(1),u.readBoolean()&&(u.skipBits(4),u.readBoolean()&&u.skipBits(24)),u.readBoolean()&&(u.skipUEG(),u.skipUEG()),u.readBoolean())u.readUInt(),u.readUInt(),u.readBoolean()}return{width:Math.ceil((16*(i+1)-2*c-2*l)*d),height:(2-a)*(o+1)*16-(a?2:4)*(f+h)}}}]),a()(t,[{key:"parseSPS",value:function(e){var n=t.readSPS(new Uint8Array(e));this.track.width=n.width,this.track.height=n.height,this.track.sps=[new Uint8Array(e)],this.track.codec="avc1.";for(var r=new DataView(e.buffer,e.byteOffset+1,4),i=0;i<3;++i){var o=r.getUint8(i).toString(16);o.length<2&&(o="0"+o),this.track.codec+=o}}},{key:"parsePPS",value:function(t){this.track.pps=[new Uint8Array(t)]}},{key:"parseNAL",value:function(t){if(!t)return!1;var e=!1;switch(t.type()){case Vt.NDR:case Vt.IDR:e=!0;break;case Vt.PPS:this.track.pps||(this.parsePPS(t.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),e=!0;break;case Vt.SPS:this.track.sps||(this.parseSPS(t.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),e=!0;break;case Vt.AUD:Wt("AUD - ignoing and disable HD mode for live channel"),this.remuxer.isHDAvail&&(this.remuxer.isHDAvail=!1);break;case Vt.SEI:Wt("SEI - ignoing")}return e}}]),t}(),Xt=function(){function t(e){i()(this,t),this.listener={},this.type=""|e}return a()(t,[{key:"on",value:function(t,e){return this.listener[t]||(this.listener[t]=[]),this.listener[t].push(e),!0}},{key:"off",value:function(t,e){if(this.listener[t]){var n=this.listener[t].indexOf(e);return n>-1&&this.listener[t].splice(n,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(t,e){return!!this.listener[t]&&(this.listener[t].map((function(t){t.apply(null,[e])})),!0)}}]),t}(),Gt=Math.pow(2,32)-1,qt=function(){function t(){i()(this,t)}return a()(t,null,[{key:"init",value:function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,u,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))}},{key:"box",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i,o=8,a=n.length,s=a;a--;)o+=n[a].byteLength;for((i=new Uint8Array(o))[0]=o>>24&255,i[1]=o>>16&255,i[2]=o>>8&255,i[3]=255&o,i.set(t,4),a=0,o=8;a<s;++a)i.set(n[a],o),o+=n[a].byteLength;return i}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,n){n*=e;var r=Math.floor(n/(Gt+1)),i=Math.floor(n%(Gt+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))}},{key:"moov",value:function(e,n,r){for(var i=e.length,o=[];i--;)o[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(r,n)].concat(o).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))}},{key:"mvhd",value:function(e,n){n*=e;var r=Math.floor(n/(Gt+1)),i=Math.floor(n%(Gt+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)}},{key:"sdtp",value:function(e){var n,r,i=e.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,o)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var n,r,i,o=[],a=[];for(n=0;n<e.sps.length;n++)i=(r=e.sps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)i=(r=e.pps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),u=e.width,c=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var e=t.config.byteLength,n=new Uint8Array(26+e+3);return n.set([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),n.set(t.config,26),n.set([6,1,2],26+e),n}},{key:"mp4a",value:function(e){var n=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"stsd",value:function(e){return"audio"===e.type?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var n=e.id,r=e.duration*e.timescale,i=e.width,o=e.height,a=Math.floor(r/(Gt+1)),s=Math.floor(r%(Gt+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(e,n){var r=t.sdtp(e),i=e.id,o=Math.floor(n/(Gt+1)),a=Math.floor(n%(Gt+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(e,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,n){var r,i,o,a,s,u,c=e.samples||[],l=c.length,f=12+16*l,h=new Uint8Array(f);for(n+=8+f,h.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<l;r++)o=(i=c[r]).duration,a=i.size,s=i.flags,u=i.cts,h.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return t.box(t.types.trun,h)}},{key:"initSegment",value:function(e,n,r){t.types||t.init();var i,o=t.moov(e,n,r);return(i=new Uint8Array(t.FTYP.byteLength+o.byteLength)).set(t.FTYP),i.set(o,t.FTYP.byteLength),i}}]),t}(),Kt=function(){function t(e){i()(this,t),this.remuxer=e,this.track=e.mp4track,this.aacHeader=null}return a()(t,[{key:"getHeaderLength",value:function(t){return 1&t[1]?7:9}},{key:"getFrameLength",value:function(t){return(3&t[3])<<11|t[4]<<3|(224&t[5])>>>5}},{key:"isAACPattern",value:function(t){return 255===t[0]&&240==(240&t[1])&&0==(6&t[1])}},{key:"extractAAC",value:function(t){var e,n,r=0,i=t.byteLength,o=[];if(!this.isAACPattern(t))return $t("Invalid ADTS audio format"),o;for(e=this.getHeaderLength(t),this.aacHeader||(this.aacHeader=t.subarray(0,e));r<i;)n=this.getFrameLength(t),o.push(t.subarray(e,n)),t=t.slice(n),r+=n;return o}},{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getAACHeaderData",get:function(){return this.aacHeader}},{key:"setAACHeaderData",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.aacHeader=t}}]),a()(t,[{key:"setAACConfig",value:function(){var t,e,n,r=new Uint8Array(2),i=this.getAACHeaderData;i&&(t=1+((192&i[2])>>>6),e=(60&i[2])>>>2,n=(1&i[2])<<2,n|=(192&i[3])>>>6,r[0]=t<<3,r[0]|=(14&e)>>1,r[1]|=(1&e)<<7,r[1]|=n<<3,this.track.codec="mp4a.40."+t,this.track.channelCount=n,this.track.config=r,this.remuxer.readyToDecode=!0)}}]),t}(),Qt=1,Jt=function(){function t(){i()(this,t),this.seq=1}return a()(t,null,[{key:"getTrackID",value:function(){return Qt++}}]),a()(t,[{key:"flush",value:function(){this.seq++,this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!(!this.readyToDecode||!this.samples.length)||null}}]),t}(),Zt=function(t){l()(n,t);var e=jt(n);function n(){var t;return i()(this,n),(t=e.call(this)).readyToDecode=!1,t.nextDts=0,t.dts=0,t.timescale=1e3,t.mp4track={id:Jt.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:t.timescale,duration:t.timescale,samples:[],config:"",codec:""},t.samples=[],t.aac=new Kt(u()(t)),t}return a()(n,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale}},{key:"remux",value:function(t){var e,n,r,i=Ft(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;e=(n=o.units).byteLength,this.samples.push({units:n,size:e,duration:o.duration}),this.mp4track.len+=e,this.readyToDecode||this.aac.setAACConfig()}}catch(t){i.e(t)}finally{i.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var t,e,n=new Uint8Array(this.mp4track.len),r=0,i=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var o=this.samples.shift();(e=o.duration)<=0?(Wt("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(e)),this.mp4track.len-=o.size):(this.nextDts+=e,t={size:o.size,duration:e,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},n.set(o.units,r),r+=o.size,i.push(t))}return i.length?new Uint8Array(n.buffer,0,this.mp4track.len):null}}]),n}(Jt),te=function(t){l()(n,t);var e=jt(n);function n(){var t;return i()(this,n),(t=e.call(this)).readyToDecode=!1,t.nextDts=0,t.dts=0,t.timescale=1e3,t.mp4track={id:Jt.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t.timescale,duration:t.timescale,samples:[]},t.samples=[],t.h264=new zt(u()(t)),t}return a()(n,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps=""}},{key:"remux",value:function(t){var e,n,r,i,o,a,s=Ft(t);try{for(s.s();!(a=s.n()).done;){e=a.value,n=[],i=0,o=!1;var u,c=Ft(e.units);try{for(c.s();!(u=c.n()).done;)r=u.value,this.h264.parseNAL(r)&&(n.push(r),i+=r.getSize(),o||(o=r.isKeyframe()))}catch(t){c.e(t)}finally{c.f()}n.length>0&&this.readyToDecode&&(this.mp4track.len+=i,this.samples.push({units:n,size:i,keyFrame:o,duration:e.duration}))}}catch(t){s.e(t)}finally{s.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var t,e,n=new Uint8Array(this.mp4track.len),r=0,i=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var o=this.samples.shift(),a=o.units;if((e=o.duration)<=0)Wt("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(e)),this.mp4track.len-=o.size;else{this.nextDts+=e,t={size:o.size,duration:e,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:o.keyFrame?0:1,dependsOn:o.keyFrame?2:1}};var s,u=Ft(a);try{for(u.s();!(s=u.n()).done;){var c=s.value;n.set(c.getData(),r),r+=c.getSize()}}catch(t){u.e(t)}finally{u.f()}i.push(t)}}return i.length?new Uint8Array(n.buffer,0,this.mp4track.len):null}}]),n}(Jt);function ee(t,e){var n=new Uint8Array((0|t.byteLength)+(0|e.byteLength));return n.set(t,0),n.set(e,0|t.byteLength),n}var ne=function(t){l()(n,t);var e=jt(n);function n(t){var r;return i()(this,n),(r=e.call(this,"remuxer")).initialized=!1,r.trackTypes=[],r.tracks={},r.mediaDuration=t?1/0:1e3,r}return a()(n,[{key:"addTrack",value:function(t){"video"!==t&&"both"!==t||(this.tracks.video=new te,this.trackTypes.push("video")),"audio"!==t&&"both"!==t||(this.tracks.audio=new Zt,this.trackTypes.push("audio"))}},{key:"reset",value:function(){var t,e=Ft(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.tracks[n].resetTrack()}}catch(t){e.e(t)}finally{e.f()}this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(this.initialized){var t,e=Ft(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=this.tracks[n],i=r.getPayload();if(i&&i.byteLength){var o={type:n,payload:ee(qt.moof(r.seq,r.dts,r.mp4track),qt.mdat(i)),dts:r.dts};this.dispatch("buffer",o);var a=(h=r.dts/1e3,d=void 0,p=void 0,y=void 0,v=void 0,v="",d=Math.floor(h),(p=parseInt(d/3600,10)%24)>0&&(v+=(p<10?"0"+p:p)+":"),v+=((y=parseInt(d/60,10)%60)<10?"0"+y:y)+":"+((d=d<0?0:d%60)<10?"0"+d:d));Wt("put segment (".concat(n,"): ").concat(r.seq," dts: ").concat(r.dts," samples: ").concat(r.mp4track.samples.length," second: ").concat(a)),r.flush()}}}catch(t){e.e(t)}finally{e.f()}}else if(this.isReady()){this.dispatch("ready");var s,u=Ft(this.trackTypes);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=this.tracks[c],f={type:c,payload:qt.initSegment([l.mp4track],this.mediaDuration,l.mp4track.timescale)};this.dispatch("buffer",f)}}catch(t){u.e(t)}finally{u.f()}Wt("Initial segment generated."),this.initialized=!0}var h,d,p,y,v}},{key:"isReady",value:function(){var t,e=Ft(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!this.tracks[n].readyToDecode||!this.tracks[n].samples.length)return!1}}catch(t){e.e(t)}finally{e.f()}return!0}},{key:"remux",value:function(t){var e,n=Ft(this.trackTypes);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=t[r];"audio"===r&&this.tracks.video&&!this.tracks.video.readyToDecode||i.length>0&&this.tracks[r].remux(i)}}catch(t){n.e(t)}finally{n.f()}this.flush()}}]),n}(Xt),re=function(t){l()(n,t);var e=jt(n);function n(t,r){var o;return i()(this,n),(o=e.call(this,"buffer")).type=r,o.queue=new Uint8Array,o.cleaning=!1,o.pendingCleaning=0,o.cleanOffset=30,o.cleanRanges=[],o.sourceBuffer=t,o.sourceBuffer.addEventListener("updateend",(function(){o.dispatch("updateend",Date.now()),o.pendingCleaning>0&&(o.initCleanup(o.pendingCleaning),o.pendingCleaning=0),o.cleaning=!1,o.cleanRanges.length&&o.doCleanup()})),o.sourceBuffer.addEventListener("error",(function(t){o.dispatch("error",{type:o.type,name:"buffer",error:t})})),o}return a()(n,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(this.cleanRanges.length){var t=this.cleanRanges.shift();Wt("".concat(this.type," remove range [").concat(t[0]," - ").concat(t[1],")")),this.cleaning=!0,this.sourceBuffer.remove(t[0],t[1]),this.dispatch("clearBuffer")}else this.cleaning=!1}},{key:"initCleanup",value:function(t){if(this.sourceBuffer.updating)this.pendingCleaning=t;else if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var e=0;e<this.sourceBuffer.buffered.length;++e){var n=this.sourceBuffer.buffered.start(e),r=this.sourceBuffer.buffered.end(e);t-n>this.cleanOffset&&n<(r=t-this.cleanOffset)&&this.cleanRanges.push([n,r])}this.doCleanup()}}},{key:"doAppend",value:function(){if(this.queue.length&&!this.sourceBuffer.updating)try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(t){if("QuotaExceededError"===t.name)return Wt("".concat(this.type," buffer quota full")),void this.dispatch("error",{type:this.type,name:"QuotaExceeded",error:"buffer error"});$t("Error occured while appending ".concat(this.type," buffer -  ").concat(t.name,": ").concat(t.message)),this.dispatch("error",{type:this.type,name:"unexpectedError",error:"buffer error"})}}},{key:"feed",value:function(t){this.queue=ee(this.queue,t)}}]),n}(Xt);window.MediaSource=window.MediaSource||window.WebKitMediaSource;var ie=function(t){l()(n,t);var e=jt(n);function n(t){var r;i()(this,n),r=e.call(this,"jmuxer"),window.MediaSource=window.MediaSource||window.WebKitMediaSource;if(r.options=Object.assign({},{node:"",mode:"both",flushingTime:1500,clearBuffer:!0,onReady:null,fps:30,debug:!1,onClearBuffer:null},t),r.options.debug&&(Mt=console.log,Nt=console.error),"string"==typeof r.options.node&&""==r.options.node&&$t("no video element were found to render, provide a valid video element"),r.options.fps||(r.options.fps=30),r.frameDuration=1e3/r.options.fps|0,r.node="string"==typeof r.options.node?document.getElementById(r.options.node):r.options.node,r.sourceBuffers={},r.isMSESupported=!!window.MediaSource,!r.isMSESupported)throw"Oops! Browser does not support media source extension.";return r.setupMSE(),r.remuxController=new ne(r.options.clearBuffer),r.remuxController.addTrack(r.options.mode),"audio"===r.options.mode&&(r.aacParser=r.remuxController.tracks.audio.aac),r.mseReady=!1,r.lastCleaningTime=Date.now(),r.keyframeCache=[],r.frameCounter=0,r.remuxController.on("buffer",r.onBuffer.bind(u()(r))),r.remuxController.on("ready",r.createBuffer.bind(u()(r))),r.startInterval(),r}return a()(n,null,[{key:"isSupported",value:function(t){return window.MediaSource&&window.MediaSource.isTypeSupported(t)}}]),a()(n,[{key:"setupMSE",value:function(){this.mediaSource=new MediaSource,this.node.src=URL.createObjectURL(this.mediaSource),this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"feed",value:function(t){var e,n,r,i=!1,o={video:[],audio:[]};t&&this.remuxController&&(r=t.duration?parseInt(t.duration):0,t.video&&(e=zt.extractNALu(t.video)).length>0&&(o.video=this.getVideoFrames(e,r),i=!0),t.audio&&(n=this.aacParser.extractAAC(t.audio)).length>0&&(o.audio=this.getAudioFrames(n,r),i=!0),i?this.remuxController.remux(o):$t("Input object must have video and/or audio property. Make sure it is not empty and valid typed array"))}},{key:"getVideoFrames",value:function(t,e){var n,r,i,o,a=[],s=[],u=0,c=[],l=Ft(t);try{for(l.s();!(o=l.n()).done;)n=o.value,r=new Vt(n),a.push(r),r.type()!==Vt.IDR&&r.type()!==Vt.NDR||(s.push({units:a}),a=[],this.options.clearBuffer&&(r.type()===Vt.IDR&&c.push(this.frameCounter),this.frameCounter++))}catch(t){l.e(t)}finally{l.f()}return e?(i=e/s.length|0,u=e-i*s.length):i=this.frameDuration,s.map((function(t){t.duration=u>0?i+1:i,0!==u&&u--})),this.options.clearBuffer&&(c=c.map((function(t){return t*i/1e3})),this.keyframeCache=this.keyframeCache.concat(c)),s}},{key:"getAudioFrames",value:function(t,e){var n,r,i,o=[],a=0,s=Ft(t);try{for(s.s();!(i=s.n()).done;)n=i.value,o.push({units:n})}catch(t){s.e(t)}finally{s.f()}return e?(r=e/o.length|0,a=e-r*o.length):r=this.frameDuration,o.map((function(t){t.duration=a>0?r+1:r,0!==a&&a--})),o}},{key:"destroy",value:function(){if(this.aacParser=null,this.stopInterval(),this.mediaSource){try{this.bufferControllers&&(this.mediaSource.endOfStream(),this.removeSourceBuffer())}catch(t){$t("mediasource is not available to end ".concat(t.message))}this.mediaSource=null}if(this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var t in this.bufferControllers)this.bufferControllers[t].destroy();this.bufferControllers=null}this.node=!1,this.mseReady=!1,this.videoStarted=!1}},{key:"createBuffer",value:function(){if(this.mseReady&&this.remuxController&&this.remuxController.isReady()&&!this.bufferControllers)for(var t in this.bufferControllers={},this.remuxController.tracks){var e=this.remuxController.tracks[t];if(!n.isSupported("".concat(t,'/mp4; codecs="').concat(e.mp4track.codec,'"')))return $t("Browser does not support codec"),!1;var r=this.mediaSource.addSourceBuffer("".concat(t,'/mp4; codecs="').concat(e.mp4track.codec,'"'));this.bufferControllers[t]=new re(r,t),this.sourceBuffers[t]=r,this.bufferControllers[t].on("error",this.onBufferError.bind(this)),this.bufferControllers[t].on("clearBuffer",this.onClearBuffer.bind(this)),this.bufferControllers[t].on("updateend",this.onUpdateEnd.bind(this))}}},{key:"onUpdateEnd",value:function(t){"function"==typeof this.options.onUpdateEnd&&this.options.onUpdateEnd(t)}},{key:"startInterval",value:function(){var t=this;this.interval=setInterval((function(){t.bufferControllers&&(t.releaseBuffer(),t.clearBuffer())}),this.options.flushingTime)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"releaseBuffer",value:function(){for(var t in this.bufferControllers)this.bufferControllers[t].doAppend()}},{key:"getSafeBufferClearLimit",value:function(t){for(var e,n="audio"===this.options.mode&&t||0,r=0;r<this.keyframeCache.length&&!(this.keyframeCache[r]>=t);r++)e=this.keyframeCache[r];return e&&(this.keyframeCache=this.keyframeCache.filter((function(t){return t<e&&(n=t),t>=e}))),n}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var t in this.bufferControllers){var e=this.getSafeBufferClearLimit(this.node.currentTime);this.bufferControllers[t].initCleanup(e)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(t){this.bufferControllers&&this.bufferControllers[t.type]&&this.bufferControllers[t.type].feed(t.payload)}},{key:"onClearBuffer",value:function(){"function"==typeof this.options.onClearBuffer&&this.options.onClearBuffer()}},{key:"removeSourceBuffer",value:function(){if(this.mediaSource){var t=this.sourceBuffers;for(var e in t)this.mediaSource.removeSourceBuffer(t[e])}}},{key:"onMSEOpen",value:function(){this.mseReady=!0,this.createBuffer(),"function"==typeof this.options.onReady&&(this.options.onReady(),this.options.onReady=null)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(t){if("QuotaExceeded"!=t.name){if(this.mediaSource.sourceBuffers.length>0&&this.sourceBuffers[t.type]&&this.mediaSource.removeSourceBuffer(this.sourceBuffers[t.type]),0==this.mediaSource.sourceBuffers.length)try{this.mediaSource.endOfStream()}catch(t){$t("mediasource is not available to end")}}else this.bufferControllers[t.type].initCleanup(this.node.currentTime)}}]),n}(Xt);function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ae=function(t){l()(n,t);var e=oe(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"source",[]),v()(u()(r),"onPlay",void 0),r.source=t.source,r.onPlay=t.onPlay,r.init(),r}return a()(n,[{key:"init",value:function(){}},{key:"extract",value:function(t,e){for(var n=this.provide(e),r=0;r<n.size;r++)t[2*r]=n.left[r],t[2*r+1]=n.right[r];return n.size}},{key:"provide",value:function(t){for(var e=t,n=new Float32Array(e),r=new Float32Array(e),i=0,o=0,a=0;this.source.length>0;){var s=this.source.shift(),u=s.loadedPosition||0;o=s.startTime+s.duration*u/s.length;var c=Math.min(s.length-u,e-i),l=s.getChannelData(0),f=s.numberOfChannels>1?s.getChannelData(1):s.getChannelData(0);if(n.set(l.slice(u,u+c),i),r.set(f.slice(u,u+c),i),a+=c,i+=c,(u+=c)<s.length){s.loadedPosition=u,this.source.unshift(s);break}}return this.onPlay&&this.onPlay(o),{left:n,right:r,size:a}}}]),n}(N);function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ce(t,e,n){return e&&ue(t.prototype,e),n&&ue(t,n),t}function le(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function de(t,e){return!e||"object"!==R()(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pe(t,e,n){return(pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fe(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var ye=function(){function t(){se(this,t),this._vector=new Float32Array,this._position=0,this._frameCount=0}return ce(t,[{key:"clear",value:function(){this.receive(this._frameCount),this.rewind()}},{key:"put",value:function(t){this._frameCount+=t}},{key:"putSamples",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=2*(e=e||0);n>=0||(n=(t.length-r)/2);var i=2*n;this.ensureCapacity(n+this._frameCount);var o=this.endIndex;this.vector.set(t.subarray(r,r+i),o),this._frameCount+=n}},{key:"putBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=e||0,n>=0||(n=t.frameCount-e),this.putSamples(t.vector,t.position+e,n)}},{key:"receive",value:function(t){t>=0&&!(t>this._frameCount)||(t=this.frameCount),this._frameCount-=t,this._position+=t}},{key:"receiveSamples",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=2*e,r=this.startIndex;t.set(this._vector.subarray(r,r+n)),this.receive(e)}},{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.startIndex+2*e,i=2*n;t.set(this._vector.subarray(r,r+i))}},{key:"ensureCapacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=parseInt(2*t);if(this._vector.length<e){var n=new Float32Array(e);n.set(this._vector.subarray(this.startIndex,this.endIndex)),this._vector=n,this._position=0}else this.rewind()}},{key:"ensureAdditionalCapacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.ensureCapacity(this._frameCount+t)}},{key:"rewind",value:function(){this._position>0&&(this._vector.set(this._vector.subarray(this.startIndex,this.endIndex)),this._position=0)}},{key:"vector",get:function(){return this._vector}},{key:"position",get:function(){return this._position}},{key:"startIndex",get:function(){return 2*this._position}},{key:"frameCount",get:function(){return this._frameCount}},{key:"endIndex",get:function(){return 2*(this._position+this._frameCount)}}]),t}(),ve=function(){function t(e){se(this,t),e?(this._inputBuffer=new ye,this._outputBuffer=new ye):this._inputBuffer=this._outputBuffer=null}return ce(t,[{key:"clear",value:function(){this._inputBuffer.clear(),this._outputBuffer.clear()}},{key:"inputBuffer",get:function(){return this._inputBuffer},set:function(t){this._inputBuffer=t}},{key:"outputBuffer",get:function(){return this._outputBuffer},set:function(t){this._outputBuffer=t}}]),t}(),ge=function(t){function e(t){var n;return se(this,e),(n=de(this,fe(e).call(this,t))).reset(),n._rate=1,n}return le(e,t),ce(e,[{key:"reset",value:function(){this.slopeCount=0,this.prevSampleL=0,this.prevSampleR=0}},{key:"clone",value:function(){var t=new e;return t.rate=this._rate,t}},{key:"process",value:function(){var t=this._inputBuffer.frameCount;this._outputBuffer.ensureAdditionalCapacity(t/this._rate+1);var e=this.transpose(t);this._inputBuffer.receive(),this._outputBuffer.put(e)}},{key:"transpose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===t)return 0;for(var e=this._inputBuffer.vector,n=this._inputBuffer.startIndex,r=this._outputBuffer.vector,i=this._outputBuffer.endIndex,o=0,a=0;this.slopeCount<1;)r[i+2*a]=(1-this.slopeCount)*this.prevSampleL+this.slopeCount*e[n],r[i+2*a+1]=(1-this.slopeCount)*this.prevSampleR+this.slopeCount*e[n+1],a+=1,this.slopeCount+=this._rate;if(this.slopeCount-=1,1!==t)t:for(;;){for(;this.slopeCount>1;)if(this.slopeCount-=1,(o+=1)>=t-1)break t;var s=n+2*o;r[i+2*a]=(1-this.slopeCount)*e[s]+this.slopeCount*e[s+2],r[i+2*a+1]=(1-this.slopeCount)*e[s+1]+this.slopeCount*e[s+3],a+=1,this.slopeCount+=this._rate}return this.prevSampleL=e[n+2*t-2],this.prevSampleR=e[n+2*t-1],a}},{key:"rate",set:function(t){this._rate=t}}]),e}(ve),me=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;se(this,t),this._pipe=e,this.inputSize=n}return ce(t,[{key:"fillInputBuffer",value:function(){throw new Error("fillInputBuffer() not overridden")}},{key:"fillOutputBuffer",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.inputSize;this.outputBuffer.frameCount<t;){var n=e-this.inputBuffer.frameCount;if(this.fillInputBuffer(n),this.inputBuffer.frameCount<e)break;this._pipe.process()}}},{key:"clear",value:function(){this._pipe.clear()}},{key:"pipe",get:function(){return this._pipe}},{key:"inputBuffer",get:function(){return this._pipe.inputBuffer}},{key:"outputBuffer",get:function(){return this._pipe.outputBuffer}}]),t}(),be=function(){},we=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return se(this,e),(r=de(this,fe(e).call(this,n,i))).callback=o,r.sourceSound=t,r.historyBufferSize=22050,r._sourcePosition=0,r.outputBufferPosition=0,r._position=0,r}return le(e,t),ce(e,[{key:"onEnd",value:function(){this.callback()}},{key:"fillInputBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Float32Array(2*t),n=this.sourceSound.extract(e,t,this._sourcePosition);this._sourcePosition+=n,this.inputBuffer.putSamples(e,0,n)}},{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.fillOutputBuffer(this.outputBufferPosition+e);var n=Math.min(e,this.outputBuffer.frameCount-this.outputBufferPosition);this.outputBuffer.extract(t,this.outputBufferPosition,n);var r=this.outputBufferPosition+n;return this.outputBufferPosition=Math.min(this.historyBufferSize,r),this.outputBuffer.receive(Math.max(r-this.historyBufferSize,0)),this._position+=n,n}},{key:"handleSampleData",value:function(t){this.extract(t.data,4096)}},{key:"clear",value:function(){pe(fe(e.prototype),"clear",this).call(this),this.outputBufferPosition=0}},{key:"position",get:function(){return this._position},set:function(t){if(t>this._position)throw new RangeError("New position may not be greater than current position");var e=this.outputBufferPosition-(this._position-t);if(e<0)throw new RangeError("New position falls outside of history buffer");this.outputBufferPosition=e,this._position=t}},{key:"sourcePosition",get:function(){return this._sourcePosition},set:function(t){this.clear(),this._sourcePosition=t}}]),e}(me),_e=[[124,186,248,310,372,434,496,558,620,682,744,806,868,930,992,1054,1116,1178,1240,1302,1364,1426,1488,0],[-100,-75,-50,-25,25,50,75,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-20,-15,-10,-5,5,10,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-4,-3,-2,-1,1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],ke=function(t){function e(t){var n;return se(this,e),(n=de(this,fe(e).call(this,t)))._quickSeek=!0,n.midBufferDirty=!1,n.midBuffer=null,n.overlapLength=0,n.autoSeqSetting=!0,n.autoSeekSetting=!0,n._tempo=1,n.setParameters(44100,0,0,8),n}return le(e,t),ce(e,[{key:"clear",value:function(){pe(fe(e.prototype),"clear",this).call(this),this.clearMidBuffer()}},{key:"clearMidBuffer",value:function(){this.midBufferDirty&&(this.midBufferDirty=!1,this.midBuffer=null)}},{key:"setParameters",value:function(t,e,n,r){t>0&&(this.sampleRate=t),r>0&&(this.overlapMs=r),e>0?(this.sequenceMs=e,this.autoSeqSetting=!1):this.autoSeqSetting=!0,n>0?(this.seekWindowMs=n,this.autoSeekSetting=!1):this.autoSeekSetting=!0,this.calculateSequenceParameters(),this.calculateOverlapLength(this.overlapMs),this.tempo=this._tempo}},{key:"calculateOverlapLength",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t=(t=this.sampleRate*e/1e3)<16?16:t,t-=t%8,this.overlapLength=t,this.refMidBuffer=new Float32Array(2*this.overlapLength),this.midBuffer=new Float32Array(2*this.overlapLength)}},{key:"checkLimits",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"calculateSequenceParameters",value:function(){var t,e;this.autoSeqSetting&&(t=150+-50*this._tempo,t=this.checkLimits(t,50,125),this.sequenceMs=Math.floor(t+.5)),this.autoSeekSetting&&(e=25- -10/1.5*.5+-10/1.5*this._tempo,e=this.checkLimits(e,15,25),this.seekWindowMs=Math.floor(e+.5)),this.seekWindowLength=Math.floor(this.sampleRate*this.sequenceMs/1e3),this.seekLength=Math.floor(this.sampleRate*this.seekWindowMs/1e3)}},{key:"clone",value:function(){var t=new e;return t.tempo=this._tempo,t.setParameters(this.sampleRate,this.sequenceMs,this.seekWindowMs,this.overlapMs),t}},{key:"seekBestOverlapPosition",value:function(){return this._quickSeek?this.seekBestOverlapPositionStereoQuick():this.seekBestOverlapPositionStereo()}},{key:"seekBestOverlapPositionStereo",value:function(){var t,e,n,r=0;for(this.preCalculateCorrelationReferenceStereo(),t=0,e=Number.MIN_VALUE;r<this.seekLength;r+=1)(n=this.calculateCrossCorrelationStereo(2*r,this.refMidBuffer))>e&&(e=n,t=r);return t}},{key:"seekBestOverlapPositionStereoQuick",value:function(){var t,e,n,r,i,o=0;for(this.preCalculateCorrelationReferenceStereo(),e=Number.MIN_VALUE,t=0,r=0,i=0;o<4;o+=1){for(var a=0;_e[o][a]&&!((i=r+_e[o][a])>=this.seekLength);)(n=this.calculateCrossCorrelationStereo(2*i,this.refMidBuffer))>e&&(e=n,t=i),a+=1;r=t}return t}},{key:"preCalculateCorrelationReferenceStereo",value:function(){for(var t,e,n=0;n<this.overlapLength;n+=1)e=n*(this.overlapLength-n),t=2*n,this.refMidBuffer[t]=this.midBuffer[t]*e,this.refMidBuffer[t+1]=this.midBuffer[t+1]*e}},{key:"calculateCrossCorrelationStereo",value:function(t,e){var n=this._inputBuffer.vector;t+=this._inputBuffer.startIndex;for(var r,i=0,o=2,a=2*this.overlapLength;o<a;o+=2)i+=n[r=o+t]*e[o]+n[r+1]*e[o+1];return i}},{key:"overlap",value:function(t){this.overlapStereo(2*t)}},{key:"overlapStereo",value:function(t){var e=this._inputBuffer.vector;t+=this._inputBuffer.startIndex;for(var n,r,i,o,a,s=this._outputBuffer.vector,u=this._outputBuffer.endIndex,c=0,l=1/this.overlapLength;c<this.overlapLength;c+=1)r=(this.overlapLength-c)*l,i=c*l,o=(n=2*c)+t,s[(a=n+u)+0]=e[o+0]*i+this.midBuffer[n+0]*r,s[a+1]=e[o+1]*i+this.midBuffer[n+1]*r}},{key:"process",value:function(){var t,e,n;if(null===this.midBuffer){if(this._inputBuffer.frameCount<this.overlapLength)return;this.midBuffer=new Float32Array(2*this.overlapLength),this._inputBuffer.receiveSamples(this.midBuffer,this.overlapLength)}for(;this._inputBuffer.frameCount>=this.sampleReq;){t=this.seekBestOverlapPosition(),this._outputBuffer.ensureAdditionalCapacity(this.overlapLength),this.overlap(Math.floor(t)),this._outputBuffer.put(this.overlapLength),(e=this.seekWindowLength-2*this.overlapLength)>0&&this._outputBuffer.putBuffer(this._inputBuffer,t+this.overlapLength,e);var r=this._inputBuffer.startIndex+2*(t+this.seekWindowLength-this.overlapLength);this.midBuffer.set(this._inputBuffer.vector.subarray(r,r+2*this.overlapLength)),this.skipFract+=this.nominalSkip,n=Math.floor(this.skipFract),this.skipFract-=n,this._inputBuffer.receive(n)}}},{key:"tempo",set:function(t){var e;this._tempo=t,this.calculateSequenceParameters(),this.nominalSkip=this._tempo*(this.seekWindowLength-this.overlapLength),this.skipFract=0,e=Math.floor(this.nominalSkip+.5),this.sampleReq=Math.max(e+this.overlapLength,this.seekWindowLength)+this.seekLength},get:function(){return this._tempo}},{key:"inputChunkSize",get:function(){return this.sampleReq}},{key:"outputChunkSize",get:function(){return this.overlapLength+Math.max(0,this.seekWindowLength-2*this.overlapLength)}},{key:"quickSeek",set:function(t){this._quickSeek=t}}]),e}(ve),xe=function(t,e){return(t>e?t-e:e-t)>1e-10},Pe=function(){function t(){se(this,t),this.transposer=new ge(!1),this.stretch=new ke(!1),this._inputBuffer=new ye,this._intermediateBuffer=new ye,this._outputBuffer=new ye,this._rate=0,this._tempo=0,this.virtualPitch=1,this.virtualRate=1,this.virtualTempo=1,this.calculateEffectiveRateAndTempo()}return ce(t,[{key:"clear",value:function(){this.transposer.clear(),this.stretch.clear()}},{key:"clone",value:function(){var e=new t;return e.rate=this.rate,e.tempo=this.tempo,e}},{key:"calculateEffectiveRateAndTempo",value:function(){var t=this._tempo,e=this._rate;this._tempo=this.virtualTempo/this.virtualPitch,this._rate=this.virtualRate*this.virtualPitch,xe(this._tempo,t)&&(this.stretch.tempo=this._tempo),xe(this._rate,e)&&(this.transposer.rate=this._rate),this._rate>1?this._outputBuffer!=this.transposer.outputBuffer&&(this.stretch.inputBuffer=this._inputBuffer,this.stretch.outputBuffer=this._intermediateBuffer,this.transposer.inputBuffer=this._intermediateBuffer,this.transposer.outputBuffer=this._outputBuffer):this._outputBuffer!=this.stretch.outputBuffer&&(this.transposer.inputBuffer=this._inputBuffer,this.transposer.outputBuffer=this._intermediateBuffer,this.stretch.inputBuffer=this._intermediateBuffer,this.stretch.outputBuffer=this._outputBuffer)}},{key:"process",value:function(){this._rate>1?(this.stretch.process(),this.transposer.process()):(this.transposer.process(),this.stretch.process())}},{key:"rate",get:function(){return this._rate},set:function(t){this.virtualRate=t,this.calculateEffectiveRateAndTempo()}},{key:"rateChange",set:function(t){this._rate=1+.01*t}},{key:"tempo",get:function(){return this._tempo},set:function(t){this.virtualTempo=t,this.calculateEffectiveRateAndTempo()}},{key:"tempoChange",set:function(t){this.tempo=1+.01*t}},{key:"pitch",set:function(t){this.virtualPitch=t,this.calculateEffectiveRateAndTempo()}},{key:"pitchOctaves",set:function(t){this.pitch=Math.exp(.69314718056*t),this.calculateEffectiveRateAndTempo()}},{key:"pitchSemitones",set:function(t){this.pitchOctaves=t/12}},{key:"inputBuffer",get:function(){return this._inputBuffer}},{key:"outputBuffer",get:function(){return this._outputBuffer}}]),t}(),Ee=function(){function t(e){se(this,t),this.buffer=e,this._position=0}return ce(t,[{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.position=n;for(var r=this.buffer.getChannelData(0),i=this.dualChannel?this.buffer.getChannelData(1):this.buffer.getChannelData(0),o=0;o<e;o++)t[2*o]=r[o+n],t[2*o+1]=i[o+n];return Math.min(e,r.length-n)}},{key:"dualChannel",get:function(){return this.buffer.numberOfChannels>1}},{key:"position",get:function(){return this._position},set:function(t){this._position=t}}]),t}(),Se=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4096,i=t.createScriptProcessor(r,2,2),o=new Float32Array(2*r);return i.onaudioprocess=function(t){var i=t.outputBuffer.getChannelData(0),a=t.outputBuffer.getChannelData(1),s=e.extract(o,r);n(e.sourcePosition),0===s&&e.onEnd();for(var u=0;u<s;u++)i[u]=o[2*u],a[u]=o[2*u+1]},i},Te=function(t){var e,n,r,i=Math.floor(t/60),o=t-60*i;return"".concat(i,":").concat((e=parseInt(o),r=r||"0",(e+="").length>=(n=2)?e:new Array(n-e.length+1).join(r)+e))},Re=function(t){var e=this.timePlayed,n=this.sampleRate;if(this.sourcePosition=t,this.timePlayed=t/n,e!==this.timePlayed){var r=new CustomEvent("play",{detail:{timePlayed:this.timePlayed,formattedTimePlayed:this.formattedTimePlayed,percentagePlayed:this.percentagePlayed}});this._node.dispatchEvent(r)}};!function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;se(this,t),this._soundtouch=new Pe;var a=new Ee(n);this.timePlayed=0,this.sourcePosition=0,this._filter=new we(a,this._soundtouch,o),this._node=Se(e,this._filter,(function(t){return Re.call(i,t)})),this.tempo=1,this.rate=1,this.duration=n.duration,this.sampleRate=e.sampleRate,this.listeners=[]}ce(t,[{key:"connect",value:function(t){this._node.connect(t)}},{key:"disconnect",value:function(){this._node.disconnect()}},{key:"on",value:function(t,e){this.listeners.push({name:t,cb:e}),this._node.addEventListener(t,(function(t){return e(t.detail)}))}},{key:"off",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.listeners;e&&(n=n.filter((function(t){return t.name===e}))),n.forEach((function(e){t._node.removeEventListener(e.name,(function(t){return e.cb(t.detail)}))}))}},{key:"formattedDuration",get:function(){return Te(this.duration)}},{key:"formattedTimePlayed",get:function(){return Te(this.timePlayed)}},{key:"percentagePlayed",get:function(){return 100*this._filter.sourcePosition/(this.duration*this.sampleRate)},set:function(t){this._filter.sourcePosition=parseInt(t*this.duration*this.sampleRate)}},{key:"node",get:function(){return this._node}},{key:"pitch",set:function(t){this._soundtouch.pitch=t}},{key:"pitchSemitones",set:function(t){this._soundtouch.pitchSemitones=t}},{key:"rate",set:function(t){this._soundtouch.rate=t}},{key:"tempo",set:function(t){this._soundtouch.tempo=t}}])}();function Be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Le=function(t){l()(n,t);var e=Be(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"soundTouch",void 0),v()(u()(r),"filter",void 0),r.init(t.source),r}return a()(n,[{key:"init",value:function(t){this.soundTouch=new Pe,this.soundTouch.tempo=1,this.soundTouch.rate=1,this.filter=new we(t,this.soundTouch,2048)}},{key:"provide",value:function(t){for(var e=new Float32Array(2*t),n=this.filter.extract(e,t),r=new Float32Array(n),i=new Float32Array(n),o=0;o<n;o++)r[o]=e[2*o],i[o]=e[2*o+1];return{size:n,left:r,right:i}}},{key:"rate",set:function(t){this.soundTouch.tempo=t}}]),n}(N);function Ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var De=function(t){l()(n,t);var e=Ae(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"currentRate",1),v()(u()(r),"source",[]),v()(u()(r),"commonProcessor",void 0),v()(u()(r),"rateProcessor",void 0),v()(u()(r),"audioTime",0),r.source=t.source,r.init(),r}return a()(n,[{key:"init",value:function(){var t=this;this.commonProcessor=new ae({source:this.source,onPlay:function(e){t.audioTime=e}}),this.rateProcessor=new Le({source:this.commonProcessor})}},{key:"provide",value:function(t){var e=(1===this.currentRate?this.commonProcessor:this.rateProcessor).provide(t);return e.audioTime=this.audioTime,e}},{key:"rate",set:function(t){this.currentRate=t,this.rateProcessor.rate=t}}]),n}(N);function Ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Oe="canplaythrough",Ie="seeked",Me="waiting",Ne=function(t){l()(n,t);var e=Ce(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"audioContext",null),v()(u()(r),"scriptNode",null),v()(u()(r),"gainNode",null),v()(u()(r),"delay",0),v()(u()(r),"audioBuffer",new ArrayBuffer(0)),v()(u()(r),"decodedBuffer",[]),v()(u()(r),"isFirstPlay",!0),v()(u()(r),"defaultVolume",1),v()(u()(r),"currentRate",1),v()(u()(r),"eventListeners",{}),v()(u()(r),"canPlay",!1),v()(u()(r),"interval",void 0),v()(u()(r),"seekTimeDelta",0),v()(u()(r),"audioTime",0),v()(u()(r),"audioProvider",void 0),v()(u()(r),"isWaiting",!1),t=Object.assign({},t),r.flushTime=t.flushTime||1e3,r.onReady=t.onReady,r.init(),r}return a()(n,[{key:"init",value:function(){this.audioProvider=new De({source:this.decodedBuffer}),"function"==typeof this.onReady&&setTimeout(this.onReady,0)}},{key:"feed",value:function(t){var e=t.audio;this.audioBuffer=this.appendByteArray(this.audioBuffer,e),this.canPlay||(this.canPlay=!0,this.triggerEvent(Oe))}},{key:"appendByteArray",value:function(t,e){var n=new Uint8Array((0|t.byteLength)+(0|e.byteLength));return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),0|t.byteLength),n.buffer}},{key:"decodeAudioData",value:function(t){var e=this;this.audioBuffer&&this.audioBuffer.byteLength>0&&(this.audioContext.decodeAudioData(this.audioBuffer,(function(n){n.startTime=e.delay,e.delay+=n.duration,e.decodedBuffer.push(n),t&&t.call()}),(function(t){e.logger.error("decodeAudioData",t)})),this.audioBuffer=new ArrayBuffer(0))}},{key:"play",value:function(){var t=this;return new Promise((function(e,n){t.isFirstPlay?(t.isFirstPlay=!1,t.logger.info("startPlay"),t.audioContext=new(window.AudioContext||window.webkitAudioContext),t.gainNode=t.audioContext.createGain(),t.gainNode.gain.value=t.defaultVolume,t.scriptNode=t.audioContext.createScriptProcessor(2048,2,2),t.scriptNode.onaudioprocess=function(e){var n=e.outputBuffer,r=n.length,i=t.audioProvider.provide(r);if(0!==i.size){t.isWaiting&&(t.isWaiting=!1,t.triggerEvent(Oe));var o=n.getChannelData(0),a=n.getChannelData(1);if(0!=i.audioTime&&(t.audioTime=i.audioTime),o.set(i.left),a.set(i.right),i.size<r){var s=new Float32Array(r-i.size);o.set(s,i.size),a.set(s,i.size)}}else t.isWaiting||(t.isWaiting=!0,t.triggerEvent(Me))},t.scriptNode.connect(t.gainNode),t.gainNode.connect(t.audioContext.destination),t.decodeAudioData.call(t,t.testAutoplay.bind(t,e,n)),t.interval=setInterval(t.decodeAudioData.bind(t),t.flushTime)):"suspended"===t.audioContext.state?t.audioContext.resume().then((function(){t.logger.info("play","Audio is resumed"),e()})):(t.logger.info("Audio resumed from waiting"),e())}))}},{key:"pause",value:function(){var t=this;this.audioContext&&this.audioContext.suspend().then((function(){t.logger.info("pause","Audio is paused")}))}},{key:"addEventListener",value:function(t,e){this.eventListeners[t]=e}},{key:"triggerEvent",value:function(t){var e=this.eventListeners[t];e&&e.call()}},{key:"buffer",value:function(){var t=0;this.decodedBuffer.length>0&&(t=this.decodedBuffer[0].startTime);return{start:1e3*t,end:parseInt(1e3*this.delay)}}},{key:"destroy",value:function(){this.delay=0,this.audioContext&&(clearInterval(this.interval),this.scriptNode.disconnect(),this.scriptNode=null,this.audioContext.close(),this.audioContext=null),this.gainNode=null,this.audioBuffer=new ArrayBuffer(0),this.canPlay=!1,this.isFirstPlay=!0,this.decodedBuffer.length=0,this.seekTimeDelta=0,this.audioTime=0}},{key:"testAutoplay",value:function(t,e){var n=L.createEl("audio"),r=n.play();n=null;var i=!1;void 0!==r?(r.catch((function(){i=!0})),setTimeout((function(){r=null,i?e("Autoplay is prevented"):t()}),100)):e("Promise is undefined")}},{key:"currentTime",get:function(){return this.audioTime},set:function(t){var e=this;for(this.audioTime=t;this.decodedBuffer.length>0;){var n=this.decodedBuffer.shift();if(n.startTime<=t&&n.startTime+n.duration>t){n.loadedPosition=parseInt(n.length*(t-n.startTime)/n.duration),this.decodedBuffer.unshift(n);break}}setTimeout((function(){e.triggerEvent(Ie)}),0)}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(t){this.gainNode?this.gainNode.gain.value=t:this.defaultVolume=t}},{key:"playbackRate",set:function(t){t!==this.currentRate&&(this.currentRate=t,this.audioProvider.rate=t)}}]),n}(N);function Ue(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Fe=function(t){l()(n,t);var e=Ue(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"need",!0),v()(u()(t),"first",!1),v()(u()(t),"offset",0),v()(u()(t),"currentPTS",0),v()(u()(t),"ready",!1),v()(u()(t),"end",!1),v()(u()(t),"lastData",null),v()(u()(t),"nodeParent",null),v()(u()(t),"useJMuxer",!1),t.player=r.audioNode,t.createAudioMuxer(),t.bindEvent(),t.logger.info("audioDecoder",t.useJMuxer?"JMuxer":"AudioContext"),t}return a()(n,[{key:"bindEvent",value:function(){var t=this;this.bindNodeEvent(),this.events.on(st.PlayerMaxPTS,(function(e){t.currentPTS===e&&(t.end=!0)}))}},{key:"bindNodeEvent",value:function(){var t=this;this.addEventListener("seeked",(function(){t.onSeekedHandler&&t.onSeekedHandler(),t.events.emit("AudioPlayer.seeked")})),this.addEventListener("canplaythrough",(function(){t.logger.info("canplaythrough"),t.ready||(t.ready=!0,t.status="ready",t.logger.info("constructor","canplaythrough","ready"),t.events.emit(st.AudioPlayerDataReady))})),this.addEventListener("waiting",(function(){t.ready=!1,t.end?(t.useJMuxer||t.player.destroy(),t.status="end",t.events.emit(st.AudioPlayerEnd,"audio"),t.logger.info("audioPlayer end")):(t.logger.warn("audioPlayer waiting",t.player.currentTime,t.currentPTS),t.status="waiting",t.events.emit(st.AudioPlayerWait,"audio"))}))}},{key:"reset",value:function(){this.lastData=null,this.first=!1,this.offset=0,this.currentPTS=0,this.ready=!1,this.end=!1,this.clear(),this.createAudioMuxer(),this.bindNodeEvent(),this.stime=null}},{key:"createNode",value:function(){this.player=document.createElement("audio"),this.player.classList.add("goldplay__audio--player"),this.parentNode.appendChild(this.player)}},{key:"createAudioMuxer",value:function(){this.useJMuxer?this.audioDecoder=new ie({node:this.player,mode:"audio",debug:!1,clearBuffer:!0,flushingTime:10,onReady:this.onMSEReady.bind(this)}):(this.audioDecoder=new Ne({flushTime:100,onReady:this.onMSEReady.bind(this)}),this.player=this.audioDecoder)}},{key:"onMSEReady",value:function(){this.logger.info("onMSEReady","AudioPlayerReady"),this.events.emit(st.AudioPlayerReady)}},{key:"clear",value:function(){this.audioDecoder.destroy(),this.audioDecoder=null}},{key:"play",value:function(){var t=this;"playing"!==this.status&&(this.status="playing",this.player.play().then((function(){t.events.emit(st.AudioPlayerPlaySuccess)})).catch((function(e){t.logger.error("play","errorInfo:",e),t.events.emit(st.AudioPlayerPlayFail)})))}},{key:"pause",value:function(){"pause"!==this.status&&(this.status="pause",this.player.pause())}},{key:"send",value:function(t){if(!t.PTS)return this.need=!1,void this.events.emit(st.AudioPlayerDataReady);if(this.need=!0,this.audioDecoder){if(this.stime||(this.stime=Date.now()),(t=this.format(t)).audioEnd)return this.logger.info("push","audioEnd"),this.feed(this.lastData),void(this.lastData=null);if(this.first||(this.first=!0,this.offset=t.start),t.PTS>this.currentPTS){if(!this.lastData)return void(this.lastData=t);this.lastData.duration=t.PTS-this.lastData.PTS,this.feed(this.lastData),t.duration=this.lastData.duration,this.lastData=t}}else this.logger.error("send","audioDecoder is:",this.audioDecoder)}},{key:"feed",value:function(t){this.audioDecoder.feed({audio:t.data_byte,duration:t.duration}),this.currentPTS=t.PTS}},{key:"format",value:function(t){return t&&t.data_byte&&(t.start=t.PTS),t}},{key:"addEventListener",value:function(t,e){this.player.addEventListener(t,e)}},{key:"isBuffered",value:function(t){return-1!==[this.buffer()].findIndex((function(e){return t>=e.start&&t<e.end}))}},{key:"buffer",value:function(){if(this.useJMuxer){for(var t=this.player.buffered,e=t.length,n={};e>0;)n.start=1e3*t.start(e-1)+this.offset,n.end=1e3*t.end(e-1)+this.offset,e--;return n}var r=this.player.buffer();return{start:r.start+this.offset,end:r.end+this.offset}}},{key:"muted",set:function(t){this.player.muted=!!t}},{key:"playbackRate",set:function(t){this.player.playbackRate=t}},{key:"volume",get:function(){return this.player.volume},set:function(t){this.player.volume=t,this.muted=0===t}},{key:"currentTime",get:function(){return parseInt(1e3*this.player.currentTime+this.offset)},set:function(t){this.player.currentTime=(t-this.offset)/1e3}},{key:"paused",get:function(){return this.player.paused}},{key:"offset",set:function(t){this.offset=t}}]),n}(N),He={playerContainer:"goldplay__container",screenContainer:"goldplay__screen--container",screenCanvas:"goldplay__screen--canvas",audioContainer:"goldplay__audio--container",audioPlayer:"goldplay__audio--player",controlContainer:"goldplay__control--container",containerFullPage:"goldplay__container-fullpage",containerFullScreen:"goldplay__container-fullscreen",controlContainerFloat:"goldplay__control--container-float",bigPlayButton:"goldplay__screen--bigplay",poster:"goldplay__screen--poster",nearside:"goldplay__control--nearside",sidebar:"goldplay__control--sidebar",buttonBlock:"goldplay__control--button-block",playButton:"goldplay__control--play",pauseButton:"goldplay__control--pause",replayButton:"goldplay__control--replay",speedBar:"goldplay__speed-bar",speedBarBox:"goldplay__speed-bar--box",rateBar:"goldplay__rate-bar",rateBarBox:"goldplay__rate-bar--box",fullPage:"goldplay__control--fullpage",fullScreen:"goldplay__control--fullscreen",waitingBar:"goldplay__waiting-bar",progressBar:"goldplay__progress-bar",progressBarHover:"goldplay__progress-bar-hover",progressBarPlay:"goldplay__progressbar--play",progressBarPlayHover:"goldplay__progressbar--play-hover",progressBarLoad:"goldplay__progressbar--load",progressBarLoadHover:"goldplay__progressbar--load-hover",progressBarDot:"goldplay__progressbar--dot",progressBarDotHover:"goldplay__progressbar--dot-hover",volumeBar:"goldplay__volume-bar",volumeBarAudio:"goldplay__volume-bar--audio",volumeBarAudioOn:"goldplay__volume-bar--audio-on",volumeBarAudioOff:"goldplay__volume-bar--audio-off",volumeBarHandle:"goldplay__volume-bar--handle",volumeBarRod:"goldplay__volume-bar--rod",volumeBarRodHover:"goldplay__volume-bar--rod-hover",volumeBarSize:"goldplay__volume-bar--size",volumeBarColumn:"goldplay__volume-bar--column",alertBox:"goldplay__alter-box",alertClose:"goldplay__alter--close"};function je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var We=He,$e=function(){function t(){i()(this,t)}return a()(t,null,[{key:"createContainer",value:function(t){var e=function(t){l()(n,t);var e=je(n);function n(){return i()(this,n),e.apply(this,arguments)}return n}(Z()(HTMLDivElement));customElements.get("gp-container")||customElements.define("gp-container",e,{extends:"div"});var n=L.createEl("gp-container","div");return n.className=We.playerContainer,n.style.width=(t.options.width?t.options.width:t.el.offsetWidth)+"px",n.style.height=(t.options.height?t.options.height:t.el.offsetHeight)+"px",n}},{key:"createScreenContainer",value:function(t){var e=t.$container,n=function(t){l()(n,t);var e=je(n);function n(){return i()(this,n),e.apply(this,arguments)}return n}(Z()(HTMLDivElement));customElements.get("gp-screen")||customElements.define("gp-screen",n,{extends:"div"});var r,o=L.createEl("gp-screen","div");return o.classList.add(We.screenContainer),r=t.controlBarAutoHide||!1===t.controlBar?e.offsetHeight:e.offsetHeight-t.controlBarHeight,o.style.height=r+"px",o}},{key:"createAudioContainer",value:function(){var t=L.createEl("gp-audio");return t.classList.add(We.audioContainer),t.style.display="none",t}},{key:"createAudio",value:function(){var t=L.createEl("audio");return t.classList.add(We.audioPlayer),t.controls=!0,t}},{key:"clearCavans",value:function(t){var e=t.getContext("webgl");e.clear(e.COLOR_BUFFER_BIT)}}]),t}();v()($e,"createCanvas",(function(t){var e=L.createEl("canvas");return e.style.display="none",e.classList.add(We.screenCanvas),e.width=t.options.screenWidth||t.screenWidth,e.height=t.options.screenHeight||t.screenHeight,e}));var Ve=_.a.get("Template.js"),Ye=function(){function t(){i()(this,t)}return a()(t,null,[{key:"mergeVar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t||""===t)return t;try{var n=new RegExp("\\${'?\"?\\s*([.:a-z0-9_s]+?)\\s*'?\"?}","ig");return t.replace(n,(function(t,n){n=n.trim();var r=e[n];return r=(r=void 0===(r=null===r?"":r)?"":r)||""}))}catch(e){return Ve.error("mergeVar","replace variable","error:",e),t}}},{key:"makeValue",value:function(e,n,r){if("string"!=typeof n&&"function"!=typeof n)return n;if("function"==typeof n&&(n=n.call(this,this.data)),!r)return t.escapeHTML.call(this,n);var i,o=function(e){var n="";return e&&(n=" ".concat(t.slotReplaceName,'="true"')),'<gp-slot style="display:none"'.concat(n,"></gp-slot>")};if(t.isSoltType(r)){if("function"!=typeof this.getComponent)return Ve.error("makeValue","the object is not support slot mode.",this.getComponent,n),n;switch(r){case t.slotTypeMap.component:i=n;var a=this.getComponent(i);"object"===R()(a)&&a.element?(a.element.setAttribute(t.slotReplaceName,"true"),n=a.element.outerHTML):n=o(i);break;case t.slotTypeMap.html:n=t.mergeVar.call(this,n,this.data)}var s="";void 0!==i&&(s=" ".concat(t.slotComName,'="').concat(i,'" '));var u="$1 "+t.slotTypeName+'="'+r+'" '+t.slotKeyName+'="'+e+'"'+s+"$2";return"string"==typeof n&&(n=(n=""===n?o():n).replace(/^\s*(<\s?[\w-]*)(.*[\r|\n|>])/,u)),n}if("string"==typeof r){var c=ze[r];return"function"==typeof c&&(n=c.call(this,n)),n}return t.escapeHTML.call(this,n)}},{key:"escapeHTML",value:function(t){return"string"!=typeof t?t:t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"generate",value:function(e,n,r){var i=this,o=r[r.length-1]||{},a=[e[0]];return n.forEach((function(n,s){if(n){var u,c,l=n.split(t.pipSeparator);l.length>1&&(n=l[0],c=l[1]),u=Number.isInteger(n)?r[n]:o[n],void 0!==(u=t.makeValue.bind(i)(n,u,c))&&a.push(u),void 0!==e[s+1]&&a.push(e[s+1])}})),a.join("")}},{key:"create",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o;o=Array.isArray(e)?"array":"function"==typeof e?"function":"string";var a=this;if("object"===R()(a)||"function"==typeof a)if(void 0!==e&&""!==e)switch(void 0!==a.data&&null!==a.data||(Ve.info("create","this object.data is undefined or null",a),a.data={}),o){case"array":return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=i[i.length-1]||{};"object"===R()(a)&&(a.__template__={tplObj:e,keys:r,dict:s});var u=t.generate.bind(a);return u(e,r,i)};case"function":var s=t.create.bind(a);return e.call(a,a.data,s,a);default:return function(n){return n=void 0!==n?n:a.data,t.mergeVar(e,n)}}else Ve.error("create","have not give tplObj parameter.",e);else Ve.error("create","this is not an object.",a)}},{key:"isSoltType",value:function(e){return e=String(e).toLowerCase(),t.slotTypeMap[e]}}]),t}();Ye.pipSeparator="|",Ye.slotTypeName="gp-slot-type",Ye.slotKeyName="gp-slot-key",Ye.slotComName="gp-slot-com",Ye.slotReplaceName="gp-slot-replace",Ye.slotTypeMap={html:"html",component:"component"};var ze={trim:function(t){return t.trim()},upperCase:function(t){return t.toUpperCase()},lowerCase:function(t){return t.toLowerCase()}},Xe=Ye,Ge=n(18),qe=n.n(Ge),Ke=n(28),Qe=n.n(Ke),Je=_.a.get("Observer.js"),Ze=function(){function t(e){i()(this,t),v()(this,"object",null),this.setObject(e)}var e;return a()(t,[{key:"setObject",value:function(t){this.object=t}},{key:"watch",value:(e=Qe()(qe.a.mark((function t(e,n,r){var i;return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"==typeof(i=this.object).watch){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,i.watch(e,n,r);case 5:!1!==t.sent&&"function"==typeof i.render&&i.render(e,n,r),"function"==typeof i.afterWatch&&i.afterWatch(e,n,r);case 8:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=e.set,i=e.get;t=t||n.data;var o=n.object,a={set:function(t,e,i){return"function"==typeof r?r.call(n,t,e,i):(t[e]!==i&&(t[e]=i,o.__template__&&Object.prototype.hasOwnProperty.call(o.__template__.dict,e)&&n.watch(t,e,i)),!0)},get:function(t,e){return"function"==typeof i?i.call(n,t,e):"object"===R()(t[e])&&null!==t[e]?new Proxy(t[e],a):Reflect.get(t,e)}};return new Proxy(t,a)}}]),t}(),tn=function(t){return"object"!==R()(t)&&Je.error("observer","this is not an object."),new Ze(t)};function en(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return nn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function on(t){if(t){var e=[],n=[];for(n.push(t);n.length;){var r=n.shift(),i=r.getAttribute(Xe.slotTypeName);if(!Xe.isSoltType(i)){e.push(r);for(var o=r.children,a=0,s=o.length;a<s;a++)n.push(o[a])}}return e}}var an=function(t){return t.getAttribute&&t.getAttribute(Xe.slotTypeName)===Xe.slotTypeMap.html},sn=function(t,e){return!(!(n=t).getAttribute||n.getAttribute(Xe.slotTypeName)!==Xe.slotTypeMap.component||t.getAttribute(Xe.slotComName)===e.getAttribute(Xe.slotComName));var n},un=function(t,e,n){var r;(t||e)&&(!t&&e?n.appendChild(e):!e&&t?n.removeChild(t):t.tagName!==e.tagName||(r=e,an(t)&&an(r))||sn(t,e)?t.replaceWith(e.cloneNode(!0)):t.nodeType===Node.TEXT_NODE&&t.nodeValue!==e.nodeValue?t.nodeValue=e.nodeValue:t.setAttribute&&L.setAttributes(t,e))},cn=function(t){l()(n,t);var e=rn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"createTemplate",null),v()(u()(t),"template",""),v()(u()(t),"element",null),v()(u()(t),"eventsList",{}),v()(u()(t),"data",{}),v()(u()(t),"id",""),t.id=r.id||t.constructor.name,t.options=r,t.createTemplate=Xe.create.bind(u()(t)),t}return a()(n,[{key:"getTemplate",value:function(){return this.template}},{key:"setTemplate",value:function(t){this.template=t}},{key:"init",value:function(){this.data=tn(this).create(this.data),this.render(),"function"==typeof this.afterInit&&this.afterInit()}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){}},{key:"watch",value:function(){}},{key:"render",value:function(){var t="";t="function"==typeof this.template?this.template(this.data):this.template;var e=L.createEl("div");if("string"==typeof t){e.innerHTML=t;var n,r=e.firstElementChild,i=en(r.querySelectorAll("["+Xe.slotReplaceName+"]"));try{for(i.s();!(n=i.n()).done;){var o=n.value;if("true"===o.getAttribute(Xe.slotReplaceName)){var a=o.getAttribute(Xe.slotComName),s=this.getComponent(a);if(!s)continue;var u=s.element;L.isElement(this.element)?o.replaceWith(u.cloneNode(!0)):o.replaceWith(u),s.element.removeAttribute(Xe.slotReplaceName)}}}catch(t){i.e(t)}finally{i.f()}L.isElement(this.element)?this.replaceNode(this.element,r):this.element=r}else this.logger.error("render:","this template is not html string","html:",t)}},{key:"replaceNode",value:function(t,e){if(t&&e){var n=on(t),r=on(e),i=n.length,o=r.length,a=Math.max(i,o);if(a<=0||t.tagName!==e.tagName)return t.replaceWith(e),void(this.element=e);for(;a--;){var s=n[a],u=r[a];if(s)if(u){if(s.tagName===u.tagName&&L.syncAttributes(s,u),!s.isEqualNode(u)){var c=Math.max(s.childNodes.length,u.childNodes.length);if(c<=0)un(s,u,s.parentNode);else for(var l=0,f=c;l<f;l++){var h=s.childNodes[l],d=u.childNodes[l];(h||d)&&un(h,d,s)}}}else s.parentNode.removeChild(s);else t.appendChild(u)}}}},{key:"show",value:function(){this.data.display="show",this.element&&(this.element.style.display="inline-block")}},{key:"hide",value:function(){this.data.display="hide",this.element&&(this.element.style.display="none")}},{key:"resetPosition",value:function(){var t=this.element.parentNode,e=t.offsetWidth,n=t.offsetHeight;this.element.style.marginTop=(n-this.element.offsetHeight)/2+"px",this.element.style.marginLeft=(e-this.element.offsetWidth)/2+"px"}},{key:"replace",value:function(t){this.element.replaceWith(t),this.element=t}},{key:"update",value:function(t){this.element.innerHTML=t}},{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,n,r),{destroy:function(){t.removeEventListener(e,n)}}}},{key:"removeEventListenerAll",value:function(){var t=this;Object.keys(this.eventsList).forEach((function(e){t.eventsList[e].destroy()}))}},{key:"getComponent",value:function(t){if(void 0!==t)return this.options.componentsController?this.options.componentsController.getComponent(t):void 0}},{key:"getHTMLString",value:function(){return this.element.outerHTML}},{key:"destroy",value:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.events.emit("Component_"+this.id+".destroy",this),this.removeEventListenerAll()}}]),n}(N),ln=n(8),fn=n.n(ln),hn={formatHHMMSS:function(t){var e=parseInt(t,10),n=Math.floor(e/3600),r=Math.floor((e-3600*n)/60),i=e-3600*n-60*r;n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i);var o="";return"00"!==n&&(o=n+":"),o+r+":"+i}},dn={formatBytes:function(t,e){if(0==t)return"0 Bytes";var n=e<=0?0:e||2,r=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}};function pn(){var t=fn()(['\n  <gp-poster class="goldplay__screen--poster">\n  <img src="','" width="','" data-display="','" heigth="','" class="goldplay__screen--poster-image">\n  <gp-speed class="goldplay__screen--poster-speed">',"</gp-speed>\n  </gp-poster>\n  "]);return pn=function(){return t},t}function yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var vn=function(t){l()(n,t);var e=yn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(pn(),"poster","width","display","height","speed")),v()(u()(t),"data",{poster:"",status:"",display:"show",speed:"",width:"",height:""}),v()(u()(t),"options",{}),t.options=r,r.player.poster&&(t.data.poster=r.player.poster),Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"resetPosition",value:function(){if(this.element){var t=this.element.parentNode.offsetWidth,e=this.element.parentNode.offsetHeight;this.element.style.width=t+"px",this.element.style.marginTop=(e-this.element.offsetHeight-20)/2+"px"}}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderUpdateSpeed,(function(e){"show"===t.data.display&&(t.data.speed=dn.formatBytes(e.speed)+" /s")}))}},{key:"hide",value:function(){"hide"!==this.data.display&&(this.element.style.opacity=0,this.element.style.display="none",this.data.display="hide")}}]),n}(cn);function gn(){var t=fn()(['\n    <gp-control class="goldplay__control--container ','" style="width:',"px;height:","px;opacity:",'" data-status="','">\n      ',"\n      ","\n      ","\n    </gp-control>\n  "]);return gn=function(){return t},t}function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var bn=function(t){l()(n,t);var e=mn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(gn(),"containerFloatCss","width","height","opacity","status","progressBarName|component","sideControlBarName|component","nearControlBarName|component")),v()(u()(t),"hideDelayTime",void 0),v()(u()(t),"hideTimeCount",void 0),v()(u()(t),"data",{progressBarName:"progressBar",sideControlBarName:"sideControlBar",nearControlBarName:"nearControlBar",width:"",height:"",opacity:1,containerFloatCss:"",display:"show",status:""}),v()(u()(t),"options",{}),t.options=r,t.hideDelayTime=t.options.player.controlBarAutoHideTime||3,r.player.controlBarAutoHide&&(t.data.containerFloatCss=t.options.cssName.controlContainerFloat,t.resetPosition()),Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"initProps",value:function(){this.hideTimeCount=this.hideDelayTime}},{key:"bindEvent",value:function(){var t=this,e=this.options;e.player.controlBarAutoHide&&(e.$container.addEventListener("mousemove",(function(){t.hideTimeCount<=0&&(t.data.display="show",t.show()),t.hideTimeCount=t.hideDelayTime})),setInterval((function(){t.hideTimeCount>0?t.hideTimeCount-=1:"hide"!==t.data.display&&(t.data.display="hide",t.hide())}),100))}},{key:"setSize",value:function(t,e){void 0!==t&&(this.data.width=t),void 0!==e&&(this.data.height=e)}},{key:"show",value:function(){var t,e=this;this.options.player.controlBarAutoHide?(clearTimeout(t),t=setTimeout((function(){e.data.opacity=1}),1)):this.data.opacity=1}},{key:"hide",value:function(){this.data.opacity=0}},{key:"resetPosition",value:function(){this.setSize(this.options.$container.offsetWidth,this.options.player.controlBarHeight)}}]),n}(cn),wn=_.a.get("Delegator.js");function _n(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:"object"===R()(t)&&(1===t.nodeType&&"string"==typeof t.nodeName)}function kn(t){t.preventDefault(),t.stopPropagation()}function xn(t,e,n,r,i){var o=function(t,e){if(t&&t.matches){if(!Array.isArray(e))return t.matches(e);for(var n=0,r=e.length;n<r;n++)if(t.matches(e[n]))return!0}return!1};function a(t){for(var e=(t=t||window.event).target||t.srcElement,i=t.currentTarget,a=!0;a&&e!==i&&e;){if(o(e,n)&&(a=!1!==r.call(e,t)),!a)return void kn(t);e=e.parentNode}}r.__delegateWrapper=a,function(t,e,n,r){void 0===r&&(r="blur"===e||"focus"===e),_n(t)&&t.addEventListener(e,n,r)}(t,e,a,i)}var Pn=function(){function t(e){return i()(this,t),v()(this,"element",null),_n(e)?this.element=e:wn.error("constructor","new instance","element:",this.element),this}return a()(t,[{key:"off",value:function(t,e,n){return e.__delegateWrapper&&delete(e=e.__delegateWrapper).__delegateWrapper,this.element.removeEventListener(t,e,n),this}},{key:"on",value:function(t,e,n,r){var i=this;return Array.isArray(e)?e.forEach((function(e){xn(i.element,t,e,n,r)})):xn(this.element,t,e,n,r),this}},{key:"once",value:function(t,e,n,r){return this.on(t,e,n,{capture:r,once:!0}),this}}]),t}(),En=null,Sn=function(t){return"string"==typeof t&&(t=document.querySelector(t)),En?En.element=t:En=new Pn(t),En},Tn=function(){function t(e,n){var r=n.$container,o=n.type,a=n.scope,s=n.onStart,u=n.onDrag,c=n.onRelease;i()(this,t),v()(this,"$container",null),v()(this,"$ele",null),v()(this,"active",!1),v()(this,"offsetX",0),v()(this,"offsetY",0),v()(this,"offsetLeft",0),v()(this,"offsetTop",0),v()(this,"orginOffsetLeft",0),v()(this,"orginOffsetTop",0),v()(this,"orginOffsetWidth",0),v()(this,"orginOffsetHeight",0),v()(this,"initialX",0),v()(this,"initialY",0),v()(this,"type","default"),v()(this,"scope",{}),this.$container=r||document.body,this.$ele=e,this.type=o,this.scope=a,this.eventsList={},this.onStart=s,this.onDrag=u,this.onRelease=c,this.bindEvent()}return a()(t,[{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,n,r),{destroy:function(){t.removeEventListener(e,n)}}}},{key:"removeEventListenerAll",value:function(){var t=this;Object.keys(this.eventsList).forEach((function(e){t.eventsList[e].destroy()}))}},{key:"bindEvent",value:function(){var t=this;this.eventsList.mousedown=this.addEventListener(this.$container,"mousedown",(function(e){t.start(e)}),!1),this.eventsList.mouseup=this.addEventListener(this.$container,"mouseup",(function(e){t.release(e)}),!1),this.eventsList.mousemove=this.addEventListener(this.$container,"mousemove",(function(e){t.drag(e)}),!1)}},{key:"start",value:function(t){t.target===this.$ele&&(void 0===this.scope&&void 0!==this.$container&&(this.scope={left:this.$container.offsetLeft,right:this.$container.offsetLeft+this.$container.offsetWidth,top:this.$container.offsetTop,bottom:this.$container.offsetTop+this.$container.offsetHeight}),this.offsetLeft=this.$ele.offsetLeft,this.offsetTop=this.$ele.offsetTop,this.active=!0,this.initialX=t.clientX,this.initialY=t.clientY,this.orginOffsetLeft=this.$ele.offsetLeft,this.orginOffsetTop=this.$ele.offsetTop,this.orginOffsetWidth=this.$ele.offsetWidth,this.orginOffsetHeight=this.$ele.offsetHeight,"function"==typeof this.onStart&&this.onStart.call(this,this.offsetX,this.offsetY,t,this))}},{key:"release",value:function(t){this.active=!1,"function"==typeof this.onRelease&&this.onRelease.call(this,this.offsetX,this.offsetY,t,this)}},{key:"drag",value:function(t){this.active&&(t.preventDefault(),t.stopPropagation(),this.offsetX=t.clientX-this.initialX+this.offsetLeft,this.offsetY=t.clientY-this.initialY+this.offsetTop,this.setPosition(t))}},{key:"setPosition",value:function(t){switch(this.type){case"vertical":this.offsetX=this.orginOffsetLeft,this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight);break;case"level":this.offsetY=this.orginOffsetTop,this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),this.offsetX<this.scope.left&&(this.offsetX=this.scope.left);break;default:isNaN(this.scope.right)||this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),isNaN(this.scope.left)||this.offsetX<this.scope.left&&(this.offsetX=this.scope.left),isNaN(this.scope.top)||this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),isNaN(this.scope.bottom)||this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight)}this.$ele.style.left=this.offsetX+"px",this.$ele.style.top=this.offsetY+"px","function"==typeof this.onDrag&&this.onDrag.call(this,this.offsetX,this.offsetY,t,this)}},{key:"destroy",value:function(){this.$ele.parentNode.removeChild(this.$ele),this.removeEventListenerAll()}}]),t}(),Rn=function(t,e){return new Tn(t,e)};function Bn(){var t=fn()(['\n    <gp-control-progressbar class="goldplay__progress-bar ','" data-status="','">\n      <div class="goldplay__progressbar--load ','">\n      </div>\n      <div class="goldplay__progressbar--play ','">\n      </div>\n      <span class="goldplay__progressbar--dot ','" title="','"></span>\n    </gp-control-progressbar>\n  ']);return Bn=function(){return t},t}function Ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var An=function(t){l()(n,t);var e=Ln(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(Bn(),"progressBarHoverCss","status","progressBarLoadHoverCss","progressBarPlayHoverCss","progressBarDotHoverCss","time")),v()(u()(t),"options",{}),v()(u()(t),"data",{playWidth:"",dot:"",time:"",status:""}),v()(u()(t),"setProgressBarSize",(function(e){t.$progressBarPlay.style.width=e+"px"})),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){var t=this.options.cssName;"dragstart"===this.data.status?(this.data.progressBarHoverCss=t.progressBarHover,this.data.progressBarLoadHoverCss=t.progressBarLoadHover,this.data.progressBarPlayHoverCss=t.progressBarPlayHover,this.data.progressBarDotHoverCss=t.progressBarDotHover):"dragend"===this.data.status&&(this.data.progressBarHoverCss="",this.data.progressBarLoadHoverCss="",this.data.progressBarPlayHoverCss="",this.data.progressBarDotHoverCss="")}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){var t=this.element,e=this.options.cssName;this.$progressDragDot=t.querySelector("."+e.progressBarDot),this.$progressBarPlay=t.querySelector("."+e.progressBarPlay),this.$progressBarLoad=t.querySelector("."+e.progressBarLoad),this.timer=this.getComponent("timer"),this.pauseButton=this.getComponent("pauseButton")}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=!1;this.events.on(st.PlayerTimeUpdate,(function(e){var r=t.options.loadData.sourceData.duration;if(!n&&e&&r){var i=e/1e3/r*t.progressBarWidth;t.setProgressPosition(i),t.timer.data.time=hn.formatHHMMSS(e/1e3)}})),this.events.on(st.PlayerbufferUpdate,(function(e){!n&&e&&t.updateProgressLoad(e)})),Sn(this.options.$controlBarContainer).on("click","."+e.progressBar,(function(n){if(n.target!==t.$progressDragDot){var r=(t.options.loadData.sourceData.duration||0)/t.progressBarWidth,i=0;n.target.classList.contains(e.progressBarLoad)&&(i=n.target.offsetLeft-n.target.parentNode.offsetLeft);var o=i+n.offsetX,a=o*r*1e3;return t.setProgressPosition(o),t.logger.info("bindEvent","click to seek","seekTime:",a,"offsetX:",o),n.target!==t.$progressBarLoad&&t.clearLoadBar(n.offsetX),t.timer.data.time=hn.formatHHMMSS(a/1e3),t.events.emit(st.PlayerOnSeek,a),!1}})),this.progressDragEvent=Rn(this.$progressDragDot,{$container:document.body,type:"level",scope:{left:this.progressBarLeft,right:this.progressBarLeft+this.progressBarWidth,top:this.$progressDragDot.offsetTop,bottom:this.$progressDragDot.offsetTop+this.$progressDragDot.offsetHeight},onStart:function(){n=!0,t.data.status="dragstart"},onDrag:function(e){var n;n=t.options.player.controlBarAutoHide?e:e-t.options.$controlBarContainer.offsetLeft;var r=0,i=t.$progressDragDot.offsetWidth;t.progressBarWidth-n<=i&&(r=i),t.setProgressBarSize(n),t.data.status="draging";var o=t.getSeekTime(t.progressBarWidth-r);t.timer.data.time=hn.formatHHMMSS(o/1e3),t.data.time=t.timer.data.time},onRelease:function(e,r,i){if(n){var o=t.getSeekTime();i.target!==t.$progressBarLoad&&t.clearLoadBar(e),t.events.emit(st.PlayerOnSeek,o),t.logger.info("bindEvent","onDrag release seek","seekTime:",o),t.data.status="dragend",n=!1}}})}},{key:"setProgressPosition",value:function(t){var e=Math.min(t,this.progressBarWidth),n=this.$progressDragDot,r=this.progressBarWidth,i=0,o=n.offsetWidth/2;e>r||r-e<=o?i=o-(r-e):e<=o&&(i=-(o-e));var a=e-i-n.offsetWidth/2;this.setProgressPlayWidth(e),this.setProgressDragDotLeft(a+this.progressBarLeft)}},{key:"setProgressPlayWidth",value:function(t){this.$progressBarPlay.style.width=t+"px"}},{key:"setProgressDragDotLeft",value:function(t){this.$progressDragDot.style.left=t+"px"}},{key:"getProgressPlayLeftWidth",value:function(){return{offsetLeft:this.$progressBarPlay.offsetLeft,offsetWidth:this.$progressBarPlay.offsetWidth}}},{key:"getProgressLoadLeftWidth",value:function(){return{offsetLeft:this.$progressBarLoad.offsetLeft,offsetWidth:this.$progressBarLoad.offsetWidth}}},{key:"setProgressLoadLeftWidth",value:function(t,e){var n=this.progressBarLeft+this.progressBarWidth;(t=Math.min(t,n))+e>n&&(e=n-t),this.$progressBarLoad.style.left=t+"px",this.$progressBarLoad.style.width=e+"px"}},{key:"updateProgressLoad",value:function(t){var e=this.options.loadData.sourceData.duration;if(e){var n=this.progressBarWidth,r=this.progressBarLeft,i=t[0]/1e3/e*n,o=t[1]/1e3/e*n,a=Math.floor(r+i),s=Math.floor(o-i);this.setProgressLoadLeftWidth(a,s)}}},{key:"getSeekTime",value:function(t,e){var n=this.progressBarWidth,r=(e=e||this.options.loadData.sourceData.duration||0)/(t||n);return this.$progressBarPlay.offsetWidth*r*1e3}},{key:"clearLoadBar",value:function(t){t<this.$progressBarLoad.offsetLeft-this.progressBarLeft&&(this.$progressBarLoad.style.width="0px")}},{key:"getDragDotPosition",value:function(){return{offsetLeft:this.$progressDragDot.offsetLeft,offsetTop:this.$progressDragDot.offsetTop,left:this.$progressDragDot.style.left,top:this.$progressDragDot.style.top}}},{key:"clearDragDotTop",value:function(){this.$progressDragDot.style.top=""}},{key:"progressBarWidth",get:function(){return this.element.offsetWidth}},{key:"progressBarLeft",get:function(){return this.element.offsetLeft}}]),n}(cn);function Dn(){var t=fn()(['\n  <gp-button class="goldplay__control--play" data-status="','" title="','">\n  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  viewBox="0 0 232.153 232.153" width="20" height="20" style="enable-background:new 0 0 232.153 232.153;" xml:space="preserve">\n  <g >\n  <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M203.791,99.628L49.307,2.294c-4.567-2.719-10.238-2.266-14.521-2.266\n    c-17.132,0-17.056,13.227-17.056,16.578v198.94c0,2.833-0.075,16.579,17.056,16.579c4.283,0,9.955,0.451,14.521-2.267\n    l154.483-97.333c12.68-7.545,10.489-16.449,10.489-16.449S216.471,107.172,203.791,99.628z" fill="#f1f1f1"/>\n  </g>\n  </svg>\n  </gp-button>\n  ']);return Dn=function(){return t},t}function Cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var On=function(t){l()(n,t);var e=Cn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(Dn(),"status","title")),v()(u()(t),"data",{title:"play",play:">"}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return n}(cn);function In(){var t=fn()(['\n  <gp-button class="goldplay__control--pause" title="','" status="','">\n  ',"\n  </gp-button>\n  "]);return In=function(){return t},t}function Mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function Nn(){var t=fn()(['\n<svg style="display:','" class="goldplay__control--pausing" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 26 26" style="background:none" xml:space="preserve">\n<g>\n<path d="M2.667,0h6v26h-6V0z M15.333,0v26h6V0H15.333z" fill="#f1f1f1"/>\n</g>\n</svg>\n']);return Nn=function(){return t},t}var Un=Xe.create(Nn(),"pauseHide"),Fn=function(t){l()(n,t);var e=Mn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate((function(t,e){return e(In(),"title","status","icon|html")}))),v()(u()(t),"data",{title:"pause",pauseHide:"",pauseLoadingHide:"none",icon:Un,status:"",display:""}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){"pauseloading"===this.data.status?(this.data.pauseHide="none",this.data.pauseLoadingHide="inline-block",this.data.title="loading",this.data.icon='\n<svg version="1.1" class="goldplay__control--pause-loading" style="display:${\'pauseLoadingHide\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 612 792" style="background:none;margin: -4px 0 0 -5px;" xml:space="preserve">\n<linearGradient id="goldplay-pause-loading-gradient" gradientUnits="userSpaceOnUse" x1="1.98" y1="784.6123" x2="26.2101" y2="770.623" gradientTransform="matrix(21.8571 0 0 21.8571 -2.0895 -16600.5293)">\n    <stop offset="0.1682" style="stop-color:#f1f1f1;stop-opacity:0"></stop>\n    <stop offset="0.7502" style="stop-color:#f1f1f1"></stop>\n    <stop offset="1" style="stop-color:#f1f1f1"></stop>\n</linearGradient>\n<path style="transform-origin: center center;animation: goldplay-rotate-360 .8s linear infinite;" fill="url(#goldplay-pause-loading-gradient)" d="M306,133.714c144.257,0,262.286,118.028,262.286,262.286c0,144.257-118.029,262.286-262.286,262.286\n  C161.743,658.286,43.714,540.257,43.714,396C43.714,251.743,161.743,133.714,306,133.714 M306,90C137.7,90,0,227.7,0,396\n  s137.7,306,306,306s306-137.7,306-306S474.3,90,306,90L306,90z">\n    <animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0" to="360" dur=".8s" repeatCount="indefinite" />\n</path>\n<g>\n    <g>\n        <path fill="#f1f1f1" d="M229.5,514.028L229.5,514.028c-13.114,0-21.857-8.742-21.857-21.856V295.457\n        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.715\n        C251.357,503.1,242.614,514.028,229.5,514.028z"></path>\n        <path fill="#f1f1f1" d="M229.5,273.6c-13.114,0-21.857,8.743-21.857,21.857v196.715c0,10.928,8.743,21.856,21.857,21.856\n        s21.857-10.929,21.857-21.856V295.457C251.357,282.343,242.614,273.6,229.5,273.6L229.5,273.6z"></path>\n    </g>\n    <g>\n        <path fill="#f1f1f1" d="M382.5,518.4L382.5,518.4c-13.114,0-21.857-8.743-21.857-21.857V299.829\n        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.714\n        C404.357,509.657,395.614,518.4,382.5,518.4z"></path>\n        <path fill="#f1f1f1" d="M382.5,277.972c-10.929,0-21.857,8.743-21.857,21.857v196.714c0,10.929,10.929,21.857,21.857,21.857\n        s21.857-10.929,21.857-21.857V299.829C404.357,288.9,393.429,277.972,382.5,277.972L382.5,277.972z"></path>\n    </g>\n</g>\n</svg>\n'):"pause"===this.data.status&&(this.data.pauseHide="inline-block",this.data.pauseLoadingHide="none",this.data.title="pause",this.data.icon=Un)}}]),n}(cn);function Hn(){var t=fn()(['\n  <gp-button class="goldplay__control--replay" title="','" data-display="','">\n  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n  width="24px" height="24px" viewBox="0 0 245.000000 206.000000"\n  preserveAspectRatio="xMidYMid meet">\n <g transform="translate(0.000000,206.000000) scale(0.100000,-0.100000)"\n fill="#f1f1f1" stroke="1">\n <path d="M1250 2046 c-286 -55 -525 -211 -681 -445 -91 -136 -152 -302 -167\n -453 -12 -119 3 -108 -143 -109 -70 -1 -156 -4 -192 -8 l-65 -6 262 -265 262\n -265 266 265 265 265 -62 6 c-35 4 -123 7 -197 8 l-134 1 7 69 c26 284 232\n 543 504 635 201 69 404 53 596 -47 62 -32 103 -63 177 -137 83 -83 102 -108\n 142 -190 63 -130 77 -193 77 -340 0 -178 -37 -298 -134 -435 -91 -126 -220\n -224 -369 -278 -72 -26 -99 -31 -218 -35 -117 -4 -146 -1 -215 17 -104 29\n -205 79 -283 142 l-63 52 -89 -89 c-49 -49 -89 -96 -89 -106 0 -24 154 -136\n 253 -185 89 -44 177 -74 272 -95 84 -17 303 -15 391 5 403 91 691 371 795 772\n 19 76 23 114 22 240 0 129 -4 164 -27 249 -99 377 -406 673 -778 751 -104 22\n -297 28 -385 11z"/>\n <path d="M1227 1418 c-9 -68 -7 -695 2 -770 l6 -57 240 200 c132 110 251 210\n 264 223 l23 24 -257 213 c-141 118 -260 215 -264 217 -5 1 -11 -21 -14 -50z"/>\n </g>\n </svg>\n  </gp-button>\n  ']);return Hn=function(){return t},t}function jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Wn=function(t){l()(n,t);var e=jn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(Hn(),"title","display")),v()(u()(t),"data",{title:"replay",display:"",replay:"->"}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return n}(cn);function $n(){var t=fn()(['\n  <gp-volume class="goldplay__volume-bar">\n    <gp-overbox class="goldplay-hoverbox goldplay__volume-bar--handle">\n      <span class="goldplay__volume-bar--precent">','</span>\n      <span class="goldplay__volume-bar--rod ','" title="adjust volume"></span>\n      <span class="goldplay__volume-bar--size">&nbsp;</span>\n      <span class="goldplay__volume-bar--column">&nbsp;</span>\n    </gp-overbox>\n    <gp-button class="goldplay__volume-bar--audio ','" title="','" data-mute="','" data-volume-size="','"  data-last-volume="','">\n    ',"\n    </gp-button>\n  </gp-volume>\n  "]);return $n=function(){return t},t}function Vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function Yn(){var t=fn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">\n<path d="M12.2 13.914v6.678a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2l.412-.353-2.558-2.558a.5.5 0 0 1 0-.707l.707-.707a.5.5 0 0 1 .707 0l16.849 16.849a.5.5 0 0 1 0 .707l-.707.707a.5.5 0 0 1-.707 0l-2.386-2.386a10 10 0 0 1-2.33 1.422c-.526.229-.583.284-.987.377v-2.375l.007-.003a8.332 8.332 0 0 0 1.717-1.014l-1.67-1.669a5.251 5.251 0 0 1-.054.034v-.089l-2-2zM8.373 4.96l3.002-2.572a.5.5 0 0 1 .825.38v6.019L8.373 4.959zm9.867 9.867c.48-.99.76-2.115.76-3.347 0-3.418-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48a9.954 9.954 0 0 1-1.326 4.98l-1.634-1.633zm-1.766-1.766L14.2 10.786V7.057a5.247 5.247 0 0 1 2.274 6.003z" fill="#f1f1f1"></path>\n</svg>\n']);return Yn=function(){return t},t}function zn(){var t=fn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">\n<path d="M5.2 7.68l6.175-5.293a.5.5 0 0 1 .825.38v17.825a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2zm9 13.35v-2.375l.007-.003C16.852 17.493 19 14.897 19 11.479s-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48c0 4.106-2.474 7.633-6.013 9.174-.526.229-.583.284-.987.377zm0-13.973c1.5.925 2.5 2.582 2.5 4.473 0 1.892-1 3.55-2.5 4.473V7.057z" fill="#f1f1f1"></path>\n</svg>\n']);return zn=function(){return t},t}var Xn=Xe.create(zn(),"audioOnHide"),Gn=Xe.create(Yn(),"audioOffHide"),qn=function(t){l()(n,t);var e=Vn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate($n(),"dataPrecent","volumeBarRodHoverCss","audioOffClass","title","dataMute","dataVolumeSize","dataLastVolume","icon|html")),v()(u()(t),"options",{}),v()(u()(t),"data",{audioONHide:"",audioOffHide:"",audioOffClass:"",dataVolumeSize:"",dataPrecent:"",dataLastVolume:"",dataMute:"",volumeBarRodHoverCss:"",icon:Xn,title:"turn off"}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){this.data.dataPrecent=Math.floor(100*this.data.dataVolumeSize),""!==this.data.audioOffClass?(this.data.dataMute="true",this.data.audioOffHide="inline-block",this.data.audioOnHide="none",this.data.icon=Gn,this.data.title="turn on"):(this.data.dataMute="",this.data.audioOffHide="none",this.data.audioOnHide="inline-block",this.data.icon=Xn,this.data.title="turn off")}},{key:"initProps",value:function(){var t=this.element,e=this.options.cssName;this.INIT_VOLUME_SIZE=void 0===this.options.player.defaultVolumeSize?.5:this.options.player.defaultVolumeSize,this.$volumeBarHandle=t.querySelector("."+e.volumeBarHandle),this.$volumeBarRod=t.querySelector("."+e.volumeBarRod),this.$volumeBarAudio=t.querySelector("."+e.volumeBarAudio),this.$volumeBarSize=t.querySelector("."+e.volumeBarSize),this.$volumeBarColumn=t.querySelector("."+e.volumeBarColumn),this.volumeBarColumnHeight=this.$volumeBarColumn.offsetHeight,this.volumeBarColumnTop=this.$volumeBarColumn.offsetTop,this.volumeBarRodHeight=this.$volumeBarRod.offsetHeight,this.volumeBarRodHeightHalf=this.volumeBarRodHeight/2,this.volumeBarColumnRealTop=this.volumeBarColumnTop+this.volumeBarRodHeightHalf,this.volumeBarColumnMaxHeight=this.volumeBarColumnHeight-this.volumeBarRodHeight}},{key:"bindEvent",value:function(){var t,e=this,n=this.options.$controlBarContainer,r=this.options.cssName;Sn(n).on("mouseover","."+r.volumeBar,(function(){clearTimeout(t),e.showVolumeBarHandle()})),Sn(n).on("mousewheel","."+r.volumeBarHandle,(function(t){var n=t.wheelDelta/500;n=e.data.dataVolumeSize+n,e.setVolumeSize(n),t.preventDefault(),t.stopPropagation()})),Sn(n).on("click",["."+r.volumeBarColumn,"."+r.volumeBarSize],(function(t){var n=0;return t.target===e.$volumeBarColumn?n=(e.$volumeBarColumn.offsetHeight-t.offsetY)/t.target.offsetHeight:t.target===e.$volumeBarSize&&(n=e.$volumeBarColumn.offsetHeight-t.target.offsetHeight+t.offsetY,n=e.$volumeBarColumn.offsetHeight-n,n/=e.$volumeBarColumn.offsetHeight),e.setVolumeSize(n),!1})),Sn(n).on("click","."+r.volumeBarAudio,(function(t){return e.$volumeBarAudio.classList.contains(r.volumeBarAudioOff)?e.setAudioOn(t.offsetY):e.setAudioOff(t.offsetY),!1}));Sn(n).on("mouseout","."+r.volumeBar,(function(n){t=setTimeout((function(){!function(t){var n=e.element,r={y:n.offsetTop+e.$volumeBarHandle.offsetTop,x:n.offsetLeft};return r.width=n.offsetWidth,r.height=e.$volumeBarHandle.offsetHeight,t.pageX>r.x&&t.pageX<r.x+r.width&&t.pageY>r.y&&t.pageY<r.y+r.height}(n)?e.hideVolumeBarHandle():clearTimeout(t)}),U.c.hideBarBoxTime)})),this.volumeDragEvent=Rn(this.$volumeBarRod,{$container:this.element,type:"vertical",scope:{top:this.volumeBarColumnTop,right:0,bottom:this.volumeBarColumnTop+this.volumeBarColumnHeight,left:0},onStart:function(){e.data.volumeBarRodHoverCss=e.options.cssName.volumeBarRodHover},onDrag:function(t,n){n-=1,e.dragHandle(n)},onRelease:function(){e.data.volumeBarRodHoverCss=""}})}},{key:"hideVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="hidden"}},{key:"showVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="visible"}},{key:"getVolume",value:function(){var t=(this.$volumeBarSize.offsetHeight-this.volumeBarRodHeight)/this.volumeBarColumnMaxHeight;return t=Math.min(t,1),(t=Math.max(t,0)).toFixed(2)}},{key:"setVolume",value:function(t){this.data.dataVolumeSize=Number(t),this.events.emit(st.PlayerOnVolume,t)}},{key:"initVolumeSize",value:function(){this.data.dataLastVolume=this.INIT_VOLUME_SIZE,this.setAudioOn()}},{key:"setAudioOn",value:function(){var t=this.data.dataLastVolume||0;this.setVolume(t);var e=parseFloat(t,10),n=Math.floor(e*this.volumeBarColumnMaxHeight),r=this.volumeBarColumnTop+(this.volumeBarColumnMaxHeight-n);this.$volumeBarSize.style.marginTop=r+"px",this.$volumeBarSize.style.height=n+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=r+"px",this.data.audioOffClass=""}},{key:"setAudioOff",value:function(){this.setVolume(0),this.data.audioOffClass=this.options.cssName.volumeBarAudioOff;var t=this.getVolume();t>0&&(this.data.dataLastVolume=t),this.$volumeBarSize.style.height=this.volumeBarRodHeight+"px",this.$volumeBarSize.style.marginTop=this.volumeBarColumnRealTop-this.volumeBarRodHeightHalf+this.volumeBarColumnMaxHeight+"px",this.$volumeBarRod.style.top=this.volumeBarColumnRealTop+this.volumeBarColumnMaxHeight-this.volumeBarRodHeightHalf+"px"}},{key:"dragHandle",value:function(t){this.$volumeBarSize.style.marginTop=t+1+"px",this.$volumeBarSize.style.height=this.volumeBarColumnHeight-t+this.volumeBarRodHeight+"px";var e=this.getVolume();e<=0?this.setAudioOff(t):"true"==this.data.dataMute&&this.setAudioOn(t),this.setVolume(e)}},{key:"setVolumeSize",value:function(t){if((t=t.toFixed(2))>=1?t=1:t<.001&&(t=0),t!==this.data.dataVolumeSize){this.setVolume(t);var e=this.volumeBarColumnMaxHeight,n=e-t*e+this.volumeBarColumnTop;this.$volumeBarSize.style.marginTop=n+"px",this.$volumeBarSize.style.height=t*e+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=n+"px",t<=0?this.data.audioOffClass=this.options.cssName.volumeBarAudioOff:"true"==this.data.dataMute&&(this.data.audioOffClass="")}}}]),n}(cn);function Kn(){var t=fn()(['\n  <gp-wait class="goldplay-tip goldplay__waiting-bar" title="','" data-status="','">\n    <span class="goldplay__waiting-bar--icon">\n    <svg width="60px" height="60px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background: none;opacity:0.8">\n    <circle cx="50" cy="50" fill="none" stroke-linecap="round" r="40" stroke-width="8" stroke="#f6f6f6" stroke-dasharray="62.83185307179586 62.83185307179586" transform="rotate(17.8841 50 50)">\n    <animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="0.7s" begin="0s" repeatCount="indefinite">\n    </animateTransform>\n    </circle>\n    </svg>\n  </span>\n  <gp-speed class="goldplay__waiting-bar--speed">',"</gp-speed>\n  </gp-wait>\n  "]);return Kn=function(){return t},t}function Qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Jn=function(t){l()(n,t);var e=Qn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(Kn(),"title","status","speed")),v()(u()(t),"data",{title:"waiting",speed:"",status:"",display:"show"}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderUpdateSpeed,(function(e){"show"===t.data.display&&(t.data.speed=dn.formatBytes(e.speed)+" /s")})),this.events.on(st.StreamDataReady,(function(){t.hideWaiting()}))}},{key:"showWaiting",value:function(){var t=this.options.cssName,e=this.options.$screenContainer;e.querySelector("."+t.waitingBar)||e.prepend(this.element),this.data.display="show",this.show(),this.resetPosition()}},{key:"hideWaiting",value:function(){var t=this.options.cssName;this.options.$screenContainer.querySelector("."+t.waitingBar)&&(this.data.display="hide",this.data.speed="Loading...",this.hide())}}]),n}(cn);function Zn(){var t=fn()(['\n  <gp-alert class="goldplay-tip goldplay__alter-box" title="','" data-display="','">\n  <em title="close" class="goldplay__alter--close">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background:none;opacity:0.6" xml:space="preserve" width="20px" height="20px" viewBox="0 0 496.158 496.158">\n    <path style="fill:#ff3300;" d="M496.158,248.085c0-137.021-111.07-248.082-248.076-248.082C111.07,0.003,0,111.063,0,248.085\n    c0,137.002,111.07,248.07,248.082,248.07C385.088,496.155,496.158,385.087,496.158,248.085z"/>\n    <path style="fill:#FFFFFF;" d="M277.042,248.082l72.528-84.196c7.91-9.182,6.876-23.041-2.31-30.951\n    c-9.172-7.904-23.032-6.876-30.947,2.306l-68.236,79.212l-68.229-79.212c-7.91-9.188-21.771-10.216-30.954-2.306\n    c-9.186,7.91-10.214,21.77-2.304,30.951l72.522,84.196l-72.522,84.192c-7.91,9.182-6.882,23.041,2.304,30.951\n    c4.143,3.569,9.241,5.318,14.316,5.318c6.161,0,12.294-2.586,16.638-7.624l68.229-79.212l68.236,79.212\n    c4.338,5.041,10.47,7.624,16.637,7.624c5.069,0,10.168-1.749,14.311-5.318c9.186-7.91,10.22-21.77,2.31-30.951L277.042,248.082z"/>\n    </svg>\n  </em>\n  <span class="goldplay__alter--warn">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="30" height="30" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n    <path style="fill:#495A79;" d="M501.461,383.799L320.501,51.401C306.7,28.6,282.7,14.8,256,14.8s-50.7,13.8-64.501,36.601\n      L10.539,383.799C-3.259,407.501-3.56,435.701,9.941,459.4c13.499,23.699,37.798,37.8,65.099,37.8h361.92\n      c27.301,0,51.601-14.101,65.099-37.8C515.56,435.701,515.259,407.501,501.461,383.799z"/>\n    <path style="fill:#42516D;" d="M502.059,459.4c-13.499,23.699-37.798,37.8-65.099,37.8H256V14.8c26.7,0,50.7,13.801,64.501,36.601\n      L501.461,383.8C515.259,407.501,515.56,435.701,502.059,459.4z"/>\n    <path style="fill:#FFDE33;" d="M475.661,399.1L294.699,66.699C286.601,52.9,271.901,44.8,256,44.8s-30.601,8.101-38.699,21.899\n      L36.339,399.1c-8.399,14.101-8.399,31.199-0.298,45.3c8.099,14.399,22.798,22.8,39,22.8h361.92c16.201,0,30.901-8.401,39-22.8\n      C484.06,430.299,484.06,413.201,475.661,399.1z"/>\n    <path style="fill:#FFBC33;" d="M475.96,444.4c-8.099,14.399-22.798,22.8-39,22.8H256V44.8c15.901,0,30.601,8.101,38.699,21.899\n      L475.661,399.1C484.06,413.201,484.06,430.299,475.96,444.4z"/>\n    <g>\n      <path style="fill:#495A79;" d="M256,437.2c-16.538,0-30-13.462-30-30s13.462-30,30-30s30,13.462,30,30S272.538,437.2,256,437.2z"/>\n      <path style="fill:#495A79;" d="M286,317.2c0,16.538-13.462,30-30,30s-30-13.462-30-30v-150c0-16.538,13.462-30,30-30\n        s30,13.462,30,30V317.2z"/>\n    </g>\n    <g>\n      <path style="fill:#42516D;" d="M286,407.2c0-16.538-13.462-30-30-30v60C272.538,437.2,286,423.738,286,407.2z"/>\n      <path style="fill:#42516D;" d="M286,317.2v-150c0-16.538-13.462-30-30-30v210C272.538,347.2,286,333.738,286,317.2z"/>\n    </g>\n    </svg>\n  </span>\n  <gp-content class="goldplay__alter--content">',"</gp-content>\n  </gp-alert>\n  "]);return Zn=function(){return t},t}function tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var er=function(t){l()(n,t);var e=tr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(Zn(),"title","display","content|trim")),v()(u()(t),"data",{title:"alert",display:"default",content:""}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"bindEvent",value:function(){var t=this,e=this.options.$screenContainer,n=this.options.cssName;Sn(e).on("click","."+n.alertClose,(function(){t.hide()}))}},{key:"afterWatch",value:function(){"show"===this.data.display&&this.resetPosition()}},{key:"showBox",value:function(){var t=this.options.cssName,e=this.options.$screenContainer;e.querySelector("."+t.alertBox)||e.prepend(this.element),this.data.display="show",this.show()}},{key:"hideBox",value:function(){var t=this.options.cssName;this.options.$screenContainer.querySelector("."+t.alertBox)&&(this.data.display="hide",this.hide())}},{key:"show",value:function(){this.element.style.opacity=1,this.element.style.display="inline-block",this.resetPosition()}},{key:"hide",value:function(){this.element.style.opacity=0,this.element.style.display="none"}}]),n}(cn);function nr(){var t=fn()(['\n  <gp-time class="goldplay__control--timer">\n  <span gid="time" class="goldplay__control--timer-play">','</span>\n  <span gid="slash">','</span>\n  <span gid="total-time" class="goldplay__control--timer-total">',"</span>\n  </gp-time>\n  "]);return nr=function(){return t},t}function rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ir=function(t){l()(n,t);var e=rr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(nr(),"time","slash","totalTime")),v()(u()(t),"data",{time:"00:00",totalTime:"",slash:"/"}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"setTotalTime",value:function(t){var e=t.sourceData;this.data.totalTime=hn.formatHHMMSS(e.duration)}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderPlayListLoaded,(function(e){t.setTotalTime(e.loadData)}))}},{key:"updateTime",value:function(t){this.element.querySelector('[gid="time"]').innerHTML=t}},{key:"updateTotalTime",value:function(t){this.element.querySelector('[gid="total-time"]').innerHTML=t}}]),n}(cn);function or(){var t=fn()(['\n  <gp-speed class="goldplay__speed-bar" title="','">\n  <gp-overbox class="goldplay-hoverbox goldplay__speed-bar--box">\n  ','\n  </gp-overbox>\n  <gp-button class="goldplay__speed-bar--link">\n  ',"\n  </gp-button>\n  </gp-speed>\n  "]);return or=function(){return t},t}function ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function sr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ur(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cr=function(t){l()(n,t);var e=ar(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(or(),"title","speedListHTML|html","currentSpeedName")),v()(u()(t),"data",{title:"speed",currentSpeed:1,speedList:null,currentSpeedName:"ÂÄçÈÄü",speedListHTML:""}),v()(u()(t),"options",{}),t.options=r,t.speedList=t.options.player.options.speedList||U.c.speedList,t.updateSpeedListHTML(),Object.assign(t.data,r.data),t.init(),t.initProps(),t.showHideBar(),t}return a()(n,[{key:"initProps",value:function(){var t=this.options.cssName;this.$barBox=this.element.querySelector("."+t.speedBarBox)}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=this.options.$controlBarContainer;Sn(n).on("mouseover","."+e.speedBar,(function(){clearTimeout(r),t.showBarBoxHandle()}));var r;Sn(n).on("mouseout","."+e.speedBar,(function(e){r=setTimeout((function(){!function(e){var n=t.element,r={y:t.$barBox.offsetTop,x:n.offsetLeft};return r.width=n.offsetWidth,r.height=t.$barBox.offsetHeight,e.pageX>r.x&&e.pageX<r.x+r.width&&e.pageY>r.y&&e.pageY<r.y+r.height}(e)?t.hideBarBoxHandle():clearTimeout(r)}),U.c.hideBarBoxTime)})),Sn(this.element).on("click","[gp-node-li]",(function(e){var n=e.target,r=parseFloat(n.getAttribute("value"),10);if(r!==t.data.currentSpeed){t.data.currentSpeed=r;var i=t.speedList.filter((function(t){return t.value===r}));t.events.emit(st.PlayerSpeedTo,i[0]),t.updateSpeedListHTML()}}))}},{key:"showHideBar",value:function(){this.speedList.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var t=33+28*this.speedList.length,e=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-t+"px",this.$barBox.style.marginLeft=-e+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateSpeedListHTML",value:function(t){var e=this.speedList;if(!(e.length<=0)){void 0===t&&(t=this.data.currentSpeed);var n,r=e.slice(0,e.length).reverse(),i=sr(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.value===t?o.selected=!0:delete o.selected}}catch(t){i.e(t)}finally{i.f()}return this.data.speedListHTML=function(t){if(t){var e,n=["<ul>"],r=sr(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o="",a="";i.selected&&(o="gp-selected",a=" selected=".concat(i.selected)),n.push('\n    <li class="'.concat(o,'" gp-node-li value="').concat(i.value,'" ').concat(a,">").concat(i.name,"</li>\n    "))}}catch(t){r.e(t)}finally{r.f()}return n.push("</ul>"),n.join("")}}(r)}}}]),n}(cn);function lr(){var t=fn()(['\n  <gp-subtitle class="goldplay__subtitle">\n  </gp-subtitle>\n  ']);return lr=function(){return t},t}function fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var hr=function(t){l()(n,t);var e=fr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(lr())),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return n}(cn);function dr(){var t=fn()(['\n  <gp-rate class="goldplay__rate-bar" title="','">\n  <gp-overbox class="goldplay-hoverbox goldplay__rate-bar--box">\n  ','\n  </gp-overbox>\n  <gp-button class="goldplay__rate-bar--link">\n  ',"\n  </gp-button>\n  </gp-rate>\n  "]);return dr=function(){return t},t}function pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function yr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return vr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gr=function(t){l()(n,t);var e=pr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"rateList",[]),v()(u()(t),"defaultRate",{value:"600",name:"È´òÊ∏Ö"}),v()(u()(t),"template",t.createTemplate(dr(),"title","rateListHTML|html","currentRateName")),v()(u()(t),"data",{title:"stream rate",currentRate:"600",currentRateName:"È´òÊ∏Ö",rateListHTML:""}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.rateList=t.options.player.options.rateList||t.rateList,t.defaultRate=t.options.player.options.defaultRate||t.defaultRate,t.setDefaultRate(),t.updateRateListHTML(),t.init(),t.initProps(),t.showHideBar(),t}return a()(n,[{key:"initProps",value:function(){var t=this.options.cssName;this.$barBox=this.element.querySelector("."+t.rateBarBox)}},{key:"setDefaultRate",value:function(){var t=this;if(!(this.rateList.length<=0)){var e=this.rateList.find((function(e){return String(e.value)===String(t.defaultRate.value)}));e?(this.data.currentRateName=e.name,this.data.currentRate=e.value):(this.data.currentRateName=this.rateList[0].name,this.data.currentRate=this.rateList[0].value)}}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=this.options.$controlBarContainer;Sn(n).on("mouseover","."+e.rateBar,(function(){clearTimeout(r),t.showBarBoxHandle()}));var r;Sn(n).on("mouseout","."+e.rateBar,(function(e){r=setTimeout((function(){!function(e){var n=t.element,r={y:t.$barBox.offsetTop,x:n.offsetLeft};return r.width=n.offsetWidth,r.height=t.$barBox.offsetHeight,e.pageX>r.x&&e.pageX<r.x+r.width&&e.pageY>r.y&&e.pageY<r.y+r.height}(e)?t.hideBarBoxHandle():clearTimeout(r)}),U.c.hideBarBoxTime)})),Sn(this.element).on("click","[gp-node-li]",(function(e){var n=e.target.getAttribute("value");if(n!==t.data.currentRate){t.data.currentRate=n;var r=t.rateList.filter((function(t){return t.value===n}));t.events.emit(st.PlayerChangeRate,r[0]),t.data.currentRateName=r[0].name,t.updateRateListHTML(),t.hideBarBoxHandle()}}))}},{key:"showHideBar",value:function(){var t=this.rateList;t&&t.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var t=33+28*this.rateList.length,e=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-t+"px",this.$barBox.style.marginLeft=-e+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateRateListHTML",value:function(t){var e=this.rateList;if(!(e.length<=0)){void 0===t&&(t=this.data.currentRate);var n,r=e.slice(0,e.length).reverse(),i=yr(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.value===t?o.selected=!0:delete o.selected}}catch(t){i.e(t)}finally{i.f()}return this.data.rateListHTML=function(t){if(t){var e,n=["<ul>"],r=yr(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o="",a="";i.selected&&(o="gp-selected",a=" selected=".concat(i.selected)),n.push('\n    <li class="'.concat(o,'" gp-node-li value="').concat(i.value,'" ').concat(a,">").concat(i.name,"</li>\n    "))}}catch(t){r.e(t)}finally{r.f()}return n.push("</ul>"),n.join("")}}(r)}}}]),n}(cn);function mr(){var t=fn()(['\n  <gp-setting class="goldplay__setting-bar">\n  </gp-setting>\n  ']);return mr=function(){return t},t}function br(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var wr=function(t){l()(n,t);var e=br(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(mr())),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return n}(cn);function _r(){var t=fn()(['\n  <gp-button class="goldplay__control--fullpage" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "]);return _r=function(){return t},t}function kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function xr(){var t=fn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20" height="20" viewBox="0 0 24 24">\n<path d="M3.5 6h17a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-17a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5zM6 9v6h12V9H6z" fill="#f1f1f1"></path>\n</svg>\n']);return xr=function(){return t},t}function Pr(){var t=fn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20" height="20" viewBox="0 0 24 24">\n  <path d="M2.5 4h19a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-19a.5.5 0 0 1-.5-.5v-15a.5.5 0 0 1 .5-.5zM5 7v10h14V7H5z" fill="#f1f1f1"></path>\n</svg>\n']);return Pr=function(){return t},t}var Er=Xe.create(Pr(),"fullpageHide"),Sr=Xe.create(xr(),"fullpageExitHide"),Tr=function(t){l()(n,t);var e=kr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"containerOriginStyle",""),v()(u()(t),"template",t.createTemplate(_r(),"title","status","icon|html")),v()(u()(t),"data",{fullpageHide:"",fullpageExitHide:"none",status:"",icon:Er,title:"fullpage"}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){"fullpage"===this.data.status?(this.data.fullpageHide="none",this.data.fullpageExitHide="inline-block",this.data.title="exit fullspage",this.data.icon=Sr):(this.data.fullpageHide="inline-block",this.data.fullpageExitHide="none",this.data.title="fullpage",this.data.icon=Er)}},{key:"initProps",value:function(){var t=this.options;this.$container=this.options.$container,this.$screenContainer=t.$screenContainer,this.$controlBarContainer=this.getComponent("controlBarContainer").element,this.originWidth=t.$container.offsetWidth,this.originHeight=t.$container.offsetHeight,this.containerOriginStyle=t.$container.getAttribute("style"),this.screenContainerOrginStyle=this.$screenContainer.getAttribute("style"),this.controlContainerOrginWidth=this.$controlBarContainer.style.width}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=document,r=window;Sn(this.$controlBarContainer).on("click","."+e.fullPage,(function(){var e=t.data.status;"fullscreen"===t.getComponent("fullScreen").data.status&&Q.exitFullscreen(),"fullpage"===e?t.exitFullPage():t.fullPage()})),this.eventsList.esckeyup=this.addEventListener(n,"keyup",(function(e){27===e.keyCode&&"fullpage"===t.data.status&&t.exitFullPage()})),this.eventsList.windowresize=this.addEventListener(r,"resize",(function(){if("fullpage"===t.data.status){var e=Q.getInnerWidthHeight();t.resizeTo(e.width,e.height),t.resetPosition()}}))}},{key:"fullPage",value:function(){this.data.status="fullpage";var t=this.options,e=this.options.cssName,n=Q.getInnerWidthHeight();this.saveOriginPosition(),t.$container.classList.add(e.containerFullPage),this.resizeTo(n.width,n.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){var t=this.getComponent("progressBar");this.posterOriginStyle=this.getComponent("poster").element.getAttribute("style"),this.originScroll={scrollX:scrollX,scrollY:scrollY},this.progressBarOriginLeft=t.progressBarLeft,this.progressBarOriginWidth=t.progressBarWidth,this.progressBarPlayWidthRate=t.getProgressPlayLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadWidthRate=t.getProgressLoadLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadLeftRate=(t.getProgressLoadLeftWidth().offsetLeft-this.progressBarOriginLeft)/this.progressBarOriginWidth}},{key:"setProgressBarPosition",value:function(){var t=this.getComponent("progressBar"),e=t.progressBarWidth,n=t.progressBarLeft,r=e*this.progressBarPlayWidthRate,i=e*this.progressBarLoadWidthRate,o=e*this.progressBarLoadLeftRate;t.setProgressPosition(r),t.setProgressLoadLeftWidth(o+n,i),this.getComponent("progressBar").clearDragDotTop()}},{key:"resizeTo",value:function(t,e){var n=this.options,r=n.player,i=r.controlBarAutoHide?e:e-r.controlBarHeight;r.$screenContainer.style.width=t+"px",r.$screenContainer.style.height=i+"px",n.$container.style.width=t+"px",n.$container.style.height=e+"px"}},{key:"resetPosition",value:function(){var t=this.options;this.setProgressBarPosition(),t.player.resizeScreen(),this.getComponent("bigPlayButton").resetPosition(),this.getComponent("poster").resetPosition(),this.getComponent("waitingBar").resetPosition(),this.getComponent("controlBarContainer").resetPosition()}},{key:"exitFullPage",value:function(){this.data.status="exitfullpage";var t=this.options.cssName;this.saveOriginPosition(),this.$container.classList.remove(t.containerFullPage),this.resetScreen()}},{key:"resetScreen",value:function(){this.$container.setAttribute("style",this.containerOriginStyle),this.$screenContainer.setAttribute("style",this.screenContainerOrginStyle),this.$controlBarContainer.style.width=this.controlContainerOrginWidth,this.getComponent("poster").element.setAttribute("style",this.posterOriginStyle),scrollTo(this.originScroll.scrollX,this.originScroll.scrollY),this.resetPosition()}}]),n}(cn);function Rr(){var t=fn()(['\n  <gp-button class="goldplay__control--fullscreen" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "]);return Rr=function(){return t},t}function Br(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Lr='\n<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreen" style="display:${\'fullscreenHide\'}" width="20" height="20" viewBox="0 0 24 24">\n<path d="M15 5.057V2h6.5a.5.5 0 0 1 .5.5V9h-2.943V5.057H15zm-6 0H5.057V9H2V2.5a.5.5 0 0 1 .5-.5H9v3.057zM15 22v-2.943h4.057V15H22v6.5a.5.5 0 0 1-.5.5H15zm-6 0H2.5a.5.5 0 0 1-.5-.5V15h3.057v4.057H9V22z" fill="#f1f1f1"></path>\n</svg>\n',Ar=function(t){l()(n,t);var e=Br(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(Rr(),"title","status","icon|html")),v()(u()(t),"data",{fullscreenHide:"inline-block",fullscreenExitHide:"none",status:"",icon:Lr,title:"fullscreen"}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){"fullscreen"===this.data.status?(this.data.fullscreenHide="none",this.data.fullscreenExitHide="inline-block",this.data.title="exit fullscreen",this.data.icon='\n<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreenExit" style="display:${\'fullscreenExitHide\'}"  width="20" height="20" viewBox="0 0 24 24">\n<path d="M22 5.943V9h-6.5a.5.5 0 0 1-.5-.5V2h2.943v3.943H22zm-20 0h3.943V2H9v6.5a.5.5 0 0 1-.5.5H2V5.943zM22 15v2.943h-4.057V22H15v-6.5a.5.5 0 0 1 .5-.5H22zM2 15h6.5a.5.5 0 0 1 .5.5V22H5.943v-4.057H2V15z" fill="#f1f1f1"></path>\n</svg>\n'):(this.data.fullscreenHide="inline-block",this.data.fullscreenExitHide="none",this.data.title="fullscreen",this.data.icon=Lr)}},{key:"initProps",value:function(){this.getComponent("fullPage").initProps.call(this)}},{key:"bindEvent",value:function(){var t=this,e=this.options.$container,n=this.options.cssName,r=document,i=window;this.eventsList.fullscreenchange=this.addEventListener(r,"fullscreenchange",(function(){if(document.fullscreenElement||document.webkitFullscreenElement)t.fullScreen();else{var r=t.getComponent("fullPage");"fullpage"===r.data.status?(e.classList.remove(n.containerFullScreen),t.data.status="exitfullscreen",r.fullPage()):t.exitFullScreen()}})),this.eventsList.windowresize=this.addEventListener(i,"resize",(function(){document.fullscreenElement&&(t.resizeTo(screen.width,screen.height-(window.outerHeight-window.innerHeight)),t.resetPosition())})),Sn(this.$controlBarContainer).on("click","."+n.fullScreen,(function(){var e=t.data.status;t.saveOriginPosition(),"fullscreen"===e?Q.exitFullscreen():Q.Fullscreen()}))}},{key:"fullScreen",value:function(){this.data.status="fullscreen";var t=this.options,e=this.options.cssName,n={width:screen.width,height:screen.height-(outerHeight-innerHeight)};Q.isSafari()&&(n.height=n.height+38),t.$container.classList.add(e.containerFullScreen),this.resizeTo(n.width,n.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){this.getComponent("fullPage").saveOriginPosition.call(this)}},{key:"resizeTo",value:function(t,e){this.getComponent("fullPage").resizeTo.call(this,t,e)}},{key:"resetPosition",value:function(){this.getComponent("fullPage").resetPosition.call(this)}},{key:"setProgressBarPosition",value:function(){this.getComponent("fullPage").setProgressBarPosition.call(this)}},{key:"exitFullScreen",value:function(){this.data.status="exitfullscreen";var t=this.options.cssName;this.saveOriginPosition(),this.options.$container.classList.remove(t.containerFullScreen),this.resetScreen(),this.saveOriginPosition()}},{key:"resetScreen",value:function(){this.getComponent("fullPage").resetScreen.call(this)}}]),n}(cn);function Dr(){var t=fn()(['\n  <gp-button class="goldplay__screen--bigplay" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "]);return Dr=function(){return t},t}function Cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function Or(){var t=fn()(['<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nwidth="','" height="','" viewBox="0 0 438.533 438.533" style="','" xml:space="preserve">\n<g>\n<path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0\n c-39.781,0-76.466,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267\n s9.804,76.463,29.407,110.062c19.607,33.585,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407\n s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.599,29.403-70.287,29.403-110.062\n C438.533,179.489,428.732,142.795,409.133,109.203z M328.904,234.966L173.588,326.33c-2.856,1.711-5.902,2.567-9.136,2.567\n c-3.045,0-6.09-0.764-9.135-2.286c-6.09-3.614-9.136-8.939-9.136-15.985V127.907c0-7.041,3.046-12.371,9.136-15.987\n c6.28-3.427,12.369-3.333,18.271,0.284l155.316,91.36c6.088,3.424,9.134,8.663,9.134,15.703\n C338.038,226.308,334.992,231.537,328.904,234.966z" fill="','">\n</g>\n</svg>\n']);return Or=function(){return t},t}var Ir=Xe.create(Or(),"width","height","iconStyle","fillColor"),Mr=function(t){l()(n,t);var e=Cr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"template",t.createTemplate(Dr(),"title","status","icon|html")),v()(u()(t),"data",{titie:"click to play",iconStyle:"opacity:0.5",display:"hide",status:"",width:100,height:100,fillColor:"#999",icon:Ir}),v()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){if("show"===this.data.display){var t=(this.element.parentNode.offsetHeight-this.data.height)/2;this.data.iconStyle="opacity:0.7;margin-top:".concat(t,"px")}}},{key:"resetPosition",value:function(){if("show"===this.data.display){var t=this.element.parentNode,e=t.offsetWidth,n=t.offsetHeight;!0===this.options.player.controlBarAutoHide&&(n-=this.options.player.controlBarHeight);var r=t.offsetTop,i=t.offsetLeft;this.element.style.width=e+"px",this.element.style.height=n+"px",this.element.style.top=r+"px",this.element.style.left=i+"px"}}},{key:"bindEvent",value:function(){var t=this,e=this.options.$screenContainer,n=this.options.cssName;Sn(e).on("click","."+n.bigPlayButton,(function(){t.events.emit(st.PlayerOnPlay,t),t.events.emit(st.ControlBarPlay,t),t.hide()})),Sn(e).on("mouseover","."+n.bigPlayButton,(function(){t.data.fillColor=t.options.bigPlayButtonColor||"#fff"})),Sn(e).on("mouseout","."+n.bigPlayButton,(function(e){var n=t.element,r={y:n.offsetTop,x:n.offsetLeft};r.width=n.offsetWidth,r.height=n.offsetHeight,e.pageX>r.x&&e.pageX<r.x+r.width&&e.pageY>r.y&&e.pageY<r.y+r.height||(t.data.fillColor="#999")}))}},{key:"show",value:function(){var t=this;"show"!==this.data.display&&(this.data.display="show",this.element.style.opacity="1",setTimeout((function(){t.element.style.display="inline-block"}),1))}},{key:"hide",value:function(){"hide"!==this.data.display&&(this.element.style.opacity="0",this.data.display="hide",this.element.style.display="none")}}]),n}(cn);function Nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ur=function(t){l()(n,t);var e=Nr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),(t=e.call(this,r)).options=Object.assign(t.options,r),t.componentsController=t.options.componentsController,t.init(),t}return a()(n,[{key:"render",value:function(){var t=this,e=L.createEl("gp-button-block");e.classList.add("goldplay__control--button-block"),n.componentList.forEach((function(n){var r=t.componentsController.getComponent(n);e.appendChild(r.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t){n.componentList.push(t)}}]),n}(cn);v()(Ur,"componentList",["playButton","pauseButton","replayButton"]);var Fr=Ur;function Hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var jr=function(t){l()(n,t);var e=Hr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),(t=e.call(this,r)).options=Object.assign(t.options,r),t.componentsController=t.options.componentsController,t.init(),t}return a()(n,[{key:"render",value:function(){var t=this,e=L.createEl("gp-control-sidebar");e.classList.add("goldplay__control--sidebar"),n.componentList.forEach((function(n){var r=t.componentsController.getComponent(n);e.appendChild(r.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t,e){(e<0||e>n.componentList.length)&&(e=n.componentList.length),n.componentList.splice(e,0,t)}}]),n}(cn);v()(jr,"componentList",["speedBar","rateBar","volumeBar","fullPage","fullScreen"]);var Wr=jr;function $r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Vr=function(t){l()(n,t);var e=$r(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),(t=e.call(this,r)).options=Object.assign(t.options,r),t.componentsController=t.options.componentsController,t.init(),t}return a()(n,[{key:"render",value:function(){var t=this,e=L.createEl("gp-control-nearside");e.classList.add("goldplay__control--button-block"),n.componentList.forEach((function(n){var r=t.componentsController.getComponent(n);e.appendChild(r.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t,e){(e<0||e>n.componentList.length)&&(e=n.componentList.length),n.componentList.splice(e,0,t)}}]),n}(cn);v()(Vr,"componentList",["playControl","timer"]);var Yr=Vr,zr={BaseComponent:cn,controlBarContainer:bn,bigPlayButton:Mr,poster:vn,progressBar:An,playButton:On,pauseButton:Fn,replayButton:Wn,volumeBar:qn,waitingBar:Jn,alertBox:er,timer:ir,speedBar:cr,subtitle:hr,rateBar:gr,settingBar:wr,fullPage:Tr,fullScreen:Ar,playControl:Fr,sideControlBar:Wr,nearControlBar:Yr};function Xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Gr=He,qr=function(t){return t.substr(0,1).toUpperCase()+t.substr(1)},Kr=function(t){l()(n,t);var e=Xr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"allComponents",{}),v()(u()(t),"controlBarController",null),v()(u()(t),"options",{cssName:Gr}),t.options=Object.assign(t.options,r),t.options.componentsController=u()(t),t.initComponents(),t.$container=t.options.$container,t.$screenContainer=t.options.$screenContainer,t.$canvas=t.options.$canvas,t.$audioContainer=t.options.$audioContainer,t.$audio=t.options.$audio,t.options.$controlBarContainer=t.controlBarContainer.element,t.bindEvent(),t}return a()(n,[{key:"run",value:function(){for(var t in this.controlBarController&&this.controlBarController.run(),zr)this[t]&&"function"==typeof this[t].registerMethod&&this[t].registerMethod()}},{key:"initComponents",value:function(){for(var t in zr){var e=zr[t];this.allComponents[t]||this.createComponent(e,t)}}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.PlayerLoadedMetaData,(function(){t.poster.hide()})),this.events.on(st.AudioPlayerPlayFail,(function(){t.drawBigPlayButton(),t.getComponent("poster").hide(),t.events.emit(st.PlayerOnPause,t),t.events.emit(st.ControlBarPause,t)})),this.bindAlertBoxEvent(),this.bindWaitingBarEvent()}},{key:"bindWaitingBarEvent",value:function(){this.waitingBar.initProps(),this.waitingBar.bindEvent()}},{key:"drawBigPlayButton",value:function(){this.$screenContainer.prepend(this.bigPlayButton.element),this.bigPlayButton.show(),this.bigPlayButton.bindEvent(),this.bigPlayButton.resetPosition()}},{key:"setControlBarController",value:function(t){this.controlBarController=t}},{key:"getControlBarController",value:function(){return this.controlBarController||this.options.player.controlBarContainer}},{key:"bindAlertBoxEvent",value:function(){this.alertBox.initProps(),this.alertBox.bindEvent()}},{key:"drawPoster",value:function(){this.$screenContainer.prepend(this.poster.element),this.poster.data.display="show",this.poster.bindEvent(),this.poster.resetPosition()}},{key:"createComponent",value:function(t,e){var n=qr(e);this["set"+n](new t(this.options)),this[e]=this["get"+n](),this.allComponents[e]||(this.allComponents[e]=this[e])}},{key:"getComponent",value:function(t){return this.allComponents[t]||zr[t]&&this.createComponent(zr[t],t),this.allComponents[t]}},{key:"resetAllComponents",value:function(){var t=this,e=Object.getOwnPropertyNames(this),n={};e.forEach((function(e){zr[e]&&(n[e]=t[e])})),this.allComponents=n}},{key:"getAllComponents",value:function(){return this.allComponents}}]),n}(C);for(var Qr in Kr.addComponet=function(t){var e=qr(t);Kr.prototype["set"+e]=function(e){this[t]=e},Kr.prototype["get"+e]=function(){return this[t]}},zr)Kr.addComponet(Qr);var Jr=Kr;function Zr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ti=He,ei=function(t){l()(n,t);var e=Zr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),v()(u()(t),"player",null),v()(u()(t),"loadData",null),v()(u()(t),"options",{cssName:ti}),t.options=Object.assign(t.options,r),t.player=t.options.player,t.loadData=t.player.loadData,t.componentsController=t.player.componentsController,t.$screenContainer=t.player.$screenContainer,t.initComponents(),t}return a()(n,[{key:"initComponents",value:function(){var t=this.componentsController;this.options.controlBar?Object.assign(this,t.getAllComponents()):Object.assign(this,{BaseComponent:t.getComponent("BaseComponent"),waitingBar:t.getComponent("waitingBar")}),this.container=this.controlBarContainer}},{key:"run",value:function(){this.drawLayout(),this.bindEvent(),this.player.autoPlay?this.events.emit(st.ControlBarPlay):this.events.emit(st.ControlBarPause)}},{key:"bindEvent",value:function(){this.bindWaitingBarEvent(),this.options.controlBar&&(this.timer.setTotalTime(this.loadData),this.bindSpeedEvent(),this.bindContainerEvent(),this.bindTimerEvent(),this.bindPlayEvent(),this.bindProgressEvent(),this.bindRateEvent(),this.bindVolumeEvent(),this.bindFullPage(),this.bindFullScreen())}},{key:"bindContainerEvent",value:function(){this.container.initProps(),this.container.bindEvent()}},{key:"bindTimerEvent",value:function(){this.timer.initProps(),this.timer.bindEvent()}},{key:"bindSpeedEvent",value:function(){this.speedBar.bindEvent(),this.speedBar.resetBoxPosition()}},{key:"bindRateEvent",value:function(){this.rateBar.bindEvent(),this.rateBar.resetBoxPosition()}},{key:"bindFullPage",value:function(){this.fullPage.initProps(),this.fullPage.bindEvent()}},{key:"bindFullScreen",value:function(){this.fullScreen.initProps(),this.fullScreen.bindEvent()}},{key:"bindWaitingBarEvent",value:function(){var t=this;[st.PlayerWait,st.PlayerSeeking,st.PlayerReset,st.PlayerChangeRate,st.PlayerChangeSrc].forEach((function(e){t.events.on(e,(function(){t.waitingBar.showWaiting()}))})),this.events.on(st.PlayerSeekEnd,(function(){t.waitingBar.hideWaiting()})),this.events.on(st.PlayerPlay,(function(){t.waitingBar.hideWaiting()})),this.events.on(st.PlayerPlaying,(function(){t.waitingBar.hideWaiting()}))}},{key:"bindPlayEvent",value:function(){var t=this;this.events.on(st.ControlBarPlay,(function(){"pause"!==t.pauseButton.data.status&&(t.pauseButton.data.status="pause"),t.replayButton.hide(),t.playButton.hide(),t.pauseButton.show(),t.bigPlayButton.hide()})),this.events.on(st.ControlBarPause,(function(){"pause"!==t.player.status&&(t.pauseButton.data.status="pause"),t.playButton.show(),t.pauseButton.hide()})),this.events.on(st.PlayerEnd,(function(){t.replayButton.show(),t.pauseButton.hide(),t.playButton.hide()})),this.events.on(st.PlayerPlay,(function(){t.events.emit(st.ControlBarPlay,t)})),this.events.on(st.PlayerPause,(function(){t.events.emit(st.ControlBarPause,t)})),this.events.on(st.PlayerOnSeek,(function(e){e<1e3*t.loadData.sourceData.duration&&t.events.emit(st.ControlBarPauseLoading)})),this.events.on(st.ControlBarPauseLoading,(function(){"pauseloading"!==t.pauseButton.data.status&&(t.pauseButton.data.status="pauseloading"),t.replayButton.hide(),t.playButton.hide(),t.pauseButton.show()})),Sn(this.options.$container).on("click","."+ti.playButton,(function(){"play"!==t.player.status&&t.events.emit(st.PlayerOnPlay,t)})),Sn(this.options.$container).on("click","."+ti.pauseButton,(function(){"pause"!==t.player.status&&t.events.emit(st.PlayerOnPause,t)})),Sn(this.options.$container).on("click","."+ti.replayButton,(function(){t.events.emit(st.PlayerOnSeek,t.player.startTime)}))}},{key:"bindProgressEvent",value:function(){this.progressBar.initProps(),this.progressBar.bindEvent()}},{key:"bindVolumeEvent",value:function(){this.volumeBar.initProps(),this.volumeBar.initVolumeSize(),this.volumeBar.bindEvent()}},{key:"drawLayout",value:function(){var t=this.options.$container;if(this.container){var e=this.container.element;t.append(e)}}},{key:"destroy",value:function(){this.removeEventListenerGlobal(),this.container&&this.container.destroy()}},{key:"removeEventListenerGlobal",value:function(){this.progressBar&&this.progressBar.progressDragEvent&&this.progressBar.progressDragEvent.removeEventListenerAll(),this.volumeBar&&this.volumeBar.volumeDragEvent&&this.volumeBar.volumeDragEvent.removeEventListenerAll(),this.fullPage&&this.fullPage.removeEventListenerAll(),this.fullScreen&&this.fullScreen.removeEventListenerAll()}}]),n}(C),ni=n(44),ri=n.n(ni);function ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var oi=function(t){l()(n,t);var e=ii(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"isLast",!1),r.type=t.type,r.libPath=t.libPath,r.player=t.player,r.init(),r}return a()(n,[{key:"init",value:function(){"ts"==this.type&&this.initNornalWorker(),this.bindEvent(),this.loadjs()}},{key:"initNornalWorker",value:function(){this.processor=this.initWorker()}},{key:"initWorker",value:function(){var t=this,e=ri()(138);return e.onmessage=function(e){var n=e.data,r=n.type,i=n.data;switch(r){case"dataProcessorReady":t.onDataProcessorReady();break;case"decoded":t.onDecoded(i);break;case"demuxedAAC":t.onDemuxedAAC(i);break;case"partEnd":t.onPartEnd(i);break;case"resetEnd":t.onResetEnd();break;case"maxPTS":t.onMaxPTS(i);break;case"flushEnd":t.onFlushEnd(i)}},e}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.DemuxStartDemux,this.onStartDemux.bind(this)),this.events.on(st.DemuxLast,(function(){t.isLast=!0})),this.events.on(st.DecodeFlush,(function(){t.flush()}))}},{key:"flush",value:function(){this.processor.postMessage({type:"flush"})}},{key:"loadjs",value:function(){this.processor.postMessage({type:"loadwasm",libPath:this.libPath,codec:this.options.codec})}},{key:"reset",value:function(){this.isLast=!1,this.processor.terminate(),this.initNornalWorker(),this.loadjs()}},{key:"onFlushEnd",value:function(t){this.events.emit(st.DecodeFlushEnd,t)}},{key:"onMaxPTS",value:function(t){this.events.emit(st.PlayerMaxPTS,t.maxAudioPTS,t.maxVideoPTS)}},{key:"onDemuxedAAC",value:function(t){this.events.emit(st.DemuxAAC,t)}},{key:"onDataProcessorReady",value:function(){this.player.seeking||this.player.reseting?this.events.emit(st.ProcessorResetEnd):this.events.emit(st.DataProcessorReady)}},{key:"onStartDemux",value:function(t){this.player.reseting||(this.logger.info("onStartDemux","postMessage to demux"),t&&t.arrayBuffer&&t.arrayBuffer.byteLength>0?this.processor.postMessage({type:"startDemux",data:t.arrayBuffer,isLast:this.isLast},[t.arrayBuffer.buffer]):this.logger.error("onStartDemux","data is null","data:",t))}},{key:"onDecoded",value:function(t){this.player.reseting||this.events.emit(st.DecodeDecoded,t)}},{key:"onPartEnd",value:function(t){this.events.emit(st.DecodeApppendEnd,t)}},{key:"onResetEnd",value:function(){this.events.emit(st.ProcessorResetEnd)}},{key:"destroy",value:function(){this.processor&&this.processor.terminate()}}]),n}(N);function ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var si=function(t){l()(n,t);var e=ai(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"currentIndex",null),v()(u()(r),"retryTime",0),v()(u()(r),"dataReady",{audioReady:!1,imageReady:!1}),v()(u()(r),"hasInit",!1),v()(u()(r),"loadDataStatus","loading"),v()(u()(r),"duration",0),v()(u()(r),"tsNumber",0),r.loadData=t.loadData,r.imagePlayer=t.imagePlayer,r.audioPlayer=t.audioPlayer,r.player=t.player,r.bindEvent(),r}return a()(n,[{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoadDataRead,(function(e){t.onRead(e)})),this.events.on(st.DemuxVideo,(function(e,n){t.onVideoDemuxed(e,n)})),this.events.on(st.DemuxAAC,(function(e){t.onAACDemuxed(e)})),this.events.on(st.DecodeDecoded,(function(e){t.onDecoded(e)})),this.events.on(st.DecodeApppendEnd,(function(e){t.onAppendEnd(e)})),this.events.on(st.ImagePlayerReady,(function(){t.logger.info("bindevent","Events.ImagePlayerReady"),t.checkDataReady("imageReady")})),this.events.on(st.AudioPlayerDataReady,(function(){t.logger.info("bindevent","Events.AudioPlayerDataReady"),t.player.receiveAACTime=null,t.checkDataReady("audioReady")})),this.events.on(st.AudioPlayerWait,(function(){t.dataReady.audioReady=!1,t.events.emit(st.PlayerWait,"audioPlayer")})),this.events.on(st.ImagePlayerWait,(function(){t.dataReady.imageReady=!1,t.events.emit(st.PlayerWait,"imagePlayer")})),this.events.on(st.ImagePlayerEnd,(function(){t.logger.info("bindevent","........imageplayer end"),t.events.emit(st.PlayerEnd)})),this.events.on(st.PlayerWait,(function(){t.logger.warn("player status wait"),t.player.status="wait","loadend"===t.loadDataStatus&&(t.loadDataStatus="loading",t.loadNext())})),this.events.on(st.PlayerLoadNext,(function(){"loadend"===t.loadDataStatus&&(t.loadDataStatus="loading",t.loadNext())})),this.events.on(st.DecodeFlushEnd,(function(e){t.logger.info("flushend>>>>>>>>>>>>>>>",e),t.imagePlayer.maxPTS=e}))}},{key:"checkDataReady",value:function(t){var e=this.dataReady;e[t]=!0;for(var n=Object.keys(e),r=0,i=0;i<n.length&&e[n[i]];i++)r++;r==n.length&&this.events.emit(st.StreamDataReady)}},{key:"setBaseInfo",value:function(t){this.duration=t.duration,this.tsNumber=t.tsNumber}},{key:"reset",value:function(){this.dataReady={audioReady:!1,imageReady:!1},this.currentIndex=null,this.loadDataStatus="loading"}},{key:"startLoad",value:function(t){this.logger.info("startLoad","index:",t),this.currentIndex=t,this.player.currentIndex=t,this.events.emit(st.LoadDataReadBufferByNo,t)}},{key:"loadNext",value:function(){this.player.reseting||(this.currentIndex>=this.tsNumber?this.logger.info("loadNext","load end","currentIndex",this.currentIndex,"tsNumber:",this.tsNumber):(this.currentIndex+=1,this.player.currentIndex=this.currentIndex,this.logger.info("loadNext","load next ts","tsno:",this.currentIndex),this.events.emit(st.LoadDataReadBufferByNo,this.currentIndex)))}},{key:"onDecoded",value:function(t){var e=this;t.forEach((function(t){e.player.reseting||t.pts>=e.player.currentTime&&e.imagePlayer.push(t)}))}},{key:"onAppendEnd",value:function(t){return t?(this.logger.info("onAppendEnd","events.decodeFlush",t),void this.events.emit(st.DecodeFlush)):(this.logger.info("onAppendEnd","start load next ts condition",this.checkBuffer(),this.currentIndex),this.checkBuffer()&&null!==this.currentIndex?(this.logger.info("onAppendEnd","load next ts. currentIndex:",this.currentIndex),void this.loadNext()):(this.loadDataStatus="loadend",void this.logger.info("onAppendEnd","load ts stop")))}},{key:"onAACDemuxed",value:function(t){var e=this;this.player.reseting||(t.length||this.audioPlayer.send({}),t.forEach((function(t){(t.PTS>=e.player.currentTime||t.audioEnd)&&(!e.player.receiveAACTime&&e.player.seeking&&(e.player.receiveAACTime=Date.now()),e.audioPlayer.send(t))})))}},{key:"onVideoDemuxed",value:function(t){this.player.reseting||this.events.emit(st.DecodeStartDecode,t)}},{key:"checkBuffer",value:function(){var t=this.player,e=t.currentTime;return!((t.buffer()[1]||0)-e>=t.maxBufferLength)}},{key:"onRead",value:function(t){this.player.reseting?console.error("onRead reseting"):t&&t.arrayBuffer&&t.no===this.currentIndex?(this.retryTime=0,this.logger.warn("onRead","get stream data"),t.no===this.tsNumber&&(this.logger.info("onRead","the last ts"),this.events.emit(st.DemuxLast)),this.events.emit(st.DemuxStartDemux,t)):this.logger.error("onRead","load ts failred","tsno:",this.currentIndex)}}]),n}(N);function ui(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ci=function(t){l()(n,t);var e=ui(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"maxBufferLength",0),v()(u()(r),"duration",0),v()(u()(r),"pool",[]),v()(u()(r),"start",0),v()(u()(r),"end",0),v()(u()(r),"offset",0),v()(u()(r),"fps",25),r.maxBufferLength=t.maxBufferLength,r}return a()(n,[{key:"push",value:function(t){var e=this.pool,n=e.length;0===n&&(this.offset=t.pts,this.start=t.pts,this.fps=t.fps);var r=this.insertSort(e,t);e[r-1]&&(e[r-1].duration=e[r].pts-e[r-1].pts),e[r+1]&&(e[r].duration=e[r+1].pts-e[r].pts),this.end=this.pool[n].pts+this.pool[n].duration,this.duration=this.end-this.start}},{key:"insertSort",value:function(t,e){var n=t.length;if(0===n)return t.push(e),0;for(var r=0;r<n;r++)if(e.pts<t[r].pts){for(var i=n;i>r;)t[i]=t[i-1],i--;return t[r]=e,r}return t.push(e),t.length-1}},{key:"reset",value:function(){this.duration=0,this.pool=[],this.start=0,this.end=0,this.offset=0}},{key:"findByIndex",value:function(t){var e=this.buffer.length;return t<e?(this.currentIndex=t,this.buffer[t]):(this.logger.error("input index ".concat(t,"is not found, current maxIndex is ").concat(e-1)),null)}},{key:"find",value:function(t){var e=this.pool,n=e.length;if(this.isBuffered(t)&&0!==n){var r=this.findIndex(t);if(-1!==r){var i=e[r];return this.checkBuffer(t),i}}}},{key:"findIndex",value:function(t){return this.pool.findIndex((function(e){var n=parseInt(e.pts);return t>=n&&t<n+e.duration}))}},{key:"isBuffered",value:function(t){return t>=this.start&&t<this.end}},{key:"checkBuffer",value:function(t){if(this.duration>this.maxBufferLength){if(t>this.start){var e=this.findIndex(t),n=this.pool.splice(0,e);n.forEach((function(t){null})),n=null,this.start=this.pool[0].pts,this.duration=this.end-this.start}return!1}return this.events.emit(st.PlayerLoadNext),!0}},{key:"buffer",value:function(){return{start:this.start,end:this.end}}}]),n}(N),li=n(77),fi=n.n(li),hi=n(62),di=n.n(hi);function pi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var yi=function(t){l()(n,t);var e=pi(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"canvas",null),r.setCanvas(t.canvas),r.setRender(),r}return a()(n,[{key:"setCanvas",value:function(t){this.canvas=t}},{key:"setRender",value:function(t){this.render=fi.a.attach(t||this.canvas)}},{key:"clear",value:function(){this.render.clear()}},{key:"drawFrame",value:function(t){var e,n,r,i,o,a=Date.now(),s=t.buf_y,u=t.buf_u,c=t.buf_v,l=t.width,f=t.height,h=l/2,d=f/2;e={bytes:s,stride:t.stride_y},n={bytes:u,stride:t.stride_u},r={bytes:c,stride:t.stride_v},i=di.a.format({width:l,height:f,chromaWidth:h,chromaHeight:d}),o=di.a.frame(i,e,n,r),this.render.drawFrame(o);var p=Date.now();p-a>10&&this.logger.warn("drawFrame","reandertime:",p-a)}}]),n}(N);function vi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var gi=function(t){l()(n,t);var e=vi(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"status","pause"),v()(u()(r),"_currentTime",0),v()(u()(r),"maxPTS",null),v()(u()(r),"ready",!1),v()(u()(r),"firstRender",!1),r.imageData=new ci({events:t.events,maxBufferLength:t.maxBufferLength}),r.screen=new yi({canvas:t.canvas}),r.playHandler=null,r.player=t.player,r.debug=t.debug||!1,r}return a()(n,[{key:"setScreenRender",value:function(t){this.screen.setCanvas(t),this.screen.setRender(t)}},{key:"clear",value:function(){this.screen.clear()}},{key:"play",value:function(t){"play"!==this.status&&(this.status="play",this.render(t))}},{key:"pause",value:function(){"pause"!==this.status&&(this.status="pause",clearTimeout(this.playHandler),this.playHandler=null)}},{key:"checkBuffer",value:function(){return this.imageData.checkBuffer(this.currentTime)}},{key:"push",value:function(t){this.player.reseting||(this.imageData.push(t),this.end-this.player.currentTime>U.d.READYBUFFERLENGTH&&!this.ready&&(this.ready=!0,this.status="ready",this.events.emit(st.ImagePlayerReady),this.render(this.imageData.start,!1)),this.events.emit(st.ImagePlayerBuffeUpdate))}},{key:"find",value:function(t){return this.imageData.find(t)}},{key:"buffer",value:function(){return this.imageData.buffer()}},{key:"isBuffered",value:function(t){return this.imageData.isBuffered(t)}},{key:"render",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(t<this.imageData.offset)){var n=this.find(t);return n?(this.firstRender||(this.firstRender=!0,this.events.emit(st.PlayerLoadedMetaData,n.width,n.height)),this.screen.drawFrame(n),this.currentTime=n.pts,e&&this.events.emit(st.ImagePlayerRenderEnd,t,n.duration),n):this.maxPTS&&t>=this.maxPTS+this.fragDuration?(this.status="end",void this.events.emit(st.ImagePlayerEnd,this.maxPTS)):(this.logger.warn("Events.ImagePlayerWait",t,this.start,this.end,this.maxPTS),this.logger.warn("render","not yuv data"),this.status="wait",this.ready=!1,this.events.emit(st.ImagePlayerWait,"image","this"),!1)}}},{key:"reset",value:function(){this.status="pause",this.ready=!1,this.imageData.reset(),this.maxPTS=null,this.currentTime=0}},{key:"currentTime",set:function(t){this._currentTime=t},get:function(){return this._currentTime}},{key:"offset",get:function(){return this.imageData.offset}},{key:"fragDuration",get:function(){return Math.ceil(1e3/this.imageData.fps)}},{key:"start",get:function(){return this.imageData.start}},{key:"end",get:function(){return this.imageData.end}},{key:"duration",get:function(){return this.imageData.duration}}]),n}(N);function mi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var bi=new WeakMap,wi=new WeakMap,_i=new WeakMap,ki=new WeakMap,xi=new WeakMap;function Pi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ei=function(t){l()(n,t);var e=Pi(n);function n(t,r){var o;return i()(this,n),o=e.call(this,t,r),v()(u()(o),"libPath",null),o.options.processURL=r.processURL,o.libPath=r.libPath,!1!==o.options.needInit&&o.init(),o}return a()(n,null,[{key:"getComponent",value:function(t){return zr[t]}},{key:"registerComponent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if("string"!=typeof t||!t)throw new Error('Illegal component name, "'.concat(t,'"; must be a non-empty string.'));var i=Object.prototype.isPrototypeOf.call(cn,e.prototype);if(!i)throw new Error('Illegal component, "'.concat(t,'"; must be a BaseComponent subclass.'));zr[t]=e,Jr.addComponet(t),"left"===n?Yr.addCustomControl(t,r):Wr.addCustomControl(t,r)}}]),n}(function(t){l()(n,t);var e=mi(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,n),r=e.call(this),v()(u()(r),"mode",U.c.mode),v()(u()(r),"$container",null),v()(u()(r),"componentsController",null),v()(u()(r),"controlBar",!1),v()(u()(r),"controlBarController",null),v()(u()(r),"controlBarHeight",50),v()(u()(r),"alertError",null),v()(u()(r),"dataController",null),v()(u()(r),"demuxer",null),v()(u()(r),"decoder",null),v()(u()(r),"preload",!0),v()(u()(r),"startTime",0),v()(u()(r),"screenWidth",null),v()(u()(r),"screenHeight",null),v()(u()(r),"options",{}),bi.set(u()(r),{writable:!0,value:U.c.libPath}),v()(u()(r),"readyStatus",{dataProcessor:!1,firstData:!1,audioPlayer:!1}),v()(u()(r),"reseting",!1),wi.set(u()(r),{writable:!0,value:0}),_i.set(u()(r),{writable:!0,value:!1}),ki.set(u()(r),{writable:!0,value:1}),xi.set(u()(r),{writable:!0,value:!1}),v()(u()(r),"maxBufferLength",U.d.MAXBUFFERLENGTH),v()(u()(r),"seekSegmentNo",-1),v()(u()(r),"status","init"),v()(u()(r),"loader",null),v()(u()(r),"currentIndex",null),v()(u()(r),"startIndex",1),v()(u()(r),"loadData",null),v()(u()(r),"paused",!1),v()(u()(r),"autoPlay",!0),v()(u()(r),"duration",0),v()(u()(r),"tsNumber",0),t||r.logger.error("Please pass in a dom object as the display container"),r.el=t,Object.assign(r.options,o),r.options.sourceURL=r.options.sourceURL||r.options.source,r.options.streamList=r.options.streamList||[],r.options.events=S(),r.maxBufferLength=void 0!==o.maxBufferLength?o.maxBufferLength:r.maxBufferLength,r.autoPlay=void 0!==o.autoPlay?o.autoPlay:r.autoPlay,r.controlBar=o.controlBar||r.controlBar,r.controlBarAutoHide=void 0!==o.controlBarAutoHide?o.controlBarAutoHide:r.controlBarAutoHide,w()(u()(r),bi,void 0!==o.libPath?o.libPath:m()(u()(r),bi)),r.preload=void 0===o.preload?r.preload:o.preload,r.startTime=void 0===o.startTime?r.startTime:o.startTime,r.originStartTime=r.startTime,r.playbackRate=void 0===o.playbackRate?r.playbackRate:o.playbackRate,r}return a()(n,[{key:"setAlertError",value:function(){this.options.alertError=this.alertError=I.getInstance({player:this,component:this.componentsController.alertBox,events:this.options.events})}},{key:"setDataController",value:function(){this.dataController=Ot.getInstance({player:this,events:this.options.events})}},{key:"setLoadData",value:function(){this.dataController.setLoadData({player:this,events:this.options.events}),this.loadData=this.dataController.loadData}},{key:"setComponentsController",value:function(){this.componentsController=Jr.getInstance({$container:this.$container,$screenContainer:this.$screenContainer,$canvas:this.$canvas,$audioContainer:this.$audioContainer,$audio:this.$audio,loadData:this.loadData,bigPlayButtonColor:this.bigPlayButtonColor,player:this,events:this.options.events})}},{key:"setControlBarController",value:function(){var t=Object.assign({},this.options,{$container:this.$container,$screenContainer:this.$screenContainer,controlBar:this.controlBar,controlBarAutoHide:this.controlBarAutoHide,player:this});this.controlBarController=ei.getInstance(t)}},{key:"setLoadController",value:function(){this.loaderController=St.getInstance(this.options.type,{player:this,events:this.options.events})}},{key:"setProcessorController",value:function(){this.processController=new oi({type:"ts",codec:this.options.codec,libPath:m()(this,bi),events:this.options.events,player:this})}},{key:"setStreamController",value:function(){this.streamController=new si({events:this.options.events,loadData:this.loadData,imagePlayer:this.imagePlayer,audioPlayer:this.audioPlayer,player:this})}},{key:"setImagerPlayer",value:function(){this.imagePlayer=new gi({events:this.options.events,canvas:this.$canvas,maxBufferLength:this.maxBufferLength,player:this})}},{key:"setAudioPlayer",value:function(){this.audioPlayer=new Fe({player:this,events:this.options.events,audioNode:this.$audio})}},{key:"setAction",value:function(){this.action=new Ut({player:this,screen:this.screen,imagePlayer:this.imagePlayer,loadData:this.loadData,audioPlayer:this.audioPlayer,events:this.options.events})}},{key:"init",value:function(){this.controlBarHeight=this.options.controlBarHeight||this.controlBarHeight,this.options.httpWorker=ri()(104,{name:"httpWorker"}),this.currentTime=this.startTime,this.addEl(),this.setDataController(),this.setLoadData(),this.setLoadController(),this.setComponentsController(),this.setControlBarController(),this.componentsController.setControlBarController(this.controlBarController),this.setProcessorController(),this.setAlertError(),this.componentsController.drawPoster(),this.setImagerPlayer(),this.setAudioPlayer(),this.setAction(),this.setStreamController(),this.preload&&this.run(),this.bindEvent()}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.PlayerOnPlay,(function(){t.play()})),this.events.on(st.PlayerOnPause,(function(){t.pause()})),this.events.on(st.PlayerOnVolume,(function(e){t.volume=e})),this.events.on(st.DataProcessorReady,(function(){t.logger.info("bindEvent","decoder ready"),t.checkReady("dataProcessor")})),this.events.on(st.AudioPlayerReady,(function(){t.logger.info("bindEvent","audioPlayer ready"),t.seeking||t.checkReady("audioPlayer")})),this.events.on(st.PlayerReady,(function(){t.logger.info("bindEvent","player ready"),t.onReady()})),this.events.on(st.PlayerSpeedTo,(function(e){t.changeSpeed(e)})),this.events.on(st.PlayerChangeRate,(function(e){t.changeRate(e)})),this.events.on(st.PlayerWait,(function(){t.onWait()})),this.events.on(st.PlayerPlay,(function(){t.onPlay()})),this.events.on(st.LoaderPlayListLoaded,(function(e){"function"==typeof t.options.afterLoadPlaylist&&t.options.afterLoadPlaylist(t.laodData.sourceData);var n=e.loadData.sourceData;t.duration=n.duration,t.tsNumber=n.length,t.streamController.setBaseInfo({duration:t.duration,tsNumber:t.tsNumber}),t.dataController.startLoad(t.startTime),t.setStartTime(t.originStartTime)})),this.events.on(st.LoadDataFirstLoaded,(function(e){t.logger.info("bindEvent","first data ready"),t.startIndex=e.no,t.streamController.currentIndex=e.no,t.checkReady("firstData")})),this.events.on(st.StreamDataReady,(function(){t.logger.info("bindEvent","dataReady"),t.onDataReady()})),this.events.on(st.PlayerLoadedMetaData,(function(e,n){t.setCanvas(),t.resizeScreen(e,n)})),this.events.on(st.PlayerEnd,(function(){t.status="end"})),this.events.on(st.ImagePlayerBuffeUpdate,(function(){var e=t.buffer();t.events.emit(st.PlayerbufferUpdate,e)})),this.events.on(st.PlayerOnSeek,(function(e){t.seek(Math.floor(e))})),this.events.on(st.PlayerAlert,(function(e){t.alertError.show(e)})),this.events.on(st.PlayerThrowError,(function(e){M.a.apply(t,e)})),this.events.on(st.PlayerTimeUpdate,(function(e){t.options.onTimeupdate&&t.options.onTimeupdate(e)}))}},{key:"reset",value:function(t){this.action&&this.action.reset(t)}},{key:"switchPlaylist",value:function(t,e){this.loaderController.switchPlaylist(t,e)}},{key:"changeSpeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.playbackRate=t.value||1}},{key:"setStartTime",value:function(t){this.startTime=t}},{key:"changeRate",value:function(t){this.pause(),this.events.emit(st.ControlBarPauseLoading,this),this.setStartTime((this.currentTime-5e3)/1e3),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.reset(!0),this.switchPlaylist(t.url)}},{key:"changeSrc",value:function(t,e){this.pause(),this.events.emit(st.ControlBarPauseLoading,this),this.events.emit(st.PlayerChangeSrc,this),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.currentTime=this.startTime,this.imagePlayer.clear(),this.reset(!0),this.switchPlaylist(t,e)}},{key:"setCanvas",value:function(){var t=$e.createCanvas(this);if(L.isElement(this.$canvas)){if(this.$canvas.width&&this.$canvas.height)return this.imagePlayer.setScreenRender(t),this.$canvas.replaceWith(t),void(this.$canvas=t)}else this.$screen.appendChild(t),this.$canvas=t}},{key:"destroy",value:function(){this.controlBarController&&(this.controlBarController.destroy(),delete this.controlBarController),this.$container&&(this.el.removeChild(this.$container),delete this.$container),this.processController.destroy(),this.loaderController.destroy()}},{key:"run",value:function(){this.loaderController.run()}},{key:"checkReady",value:function(t){var e=this.readyStatus;if(t&&"string"==typeof t){e[t]=!0;for(var n=Object.keys(e),r=0;r<n.length;r++)if(!e[n[r]])return!1;return this.logger.info("checkReady","player ready"),this.events.emit(st.PlayerReady),!0}return this.logger.error("checkReady","check ready","type is no correct, type:",t),!1}},{key:"addEl",value:function(){var t,e,n,r;this.el?(t=$e.createContainer(this),this.el.appendChild(t),this.$container=t,e=$e.createScreenContainer(this),this.$screen=e,t.appendChild(e),this.$screenContainer=e,this.setCanvas(),r=$e.createAudio(this),this.$audio=r,(n=$e.createAudioContainer(this)).appendChild(r),this.$audioContainer=n,t.appendChild(n)):this.logger.error("addEl","not found el.","el:",this.options.el)}},{key:"onWait",value:function(){this.logger.info("onWait","wait,wait,wait")}},{key:"onPlay",value:function(){this.logger.info("onPlay","play, play, play")}},{key:"onReady",value:function(){this.changing||this.componentsController.run(),this.changing&&this.logger.info("onReady","change ready","startIndex:",this.startIndex),this.streamController.startLoad(this.startIndex)}},{key:"onDataReady",value:function(){this.changing&&(this.changing=!1,this.play()),"playing"===this.statusBeforeSeek||this.autoPlay&&!this.paused?this.play():this.events.emit(st.ControlBarPause)}},{key:"buffer",value:function(){var t=this.imagePlayer.buffer(),e=this.audioPlayer.buffer(),n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?[n,r]:[0,0]}},{key:"play",value:function(){this.logger.info("play",this.status),"playing"!==this.status&&(this.logger.info("start play"),this.status="playing",this.paused=!1,this.action.play(this.currentTime),this.events.emit(st.PlayerPlay,this))}},{key:"on",value:function(t,e){this.events.on("Player."+t,e)}},{key:"off",value:function(t,e){this.events.off("Player."+t,e)}},{key:"once",value:function(t,e){this.events.once("Player."+t,e)}},{key:"pause",value:function(){"pause"!=this.status&&(this.logger.info("pause"),this.status="pause",this.action.pause(),this.paused=!0,this.events.emit(st.PlayerPause,this))}},{key:"seek",value:function(t){t<this.startTime||(t>=1e3*this.duration?this.logger.info("seek","seek to time:",t):(this.statusBeforeSeek=this.status,this.seekTime=Date.now(),this.seeking=!0,this.currentTime=t,this.action.seek(t)))}},{key:"resizeScreen",value:function(t,e){L.adaptSizeElement(t,e,this.$screenContainer,this.$canvas)}},{key:"muted",get:function(){return m()(this,xi)},set:function(t){w()(this,xi,!!t)}},{key:"playbackRate",set:function(t){w()(this,ki,t)},get:function(){return m()(this,ki)}},{key:"seeking",set:function(t){w()(this,_i,t),t?this.events.emit(st.PlayerSeeking):this.events.emit(st.PlayerSeekEnd)},get:function(){return m()(this,_i)}},{key:"currentTime",get:function(){return m()(this,wi)},set:function(t){w()(this,wi,t)}},{key:"volume",get:function(){return this.audioPlayer.volume},set:function(t){this.audioPlayer.volume=t}}]),n}(N));e.default=Ei},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(95),i=n(96),o=n(97);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(r)return H(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return W(H(e,t.length-n),t,n,r)}function _(t,e,n,r){return W(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return _(t,e,n,r)}function x(t,e,n,r){return W(j(e),t,n,r)}function P(t,e,n,r){return W(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function B(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=F(t[o]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function C(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function I(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,o){return o||I(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,o){return o||I(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:H(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(70))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,n(70))},function(t,e,n){!function(){"use strict";var e=n(51),r=n(100);function i(t){var e=t.getContext("2d"),n=null,i=null,o=null;return this.drawFrame=function(a){var s=a.format;t.width===s.displayWidth&&t.height===s.displayHeight||(t.width=s.displayWidth,t.height=s.displayHeight),null!==n&&n.width==s.width&&n.height==s.height||function(t,r){for(var i=(n=e.createImageData(t,r)).data,o=t*r*4,a=0;a<o;a+=4)i[a+3]=255}(s.width,s.height),r.convertYCbCr(a,n.data);var u,c,l,f=s.cropWidth!=s.displayWidth||s.cropHeight!=s.displayHeight;f?(i||(c=s.cropWidth,l=s.cropHeight,(i=document.createElement("canvas")).width=c,i.height=l,o=i.getContext("2d")),u=o):u=e,u.putImageData(n,-s.cropLeft,-s.cropTop,s.cropLeft,s.cropTop,s.cropWidth,s.cropHeight),f&&e.drawImage(i,0,0,s.displayWidth,s.displayHeight)},this.clear=function(){e.clearRect(0,0,t.width,t.height)},this}i.prototype=Object.create(e.prototype),t.exports=i}()},function(t,e,n){!function(){"use strict";var e=n(101);
/**
	 * Basic YCbCr->RGB conversion
	 *
	 * @author Brion Vibber <brion@pobox.com>
	 * @copyright 2014-2019
	 * @license MIT-style
	 *
	 * @param {YUVFrame} buffer - input frame buffer
	 * @param {Uint8ClampedArray} output - array to draw RGBA into
	 * Assumes that the output array already has alpha channel set to opaque.
	 */t.exports={convertYCbCr:function(t,n){var r=0|t.format.width,i=0|t.format.height,o=0|e(t.format.width/t.format.chromaWidth),a=0|e(t.format.height/t.format.chromaHeight),s=t.y.bytes,u=t.u.bytes,c=t.v.bytes,l=0|t.y.stride,f=0|t.u.stride,h=0|t.v.stride,d=r<<2,p=0,y=0,v=0,g=0,m=0,b=0,w=0,_=0,k=0,x=0,P=0,E=0,S=0,T=0,R=0,B=0,L=0,A=0;if(1==o&&1==a)for(w=0,_=d,A=0,B=0;B<i;B+=2){for(v=(y=B*l|0)+l|0,g=A*f|0,m=A*h|0,R=0;R<r;R+=2)k=0|u[g++],E=(409*(x=0|c[m++])|0)-57088|0,S=(100*k|0)+(208*x|0)-34816|0,T=(516*k|0)-70912|0,P=298*s[y++]|0,n[w]=P+E>>8,n[w+1]=P-S>>8,n[w+2]=P+T>>8,w+=4,P=298*s[y++]|0,n[w]=P+E>>8,n[w+1]=P-S>>8,n[w+2]=P+T>>8,w+=4,P=298*s[v++]|0,n[_]=P+E>>8,n[_+1]=P-S>>8,n[_+2]=P+T>>8,_+=4,P=298*s[v++]|0,n[_]=P+E>>8,n[_+1]=P-S>>8,n[_+2]=P+T>>8,_+=4;w+=d,_+=d,A++}else for(b=0,B=0;B<i;B++)for(L=0,p=B*l|0,g=(A=B>>a)*f|0,m=A*h|0,R=0;R<r;R++)k=0|u[g+(L=R>>o)],E=(409*(x=0|c[m+L])|0)-57088|0,S=(100*k|0)+(208*x|0)-34816|0,T=(516*k|0)-70912|0,P=298*s[p++]|0,n[b]=P+E>>8,n[b+1]=P-S>>8,n[b+2]=P+T>>8,b+=4}}}()},function(t,e){!function(){"use strict";
/**
   * Convert a ratio into a bit-shift count; for instance a ratio of 2
   * becomes a bit-shift of 1, while a ratio of 1 is a bit-shift of 0.
   *
   * @author Brion Vibber <brion@pobox.com>
   * @copyright 2016
   * @license MIT-style
   *
   * @param {number} ratio - the integer ratio to convert.
   * @returns {number} - number of bits to shift to multiply/divide by the ratio.
   * @throws exception if given a non-power-of-two
   */t.exports=function(t){for(var e=0,n=t>>1;0!=n;)n>>=1,e++;if(t!==1<<e)throw"chroma plane dimensions must be power of 2 ratio to luma plane dimensions; got "+t;return e}}()},function(t,e,n){!function(){"use strict";var e=n(51),r=n(103);function i(t){var e,n,o=this,a=i.contextForCanvas(t);if(null===a)throw new Error("WebGL unavailable");function s(t,e){var n=a.createShader(t);if(a.shaderSource(n,e),a.compileShader(n),!a.getShaderParameter(n,a.COMPILE_STATUS)){var r=a.getShaderInfoLog(n);throw a.deleteShader(n),new Error("GL shader compilation for "+t+" failed: "+r)}return n}var u,c,l,f,h,d,p,y,v,g,m=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),b={},w={},_={};function k(t){return b[t]||(b[t]=a.createTexture()),b[t]}function x(t,e,n,r){var o=k(t);if(a.activeTexture(a.TEXTURE0),i.stripe){var s=!b[t+"_temp"],u=k(t+"_temp");a.bindTexture(a.TEXTURE_2D,u),s?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e/4,n,0,a.RGBA,a.UNSIGNED_BYTE,r)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,e/4,n,a.RGBA,a.UNSIGNED_BYTE,r);var c=b[t+"_stripe"],l=!c;l&&(c=k(t+"_stripe")),a.bindTexture(a.TEXTURE_2D,c),l&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e,1,0,a.RGBA,a.UNSIGNED_BYTE,function(t){if(_[t])return _[t];for(var e=t,n=new Uint32Array(e),r=0;r<e;r+=4)n[r]=255,n[r+1]=65280,n[r+2]=16711680,n[r+3]=4278190080;return _[t]=new Uint8Array(n.buffer)}(e)))}else a.bindTexture(a.TEXTURE_2D,o),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e,n,0,a.LUMINANCE,a.UNSIGNED_BYTE,r)}function P(t,e,r){var i=b[t];a.useProgram(n);var o=w[t];o||(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e,r,0,a.RGBA,a.UNSIGNED_BYTE,null),o=w[t]=a.createFramebuffer()),a.bindFramebuffer(a.FRAMEBUFFER,o),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i,0);var s=b[t+"_temp"];a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,s),a.uniform1i(d,1);var p=b[t+"_stripe"];a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,p),a.uniform1i(h,2),a.bindBuffer(a.ARRAY_BUFFER,u),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.viewport(0,0,e,r),a.drawArrays(a.TRIANGLES,0,m.length/2),a.bindFramebuffer(a.FRAMEBUFFER,null)}function E(t,n,r){a.activeTexture(n),a.bindTexture(a.TEXTURE_2D,b[t]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.uniform1i(a.getUniformLocation(e,t),r)}function S(t,e){var n=s(a.VERTEX_SHADER,t),r=s(a.FRAGMENT_SHADER,e),i=a.createProgram();if(a.attachShader(i,n),a.attachShader(i,r),a.linkProgram(i),!a.getProgramParameter(i,a.LINK_STATUS)){var o=a.getProgramInfoLog(i);throw a.deleteProgram(i),new Error("GL program linking failed: "+o)}return i}return o.drawFrame=function(s){var b=s.format,w=!e||t.width!==b.displayWidth||t.height!==b.displayHeight;if(w&&(t.width=b.displayWidth,t.height=b.displayHeight,o.clear()),e||function(){if(i.stripe){n=S(r.vertexStripe,r.fragmentStripe),a.getAttribLocation(n,"aPosition"),l=a.createBuffer();var t=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);a.bindBuffer(a.ARRAY_BUFFER,l),a.bufferData(a.ARRAY_BUFFER,t,a.STATIC_DRAW),f=a.getAttribLocation(n,"aTexturePosition"),h=a.getUniformLocation(n,"uStripe"),d=a.getUniformLocation(n,"uTexture")}e=S(r.vertex,r.fragment),u=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,u),a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW),c=a.getAttribLocation(e,"aPosition"),p=a.createBuffer(),y=a.getAttribLocation(e,"aLumaPosition"),v=a.createBuffer(),g=a.getAttribLocation(e,"aChromaPosition")}(),w){var _=function(t,e,n){var r=b.cropLeft/n,i=(b.cropLeft+b.cropWidth)/n,o=(b.cropTop+b.cropHeight)/b.height,s=b.cropTop/b.height,u=new Float32Array([r,o,i,o,r,s,r,s,i,o,i,s]);a.bindBuffer(a.ARRAY_BUFFER,t),a.bufferData(a.ARRAY_BUFFER,u,a.STATIC_DRAW)};_(p,0,s.y.stride),_(v,0,s.u.stride*b.width/b.chromaWidth)}x("uTextureY",s.y.stride,b.height,s.y.bytes),x("uTextureCb",s.u.stride,b.chromaHeight,s.u.bytes),x("uTextureCr",s.v.stride,b.chromaHeight,s.v.bytes),i.stripe&&(P("uTextureY",s.y.stride,b.height),P("uTextureCb",s.u.stride,b.chromaHeight),P("uTextureCr",s.v.stride,b.chromaHeight)),a.useProgram(e),a.viewport(0,0,t.width,t.height),E("uTextureY",a.TEXTURE0,0),E("uTextureCb",a.TEXTURE1,1),E("uTextureCr",a.TEXTURE2,2),a.bindBuffer(a.ARRAY_BUFFER,u),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,p),a.enableVertexAttribArray(y),a.vertexAttribPointer(y,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,v),a.enableVertexAttribArray(g),a.vertexAttribPointer(g,2,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLES,0,m.length/2)},o.clear=function(){a.viewport(0,0,t.width,t.height),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},o.clear(),o}i.stripe=-1!==navigator.userAgent.indexOf("Windows"),i.contextForCanvas=function(t){var e={preferLowPowerToHighPerformance:!0,powerPreference:"low-power",failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)},i.isAvailable=function(){var t,e=document.createElement("canvas");e.width=1,e.height=1;try{t=i.contextForCanvas(e)}catch(t){return!1}if(t){var n=t.TEXTURE0,r=t.createTexture(),o=new Uint8Array(16),a=i.stripe?1:4,s=i.stripe?t.RGBA:t.LUMINANCE,u=i.stripe?t.NEAREST:t.LINEAR;return t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,u),t.texImage2D(t.TEXTURE_2D,0,s,a,4,0,s,t.UNSIGNED_BYTE,o),!t.getError()}return!1},i.prototype=Object.create(e.prototype),t.exports=i}()},function(t,e){t.exports={vertex:"precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aLumaPosition;\nattribute vec2 aChromaPosition;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vLumaPosition = aLumaPosition;\n    vChromaPosition = aChromaPosition;\n}\n",fragment:"// inspired by https://github.com/mbebenita/Broadway/blob/master/Player/canvas.js\n\nprecision lowp float;\n\nuniform sampler2D uTextureY;\nuniform sampler2D uTextureCb;\nuniform sampler2D uTextureCr;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n   // Y, Cb, and Cr planes are uploaded as LUMINANCE textures.\n   float fY = texture2D(uTextureY, vLumaPosition).x;\n   float fCb = texture2D(uTextureCb, vChromaPosition).x;\n   float fCr = texture2D(uTextureCr, vChromaPosition).x;\n\n   // Premultipy the Y...\n   float fYmul = fY * 1.1643828125;\n\n   // And convert that to RGB!\n   gl_FragColor = vec4(\n     fYmul + 1.59602734375 * fCr - 0.87078515625,\n     fYmul - 0.39176171875 * fCb - 0.81296875 * fCr + 0.52959375,\n     fYmul + 2.017234375   * fCb - 1.081390625,\n     1\n   );\n}\n",vertexStripe:"precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexturePosition;\nvarying vec2 vTexturePosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vTexturePosition = aTexturePosition;\n}\n",fragmentStripe:"// extra 'stripe' texture fiddling to work around IE 11's poor performance on gl.LUMINANCE and gl.ALPHA textures\n\nprecision lowp float;\n\nuniform sampler2D uStripe;\nuniform sampler2D uTexture;\nvarying vec2 vTexturePosition;\nvoid main() {\n   // Y, Cb, and Cr planes are mapped into a pseudo-RGBA texture\n   // so we can upload them without expanding the bytes on IE 11\n   // which doesn't allow LUMINANCE or ALPHA textures\n   // The stripe textures mark which channel to keep for each pixel.\n   // Each texture extraction will contain the relevant value in one\n   // channel only.\n\n   float fLuminance = dot(\n      texture2D(uStripe, vTexturePosition),\n      texture2D(uTexture, vTexturePosition)\n   );\n\n   gl_FragColor = vec4(fLuminance, fLuminance, fLuminance, 1);\n}\n"}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(0),u=n.n(s),c=n(63),l=n.n(c),f=n(11),h=n.n(f),d=n(18),p=n.n(d),y=n(28),v=n.n(y),g=n(10),m=n(23);function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _=g.a.get("HTTP.js",{level:2}),k=function(){var t=v()(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof Blob)){t.next=5;break}return t.next=3,new Response(e).arrayBuffer();case 3:return n=t.sent,t.abrupt("return",new Uint8Array(n,0));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var x=function(t){if(t)return Object.entries(t).reduce((function(t,e,n){var r=l()(e,2),i=r[0],o=r[1];return t+(0===n?i+"="+encodeURIComponent(o):"&"+i+"="+encodeURIComponent(o))}),"")};function P(t,e){var n=("function"==typeof t.clone?t.clone():void 0)||t,r=function(t,e){var n={body:e,headers:function(t){return t.headers.entries?function(t){var e,n=Object.create(Object.getPrototypeOf(t.headers)),r=b(t.headers.entries());try{for(r.s();!(e=r.n()).done;){var i=l()(e.value,2),o=i[0],a=i[1];n[o]=a}}catch(t){r.e(t)}finally{r.f()}return n}(t):function(t){var e={},n=t.headers.__headers__;for(var r in n)e[r]=n[r].join("");return e}(t)}(t),response:t,status:t.status,statusText:t.statusText};return t.ok?Promise.resolve(n):Promise.reject(n)};return t[e]().then((function(t){return r(n,t)}))}function E(t,e){var n=t.headers.get("content-type"),r=t.clone().body.getReader(),i=0,o=i,a=setInterval((function(){var t=50*(i-o);t<=1||(_.info("HTTP>handleResponse","".concat(o," | ").concat(i),"".concat(t.toFixed(2)," Bytes/s")),self.postMessage({type:"notice",method:"fetch",noticeType:"speed",data:{speed:t,intervalValue:20,lastReceived:o,bytesReceived:i}}),o=i)}),20);return r.read().then((function o(s){return s.done?(clearInterval(a),function(){if("ts"===e||"video"===e)return P(t,"blob");if(n.includes("json"))return P(t,"json");if(n.includes("text"))return P(t,"text");if(n.includes("form"))return P(t,"formData");if(n.includes("video")||n.includes("image")||n.includes("octet-stream"))return P(t,"blob");try{return P(t,"text")}catch(e){return Object(m.a)(e,"[HTTP>handleResponse:unknow content-type]",n,t),Promise.resolve(t)}}()):(i+=s.value.length,r.read().then(o))}))}var S=null,T=(S||(S=new(function(){function t(e){i()(this,t),u()(this,"options",{"content-type":"application/json;charset=UTF-8",cache:"no-cache",mode:"cors"}),Object.assign(this.options,e)}var e;return a()(t,[{key:"setOptions",value:function(t){var e=Object.assign(this.options,t);e.url=function(t){var e=t.url,n=t.params;return n?e+"?"+x(n):e}(e),e.method=e.method||"get",e.headers=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.headers,n=void 0===e?{}:e,r=t.method,i=void 0===r?"get":r,o=t.username,a=t.password,s=t.token,u=new Headers(n);if(o||a){if(!o)throw new TypeError("username required for basic authentication");if(!a)throw new TypeError("password required for basic authentication");var c="object"===("undefined"==typeof win?"undefined":h()(win))&&win.btoa?btoa:function(t){return t};u.set("Authorization","Basic "+c(o+":"+a))}return s&&u.set("Authorization","Bearer "+s),"get"===i||u.get("content-type")||u.set("content-type","application/json"),u}(e),e.body=function(t){var e=t.headers.get("content-type");if(e)return e.includes("json")?JSON.stringify(t.body):e.includes("x-www-form-urlencoded")?x(t.body):t.body}(e),delete e.username,delete e.password,delete e.token,this.options=e}},{key:"request",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(t)return this.setOptions(Object.assign({url:t},e)),fetch(this.options.url,this.options).then((function(t){return E(t,n)}));_.error("[HTTP>request]","url is undefined","url:",t,"options:",e)}},{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=v()(p.a.mark((function t(e){var n,r,i,o,a=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,i=a.length>3?a[3]:void 0,e){t.next=6;break}return _.wran("[HTTP>fetch]","url is undefined","url:",e,"options:",n),t.abrupt("return");case 6:return this.setOptions(Object.assign({url:e},n)),_.info("[HTTP>fetch]","http fetch","url:",e,"options:",n),t.next=10,fetch(e,n);case 10:(o=t.sent).ok?o.text().then((function(t){self.postMessage({type:"invoke",method:"fetch",fileType:i,name:r,data:t})})):self.postMessage({result:"failed"});case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())},{key:"get",value:(e=v()(p.a.mark((function t(e){var n,r,i,o,a,s=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,i=s.length>3?s[3]:void 0,n.method="get",_.info("[HTTP>get]","http get","url:",e,"options:",n,"name:",r,"fileType:",i),a={type:"invoke",method:"get",fileType:i,name:r,url:e},t.prev=6,t.next=9,this.request.call(this,e,n,i);case 9:o=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),_.error("[HTTP>get]","networks error","url:",e,"options:",n,"name:",r,"fileType:",i,"ex:",t.t0);case 15:if(!o||!o.body){t.next=24;break}if(a.data=o.body,"ts"!==i&&"video"!==i){t.next=21;break}return t.next=20,k(a.data);case 20:a.arrayBuffer=t.sent;case 21:a.arrayBuffer?self.postMessage(a,[a.arrayBuffer.buffer]):self.postMessage(a),t.next=27;break;case 24:a.type="error",a.data=o,self.postMessage(a);case 27:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(t){return e.apply(this,arguments)})}]),t}())({})),S);e.default=function(t){t.onmessage=function(t){var e=t.data,n=e.type,r=e.method;switch(n){case"invoke":T[r].call(T,e.url,e.options,e.name,e.fileType)}}}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(t,e,n){var r=n(108);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(15),i=n(12).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){e.f=n(16)},function(t,e,n){var r=n(79)("keys"),i=n(53);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(12).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(15),i=n(14),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(35)(Function.call,n(38).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r ¬†·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ\u2028\u2029\ufeff"},function(t,e,n){var r=n(15),i=n(115).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(37),i=n(42);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(37),i=n(42);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(54),i=n(7),o=n(25),a=n(31),s=n(66),u=n(153),c=n(64),l=n(59),f=n(16)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,p,y,v,g){u(n,e,p);var m,b,w,_=function(t){if(!h&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",x="values"==y,P=!1,E=t.prototype,S=E[f]||E["@@iterator"]||y&&E[y],T=S||_(y),R=y?x?_("entries"):T:void 0,B="Array"==e&&E.entries||S;if(B&&(w=l(B.call(new t)))!==Object.prototype&&w.next&&(c(w,k,!0),r||"function"==typeof w[f]||a(w,f,d)),x&&S&&"values"!==S.name&&(P=!0,T=function(){return S.call(this)}),r&&!g||!h&&!P&&E[f]||a(E,f,T),s[e]=T,s[k]=d,y)if(m={values:x?T:_("values"),keys:v?T:_("keys"),entries:R},g)for(b in m)b in E||o(E,b,m[b]);else i(i.P+i.F*(h||P),e,m);return m}},function(t,e,n){var r=n(124),i=n(42);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(15),i=n(41),o=n(16)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(16)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(66),i=n(16)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(21),i=n(52);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(73),i=n(16)("iterator"),o=n(66);t.exports=n(19).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var r=n(22),i=n(56),o=n(17);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(60),i=n(158),o=n(66),a=n(32);t.exports=n(122)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r,i,o=n(84),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,c=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(t){var e,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(e=u.lastIndex),r=a.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=u},function(t,e,n){"use strict";var r=n(121)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r,i,o,a=n(35),s=n(147),u=n(114),c=n(110),l=n(12),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,y=l.Dispatch,v=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){m.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete g[t]},"process"==n(41)(f)?r=function(t){f.nextTick(a(m,t,1))}:y&&y.now?r=function(t){y.now(a(m,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:h,clear:d}},function(t,e,n){"use strict";var r=n(12),i=n(20),o=n(54),a=n(90),s=n(31),u=n(69),c=n(13),l=n(68),f=n(37),h=n(17),d=n(166),p=n(58).f,y=n(21).f,v=n(129),g=n(64),m=r.ArrayBuffer,b=r.DataView,w=r.Math,_=r.RangeError,k=r.Infinity,x=m,P=w.abs,E=w.pow,S=w.floor,T=w.log,R=w.LN2,B=i?"_b":"buffer",L=i?"_l":"byteLength",A=i?"_o":"byteOffset";function D(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?E(2,-24)-E(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=P(t))!=t||t===k?(i=t!=t?1:0,r=u):(r=S(T(t)/R),t*(o=E(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?l/o:l*E(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*E(2,e),r+=c):(i=t*E(2,c-1)*E(2,e),r=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*h,a}function C(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-k:k;r+=E(2,e),l-=a}return(c?-1:1)*r*E(2,l-e)}function O(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function I(t){return[255&t]}function M(t){return[255&t,t>>8&255]}function N(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function U(t){return D(t,52,8)}function F(t){return D(t,23,4)}function H(t,e,n){y(t.prototype,e,{get:function(){return this[n]}})}function j(t,e,n,r){var i=d(+n);if(i+e>t[L])throw _("Wrong index!");var o=t[B]._b,a=i+t[A],s=o.slice(a,a+e);return r?s:s.reverse()}function W(t,e,n,r,i,o){var a=d(+n);if(a+e>t[L])throw _("Wrong index!");for(var s=t[B]._b,u=a+t[A],c=r(+i),l=0;l<e;l++)s[u+l]=c[o?l:e-l-1]}if(a.ABV){if(!c((function(){m(1)}))||!c((function(){new m(-1)}))||c((function(){return new m,new m(1.5),new m(NaN),"ArrayBuffer"!=m.name}))){for(var $,V=(m=function(t){return l(this,m),new x(d(t))}).prototype=x.prototype,Y=p(x),z=0;Y.length>z;)($=Y[z++])in m||s(m,$,x[$]);o||(V.constructor=m)}var X=new b(new m(2)),G=b.prototype.setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||u(b.prototype,{setInt8:function(t,e){G.call(this,t,e<<24>>24)},setUint8:function(t,e){G.call(this,t,e<<24>>24)}},!0)}else m=function(t){l(this,m,"ArrayBuffer");var e=d(t);this._b=v.call(new Array(e),0),this[L]=e},b=function(t,e,n){l(this,b,"DataView"),l(t,m,"DataView");var r=t[L],i=f(e);if(i<0||i>r)throw _("Wrong offset!");if(i+(n=void 0===n?r-i:h(n))>r)throw _("Wrong length!");this[B]=t,this[A]=i,this[L]=n},i&&(H(m,"byteLength","_l"),H(b,"buffer","_b"),H(b,"byteLength","_l"),H(b,"byteOffset","_o")),u(b.prototype,{getInt8:function(t){return j(this,1,t)[0]<<24>>24},getUint8:function(t){return j(this,1,t)[0]},getInt16:function(t){var e=j(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=j(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return O(j(this,4,t,arguments[1]))},getUint32:function(t){return O(j(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return C(j(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return C(j(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){W(this,1,t,I,e)},setUint8:function(t,e){W(this,1,t,I,e)},setInt16:function(t,e){W(this,2,t,M,e,arguments[2])},setUint16:function(t,e){W(this,2,t,M,e,arguments[2])},setInt32:function(t,e){W(this,4,t,N,e,arguments[2])},setUint32:function(t,e){W(this,4,t,N,e,arguments[2])},setFloat32:function(t,e){W(this,4,t,F,e,arguments[2])},setFloat64:function(t,e){W(this,8,t,U,e,arguments[2])}});g(m,"ArrayBuffer"),g(b,"DataView"),s(b.prototype,a.VIEW,!0),e.ArrayBuffer=m,e.DataView=b},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(171)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";n.r(e);var r,i=n(3),o=n.n(i),a=n(4),s=n.n(a),u=n(9),c=function(){function t(e){o()(this,t),this.decode=e,this.result=[]}return s()(t,[{key:"openDecode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,n=Module.addFunction((function(t,n,r,i,o,a,s,u,c){var l=HEAPU8.subarray(t,t+i*u),f=HEAPU8.subarray(n,n+o*u/2),h=HEAPU8.subarray(r,r+a*u/2),d={stride_y:i,stride_u:o,stride_v:a,width:s,height:u,buf_y:new Uint8Array(l),buf_u:new Uint8Array(f),buf_v:new Uint8Array(h),pts:c};e.result.push(d)}));Module._openDecoder(t,n,1)}},{key:"decodeData",value:function(t,e){var n=t.length,r=Module._malloc(n);Module.HEAPU8.set(t,r),Module._decodeData(r,n,e),Module._free(r)}},{key:"flush",value:function(){for(Module._flushDecoder();this.checkData();)this.decode.getDecodeYUV()}},{key:"closeDecode",value:function(){Module._closeDecoder()}},{key:"getYUV",value:function(){var t=null;return this.result.length>0&&(t=this.result.shift()),t}},{key:"checkData",value:function(){return this.result.length>0}}]),t}(),l=function(){function t(e){o()(this,t),this.decode=e}return s()(t,[{key:"openDecode",value:function(){return _web_decoder_open()}},{key:"closeDecode",value:function(t){_web_decoder_close(t)}},{key:"decodeData",value:function(t,e,n){var r=t.length||0;Module.ccall("web_decoder_decode_frame","number",["number","array","number","number"],[n,t,r,e])}},{key:"flush",value:function(t){var e=this.decode;if(_web_decoder_decode_frame)for(;;){if(_web_decoder_decode_frame(t,null,0,0)<0||!_web_got_frame(t))break;e.getDecodeYUV(t)}}},{key:"getYUV",value:function(t){var e=_web_get_stride_y(t),n=_web_get_stride_u(t),r=_web_get_stride_v(t),i=_web_get_width(t),o=_web_get_height(t),a=_web_get_frame_y(t),s=_web_get_frame_u(t),c=_web_get_frame_v(t),l=parseInt(_web_got_frame_pts(t)*u.a*1e3),f=HEAPU8.subarray(a,a+e*o),h=HEAPU8.subarray(s,s+n*o/2),d=HEAPU8.subarray(c,c+r*o/2);return{stride_y:e,stride_u:n,stride_v:r,width:i,height:o,buf_y:new Uint8Array(f),buf_u:new Uint8Array(h),buf_v:new Uint8Array(d),pts:l}}},{key:"checkData",value:function(t){return _web_got_frame(t)}}]),t}(),f=function(){function t(){o()(this,t),this.p=null,this.ptsList=[],this.ptsOffset=0,this.fps=0,this.lastDuration=0,this.previousPTS=0,this.status=!1,this.yuvArray=[],this.decodeTool=null}return s()(t,[{key:"loadWASM",value:function(t){var e=t.data.libPath;this.codec=t.data.codec,self.Module={locateFile:function(t){return e+t}},self.importScripts(e+"libffmpeg.js"),self.Module.onRuntimeInitialized=function(){Module._web_decoder_open?self.decode.decodeTool=new l(self.decode,this.event):self.decode.decodeTool=new c(self.decode,this.event),self.decode.openDecode(),self.decode.onWasmLoaded()}}},{key:"openDecode",value:function(){try{this.status||(this.p=this.decodeTool.openDecode(this.codec),this.status=!0)}catch(t){console.error(t)}}},{key:"closeDecode",value:function(){this.status&&(this.decodeTool.closeDecode(this.p),this.status=!1)}},{key:"push",value:function(t){var e=this;t.forEach((function(t){var n=t.PTS,r=t.data_byte,i=t.partEnd,o=t.lastTS,a=e.ptsList;e.insertSort(a,parseInt(n*u.a*1e3)),e.decodeTool.decodeData(r,n,e.p),e.decodeTool.checkData(e.p)&&e.getDecodeYUV(e.p,i,o)}))}},{key:"getDecodeYUV",value:function(t,e,n){if(!this.reseting){var r=0;this.fps||(this.fps=this.getFPS());var i=this.decodeTool.getYUV(t),o=this.ptsList.shift();if(i.pts=o,this.previousPTS&&o?(r=parseInt(o-this.previousPTS),this.lastDuration=r):r=this.lastDuration,i.duration=r,i.fps=this.fps,o)this.previousPTS=o,this.yuvArray.push(i),this.yuvArray.length>10&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]);e&&(this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]),self.postMessage({type:"partEnd",data:n}))}}},{key:"reset",value:function(){this.reseting=!0,this.ptsList=[],this.ptsOffset=0,this.previousPTS=0,this.fps=0,this.yuvArray=[],this.closeDecode(),this.openDecode(),self.postMessage({type:"resetEnd",data:Date.now()}),this.reseting=!1}},{key:"flush",value:function(){this.decodeTool.flush(this.p),this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]),this.closeDecode(),self.postMessage({type:"flushEnd",data:this.previousPTS})}},{key:"getFPS",value:function(){var t=this.ptsList;return t.length>=2?Math.round(1e3/(t[1]-t[0])):null}},{key:"onWasmLoaded",value:function(){self.postMessage({type:"dataProcessorReady"})}},{key:"insertSort",value:function(t,e){var n=t.length;if(0!==n){for(var r=0;r<n;r++)if(e<t[r]){for(var i=n;i>r;)t[i]=t[i-1],i--;return void(t[r]=e)}t.push(e)}else t.push(e)}}]),t}(),h=n(0),d=n.n(h);!function(t){t.ERROR="ERROR",t.INFO="INFO",t.DATA="DATA",t.DEMUX_DATA="DEMUX_DATA",t.DONE="DONE"}(r||(r={}));var p=Object.create||function(t){var e=function(){};return e.prototype=t,new e},y=Object.keys||function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e);return e},v=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};let g,m=10;class b{constructor(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=p(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}static listenerCount(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):P.call(t,e)}emit(t,...e){var n,r,i,o,a,s,u="error"===t;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(u){if(arguments.length>1&&(n=arguments[1]),n instanceof Error)throw n;var c=new Error('Unhandled "error" event. ('+n+")");throw c.context=n,c}if(!(r=s[t]))return!1;var l="function"==typeof r;switch(i=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=E(t,r),o=0;o<r;++o)try{i[o].call(n)}catch(t){console.error(t)}}(r,l,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=E(t,i),a=0;a<i;++a)try{o[a].call(n,r)}catch(t){console.error(t)}}(r,l,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=E(t,o),s=0;s<o;++s)try{a[s].call(n,r,i)}catch(t){console.error(t)}}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,s=E(t,a),u=0;u<a;++u)try{s[u].call(n,r,i,o)}catch(t){console.error(t)}}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),a=1;a<i;a++)o[a-1]=arguments[a];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=E(t,i),a=0;a<i;++a)try{o[a].apply(n,r)}catch(t){console.error(t)}}(r,l,this,o)}return!0}on(t,e){return function(t,e,n){var r,i,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');(i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]):(i=t._events=p(null),t._eventsCount=0);if(o){if("function"==typeof o?o=i[e]=[o,n]:o.push(n),!o.warned&&(r=void 0===(a=t)._maxListeners?b.defaultMaxListeners:a._maxListeners)&&r>0&&o.length>r){o.warned=!0;class n extends Error{}let r=new n("Possible Dispatcher memory leak detected. "+o.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');r.name="MaxListenersExceededWarning",r.emitter=t,r.type=e,r.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",r.name,r.message)}}else o=i[e]=n,++t._eventsCount;var a;return t}(this,t,e)}once(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,function(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=v.call(k,r);return i.listener=n,r.wrapFn=i,i}(this,t,e)),this}off(t,e){return _.call(this,t,e)}removeAllListeners(t){var e,n,r;if(!(n=this._events))return this;if(!n.off)return 0===arguments.length?(this._events=p(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=p(null):delete n[t]),this;if(0===arguments.length){var i,o=y(n);for(r=0;r<o.length;++r)"off"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=p(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.off(t,e);else if(e)for(r=e.length-1;r>=0;r--)this.off(t,e[r]);return this}listeners(t){return x(this,t,!0)}rawListeners(t){return x(this,t,!1)}listenerCount(){return b.listenerCount.apply(this,arguments)}}try{var w={};Object.defineProperty&&Object.defineProperty(w,"x",{value:0}),g=0===w.x}catch(t){g=!1}function _(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=p(null):(delete r[t],r.off&&this.emit("off",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),r.off&&this.emit("off",t,a||e)}return this}function k(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function x(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):E(i,i.length):[]}function P(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function E(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}g?Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');m=t}}):b.defaultMaxListeners=m;class S extends b{}var T=Object.prototype.toString;function R(t){return!!t&&"object"==typeof t}function B(t){return"number"==typeof t&&!isNaN(t)}function L(t){return R(t)&&"[object arraybuffer]"===T.call(t).toLowerCase()}class A{constructor(){this.list_=[]}get byteLength(){if(!B(this.byteLength_)){let t=0;for(let e,n=0;n<this.list_.length;n++)e=this.list_[n],t+=e.byteLength;this.byteLength_=t}return this.byteLength_}get bytes(){const{bufferList:t}=this;let e=null;return t.length>0&&(e=0===t.length?t[0]:this.toNewBytes()),e}get empty(){return 0===this.list_.length}get bufferList(){return this.list_}clear(){let t=this.list_.length;t>0&&this.list_.splice(0,t),this.byteLength_=null}toNewBytes(){let t=null,e=0;for(;null===t;)try{e++,t=new Uint8Array(this.byteLength)}catch(t){if(e>50)throw t}for(let e=0,n=0;e<this.list_.length;e++){let r=this.list_[e];t.set(r,n),n+=r.byteLength}return t}append(t){t instanceof A?this.list_=this.list_.concat(t.bufferList):this.list_.push(t),this.byteLength_=null}cut(t,e=!0){let n=null;if(t>0&&!this.empty){let r=this.list_,i=0,o=0;for(;r.length>0;){let a=r.shift();if(0!==o){let o=t-i;if(a.byteLength>=o){e&&n.set(a.subarray(0,o),i),a=a.subarray(o),a.byteLength>0&&r.unshift(a);break}e&&n.set(a,i),i+=a.byteLength;break}if(a.byteLength>=t){e&&(n=a.subarray(0,t)),a.byteLength>t&&(a=a.subarray(t),r.unshift(a));break}if(e){try{n=new Uint8Array(t)}catch(e){throw`alloc_memory_error@ cache buffer: ${t} ${e.message}`}n.set(a,0)}i+=a.byteLength,o++}this.byteLength_=null}return n}}class D{constructor(){this.map_={}}push(t,e){Object.prototype.hasOwnProperty.call(this.map_,t)?this.map_[t].push(e):this.map_[t]=[e]}get(t){let e=this.map_[t];return e?e.slice():null}getAll(){let t=[];for(let e in this.map_)t.push.apply(t,this.map_[e]);return t}remove(t,e){let n=this.map_[t];if(n)for(let t=0;t<n.length;++t)n[t]==e&&(n.splice(t,1),--t)}clear(){this.map_={}}forEach(t){for(let e in this.map_)t(e,this.map_[e])}}class C{constructor(t,e,n){this.target=t,this.type=e,this.listener=n,this.target.addEventListener?this.target.addEventListener(e,n,!1):this.target.on&&this.target.on(e,n,!1)}off(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}class O{constructor(){this.bindingMap_=new D}destroy(){this.removeAll(),this.bindingMap_=null}on(t,e,n){if(!this.bindingMap_)return;let r=new C(t,e,n);return this.bindingMap_.push(e,r),this}once(t,e,n){this.on(t,e,function(r){this.off(t,e),n(r)}.bind(this))}off(t,e){if(!this.bindingMap_)return;let n=this.bindingMap_.get(e)||[];for(let r=0;r<n.length;++r){let i=n[r];i.target==t&&(i.off(),this.bindingMap_.remove(e,i))}}removeAll(){if(!this.bindingMap_)return;let t=this.bindingMap_.getAll();for(let e=0;e<t.length;++e)t[e].off();this.bindingMap_.clear()}}let I;I="undefined"==typeof window?self:window;let M=I.console;const N="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof importScripts;let U=new class extends b{constructor(){super(),this._enable=!1}get enable(){return this._enable}set enable(t){this._enable=t,this.MSG_NAME="__log__"}log(...t){N?U.emit(this.MSG_NAME,"log",[...t].join("")):this._enable&&M.log.call(M,">>>",...t)}debug(...t){N?U.emit(this.MSG_NAME,"debug",[...t].join("")):this._enable&&M.debug&&M.debug.call(M,">>>",...t)}assert(...t){if(this._enable&&M.assert){let e=t[0],n=Array.prototype.slice.call(t,1);n.unshift(">>>"),M.assert.call(M,e,...n)}}warn(...t){N?U.emit(this.MSG_NAME,"warn",[...t].join("")):this._enable&&M.warn.call(M,">>>",...t)}error(...t){N?U.emit(this.MSG_NAME,"error",[...t].join("")):this._enable&&M.error.call(M,">>>",...t)}};class F extends b{constructor(){super()}pipe(t){return this.on("reset",(function(){t.reset()})),this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),t}unpipe(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}push(t,e){this.emit("data",t)}flush(t){this.emit("done",t)}reset(){this.emit("reset")}}class H extends F{constructor(t={}){super(),t.debug&&(U.enable=!0),this.ctx_=new S,this.options_=t,this.cache_buffer_=new A}listenEndStream_(){this.eventManager_=new O,this.eventManager_.on(this.endStream,"data",t=>{this.emit(r.DEMUX_DATA,t)}).on(this.endStream,"done",t=>{this.emit(r.DONE,t)}).on(this.ctx_,"error",t=>{this.emit(r.ERROR,t)})}constraintPushData_(t){let e=null;return L(t)||R(n=t)&&"[object uint8array]"===T.call(n).toLowerCase()?(e=L(t)?new Uint8Array(t):t,e):(U.error("Data pushed is not an ArrayBuffer or Uint8Array: "+t),e);var n}reset(){}destroy(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}var j;!function(t){t[t.WORKER_EXCEPTION=0]="WORKER_EXCEPTION",t[t.WORKER_MSG_EXCEPTION=1]="WORKER_MSG_EXCEPTION",t[t.TS_SYNC_BYTE=2]="TS_SYNC_BYTE",t[t.FLV_HEAD_SIGNATURE=3]="FLV_HEAD_SIGNATURE",t[t.FLV_NOT_EXPECTED_ADJACENT_DATA=4]="FLV_NOT_EXPECTED_ADJACENT_DATA"}(j||(j={}));var W=j;function $(t){let e=0;return ArrayBuffer.isView(t)&&(e=t.byteOffset,t=t.buffer),new DataView(t,e)}class V{constructor(){}readUint8(t,e){return $(t).getUint8(e)}readUint16(t,e,n=!1){return $(t).getUint16(e,n)}readUint32(t,e,n=!1){return $(t).getUint32(e,n)}}class Y extends V{constructor(t){super(),this.table_id=t[0],this.section_syntax_indicator=t[1]>>7,this.section_length=(15&t[1])<<8|t[2],this.transport_stream_id=this.readUint16(t,3),this.version_number=t[5]>>1&31,this.current_next_indicator=t[5]&&1,this.section_number=t[6],this.last_section_number=t[7],this.network_PID=0;var e,n=0,r=this.section_length-4-5;for(this.pmtTable=[];n<r;n+=4)0==(e=this.readUint16(t,8+n))?(this.network_PID=(31&t[10+n])<<8|t[11+n],U.log("packet->network_PID %0x /n/n",this.network_PID)):this.pmtTable.push({programNum:e,program_map_PID:(31&t[10+n])<<8|t[11+n]});var i=this.section_length+3;this.CRC_32=(255&t[i-4])<<24|(255&t[i-3])<<16|(255&t[i-2])<<8|255&t[i-1]}}class z extends V{constructor(t){if(super(),this.table_id=t[0],this.section_syntax_indicator=t[1]>>7,this.section_length=(15&t[1])<<8|t[2],this.program_number=this.readUint16(t,3),this.version_number=t[5]>>1&31,this.current_next_indicator=t[5]&&1,this.section_number=t[6],this.last_section_number=t[7],this.PCR_PID=(31&t[8])<<8|t[9],this.program_info_length=(15&t[10])<<8|t[11],this.program_info_length<0)return;if(this.program_info_length>2){let e=0;for(;e<this.program_info_length;){e+=t[13+e]}}var e=12+this.program_info_length,n=this.section_length-this.program_info_length-9-4,r=e+n;if(e>=r)return void U.warn(`es_section_pos < es_section_end ${e}, ${r}`);this.pes_table=[];let i=0;for(;i<n;){let n=t[e+i],r=8191&this.readUint16(t,e+i+1),o=4095&this.readUint16(t,e+i+3);if(this.pes_table.push({streamType:n,PID:r}),o>2){let n=0,r=e+i+5;for(;n<o;){n+=t[r+n]}}i+=o+5}var o=this.section_length+3;this.CRC_32=(255&t[o-4])<<24|(255&t[o-3])<<16|(255&t[o-2])<<8|255&t[o-1]}parse(){}}class X extends V{constructor(t){super(),this.table_id=t[0],this.section_syntax_indicator=t[1]>>7,this.section_length=(15&t[1])<<8|t[2],this.transport_stream_id=this.readUint16(t,3),this.version_number=t[5]>>1&31,this.current_next_indicator=1&t[5],this.section_number=t[6],this.last_section_number=t[7],this.original_network_id=this.readUint16(t,8);let e=this.section_length-8-4;this.service_table=[];let n=0;for(;n<e;){let e=0,r={service_id:this.readUint16(t,11),EIT_schedule_flag:2&t[13],EIT_present_following_flag:1&t[13],running_status:t[14]>>5,free_CA_mode:t[14]>>4&1,descriptors_loop_length:(15&t[14])<<8|t[15],provider_name:"",name:""};for(;e<r.descriptors_loop_length;){let n=16+e,i=t[n],o=t[n+1];switch(i){case 72:{let e=[],i=t[n+3],o=0,a=0,s=n+4;for(o=0;o<i;o++)e.push(String.fromCharCode(t[s])),s+=1;r.provider_name=e.join("");let u=[],c=t[s];for(s+=1,a=0;a<c;a++)u.push(String.fromCharCode(t[s])),s+=1;r.name=u.join("")}break;default:U.warn("sdt section unhandled descriptor_tag "+i)}e+=2+o}this.service_table.push(r),n+=5+r.descriptors_loop_length}}}class G{}class q{constructor(t){this.context=t,this.metadata=new G,this.pat_table=[],this.pes_streams=[]}get currentProgramPID(){let t=[];for(let e=0;e<this.pat_table.length;e++)t.push(this.pat_table[e].pid);return t.length>0?t[0]:-1}reset(){this.metadata=new G,this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}parse(t){0===t.PID?this._parsePat(t):1===t.PID||2===t.PID||3<=t.PID&&t.PID<=15||(17===t.PID?this._parseSdt(t):t.PID===this.currentProgramPID&&this._parsePmt(t))}findTrack(t){let e=null,n=this.pes_streams;for(let r=0;r<n.length;r++)if(n[r].id===t){e=n[r];break}return e}_parsePat(t){let e;if(t.payload_unit_start_indicator){let n=t.payload[0];e=t.payload.subarray(n+1)}else e=t.payload;let n=new Y(e);for(var r=0;r<n.pmtTable.length;r++)this._add_pid_to_pmt(n.pmtTable[r].programNum,n.pmtTable[r].program_map_PID);return n}_add_pid_to_pmt(t,e){let n=this.pat_table;(function(t){for(let e,r=0;r<n.length;r++)if(e=n[r],e.id===t)return{idx:r,item:e};return null})(t)||n.push({id:t,pid:e})}_parsePmt(t){let e;if(t.payload_unit_start_indicator){let n=t.payload[0];e=t.payload.subarray(n+1)}else e=t.payload;let n=new z(e);for(var r=0;r<n.pes_table.length;r++)this._add_pes_stream(n.pes_table[r],n);return n}_add_pes_stream(t,e){let n=this.pes_streams;(function(t){for(let e,r=0;r<n.length;r++)if(e=n[r],e.id===t)return{idx:r,item:e};return null})(t.PID)||n.push({id:t.PID,stream_type:t.streamType,pcr_pid:e.PCR_PID,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}_parseSdt(t){let e;if(t.payload_unit_start_indicator){let n=t.payload[0];e=t.payload.subarray(n+1)}else e=t.payload;let n=new X(e);return n.service_table.length>0&&(this.metadata.service_name=n.service_table[0].name,this.metadata.service_provider=n.service_table[0].provider_name),n}}class K extends F{constructor(t,e){super(),this.context=t,this.PSI=e,this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}push(t){let e=t;for(let t,n=0;n<e.length;n++)switch(t=e[n],t.type){case"video":this._complexVideo(t);break;case"audio":this._complexAudio(t);break;case"caption":this._complexCaption(t)}}flush(){this.emit("done"),this._clearStream()}reset(){this._clearStream()}_clearStream(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}_complexVideo(t){let e=this.PSI.findTrack(t.trackId);e&&(e.type="video",e.gops=t,e.firstDTS=t[0][0].dts,e.firstPTS=t[0][0].pts,e.duration=Number.POSITIVE_INFINITY,this.videoTrack=e,this.emit("data",{videoTrack:this.videoTrack}))}_complexAudio(t){let e=this.PSI.findTrack(t.trackId);e&&(e.type="audio",e.frames=t,e.firstPTS=e.firstDTS=t[0].dts,e.duration=Number.POSITIVE_INFINITY,this.audioTrack=e,this.emit("data",{audioTrack:this.audioTrack}))}_complexCaption(){}}const Q={mac:!1,iphone:!1,android:!1},J={version:!1,CHROME:!1,SAFARI:!1,FIREFOX:!1,IE11:!1,IE:!1,EDGE:!1,WECHAT:!1};let Z=navigator.userAgent.toLowerCase();var tt=/(edge)\/([\w.]+)/.exec(Z)||/(opr)[/]([\w.]+)/.exec(Z)||/(chrome)[ /]([\w.]+)/.exec(Z)||/(firefox)[ /]([\w.]+)/.exec(Z)||/(iemobile)[/]([\w.]+)/.exec(Z)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Z)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Z)||/(webkit)[ /]([\w.]+)/.exec(Z)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(Z)||/(msie) ([\w.]+)/.exec(Z)||Z.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(Z)||Z.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(Z)||[],et=/(ipad)/.exec(Z)||/(ipod)/.exec(Z)||/(windows phone)/.exec(Z)||/(iphone)/.exec(Z)||/(kindle)/.exec(Z)||/(silk)/.exec(Z)||/(android)/.exec(Z)||/(win)/.exec(Z)||/(mac)/.exec(Z)||/(linux)/.exec(Z)||/(cros)/.exec(Z)||/(playbook)/.exec(Z)||/(bb)/.exec(Z)||/(blackberry)/.exec(Z)||[],nt={version:void 0},rt={browser:tt[5]||tt[3]||tt[1]||"",version:tt[2]||tt[4]||"0",versionNumber:tt[4]||tt[2]||"0",platform:et[0]||""};if(rt.browser){nt[rt.browser]=!0;let t=rt.versionNumber.split(".");nt.version={major:parseInt(rt.versionNumber,10),string:rt.version},t.length>1&&(nt.version.minor=parseInt(t[1],10)),t.length>2&&(nt.version.build=parseInt(t[2],10))}J.version=nt.version,J.CHROME=!!nt.chrome,J.SAFARI=!!nt.safari&&!J.CHROME,J.FIREFOX=!!nt.firefox,J.IE11=/rv:11/.test(Z),J.IE=!!nt.msie||J.IE11,J.EDGE=!!nt.edge,J.WECHAT=/(wechat)|(micromessenger)/.test(Z),Q.mac=!!rt.platform.mac,Q.iphone=!!rt.platform.iphone,Q.android=!!rt.platform.android;var it=J,ot=Q;const at=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];const st=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];class ut extends b{constructor(){super()}push(t){let e,n,r,i,o,{pts:a,dts:s,payload:u}=t,c=u,l=0,f=0;for(;l+5<c.length;){if(255!==c[l]||240!=(246&c[l+1])){l++;continue}if(n=2*(1&~c[l+1]),e=(3&c[l+3])<<11|c[l+4]<<3|(224&c[l+5])>>5,i=1024*(1+(3&c[l+6])),o=9e4*i/st[(60&c[l+2])>>>2],r=l+e,c.byteLength<r)return;let t={pts:a+f*o,dts:s+f*o,sampleCount:i,audioObjectType:1+(c[l+2]>>>6&3),channelCount:(1&c[l+2])<<2|(192&c[l+3])>>>6,sampleRate:st[(60&c[l+2])>>>2],samplingFrequencyIndex:(60&c[l+2])>>>2,sampleSize:16,data:c.subarray(l+7+n,r)};if(this.emit("frame",t),c.byteLength===r)return c=void 0,void this.emit("done");f++,c=c.subarray(r)}}}class ct extends F{constructor(t){super(),this.PSI=t,this.trackId=null,this.codec=new ut,this.codec.on("frame",t=>{this.frames.push(t),this.frames.byteLength+=t.data.byteLength,this.frames.trackId=this.trackId}),this._newFrames()}push(t){15===t.stream_type&&(this.trackId=t.pid,this.codec.push({dts:t.pes.DTS,pts:t.pes.PTS,payload:t.pes.data_byte}))}flush(){if(this.frames.length>0){let t=this.frames.length,e=this.frames[0],n=this.frames[t-1],r=n.sampleRate*n.sampleCount/9e4;this.frames.firstDTS=e.dts,this.frames.firstPTS=e.pts,this.frames.duration=1===t?r:r+(n.pts-e.pts),this._updateTrackMeta(e),this.emit("data",this.frames),this.reset(),this.emit("done")}}reset(){this.trackId=null,this._newFrames()}_newFrames(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}_updateTrackMeta(t){let e=this.PSI.findTrack(this.trackId),n=((t,e,n)=>{let r,i,o=t;if(!(e>at.length-1))return it.FIREFOX?e>=6?(t=5,i=new Array(4),r=e-3):(t=2,i=new Array(2),r=e):ot.android?(t=2,i=new Array(2),r=e):(t=5,i=new Array(4),e>=6?r=e-3:(1===n&&(t=2,i=new Array(2)),r=e)),i[0]=t<<3,i[0]|=(14&e)>>1,i[1]|=(1&e)<<7,i[1]|=n<<3,5===t&&(i[1]|=(14&r)>>1,i[2]=(1&r)<<7,i[2]|=8,i[3]=0),{config:i,sampleRate:at[e],channelCount:n,codec:"mp4a.40."+t,realCodec:"mp4a.40."+o};U.error("invalid sampling index:"+e)})(t.audioObjectType,t.samplingFrequencyIndex,t.channelCount);e.config=n.config,e.sampleRate=n.sampleRate,e.inputTimeScale=e.inputTimeScale||e.timescale,e.timescale=n.sampleRate,e.channelCount=n.channelCount,e.codec=n.codec,e.realCodec=n.realCodec,e.isAAC=!0}}function lt(t,e=0,n=1){let r=0,i=0,o=0,a="",s=0;for(let o=e;o<e+n;o++)r=Math.floor(o/8),i=7-o%8,s=t[r]>>i&1,a+=s;return o=parseInt(a,2),o}function ft(t,e=0){let n=[],r=8*t.byteLength,i=!1,o=0,a=0,s=0,u="";for(let u=e;u<r;u++)if(o=Math.floor(u/8),a=7-u%8,s=t[o]>>a&1,!i){if(0!==s){i=!0,e=u;break}n.push(0)}let c=n.length+1;for(let n=e;n<e+c;n++)o=Math.floor(n/8),a=7-n%8,s=t[o]>>a&1,u+=s;return{bitLength:n.length+c,value:parseInt(u,2)-1}}var ht={readUEV:ft,readSEV:function(t,e=0){let n=ft(t,e),r=n.value,i=Math.pow(-1,r+1)*Math.ceil(r/2);return{bitLength:n.bitLength,value:i}},readBit:lt,readByte:function(t,e=0){return lt(t,e,8)}};let dt=0;function pt(t,e){let n,r=8,i=8;for(var o=0;o<e;o++)0!=i&&(n=ht.readUEV(t,dt),dt+=n.bitLength,i=(r+n.value+256)%256),r=t[o]}class yt extends V{constructor(t){switch(super(),this.forbidden_zero_bit=t[0]>>7,this.ref_idc=t[0]>>5&3,this.unit_type=31&t[0],this.data=function(t){let e,n=t.byteLength,r=[],i=1,o=new Uint8Array(0);for(;i<n-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;e=n-r.length;try{o=new Uint8Array(e)}catch(t){throw"epsb alloc mem error "+e}let a=0;for(i=0;i<e;a++,i++)a===r[0]&&(a++,r.shift()),o[i]=t[a];return o}(t.subarray(1)),this.rawData=t,this.unit_type){case 1:break;case 2:case 3:case 4:case 5:break;case 7:this.sps=function(t){dt=0;let e,n,r,i,o,a,s,u=t[0],c=t[1],l=t[2],f=t.subarray(3),h=0,d=[1,1],p=1,y=0,v=!0,g=ht.readUEV(f,dt);if(dt+=g.bitLength,100==u||110==u||122==u||244==u||44==u||83==u||86==u||118==u||128==u){let t=ht.readUEV(f,dt);dt+=t.bitLength,3==t.value&&(dt+=1);let e=ht.readUEV(f,dt);dt+=e.bitLength;let n=ht.readUEV(f,dt);if(dt+=n.bitLength,dt+=1,h=ht.readBit(f,dt),dt+=1,h)for(let e=0;e<(3!=t.value?8:12);e++){let t=ht.readBit(f,dt);dt+=1,t&&pt(f,e<6?16:64)}}let m=ht.readUEV(f,dt);dt+=m.bitLength;let b=ht.readUEV(f,dt),w=b.value;if(dt+=b.bitLength,0===w)e=ht.readUEV(f,dt),dt+=e.bitLength;else if(1===w){dt+=1,n=ht.readSEV(f,dt),dt+=n.bitLength,r=ht.readSEV(f,dt),dt+=r.bitLength,i=ht.readUEV(f,dt),dt+=i.bitLength;for(let t,e=0;e<i.value;e++)t=ht.readSEV(f,dt),dt+=t.bitLength}let _=ht.readUEV(f,dt);dt+=_.bitLength,dt+=1;let k=ht.readUEV(f,dt);dt+=k.bitLength;let x=ht.readUEV(f,dt);dt+=x.bitLength;let P=ht.readBit(f,dt);dt+=1,P||(dt+=1),dt+=1;let E=ht.readBit(f,dt);dt+=1;let S=0,T=0,R=0,B=0;if(E){let t=ht.readUEV(f,dt);dt+=t.bitLength,S=t.value;let e=ht.readUEV(f,dt);dt+=e.bitLength,T=e.value;let n=ht.readUEV(f,dt);dt+=n.bitLength,R=n.value;let r=ht.readUEV(f,dt);dt+=r.bitLength,B=r.value}let L=ht.readBit(f,dt);if(dt+=1,L){let t=ht.readBit(f,dt);if(dt+=1,t){const t=ht.readByte(f,dt);switch(dt+=8,t){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:{let t=ht.readByte(f,dt);dt+=8;let e=ht.readByte(f,dt);dt+=8;let n=ht.readByte(f,dt);dt+=8;let r=ht.readByte(f,dt);dt+=8,d=[t<<8|e,n<<8|r];break}}d&&(p=d[0]/d[1]),255===t&&(dt+=16,dt+=16)}let e=ht.readBit(f,dt);dt+=1,e&&(dt+=1);let n=ht.readBit(f,dt);if(dt+=1,n){o=ht.readBit(f,dt,3),dt+=3,dt+=1;let t=ht.readBit(f,dt);dt+=1,t&&(dt+=24)}let r=ht.readBit(f,dt);if(dt+=1,r){let t=ht.readUEV(f,dt);dt+=t.bitLength;let e=ht.readUEV(f,dt);dt+=e.bitLength}let i=ht.readBit(f,dt);dt+=1,i&&(a=ht.readBit(f,dt,32),dt+=32,s=ht.readBit(f,dt,32),dt+=32,v=!!ht.readBit(f,dt),dt+=1,y=s/(2*a))}return{payload:f,profile_idc:u,profile_compatibility:c,level_idc:l,sps_id:g.value,log2_max_frame_num_minus4:b.value,pic_order_cnt_type:w,log2_max_pic_order_cnt_lsb_minus4:e?e.value:0,width:Math.ceil((16*(k.value+1)-2*S-2*T)*p),height:(2-P)*(x.value+1)*16-2*R-2*B,pixelRatio:d,video_format:o,fps:y,fixedFPS:v}}(this.data);break;case 8:this.pps=function(t){let e,n,r=0,i=t,o=[],a=0;r+=ht.readUEV(i,r).bitLength,r+=ht.readUEV(i,r).bitLength,r+=1,r+=1;let s=ht.readUEV(i,r);if(r+=s.bitLength,s.value>0){let t=ht.readUEV(i,r);r+=t.bitLength;let u,c=0;switch(t.value){case 0:for(c=0;c<=t.value;c++)u=ht.readUEV(i,r),r+=u.bitLength;break;case 2:for(c=0;c<=t.value;c++)u=ht.readUEV(i,r),r+=u.bitLength,u=ht.readUEV(i,r),r+=u.bitLength;break;case 3:case 4:case 5:r+=1,e=ht.readUEV(i,r),r+=e.bitLength;break;case 6:{n=ht.readUEV(i,r),r+=n.bitLength;let t=Math.ceil(Math.log2(s.value+1));for(a=0;a<=n.value;a++)o.push(ht.readBit(i,r,t)),r+=t}}}return r+=ht.readUEV(i,r).bitLength,r+=ht.readUEV(i,r).bitLength,r+=1,r+=1,r+=ht.readSEV(i,r).bitLength,r+=ht.readSEV(i,r).bitLength,r+=ht.readSEV(i,r).bitLength,r+=1,r+=1,r+=1,{sliceGroupNum:s.value+1}}(this.data);break;case 6:this.sei=(this.data,{});break;case 9:this.primary_pic_type=this.data[0]>>5}}}class vt extends b{constructor(){super(),this.cachedBytes=null}push(t){let e,n=this,r=0,i=0,o=0,{pts:a,dts:s,payload:u,naluSizeLength:c}=t;if(this.cachedBytes){try{e=new Uint8Array(this.cachedBytes.byteLength+u.byteLength)}catch(t){throw`h264 alloc mem error ${this.cachedBytes.byteLength}/${u.byteLength}`}e.set(this.cachedBytes),e.set(u,this.cachedBytes.byteLength)}else e=u;if(c){let t=0,r=0,i=0;do{r=0;for(let n=0;n<c;n++)r|=e[t+n]<<8*(c-n-1);t+=c,i=t+r,i>e.length&&(i=e.length);let o=e.subarray(t,i),u=new yt(o);u.pts=a,u.dts=s,n.emit("nalu",u),t=i}while(t<e.length)}else{let t=e.byteLength-1,u=0;do{if(0!==e[t])break;u++,t--}while(t>0);u>=3&&(e=e.subarray(0,t+1));do{let t=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],c=e.length-r>=4?t:-1,l=0,f=r===e.length-1;if(c>>8==1?l=3:1===c&&(l=4),3===l||4===l||f){let t=i+o,c=f&&u>=3;if(r>i&&(!f||c)){let o=e.subarray(t,c?r+1:r),u=new yt(o);u.pts=a,u.dts=s,n.emit("nalu",u),i=r}f&&(u<3?(this.cachedBytes=e.subarray(i),this.cachedBytes.pts=a,this.cachedBytes.dts=s,this.cachedBytes.startCodeLength=o):this.cachedBytes=null),r===i&&(o=l),r+=l||1}else r++}while(r<e.length)}if(this.cachedBytes){let t=new yt(this.cachedBytes.subarray(this.cachedBytes.startCodeLength));t.pts=this.cachedBytes.pts,t.dts=this.cachedBytes.dts,this.emit("nalu",t),this.cachedBytes=null}this.emit("done")}reset(){this.cachedBytes=null}}class gt extends F{constructor(t){super(),this.PSI=t,this.trackId=null,this.currentFrame=[],this.codec=new vt,this._newGop(),this._newGops(),this.codec.on("nalu",t=>{if(7===t.unit_type){let e=this.PSI.findTrack(this.trackId),n=(t=>{let e="avc1.",n=[t.profile_idc,t.profile_compatibility,t.level_idc];for(let t=0;t<n.length;t++){let r=n[t].toString(16);r.length<2&&(r="0"+r),e+=r}return{codec:e}})(t.sps);e.codec=n.codec,e.width=t.sps.width,e.height=t.sps.height,e.profileIdc=t.sps.profile_idc,e.profileCompatibility=t.sps.profile_compatibility,e.levelIdc=t.sps.level_idc,e.pixelRatio=t.sps.pixelRatio,e.sps=[t.rawData]}else if(8===t.unit_type){this.PSI.findTrack(this.trackId).pps=[t.rawData]}this._grouping(t)})}push(t){const{stream_type:e,pes:n,pid:r}=t;if(27===e||36===e){this.trackId=r;let t={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(t)}}flush(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this._pushFrameIntoGop(),this.currentFrame=[]),this.gop.length>0&&this._pushGopIntoGroup()}reset(){this.codec.reset(),this.currentFrame=[],this._newGop(),this._newGops()}_grouping(t){9===t.unit_type?(this.currentFrame.length>0&&(this.currentFrame.duration=t.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this._pushGopIntoGroup()),this.currentFrame.keyframe||this.gop.length>0?this._pushFrameIntoGop():U.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=t.pts,this.currentFrame.dts=t.dts):(5===t.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=t.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(t)),this.currentFrame.duration=t.dts-this.currentFrame.dts}_newGop(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}_pushFrameIntoGop(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}_newGops(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}_pushGopIntoGroup(){let t=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=t.dts,this.gops.firstPTS=t.pts,this.gops.push(this.gop),this.emit("data",this.gops),this._newGop(),this._newGops(),this.emit("done")}}class mt extends F{constructor(t,e,n={}){super(),this.context=t,this.PSI=e,this.options=n,this.tracks=[],this.adtsStream=new ct(e),this.avcStream=new gt(e),this.streams=[this.adtsStream,this.avcStream],n.decodeCodec&&(this.avcStream.on("data",t=>{let e=n.config.stubTime;if(B(e)){let n=(t.firstPTS+t.duration)/9e4;if(n<e)return void U.warn(`drop avc gop, start/end/stubTime(${t.firstPTS}/${n}/${e})`)}this.tracks.push(t),this.emit("data",this.tracks),this.tracks=[],this.adtsStream.flush()}),this.adtsStream.on("data",t=>{let e=n.config.stubTime;if(B(e)){let n=(t.firstPTS+t.duration)/9e4;if(n<e)return void U.warn(`drop adts, start/end/stubTime(${t.firstPTS}/${n}/${e})`)}this.tracks.push(t),this.emit("data",this.tracks),this.tracks=[]}))}push(t){const{options:e,adtsStream:n,avcStream:r}=this;let{stream_type:i}=t;if(e.decodeCodec)switch(i){case 27:case 36:r.push(t);break;case 15:n.push(t);break;default:U.warn("ts elementary encounter unknown stream type "+i)}else this.emit("data",t)}flush(){let{streams:t,tracks:e}=this;for(let e=0;e<this.streams.length;e++){t[e].flush()}e.length>0&&this.emit("data",e),this.emit("done"),e.splice(0,e.length)}reset(){this.tracks=[];for(let t=0;t<this.streams.length;t++){this.streams[t].reset()}this.emit("reset")}}class bt extends V{constructor(t){super(),this.start_code_prefix=this.readUint16(t,0)<<8|t[2],this.stream_id=t[3],this.packet_length=this.readUint16(t,4),this.data_alignment_indicator=4&t[6],this.copyright=2&t[6],this.PTS_DTS_flags=t[7]>>6,this.ESCR_flag=32&t[7],this.ES_rate_flag=16&t[7],this.trick_mode_flag=8&t[7],this.additional_copy_info_flag=4&t[7],this.CRC_flag=2&t[7],this.extension_flag=1&t[7],this.header_data_length=t[8],this.PTS=0,2==(2&this.PTS_DTS_flags)&&(this.PTS=this.calcTimestamp_(t,9)),this.DTS=this.PTS,1==(1&this.PTS_DTS_flags)&&(this.DTS=this.calcTimestamp_(t,14)),this.data_byte=t.subarray(9+this.header_data_length)}calcTimestamp_(t,e){return 536870912*(14&t[e])+(t[e+1]<<22)+(t[e+2]>>1<<15)+(t[e+3]<<7)+(t[e+4]>>1)}valid(){let t=this.start_code_prefix;return 0===t[0]&&0===t[1]&&1===t[2]}}class wt extends F{constructor(t,e){super(),this.context=t,this.PSI=e,this.PID=null,this.cache_buffer=new A}push(t){const e=this;t.PID>255&&t.PID<8191&&(-1==this.PSI.currentProgramPID?e._pushPacket(t):this.PSI.currentProgramPID!==t.PID&&(1===t.payload_unit_start_indicator&&e._assembleOnePES(),e._pushPacket(t)))}flush(){this._assembleOnePES(),this.emit("done")}reset(){this._clearCached(),this.emit("reset")}_clearCached(){this.PID=null,this.cache_buffer.clear()}_pushPacket(t){let e=this.cache_buffer.empty;e&&0===t.payload_unit_start_indicator||(e&&(this.PID=t.PID),this.cache_buffer.append(t.payload))}_assembleOnePES(){const t=this;if(!this.cache_buffer.empty){let e;try{e=this.cache_buffer.toNewBytes()}catch(t){throw"pes alloc mem err "+this.cache_buffer.byteLength}let n=new bt(e),r=this.PSI.findTrack(this.PID);if(r){let e={pid:r.id,stream_type:r.stream_type,pcr_pid:r.pcr_pid,pes:n};t.emit("data",e)}t._clearCached()}}}class _t extends V{constructor(t){if(super(),this.sync_byte=t[0],this.transport_error_indicator=t[1]>>7,this.payload_unit_start_indicator=t[1]>>6&1,this.transport_priority=t[1]>>>5&1,this.PID=8191&this.readUint16(t,1),this.tsc=t[3]>>6,this.afc=t[3]>>4&3,this.continuity_counter=15&t[3],this.has_payload=1&this.afc,this.has_adaptation=2&this.afc,this.has_payload)if(this.has_adaptation){let e=t[4];this.payload=t.subarray(5+e)}else this.payload=t.subarray(4)}valid(){return 71===this.sync_byte&&1===this.has_payload}}class kt extends H{constructor(t={}){super(t),this.psi_=new q(this.ctx_),this.pesStream_=new wt(this.ctx_,this.psi_),this.elementaryStream_=new mt(this.ctx_,this.psi_,t),this.complexStream_=new K(this.ctx_,this.psi_),this.pipe(this.pesStream_),this.pesStream_.pipe(this.elementaryStream_),this.elementaryStream_.pipe(this.complexStream_),super.listenEndStream_()}get endStream(){let t=this.elementaryStream_;return this.options_.decodeCodec&&(t=this.complexStream_),t}push(t,e){const{done:n}=e,{options_:r,ctx_:i,cache_buffer_:o,psi_:a}=this;let s=super.constraintPushData_(t),u=o.byteLength,c=null;for(r.config=e,U.log(`hls demux received ${s.byteLength} bytes, cache ${u} bytes. ${n?"chunk done":""}`),o.append(s);o.byteLength>=188;){let t=o.cut(188);if(t){let e=new _t(t);if(!e.valid()){let n=`Encounter invalid ts packet, packet_length(${t.length}), cache_length(${this.cache_buffer_.byteLength}), has_payload(${e.has_payload}), data(${t})`;U.error(n),this.reset(),i.emit("error",W.TS_SYNC_BYTE,n,{startByte:c,endByte:c+t.byteLength});break}a.parse(e),this.emit("data",e),c+=t.byteLength}}o.empty&&n&&this.emit("done")}reset(){this.cache_buffer_.clear(),this.emit("reset")}}var xt,Pt;!function(t){t[t.HEAD=0]="HEAD",t[t.BODY=1]="BODY"}(xt||(xt={})),function(t){t[t.SCRIPT_DATA=18]="SCRIPT_DATA",t[t.VIDEO=9]="VIDEO",t[t.AUDIO=8]="AUDIO"}(Pt||(Pt={}));var Et,St,Tt,Rt;!function(t){t[t.AAC=10]="AAC"}(Et||(Et={})),function(t){t[t.MONO=0]="MONO",t[t.STEREO=1]="STEREO"}(St||(St={}));!function(t){t[t.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",t[t.AAC_RAW=1]="AAC_RAW"}(Tt||(Tt={}));!function(t){t[t.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",t[t.NALU=1]="NALU",t[t.SEQUENCE_END=2]="SEQUENCE_END"}(Rt||(Rt={}));const Bt=new vt,Lt=[];Bt.on("nalu",t=>{Lt.push(t)});var At;!function(t){t[t.AVC=7]="AVC"}(At||(At={}));var Dt=function(){function t(e){o()(this,t),d()(this,"previousPes",null),d()(this,"maxAudioPTS",0),d()(this,"maxVideoPTS",0),e?(this.init(),this.dataArray=[],this.videoArray=[],this.audioArray=[],this.decode=e):console.error("class TsDemux need pass decode parmas")}return s()(t,[{key:"init",value:function(){var t=this;try{this.demuxer=new kt({enableWorker:!1,debug:!1,onlyDemuxElementary:!0}),this.demuxer.on(r.DEMUX_DATA,(function(e){e instanceof Array?(t.dataArray.push(e),t.demuxed(t.dataArray),t.dataArray=[]):t.dataArray.push(e)})),this.demuxer.on(r.DONE,(function(e){var n={};t.demuxed(t.dataArray),t.dataArray=[],t.previousPes.partEnd=!0,t.previousPes.lastTS=t.isLast,t.isLast?(t.maxPTS=Math.min(t.maxAudioPTS,t.maxVideoPTS),n.audioEnd=!0,t.audioQueue(n),self.postMessage({type:"demuxedAAC",data:t.audioArray}),t.audioArray=[],self.postMessage({type:"maxPTS",data:{maxAudioPTS:t.maxAudioPTS,maxVideoPTS:t.maxVideoPTS}})):(self.postMessage({type:"demuxedAAC",data:t.audioArray}),t.audioArray=[]),t.decode.push(t.videoArray),t.videoArray=[],t.previousPes=null}))}catch(t){console.error("init demuxer failed.")}}},{key:"push",value:function(t){this.demuxer.push(t,{done:!0})}},{key:"demuxed",value:function(t){var e=this;t.forEach((function(t){e.tsDemuxed(t)}))}},{key:"tsDemuxed",value:function(t){var e=t.stream_type,n=t.pes||{};switch(e){case 27:case 36:this.videoQueue(n);break;case 3:case 15:case 17:n.PTS=Math.round(n.PTS*u.a*1e3),this.maxAudioPTS=Math.max(n.PTS,this.maxAudioPTS),this.audioQueue(n)}}},{key:"audioQueue",value:function(t){this.audioArray.push(t)}},{key:"videoQueue",value:function(t){this.previousPes=t,this.maxVideoPTS=Math.max(this.maxVideoPTS,t.PTS),this.videoArray.push(t)}},{key:"destroy",value:function(){this.demuxer.destroy()}}]),t}();self.decode=new f,self.demuxer=new Dt(self.decode);e.default=function(t){t.onmessage=function(e){var n=e.data,r=n.type,i=n.data,o=n.isLast;switch(r){case"startDemux":t.demuxer.isLast=o,t.demuxer.push(i);break;case"loadwasm":t.decode.loadWASM(e);break;case"flush":t.decode.flush()}}}},function(t,e,n){t.exports=!n(20)&&!n(13)((function(){return 7!=Object.defineProperty(n(110)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(12),i=n(19),o=n(54),a=n(111),s=n(21).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(30),i=n(32),o=n(80)(!1),a=n(112)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(21),i=n(14),o=n(55);t.exports=n(20)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(32),i=n(58).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(20),i=n(55),o=n(81),a=n(72),s=n(22),u=n(71),c=Object.assign;t.exports=!c||n(13)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=s(t),c=arguments.length,l=1,f=o.f,h=a.f;c>l;)for(var d,p=u(arguments[l++]),y=f?i(p).concat(f(p)):i(p),v=y.length,g=0;v>g;)d=y[g++],r&&!h.call(p,d)||(n[d]=p[d]);return n}:c},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(36),i=n(15),o=n(147),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(12).parseInt,i=n(65).trim,o=n(116),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(12).parseFloat,i=n(65).trim;t.exports=1/r(n(116)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(41);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(15),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";var r=n(57),i=n(52),o=n(64),a={};n(31)(a,n(16)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(14);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(269);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(36),i=n(22),o=n(71),a=n(17);t.exports=function(t,e,n,s,u){r(e);var c=i(t),l=o(c),f=a(c.length),h=u?f-1:0,d=u?-1:1;if(n<2)for(;;){if(h in l){s=l[h],h+=d;break}if(h+=d,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=d)h in l&&(s=e(s,l[h],h,c));return s}},function(t,e,n){"use strict";var r=n(22),i=n(56),o=n(17);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(131);n(7)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){n(20)&&"g"!=/./g.flags&&n(21).f(RegExp.prototype,"flags",{configurable:!0,get:n(84)})},function(t,e,n){"use strict";var r,i,o,a,s=n(54),u=n(12),c=n(35),l=n(73),f=n(7),h=n(15),d=n(36),p=n(68),y=n(87),v=n(74),g=n(133).set,m=n(289)(),b=n(162),w=n(290),_=n(88),k=n(163),x=u.TypeError,P=u.process,E=P&&P.versions,S=E&&E.v8||"",T=u.Promise,R="process"==l(P),B=function(){},L=i=b.f,A=!!function(){try{var t=T.resolve(1),e=(t.constructor={})[n(16)("species")]=function(t){t(B,B)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(B)instanceof e&&0!==S.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),D=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},C=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&M(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?c(x("Promise-chain cycle")):(o=D(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!a&&l.exit(),c(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)}))}},O=function(t){g.call(u,(function(){var e,n,r,i=t._v,o=I(t);if(o&&(e=w((function(){R?P.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=R||I(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},I=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){g.call(u,(function(){var e;R?P.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},U=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x("Promise can't be resolved itself");(e=D(t))?m((function(){var r={_w:n,_d:!1};try{e.call(t,c(U,r,1),c(N,r,1))}catch(t){N.call(r,t)}})):(n._v=t,n._s=1,C(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};A||(T=function(t){p(this,T,"Promise","_h"),d(t),r.call(this);try{t(c(U,this,1),c(N,this,1))}catch(t){N.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(69)(T.prototype,{then:function(t,e){var n=L(v(this,T));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=R?P.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(U,t,1),this.reject=c(N,t,1)},b.f=L=function(t){return t===T||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!A,{Promise:T}),n(64)(T,"Promise"),n(67)("Promise"),a=n(19).Promise,f(f.S+f.F*!A,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(t){return k(s&&this===a?T:this,t)}}),f(f.S+f.F*!(A&&n(83)((function(t){T.all(t).catch(B)}))),"Promise",{all:function(t){var e=this,n=L(e),r=n.resolve,i=n.reject,o=w((function(){var n=[],o=0,a=1;y(t,!1,(function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=L(e),r=n.reject,i=w((function(){y(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(36);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){var r=n(14),i=n(15),o=n(162);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(21).f,i=n(57),o=n(69),a=n(35),s=n(68),u=n(87),c=n(122),l=n(158),f=n(67),h=n(20),d=n(49).fastKey,p=n(61),y=h?"_s":"size",v=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[y]=0,null!=r&&u(r,n,t[c],t)}));return o(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var n=p(this,e),r=v(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[y]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(p(this,e),t)}}),h&&r(l.prototype,"size",{get:function(){return p(this,e)[y]}}),l},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[y]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,(function(t,n){this._t=p(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(69),i=n(49).getWeak,o=n(14),a=n(15),s=n(68),u=n(87),c=n(40),l=n(30),f=n(61),h=c(5),d=c(6),p=0,y=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},g=function(t,e){return h(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t((function(t,r){s(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=r&&u(r,n,t[o],t)}));return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?y(f(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?y(f(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?y(t).set(e,n):r[t._i]=n,t},ufstore:y}},function(t,e,n){var r=n(37),i=n(17);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(58),i=n(81),o=n(14),a=n(12).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(17),i=n(118),o=n(42);t.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return s;var f=l-u,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},function(t,e,n){var r=n(20),i=n(55),o=n(32),a=n(72).f;t.exports=function(t){return function(e){for(var n,s=o(e),u=i(s),c=u.length,l=0,f=[];c>l;)n=u[l++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},,,function(t,e,n){n(175),t.exports=n(360)},function(t,e,n){"use strict";n(176);var r,i=(r=n(347))&&r.__esModule?r:{default:r};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(t,e,n){"use strict";n(177),n(320),n(322),n(325),n(327),n(329),n(331),n(333),n(335),n(337),n(339),n(341),n(343),n(78)},function(t,e,n){n(178),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(259),n(260),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(130),n(283),n(159),n(284),n(160),n(285),n(286),n(287),n(288),n(161),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),t.exports=n(19)},function(t,e,n){"use strict";var r=n(12),i=n(30),o=n(20),a=n(7),s=n(25),u=n(49).KEY,c=n(13),l=n(79),f=n(64),h=n(53),d=n(16),p=n(111),y=n(140),v=n(180),g=n(82),m=n(14),b=n(15),w=n(22),_=n(32),k=n(48),x=n(52),P=n(57),E=n(143),S=n(38),T=n(81),R=n(21),B=n(55),L=S.f,A=R.f,D=E.f,C=r.Symbol,O=r.JSON,I=O&&O.stringify,M=d("_hidden"),N=d("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),H=l("symbols"),j=l("op-symbols"),W=Object.prototype,$="function"==typeof C&&!!T.f,V=r.QObject,Y=!V||!V.prototype||!V.prototype.findChild,z=o&&c((function(){return 7!=P(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=L(W,e);r&&delete W[e],A(t,e,n),r&&t!==W&&A(W,e,r)}:A,X=function(t){var e=H[t]=P(C.prototype);return e._k=t,e},G=$&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},q=function(t,e,n){return t===W&&q(j,e,n),m(t),e=k(e,!0),m(n),i(H,e)?(n.enumerable?(i(t,M)&&t[M][e]&&(t[M][e]=!1),n=P(n,{enumerable:x(0,!1)})):(i(t,M)||A(t,M,x(1,{})),t[M][e]=!0),z(t,e,n)):A(t,e,n)},K=function(t,e){m(t);for(var n,r=v(e=_(e)),i=0,o=r.length;o>i;)q(t,n=r[i++],e[n]);return t},Q=function(t){var e=U.call(this,t=k(t,!0));return!(this===W&&i(H,t)&&!i(j,t))&&(!(e||!i(this,t)||!i(H,t)||i(this,M)&&this[M][t])||e)},J=function(t,e){if(t=_(t),e=k(e,!0),t!==W||!i(H,e)||i(j,e)){var n=L(t,e);return!n||!i(H,e)||i(t,M)&&t[M][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=D(_(t)),r=[],o=0;n.length>o;)i(H,e=n[o++])||e==M||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===W,r=D(n?j:_(t)),o=[],a=0;r.length>a;)!i(H,e=r[a++])||n&&!i(W,e)||o.push(H[e]);return o};$||(s((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(j,n),i(this,M)&&i(this[M],t)&&(this[M][t]=!1),z(this,t,x(1,n))};return o&&Y&&z(W,t,{configurable:!0,set:e}),X(t)}).prototype,"toString",(function(){return this._k})),S.f=J,R.f=q,n(58).f=E.f=Z,n(72).f=Q,T.f=tt,o&&!n(54)&&s(W,"propertyIsEnumerable",Q,!0),p.f=function(t){return X(d(t))}),a(a.G+a.W+a.F*!$,{Symbol:C});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=B(d.store),it=0;rt.length>it;)y(rt[it++]);a(a.S+a.F*!$,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=C(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!$,"Object",{create:function(t,e){return void 0===e?P(t):K(P(t),e)},defineProperty:q,defineProperties:K,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var ot=c((function(){T.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return T.f(w(t))}}),O&&a(a.S+a.F*(!$||c((function(){var t=C();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!G(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!G(e))return e}),r[1]=e,I.apply(O,r)}}),C.prototype[N]||n(31)(C.prototype,N,C.prototype.valueOf),f(C,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){t.exports=n(79)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(55),i=n(81),o=n(72);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(7);r(r.S,"Object",{create:n(57)})},function(t,e,n){var r=n(7);r(r.S+r.F*!n(20),"Object",{defineProperty:n(21).f})},function(t,e,n){var r=n(7);r(r.S+r.F*!n(20),"Object",{defineProperties:n(142)})},function(t,e,n){var r=n(32),i=n(38).f;n(39)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},function(t,e,n){var r=n(22),i=n(59);n(39)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},function(t,e,n){var r=n(22),i=n(55);n(39)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e,n){n(39)("getOwnPropertyNames",(function(){return n(143).f}))},function(t,e,n){var r=n(15),i=n(49).onFreeze;n(39)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(15),i=n(49).onFreeze;n(39)("seal",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(15),i=n(49).onFreeze;n(39)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(15);n(39)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(15);n(39)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(15);n(39)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},function(t,e,n){var r=n(7);r(r.S+r.F,"Object",{assign:n(144)})},function(t,e,n){var r=n(7);r(r.S,"Object",{is:n(145)})},function(t,e,n){var r=n(7);r(r.S,"Object",{setPrototypeOf:n(115).set})},function(t,e,n){"use strict";var r=n(73),i={};i[n(16)("toStringTag")]="z",i+""!="[object z]"&&n(25)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(t,e,n){var r=n(7);r(r.P,"Function",{bind:n(146)})},function(t,e,n){var r=n(21).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(20)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(15),i=n(59),o=n(16)("hasInstance"),a=Function.prototype;o in a||n(21).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(7),i=n(148);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(7),i=n(149);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(12),i=n(30),o=n(41),a=n(117),s=n(48),u=n(13),c=n(58).f,l=n(38).f,f=n(21).f,h=n(65).trim,d=r.Number,p=d,y=d.prototype,v="Number"==o(n(57)(y)),g="trim"in String.prototype,m=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=g?e.trim():h(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(v?u((function(){y.valueOf.call(n)})):"Number"!=o(n))?a(new p(m(e)),n,d):m(e)};for(var b,w=n(20)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)i(p,b=w[_])&&!i(d,b)&&f(d,b,l(p,b));d.prototype=y,y.constructor=d,n(25)(r,"Number",d)}},function(t,e,n){"use strict";var r=n(7),i=n(37),o=n(150),a=n(118),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},p=function(t,e,n){return 0===e?n:e%2==1?p(t,e-1,n*t):p(t*t,e/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(13)((function(){s.call({})}))),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,l),c=i(t),y="",v="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*p(2,69,1))-69)<0?u*p(2,-e,1):u/p(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(p(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),v=d()}else f(0,n),f(1<<-e,0),v=d()+a.call("0",c);return v=c>0?y+((s=v.length)<=c?"0."+a.call("0",c-s)+v:v.slice(0,s-c)+"."+v.slice(s-c)):y+v}})},function(t,e,n){"use strict";var r=n(7),i=n(13),o=n(150),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(7);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(7),i=n(12).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(7);r(r.S,"Number",{isInteger:n(151)})},function(t,e,n){var r=n(7);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(7),i=n(151),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(7);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(7);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(7),i=n(149);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(7),i=n(148);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(7),i=n(152),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var r=n(7),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(7),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(7),i=n(119);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(7);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(7),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(7),i=n(120);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(7);r(r.S,"Math",{fround:n(223)})},function(t,e,n){var r=n(119),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),c=r(t);return i<u?c*(i/u/a+1/o-1/o)*u*a:(n=(e=(1+a/o)*i)-(e-i))>s||n!=n?c*(1/0):c*n}},function(t,e,n){var r=n(7),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var r=n(7),i=Math.imul;r(r.S+r.F*n(13)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(7);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(7);r(r.S,"Math",{log1p:n(152)})},function(t,e,n){var r=n(7);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(7);r(r.S,"Math",{sign:n(119)})},function(t,e,n){var r=n(7),i=n(120),o=Math.exp;r(r.S+r.F*n(13)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(7),i=n(120),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(7);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(7),i=n(56),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(7),i=n(32),o=n(17);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(65)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,n){"use strict";var r=n(121)(!0);n(122)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var r=n(7),i=n(121)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(7),i=n(17),o=n(123),a="".endsWith;r(r.P+r.F*n(125)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var r=n(7),i=n(123);r(r.P+r.F*n(125)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(7);r(r.P,"String",{repeat:n(118)})},function(t,e,n){"use strict";var r=n(7),i=n(17),o=n(123),a="".startsWith;r(r.P+r.F*n(125)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(26)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,n){"use strict";n(26)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,n){"use strict";n(26)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,n){"use strict";n(26)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,n){"use strict";n(26)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,n){"use strict";n(26)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,n){"use strict";n(26)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,n){"use strict";n(26)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,n){"use strict";n(26)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,n){"use strict";n(26)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,n){"use strict";n(26)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,n){"use strict";n(26)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,n){"use strict";n(26)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,n){var r=n(7);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(7),i=n(22),o=n(48);r(r.P+r.F*n(13)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(7),i=n(258);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(13),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(25)(r,"toString",(function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"}))},function(t,e,n){var r=n(16)("toPrimitive"),i=Date.prototype;r in i||n(31)(i,r,n(261))},function(t,e,n){"use strict";var r=n(14),i=n(48);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(7);r(r.S,"Array",{isArray:n(82)})},function(t,e,n){"use strict";var r=n(35),i=n(7),o=n(22),a=n(154),s=n(126),u=n(17),c=n(127),l=n(128);i(i.S+i.F*!n(83)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,f,h=o(t),d="function"==typeof this?this:Array,p=arguments.length,y=p>1?arguments[1]:void 0,v=void 0!==y,g=0,m=l(h);if(v&&(y=r(y,p>2?arguments[2]:void 0,2)),null==m||d==Array&&s(m))for(n=new d(e=u(h.length));e>g;g++)c(n,g,v?y(h[g],g):h[g]);else for(f=m.call(h),n=new d;!(i=f.next()).done;g++)c(n,g,v?a(f,y,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){"use strict";var r=n(7),i=n(127);r(r.S+r.F*n(13)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(7),i=n(32),o=[].join;r(r.P+r.F*(n(71)!=Object||!n(33)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(7),i=n(114),o=n(41),a=n(56),s=n(17),u=[].slice;r(r.P+r.F*n(13)((function(){i&&u.call(i)})),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),c=a(e,n),l=s(c-i),f=new Array(l),h=0;h<l;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},function(t,e,n){"use strict";var r=n(7),i=n(36),o=n(22),a=n(13),s=[].sort,u=[1,2,3];r(r.P+r.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!n(33)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(7),i=n(40)(0),o=n(33)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(15),i=n(82),o=n(16)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(7),i=n(40)(1);r(r.P+r.F*!n(33)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(40)(2);r(r.P+r.F*!n(33)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(40)(3);r(r.P+r.F*!n(33)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(40)(4);r(r.P+r.F*!n(33)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(156);r(r.P+r.F*!n(33)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(7),i=n(156);r(r.P+r.F*!n(33)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(7),i=n(80)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(33)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(32),o=n(37),a=n(17),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(33)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(7);r(r.P,"Array",{copyWithin:n(157)}),n(60)("copyWithin")},function(t,e,n){var r=n(7);r(r.P,"Array",{fill:n(129)}),n(60)("fill")},function(t,e,n){"use strict";var r=n(7),i=n(40)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(60)("find")},function(t,e,n){"use strict";var r=n(7),i=n(40)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(60)(o)},function(t,e,n){n(67)("Array")},function(t,e,n){var r=n(12),i=n(117),o=n(21).f,a=n(58).f,s=n(124),u=n(84),c=r.RegExp,l=c,f=c.prototype,h=/a/g,d=/a/g,p=new c(h)!==h;if(n(20)&&(!p||n(13)((function(){return d[n(16)("match")]=!1,c(h)!=h||c(d)==d||"/a/i"!=c(h,"i")})))){c=function(t,e){var n=this instanceof c,r=s(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(p?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:f,c)};for(var y=function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=a(l),g=0;v.length>g;)y(v[g++]);f.constructor=c,c.prototype=f,n(25)(r,"RegExp",c)}n(67)("RegExp")},function(t,e,n){"use strict";n(160);var r=n(14),i=n(84),o=n(20),a=/./.toString,s=function(t){n(25)(RegExp.prototype,"toString",t,!0)};n(13)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(t,e,n){"use strict";var r=n(14),i=n(17),o=n(132),a=n(85);n(86)("match",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var u=r(t),c=String(this);if(!u.global)return a(u,c);var l=u.unicode;u.lastIndex=0;for(var f,h=[],d=0;null!==(f=a(u,c));){var p=String(f[0]);h[d]=p,""===p&&(u.lastIndex=o(c,i(u.lastIndex),l)),d++}return 0===d?null:h}]}))},function(t,e,n){"use strict";var r=n(14),i=n(22),o=n(17),a=n(37),s=n(132),u=n(85),c=Math.max,l=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(86)("replace",2,(function(t,e,n,p){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=p(n,t,this,e);if(i.done)return i.value;var f=r(t),h=String(this),d="function"==typeof e;d||(e=String(e));var v=f.global;if(v){var g=f.unicode;f.lastIndex=0}for(var m=[];;){var b=u(f,h);if(null===b)break;if(m.push(b),!v)break;""===String(b[0])&&(f.lastIndex=s(h,o(f.lastIndex),g))}for(var w,_="",k=0,x=0;x<m.length;x++){b=m[x];for(var P=String(b[0]),E=c(l(a(b.index),h.length),0),S=[],T=1;T<b.length;T++)S.push(void 0===(w=b[T])?w:String(w));var R=b.groups;if(d){var B=[P].concat(S,E,h);void 0!==R&&B.push(R);var L=String(e.apply(void 0,B))}else L=y(P,h,E,S,R,e);E>=k&&(_+=h.slice(k,E)+L,k=E+P.length)}return _+h.slice(k)}];function y(t,e,r,o,a,s){var u=r+t.length,c=o.length,l=d;return void 0!==a&&(a=i(a),l=h),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var h=f(l/10);return 0===h?n:h<=c?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=n(14),i=n(145),o=n(85);n(86)("search",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),u=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var l=o(s,u);return i(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]}))},function(t,e,n){"use strict";var r=n(124),i=n(14),o=n(74),a=n(132),s=n(17),u=n(85),c=n(131),l=n(13),f=Math.min,h=[].push,d="length",p=!l((function(){RegExp(4294967295,"y")}));n(86)("split",2,(function(t,e,n,l){var y;return y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[d]||2!="ab".split(/(?:ab)*/)[d]||4!=".".split(/(.?)(.?)/)[d]||".".split(/()()/)[d]>1||"".split(/.?/)[d]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,p=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,l+"g");(o=c.call(y,i))&&!((a=y.lastIndex)>f&&(u.push(i.slice(f,o.index)),o[d]>1&&o.index<i[d]&&h.apply(u,o.slice(1)),s=o[0][d],f=a,u[d]>=p));)y.lastIndex===o.index&&y.lastIndex++;return f===i[d]?!s&&y.test("")||u.push(""):u.push(i.slice(f)),u[d]>p?u.slice(0,p):u}:"0".split(void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):y.call(String(i),n,r)},function(t,e){var r=l(y,t,this,e,y!==n);if(r.done)return r.value;var c=i(t),h=String(this),d=o(c,RegExp),v=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),m=new d(p?c:"^(?:"+c.source+")",g),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===h.length)return null===u(m,h)?[h]:[];for(var w=0,_=0,k=[];_<h.length;){m.lastIndex=p?_:0;var x,P=u(m,p?h:h.slice(_));if(null===P||(x=f(s(m.lastIndex+(p?0:_)),h.length))===w)_=a(h,_,v);else{if(k.push(h.slice(w,_)),k.length===b)return k;for(var E=1;E<=P.length-1;E++)if(k.push(P[E]),k.length===b)return k;_=w=x}}return k.push(h.slice(w)),k}]}))},function(t,e,n){var r=n(12),i=n(133).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(41)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var r=n(164),i=n(61);t.exports=n(89)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(164),i=n(61);t.exports=n(89)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(12),o=n(40)(0),a=n(25),s=n(49),u=n(144),c=n(165),l=n(15),f=n(61),h=n(61),d=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,y=Object.isExtensible,v=c.ufstore,g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(l(t)){var e=p(t);return!0===e?v(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(f(this,"WeakMap"),t,e)}},b=t.exports=n(89)("WeakMap",g,m,c,!0,!0);h&&d&&(u((r=c.getConstructor(g,"WeakMap")).prototype,m),s.NEED=!0,o(["delete","has","get","set"],(function(t){var e=b.prototype,n=e[t];a(e,t,(function(e,i){if(l(e)&&!y(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)}))})))},function(t,e,n){"use strict";var r=n(165),i=n(61);n(89)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(7),i=n(90),o=n(134),a=n(14),s=n(56),u=n(17),c=n(15),l=n(12).ArrayBuffer,f=n(74),h=o.ArrayBuffer,d=o.DataView,p=i.ABV&&l.isView,y=h.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||c(t)&&v in t}}),r(r.P+r.U+r.F*n(13)((function(){return!new h(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==y&&void 0===e)return y.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(f(this,h))(u(i-r)),c=new d(this),l=new d(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(67)("ArrayBuffer")},function(t,e,n){var r=n(7);r(r.G+r.W+r.F*!n(90).ABV,{DataView:n(134).DataView})},function(t,e,n){n(43)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(43)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(43)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(43)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(43)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(43)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(43)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(43)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(43)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(7),i=n(36),o=n(14),a=(n(12).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(13)((function(){a((function(){}))})),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},function(t,e,n){var r=n(7),i=n(57),o=n(36),a=n(14),s=n(15),u=n(13),c=n(146),l=(n(12).Reflect||{}).construct,f=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),h=!u((function(){l((function(){}))}));r(r.S+r.F*(f||h),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},function(t,e,n){var r=n(21),i=n(7),o=n(14),a=n(48);i(i.S+i.F*n(13)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(7),i=n(38).f,o=n(14);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(7),i=n(14),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(153)(o,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var r=n(38),i=n(59),o=n(30),a=n(7),s=n(15),u=n(14);a(a.S,"Reflect",{get:function t(e,n){var a,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(a=r.f(e,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(c=i(e))?t(c,n,l):void 0}})},function(t,e,n){var r=n(38),i=n(7),o=n(14);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(7),i=n(59),o=n(14);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(7);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(7),i=n(14),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(7);r(r.S,"Reflect",{ownKeys:n(167)})},function(t,e,n){var r=n(7),i=n(14),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(21),i=n(38),o=n(59),a=n(30),s=n(7),u=n(52),c=n(14),l=n(15);s(s.S,"Reflect",{set:function t(e,n,s){var f,h,d=arguments.length<4?e:arguments[3],p=i.f(c(e),n);if(!p){if(l(h=o(e)))return t(h,n,s,d);p=u(0)}if(a(p,"value")){if(!1===p.writable||!l(d))return!1;if(f=i.f(d,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(d,n,f)}else r.f(d,n,u(0,s));return!0}return void 0!==p.set&&(p.set.call(d,s),!0)}})},function(t,e,n){var r=n(7),i=n(115);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){n(321),t.exports=n(19).Array.includes},function(t,e,n){"use strict";var r=n(7),i=n(80)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(60)("includes")},function(t,e,n){n(323),t.exports=n(19).Array.flatMap},function(t,e,n){"use strict";var r=n(7),i=n(324),o=n(22),a=n(17),s=n(36),u=n(155);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(60)("flatMap")},function(t,e,n){"use strict";var r=n(82),i=n(15),o=n(17),a=n(35),s=n(16)("isConcatSpreadable");t.exports=function t(e,n,u,c,l,f,h,d){for(var p,y,v=l,g=0,m=!!h&&a(h,d,3);g<c;){if(g in u){if(p=m?m(u[g],g,n):u[g],y=!1,i(p)&&(y=void 0!==(y=p[s])?!!y:r(p)),y&&f>0)v=t(e,n,p,o(p.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}g++}return v}},function(t,e,n){n(326),t.exports=n(19).String.padStart},function(t,e,n){"use strict";var r=n(7),i=n(168),o=n(88),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){n(328),t.exports=n(19).String.padEnd},function(t,e,n){"use strict";var r=n(7),i=n(168),o=n(88),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){n(330),t.exports=n(19).String.trimLeft},function(t,e,n){"use strict";n(65)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,n){n(332),t.exports=n(19).String.trimRight},function(t,e,n){"use strict";n(65)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,n){n(334),t.exports=n(111).f("asyncIterator")},function(t,e,n){n(140)("asyncIterator")},function(t,e,n){n(336),t.exports=n(19).Object.getOwnPropertyDescriptors},function(t,e,n){var r=n(7),i=n(167),o=n(32),a=n(38),s=n(127);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=a.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=u(r,e=c[f++]))&&s(l,e,n);return l}})},function(t,e,n){n(338),t.exports=n(19).Object.values},function(t,e,n){var r=n(7),i=n(169)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){n(340),t.exports=n(19).Object.entries},function(t,e,n){var r=n(7),i=n(169)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";n(161),n(342),t.exports=n(19).Promise.finally},function(t,e,n){"use strict";var r=n(7),i=n(19),o=n(12),a=n(74),s=n(163);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){n(344),n(345),n(346),t.exports=n(19)},function(t,e,n){var r=n(12),i=n(7),o=n(88),a=[].slice,s=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(7),i=n(133);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(130),i=n(55),o=n(25),a=n(12),s=n(31),u=n(66),c=n(16),l=c("iterator"),f=c("toStringTag"),h=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),y=0;y<p.length;y++){var v,g=p[y],m=d[g],b=a[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,h),w[f]||s(w,f,g),u[g]=h,m))for(v in r)w[v]||o(w,v,r[v],!0)}},function(t,e,n){n(348),t.exports=n(170).global},function(t,e,n){var r=n(349);r(r.G,{global:n(135)})},function(t,e,n){var r=n(135),i=n(170),o=n(350),a=n(352),s=n(359),u=function(t,e,n){var c,l,f,h=t&u.F,d=t&u.G,p=t&u.S,y=t&u.P,v=t&u.B,g=t&u.W,m=d?i:i[e]||(i[e]={}),b=m.prototype,w=d?r:p?r[e]:(r[e]||{}).prototype;for(c in d&&(n=e),n)(l=!h&&w&&void 0!==w[c])&&s(m,c)||(f=l?w[c]:n[c],m[c]=d&&"function"!=typeof w[c]?n[c]:v&&l?o(f,r):g&&w[c]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):y&&"function"==typeof f?o(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[c]=f,t&u.R&&b&&!b[c]&&a(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(351);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(353),i=n(358);t.exports=n(137)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(354),i=n(355),o=n(357),a=Object.defineProperty;e.f=n(137)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(136);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(137)&&!n(171)((function(){return 7!=Object.defineProperty(n(356)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(136),i=n(135).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(136);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";n.r(e);var r=n(91);n(361);e.default=r.default},function(t,e,n){}])}));