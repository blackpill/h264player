/*! h265player built @2020/10/22 ‰∏ãÂçà10:29:40 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.h265player=e():t.h265player=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=221)}([function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,r){"use strict";r.r(e);e.default={ProcessorResetEnd:"DataProcessorController.processorResetEnd",DataProcessorReady:"DataProcessorController.dataProcessorReady",DecodeStartDecode:"DecodeController.startDecode",DecodeFlush:"DecodeController.flush",DecodeDecoded:"DecodeController.decoded",DecodeApppendEnd:"DecodeController.appendEnd",DecodeFlushEnd:"DecodeController.flushEnd",DecodeReady:"DecodeController.ready",DemuxResetEnd:"DemuxController.resetEnd",DemuxStartDemux:"DemuxController.startDemux",DemuxLast:"DemuxController.last",DemuxVideo:"DemuxController.video",DemuxAAC:"DemuxController.AAC",DemuxReady:"DemuxController.ready",ImagePlayerRenderEnd:"ImagePlayer.renderEnd",ImagePlayerWait:"ImagePlayer.wait",ImagePlayerReady:"ImagePlayer.ready",ImagePlayerEnd:"ImagePlayer.end",ImagePlayerBuffeUpdate:"ImagePlayer.bufferUpdate",ControlBarPlay:"ControlBar.onPlay",ControlBarPause:"ControlBar.onPause",ControlBarPauseLoading:"ControlBar.onPauseLoading",LoadDataReadBufferByNo:"LoadData.readBufferByNo",LoadDataReadBuffer:"LoadData.readBuffer",LoadDataRead:"LoadData.onRead",LoadDataSeek:"LoadData.onSeek",LoadDataFirstLoaded:"LoadData.onFirstLoaded",LoaderPlayListStart:"Loader.playlistStart",LoaderLoading:"Loader.onLoading",LoaderError:"Loader.onError",LoaderLoaded:"Loader.onLoaded",LoaderUpdateSpeed:"Loader.updateSpeed",LoaderLoadFile:"Loader.loadFile",LoaderPlayListLoaded:"Loader.playlistLoaded",AudioPlayerReady:"AudioPlayer.MSEReady",AudioPlayerDataReady:"AudioPlayer.dataReady",AudioPlayerWait:"AudioPlayer.wait",AudioPlayerEnd:"AudioPlayer.end",AudioPlayerPlaySuccess:"AudioPlayer.playSuccess",AudioPlayerPlayFail:"AudioPlayer.playFail",PlayerMaxPTS:"DemuxController.maxpts",PlayerSeekEnd:"Player.seekend",PlayerSpeedTo:"Player.speedTo",PlayerChangeRate:"Player.changeRate",PlayerChangeSrc:"Player.changeSrc",PlayerPlaying:"Player.playing",PlayerTimeUpdate:"Player.timeUpdate",PlayerbufferUpdate:"Player.bufferupdate",PlayerResetReady:"Player.resetReady",PlayerWait:"Player.wait",PlayerLoadNext:"Player.loadNext",PlayerOnPlay:"Player.onPlay",PlayerOnPause:"Player.onPause",PlayerOnSeek:"Player.onSeek",PlayerOnVolume:"Player.onVolume",PlayerReady:"Player.ready",PlayerPlay:"Player.play",PlayerReset:"Player.reset",PlayerLoadedMetaData:"Player.loadedMetaData",PlayerEnd:"Player.end",PlayerPause:"Player.pause",PlayerSeeking:"Player.seeking",PlayerAlert:"Player.alert",PlayerThrowError:"Player.throwError",StreamDataReady:"StreamController.dataReady"}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){var n=r(59);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,r){var n=r(12),i=r(1);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}},,function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}},function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return o}));var n={projectName:"GOLDPLAY",projectAbbreviation:"GP",mode:"production",basePath:"./",get distPath(){var t="";return("development"==this.mode||"test"==this.mode)&&(t="/dist/"),t},get libPath(){return this.distPath+"lib/"},hideBarBoxTime:300,speedList:[{name:"0.5X",value:.5},{name:"1.0X",value:1},{name:"1.5X",value:1.5},{name:"2.0X",value:2},{name:"3.0X",value:3}]},i={maxDuration:30,maxSize:1024e6,maxRetryCount:3,maxSegment:10},a=1/9e4,o={READYBUFFERLENGTH:1e3,MAXBUFFERLENGTH:5e3}},function(t,e,r){"use strict";var n=r(4),i=r.n(n),a=r(5),o=r.n(a),s=r(0),u=r.n(s),l=r(10),c=console||{};function f(t,e){if(c[t]){if(this.disabled||this.level<0)return;if("production"===l.c.mode&&("error"!==t||"warn"!==t))return;if(1===this.level&&["info"].includes(t))return;if(2===this.level&&["log","info"].includes(t))return;if(this.level>2&&"error"!==t)return;for(var r=(new Date).toLocaleString(),n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var o=["[32m".concat(e,"[39m")].concat(i,[r]);"error"!==t&&"warn"!==t||(o=[e].concat(i,[r])),"function"==typeof c[t]&&c[t].apply(c,o)}}var h=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),u()(this,"prefix",l.c.projectName),u()(this,"joiner",">"),u()(this,"left","["),u()(this,"right","]"),u()(this,"disabled",!1),u()(this,"level",0),Object.assign(this,r),"string"==typeof e?this.file=e:e&&e.constructor&&(this.file=e.constructor.name)}return o()(t,[{key:"setDisabled",value:function(t){this.disabled=t}},{key:"setLevel",value:function(t){this.level=t}}],[{key:"get",value:function(e,r){return new t(e,r)}}]),t}();["info","log","debug","warn","error"].forEach((function(t){h.prototype[t]=function(e,r){r=void 0===r?"":this.joiner+r;for(var n=this.left+e+r+this.right,i=this.left+this.prefix+" "+this.file+this.right+n,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];f.apply(this,[t,i].concat(o))}})),e.a=h},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},,,,,,function(t,e,r){"use strict";var n=r(37),i=r(24),a=r(38),o=r(126),s=r(82),u=r(83),l=r(85),c=r(49),f=r(39),h=function(){if(1===arguments.length)this.selection=arguments[0];else{if(0===arguments.length)throw new c.ValueError("Required argument 'data' not found");this.selection=n.apply(null,arguments)}Object.defineProperty(this,"size",{get:function(){return this.selection.size}.bind(this)}),Object.defineProperty(this,"shape",{get:function(){return this.selection.shape}.bind(this)}),Object.defineProperty(this,"ndim",{get:function(){return this.selection.shape.length}.bind(this)}),Object.defineProperty(this,"dtype",{get:function(){return this.selection.dtype}.bind(this),set:function(t){var e=f.getType(t);e!==f.getType(this.dtype)&&(this.selection=n(new e(this.selection.data),this.selection.shape,this.selection.stride,this.selection.offset))}.bind(this)}),Object.defineProperty(this,"T",{get:function(){return this.transpose()}.bind(this)})};h.prototype.get=function(){for(var t=arguments.length,e=0;e<t;e++)arguments[e]<0&&(arguments[e]+=this.shape[e]);return this.selection.get.apply(this.selection,arguments)},h.prototype.set=function(){return this.selection.set.apply(this.selection,arguments)},h.prototype.slice=function(){for(var t=this.ndim,e=new Array(t),r=new Array(t),n=new Array(t),i=this.shape,a=0;a<t;a++){var o=arguments[a];if(void 0===o)break;if(null!==o)if(f.isNumber(o))r[a]=o<0?o+i[a]:o,e[a]=null,n[a]=1;else if(4===o.length&&null===o[1]&&null===o[2]){var s=o[0]<0?o[0]+i[a]:o[0];r[a]=s,e[a]=null,n[a]=o[3]||1}else{var u=o[0]<0?o[0]+i[a]:o[0],l=o[1]<0?o[1]+i[a]:o[1];r[a]=l?u:0,e[a]=l?l-u:u,n[a]=o[2]||1}}var c=this.selection.lo.apply(this.selection,r),d=c.hi.apply(c,e),p=d.step.apply(d,n);return new h(p)},h.prototype.pick=function(t){return new h(this.selection.pick.apply(this.selection,arguments))},h.prototype.lo=function(){return new h(this.selection.lo.apply(this.selection,arguments))},h.prototype.hi=function(){return new h(this.selection.hi.apply(this.selection,arguments))},h.prototype.step=function(){return new h(this.selection.step.apply(this.selection,arguments))},h.prototype.flatten=function(){if(1===this.ndim)return new h(this.selection);var t=f.getType(this.dtype),e=f.flatten(this.tolist(),!0);return e instanceof t||(e=new t(e)),new h(e,[this.size])},h.prototype.reshape=function(t){if(0===arguments.length)throw new c.ValueError("function takes at least one argument (0 given)");if(1===arguments.length&&f.isNumber(t)&&-1===t&&(t=[f.shapeSize(this.shape)]),1===arguments.length&&f.isNumber(t)&&(t=[t]),arguments.length>1&&(t=[].slice.call(arguments)),t.filter((function(t){return-1===t})).length>1)throw new c.ValueError("can only specify one unknown dimension");var e=f.shapeSize(t);if(t=t.map(function(t){return-1===t?-1*this.size/e:t}.bind(this)),this.size!==f.shapeSize(t))throw new c.ValueError("total size of new array must be unchanged");var r,n,i,a,o=this.selection.shape,s=this.selection.offset,u=this.selection.stride,l=o.length,d=t.length;if(l===d){var p=!0;for(i=0;i<d;++i)if(o[i]!==t[i]){p=!1;break}if(p)return new h(this.selection.data,o,u,s)}else if(1===l){for(r=new Array(d),i=d-1,a=1;i>=0;--i)r[i]=a,a*=t[i];for(n=s,i=0;i<d;++i)r[i]<0&&(n-=(t[i]-1)*r[i]);return new h(this.selection.data,t,r,n)}var y=Math.min(l,d),v=!0;for(i=0;i<y;i++)if(o[i]!==t[i]){v=!1;break}if(v){for(r=new Array(d),i=0;i<d;i++)r[i]=u[i]||1;return n=s,new h(this.selection.data,t,r,n)}return this.flatten().reshape(t)},h.prototype.transpose=function(t){if(0===arguments.length){var e=this.ndim;t=new Array(e);for(var r=0;r<e;r++)t[r]=e-r-1}else arguments.length>1&&(t=arguments);return new h(this.selection.transpose.apply(this.selection,t))},h.prototype.dot=function(t){t=t instanceof h?t:v(t,this.dtype);var e=this.shape,r=t.shape;if(2===e.length&&2===r.length&&e[1]===r[0]){var n=f.getType(this.dtype),i=new h(new n(e[0]*r[1]),[e[0],r[1]]);return o(i.selection,this.selection,t.selection),i}if(1===e.length&&2===r.length&&e[0]===r[0])return this.reshape([e[0],1]).T.dot(t).reshape(r[1]);if(2===e.length&&1===r.length&&e[1]===r[0])return this.dot(t.reshape([r[0],1])).reshape(e[0]);if(1===e.length&&1===r.length&&e[0]===r[0])return this.reshape([e[0],1]).T.dot(t.reshape([r[0],1])).reshape([1]);throw new c.ValueError("cannot compute the matrix product of given arrays")},h.prototype.assign=function(t,e){1===arguments.length&&(e=!0);var r=e?this.clone():this;return f.isNumber(t)?(a.assigns(r.selection,t),r):(t=v(t,this.dtype),a.assign(r.selection,t.selection),r)},h.prototype.add=function(t,e){1===arguments.length&&(e=!0);var r=e?this.clone():this;return f.isNumber(t)?(a.addseq(r.selection,t),r):(t=v(t,this.dtype),a.addeq(r.selection,t.selection),r)},h.prototype.subtract=function(t,e){1===arguments.length&&(e=!0);var r=e?this.clone():this;return f.isNumber(t)?(a.subseq(r.selection,t),r):(t=v(t,this.dtype),a.subeq(r.selection,t.selection),r)},h.prototype.multiply=function(t,e){1===arguments.length&&(e=!0);var r=e?this.clone():this;return f.isNumber(t)?(a.mulseq(r.selection,t),r):(t=v(t,this.dtype),a.muleq(r.selection,t.selection),r)},h.prototype.divide=function(t,e){1===arguments.length&&(e=!0);var r=e?this.clone():this;return f.isNumber(t)?(a.divseq(r.selection,t),r):(t=v(t,this.dtype),a.diveq(r.selection,t.selection),r)},h.prototype.pow=function(t,e){1===arguments.length&&(e=!0);var r=e?this.clone():this;return f.isNumber(t)?(a.powseq(r.selection,t),r):(t=v(t,this.dtype),a.poweq(r.selection,t.selection),r)},h.prototype.exp=function(t){0===arguments.length&&(t=!0);var e=t?this.clone():this;return a.expeq(e.selection),e},h.prototype.log=function(t){0===arguments.length&&(t=!0);var e=t?this.clone():this;return a.logeq(e.selection),e},h.prototype.sqrt=function(t){0===arguments.length&&(t=!0);var e=t?this.clone():this;return a.sqrteq(e.selection),e},h.prototype.max=function(){return 0===this.selection.size?null:a.sup(this.selection)},h.prototype.min=function(){return 0===this.selection.size?null:a.inf(this.selection)},h.prototype.sum=function(){return a.sum(this.selection)},h.prototype.std=function(t){t=f.defaults(t,{ddof:0});var e=this.clone();a.powseq(e.selection,2);var r=this.mean(),n=f.shapeSize(this.shape),i=a.sum(e.selection)/(n-t.ddof)-r*r*n/(n-t.ddof);return i>0?Math.sqrt(Math.abs(i)):0},h.prototype.mean=function(){return a.sum(this.selection)/f.shapeSize(this.shape)},h.prototype.mod=function(t,e){1===arguments.length&&(e=!0);var r=e?this.clone():this;return f.isNumber(t)?(a.modseq(r.selection,t),r):(t=v(t,this.dtype),a.modeq(r.selection,t.selection),r)},h.prototype.tolist=function(){return m(this.selection)},h.prototype.valueOf=function(){return this.tolist()},h.prototype.toString=function(){var t=b(this.max()).length,e=/\[\s+\[/g;var r=JSON.stringify(this.tolist(),(function e(r,n){if(f.isString(n))return n;if(f.isNumber(n)){var i=b(n);return new Array(Math.max(0,t-i.length+2)).join(" ")+i}var a;r=r||0;var o=l.printThreshold,s=o/2|0;return a=n.length>o?[].concat(n.slice(0,s),[" ..."],n.slice(n.length-s)):n,new Array(r+1).join(" ")+"["+a.map((function(t,n){return e(0===n&&0===r?1:r+1,t)})).join(",")+"]"})).replace(/\]\,(\s*)\[/g,"],\n$1      [").replace(e,"[[").replace(e,"[[").replace(/\]\,(\s+)...\,(\s+)\[/g,"],\n$2       ...\n$2      [").slice(2,-1);switch(this.dtype){case"array":return"array(["+r+")";default:return"array(["+r+", dtype="+this.dtype+")"}},h.prototype.inspect=h.prototype.toString,h.prototype.toJSON=function(){return JSON.stringify(this.tolist())},h.prototype.clone=function(){var t=this.selection;return void 0===t.data.slice?new h(n([].slice.apply(t.data),t.shape,t.stride,t.offset)):new h(n(t.data.slice(),t.shape,t.stride,t.offset))},h.prototype.equal=function(t){if(t=v(t),this.size!==t.size||this.ndim!==t.ndim)return!1;for(var e=this.ndim,r=0;r<e;r++)if(this.shape[r]!==t.shape[r])return!1;return a.all(a.eqeq(this.selection,t.selection))},h.prototype.round=function(t){0===arguments.length&&(t=!0);var e=t?this.clone():this;return a.roundeq(e.selection),e},h.prototype.negative=function(){var t=this.clone();return a.neg(t.selection,this.selection),t},h.prototype.diag=function(){var t=this.ndim;if(1===t){var e=f.getType(this.dtype),r=[this.shape[0],this.shape[0]],n=new h(new e(f.shapeSize(r)),r);"array"===n.dtype&&a.assigns(n.selection,0);for(var i=0;i<this.shape[0];i++)n.set(i,i,this.get(i));return n}var o=this.shape,s=this.selection.stride,u=1<<30,l=0;for(i=0;i<t;++i)u=0|Math.min(u,o[i]),l+=s[i];return new h(this.selection.data,[u],[l],this.selection.offset)},h.prototype.iteraxis=function(t,e){var r=this.shape;if(-1===t&&(t=r.length-1),t<0||t>r.length-1)throw new c.ValueError("invalid axis");for(var n=0;n<r[t];n++){for(var i=new Array(t+1),a=0;a<t+1;a++)i[a]=a===t?n:null;e(v(m(this.selection.pick.apply(this.selection,i)),this.dtype),n)}};var d=i({args:["array","array","array","array"],body:function(t,e,r,n){var i=t,a=i*(r+n);t=a-n*(i+e),e=a+r*(e-i)}}),p=i({args:["array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],body:function(t,e,r,n,i,a,o,s,u,l,c,f,h,d,p,y,v,g,m){f*c+h*l+d*u+p*s+e*o+y*a+v*i+g*n+m*r}}),y=i({args:["index","array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-2,-2],array:1},{offset:[-2,-1],array:1},{offset:[-2,0],array:1},{offset:[-2,1],array:1},{offset:[-2,2],array:1},{offset:[-1,-2],array:1},{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[-1,2],array:1},{offset:[0,-2],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[0,2],array:1},{offset:[1,-2],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1},{offset:[1,2],array:1},{offset:[2,-2],array:1},{offset:[2,-1],array:1},{offset:[2,0],array:1},{offset:[2,1],array:1},{offset:[2,2],array:1}],body:function(t,e,r,n,i,a,o,s,u,l,c,f,h,d,p,y,v,g,m,b,_,w,k,x,E,S,P,T,A,B,R,L,C,D,I,O,U,N,j,M,F,H,V,W,z,$,Y,q,G,X,K,Q){t[0]<2||t[1]<2?0:A*T+B*P+R*S+L*E+C*x+D*k+I*w+O*_+U*b+N*m+j*g+M*v+r*y+F*p+H*d+V*h+W*f+z*c+$*l+Y*u+q*s+G*o+X*a+K*i+Q*n}});function v(t,e){if(t instanceof h)return t;var r=f.getType(e);if(f.isNumber(t))return new h(r!==Array?new r([t]):[t],[1]);var n=f.getShape(t);return n.length>1&&(t=f.flatten(t,!0)),t instanceof r||(t=new r(t)),new h(t,n)}h.prototype.convolve=function(t){t=h.new(t);var e=this.ndim;if(e!==t.ndim)throw new c.ValueError("arrays must have the same dimensions");for(var r=new Array(e),n=new Array(e),i=this.selection,a=this.shape,o=t.selection,s=t.shape,u=0;u<e;u++){var l=a[u]-s[u]+1;if(l<0)throw new c.ValueError("filter cannot be greater than the array");r[u]=l,n[u]=-1}if(2===e&&3===s[0]&&3===s[1]){var d=new h(new Float32Array(f.shapeSize(a)),a);return p(d.selection,i,o.get(0,0),o.get(0,1),o.get(0,2),o.get(1,0),o.get(1,1),o.get(1,2),o.get(2,0),o.get(2,1),o.get(2,2)),d.lo(1,1).hi(r[0],r[1])}if(3===e&&1===s[2]&&1===a[2]&&3===s[0]&&3===s[1]){var v=new h(new Float32Array(f.shapeSize(a)),a);return p(v.selection.pick(null,null,0),i.pick(null,null,0),o.get(0,0,0),o.get(0,1,0),o.get(0,2,0),o.get(1,0,0),o.get(1,1,0),o.get(1,2,0),o.get(2,0,0),o.get(2,1,0),o.get(2,2,0)),v.lo(1,1).hi(r[0],r[1])}if(2===e&&5===s[0]&&5===s[1]){var g=new h(new Float32Array(f.shapeSize(a)),a);return y(g.selection,i,o.get(0,0),o.get(0,1),o.get(0,2),o.get(0,3),o.get(0,4),o.get(1,0),o.get(1,1),o.get(1,2),o.get(1,3),o.get(1,4),o.get(2,0),o.get(2,1),o.get(2,2),o.get(2,3),o.get(2,4),o.get(3,0),o.get(3,1),o.get(3,2),o.get(3,3),o.get(3,4),o.get(4,0),o.get(4,1),o.get(4,2),o.get(4,3),o.get(4,4)),g.lo(2,2).hi(r[0],r[1])}if(3===e&&1===s[2]&&1===a[2]&&5===s[0]&&5===s[1]){var m=new h(new Float32Array(f.shapeSize(a)),a);return y(m.selection,i,o.get(0,0,0),o.get(0,1,0),o.get(0,2,0),o.get(0,3,0),o.get(0,4,0),o.get(1,0,0),o.get(1,1,0),o.get(1,2,0),o.get(1,3,0),o.get(1,4,0),o.get(2,0,0),o.get(2,1,0),o.get(2,2,0),o.get(2,3,0),o.get(2,4,0),o.get(3,0,0),o.get(3,1,0),o.get(3,2,0),o.get(3,3,0),o.get(3,4,0),o.get(4,0,0),o.get(4,1,0),o.get(4,2,0),o.get(4,3,0),o.get(4,4,0)),m.lo(2,2).hi(r[0],r[1])}return this.fftconvolve(t)},h.prototype.fftconvolve=function(t){if(t=h.new(t),this.ndim!==t.ndim)throw new c.ValueError("arrays must have the same dimensions");var e,r=this.selection,i=t.selection,o=this.ndim,l=1,p=new Array(o),y=new Array(o),v=new Array(o);for(e=o-1;e>=0;--e)y[e]=r.shape[e],p[e]=l,l*=y[e],v[e]=r.shape[e]-i.shape[e]+1;var g=f.getType(r.dtype),m=new h(new g(f.shapeSize(v)),v),b=m.selection,_=u.mallocDouble(l),w=n(_,y,p,0);a.assigns(w,0),a.assign(w.hi.apply(w,r.shape),r);var k=u.mallocDouble(l),x=n(k,y,p,0);a.assigns(x,0),s(1,w,x);var E=u.mallocDouble(l),S=n(E,y,p,0);a.assigns(S,0),a.assign(S.hi.apply(S,i.shape),i);var P=u.mallocDouble(l),T=n(P,y,p,0);a.assigns(T,0),s(1,S,T),d(w,x,S,T),s(-1,w,x);var A,B=new Array(o),R=new Array(o),L=!1;for(e=0;e<o;++e)b.shape[e]>y[e]&&(L=!0),R[e]=i.shape[e]-1,B[e]=Math.min(b.shape[e],y[e]-R[e]);return L&&a.assign(b,0),A=(A=w.lo.apply(w,R)).hi.apply(A,B),a.assign(b.hi.apply(b,B),A),u.freeDouble(_),u.freeDouble(k),u.freeDouble(E),u.freeDouble(P),m},h.new=v,t.exports=h;var g=i({args:["array","scalar","index"],body:function(t,e,r){var n,i=e;for(n=0;n<r.length-1;++n)i=i[r[n]];i[r[r.length-1]]=t}});function m(t){var e=function t(e,r){var n=0|e[r=r||0];if(n<=0)return[];var i,a=new Array(n);if(r===e.length-1)for(i=0;i<n;++i)a[i]=0;else for(i=0;i<n;++i)a[i]=t(e,r+1);return a}(t.shape,0);return g(t,e),e}function b(t){return String(Number((t||0).toFixed(l.nFloatingValues)))}},,function(t,e,r){t.exports=r(97)},,,,function(t,e,r){"use strict";var n=r(120),i=r(81),a=["args","body"],o=["pre","post","printCode","funcName","blockSize"];t.exports=function(t){for(var e in t)a.indexOf(e)<0&&o.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<a.length;++r)if(!t[a[r]])throw new Error("cwise: Missing argument: "+a[r]);return i({args:t.args,pre:n(t.pre||function(){}),body:n(t.body),post:n(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r(4),i=r.n(n),a=r(5),o=r.n(a),s=r(0),u=r.n(s),l=r(10),c={eval:EvalError,range:RangeError,reference:ReferenceError,syntax:SyntaxError,type:TypeError,uri:URIError,default:Error},f=null,h=(f||(f=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1001;return i()(this,t),u()(this,"type",""),u()(this,"errorName","DefaultError"),u()(this,"code",null),u()(this,"message",""),u()(this,"stack",""),this.type=e,this.code=r,this.throws.bind(this)}return o()(t,[{key:"throws",value:function(t){for(var e="",r=Error,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(t instanceof Error){for(var o in c)if(t instanceof c[o]){this.errorName=c[o].name,r=t.constructor;break}this.stack=t.stack,i&&i.splice&&(e=i[0],i.splice(0,1))}else e=t.toString();this.message="[".concat(l.c.projectName," ERROR:")+this.type+"-"+this.code+"]"+e;try{throw new r(this.message,"[args]:",i)}catch(t){this.stack=this.stack||t.stack,console.error(t,"[message]:",e,"[args]:",i)}}}]),t}())),f)},function(t,e){t.exports=function(t,e){var r=e.get(t);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(t):r.value}},,,function(t,e,r){var n=r(59),i=r(111);function a(e,r,o){return i()?t.exports=a=Reflect.construct:t.exports=a=function(t,e,r){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return r&&n(a,r.prototype),a},a.apply(null,arguments)}t.exports=a},function(t,e){function r(t,e,r,n,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,u,"next",t)}function u(t){r(o,i,a,s,u,"throw",t)}s(void 0)}))}}},function(t,e){t.exports=function(t,e,r){var n=e.get(t);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(t,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}},,,,function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(118),i=r(119),a="undefined"!=typeof Float64Array;function o(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(o);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function u(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var i="generic"===t;if(-1===e){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(a)()}if(0===e){a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",a)(l[t][0])}a=["'use strict'"];var o=n(e),u=o.map((function(t){return"i"+t})),c="this.offset+"+o.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),f=o.map((function(t){return"b"+t})).join(","),h=o.map((function(t){return"c"+t})).join(",");a.push("function "+r+"(a,"+f+","+h+",d){this.data=a","this.shape=["+f+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+o.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+r+"_order(){"),2===e?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),i?a.push("return this.data.set("+c+",v)}"):a.push("return this.data["+c+"]=v}"),a.push("proto.get=function "+r+"_get("+u.join(",")+"){"),i?a.push("return this.data.get("+c+")}"):a.push("return this.data["+c+"]}"),a.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),a.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+o.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+o.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var d=o.map((function(t){return"a"+t+"=this.shape["+t+"]"})),p=o.map((function(t){return"c"+t+"=this.stride["+t+"]"}));a.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+p.join(","));for(var y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'&&i"+y+">=0){d=i"+y+"|0;b+=c"+y+"*d;a"+y+"-=d}");a.push("return new "+r+"(this.data,"+o.map((function(t){return"a"+t})).join(",")+","+o.map((function(t){return"c"+t})).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+o.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+o.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'){d=i"+y+"|0;if(d<0){c+=b"+y+"*(a"+y+"-1);a"+y+"=ceil(-a"+y+"/d)}else{a"+y+"=ceil(a"+y+"/d)}b"+y+"*=d}");a.push("return new "+r+"(this.data,"+o.map((function(t){return"a"+t})).join(",")+","+o.map((function(t){return"b"+t})).join(",")+",c)}");var v=new Array(e),g=new Array(e);for(y=0;y<e;++y)v[y]="a[i"+y+"]",g[y]="b[i"+y+"]";a.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+v.join(",")+","+g.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+o.map((function(t){return"shape["+t+"]"})).join(",")+","+o.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(l[t],s)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(t,e,r,n){if(void 0===t)return(0,l.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var o=e.length;if(void 0===r){r=new Array(o);for(var s=o-1,c=1;s>=0;--s)r[s]=c,c*=e[s]}if(void 0===n){n=0;for(s=0;s<o;++s)r[s]<0&&(n-=(e[s]-1)*r[s])}for(var f=function(t){if(i(t))return"buffer";if(a)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),h=l[f];h.length<=o+1;)h.push(u(f,h.length-1));return(0,h[o+1])(t,e,r,n)}},function(t,e,r){"use strict";var n=r(81),i={body:"",args:[],thisVars:[],localVars:[]};function a(t){if(!t)return i;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function o(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return n({args:t.args,pre:a(t.pre),body:a(t.body),post:a(t.proc),funcName:t.funcName})}(t))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var r=s[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:t+"eq"}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:t+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in u){var r=u[t];e[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:t}),e[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in l){var r=l[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:t+"eq"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<c.length;++t){var r=c[t];e[r]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),e[r+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var t=0;t<f.length;++t){var r=f[t];e[r]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),e[r+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),e[r+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),e[r+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var h=["atan2","pow"];!function(){for(var t=0;t<h.length;++t){var r=h[t];e[r+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),e[r+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),e[r+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),e[r+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),e.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(t,e,r){"use strict";var n=r(86),i=r(128);function a(t){return"number"==typeof t}function o(t){return"function"==typeof t}t.exports={isNumber:a,isString:function(t){return"string"==typeof t},isFunction:o,flatten:function t(e,r,n){n=n||[];for(var i=-1,o=e.length;++i<o;){var s=e[i];a(s)?n[n.length]=s:r?t(s,r,n):n.push(s)}return n},shapeSize:function(t){for(var e=1,r=0;r<t.length;r++)e*=t[r];return e},getType:function(t){return o(t)?t:n[t]||Array},getShape:function(t){var e;return"object"==typeof t?"object"==typeof(e=t[0])?"object"==typeof e[0]?function(t){for(var e=[];"object"==typeof t;)e.push(t.length),t=t[0];return e}(t):[t.length,e.length]:[t.length]:[]},defaults:i.defaults}},function(t,e,r){"use strict";var n=r(24),i=r(18),a=r(39),o=n({args:["array","array","array","array"],body:function(t,e,r,n){4899*e+9617*r+1868*n+8192>>14}});t.exports=function(t){t instanceof i||(t=new i(t));var e=t.shape,r=e[0],n=e[1];if(1===(e[2]||1))return t;var s=[r,n],u=new i(new Uint8Array(a.shapeSize(s)),s),l=t.selection.pick(null,null,0),c=t.selection.pick(null,null,1),f=t.selection.pick(null,null,2);return o(u.selection,l,c,f),u}},,function(t,e,r){var n=r(3),i=r(59),a=r(112),o=r(30);function s(e){var r="function"==typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!a(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return o(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},s(e)}t.exports=s},,,,,,,function(t,e,r){"use strict";t.exports={ValueError:function(){var t=Error.apply(this,arguments);return t.name=this.constructor.name,t},ConfigError:function(){var t=Error.apply(this,arguments);return t.name=this.constructor.name,t},NotImplementedError:function(){var t=Error.apply(this,arguments);return t.name=this.constructor.name,t}}},,,,function(t,e,r){function n(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var n=r(r.s=ENTRY_MODULE);return n.default||n}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,e,n){var a={};a[n]=[];var o=e.toString(),s=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return a;for(var u,l=s[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(o);)"dll-reference"!==u[3]&&a[n].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(o);)t[u[2]]||(a[n].push(u[1]),t[u[2]]=r(u[1]).m),a[u[2]]=a[u[2]]||[],a[u[2]].push(u[4]);for(var f,h=Object.keys(a),d=0;d<h.length;d++)for(var p=0;p<a[h[d]].length;p++)f=a[h[d]][p],isNaN(1*f)||(a[h[d]][p]=1*a[h[d]][p]);return a}function o(t){return Object.keys(t).reduce((function(e,r){return e||t[r].length>0}),!1)}t.exports=function(t,e){e=e||{};var i={main:r.m},s=e.all?{main:Object.keys(i.main)}:function(t,e){for(var r={main:[e]},n={main:[]},i={main:{}};o(r);)for(var s=Object.keys(r),u=0;u<s.length;u++){var l=s[u],c=r[l].pop();if(i[l]=i[l]||{},!i[l][c]&&t[l][c]){i[l][c]=!0,n[l]=n[l]||[],n[l].push(c);for(var f=a(t,t[l][c],l),h=Object.keys(f),d=0;d<h.length;d++)r[h[d]]=r[h[d]]||[],r[h[d]]=r[h[d]].concat(f[h[d]])}}return n}(i,t),u="";Object.keys(s).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;s[t][e];)e++;s[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),u=u+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var l=new window.Blob([u],{type:"text/javascript"});if(e.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),f=new window.Worker(c);return f.objectURL=c,f}},function(t,e,r){var n,i,a;i=[],void 0===(a="function"==typeof(n=function(){var t=function(){},e={},r={},n={};function i(t,e){if(t){var i=n[t];if(r[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function a(e,r){e.call&&(e={success:e}),r.length?(e.error||t)(r):(e.success||t)(e)}function o(e,r,n,i){var a,s,u=document,l=n.async,c=(n.numRetries||0)+1,f=n.before||t,h=e.replace(/[\?|#].*$/,""),d=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(h)?((s=u.createElement("link")).rel="stylesheet",s.href=d,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(s=u.createElement("img")).src=d:((s=u.createElement("script")).src=e,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(t){var u=t.type[0];if(a)try{s.sheet.cssText.length||(u="e")}catch(t){18!=t.code&&(u="e")}if("e"==u){if((i+=1)<c)return o(e,r,n,i)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";r(e,u,t.defaultPrevented)},!1!==f(e,s)&&u.head.appendChild(s)}function s(t,r,n){var s,u;if(r&&r.trim&&(s=r),u=(s?n:r)||{},s){if(s in e)throw"LoadJS";e[s]=!0}function l(e,r){!function(t,e,r){var n,i,a=(t=t.push?t:[t]).length,s=a,u=[];for(n=function(t,r,n){if("e"==r&&u.push(t),"b"==r){if(!n)return;u.push(t)}--a||e(u)},i=0;i<s;i++)o(t[i],n,r)}(t,(function(t){a(u,t),e&&a({success:e,error:r},t),i(s,t)}),u)}if(u.returnPromise)return new Promise(l);l()}return s.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,a,o,s=[],u=t.length,l=u;for(i=function(t,r){r.length&&s.push(t),--l||e(s)};u--;)a=t[u],(o=r[a])?i(a,o):(n[a]=n[a]||[]).push(i)}(t,(function(t){a(e,t)})),s},s.done=function(t){i(t,[])},s.reset=function(){e={},r={},n={}},s.isDefined=function(t){return t in e},s})?n.apply(e,i):n)||(t.exports=a)},function(t,e){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e,r){"use strict";
/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */var n=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var r=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(r,1),r>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var r=e.length,n=0;n<r;++n)e[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=e.length,o=0;o<a;++o)e[o].apply(this,i)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();t.exports=n},,,function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}t.exports=r},function(t,e){!function(){"use strict";function e(t,e){throw new Error("abstract")}e.prototype.drawFrame=function(t){throw new Error("abstract")},e.prototype.clear=function(){throw new Error("abstract")},t.exports=e}()},,,,,,,,,,,function(t,e){var r={validateDimension:function(t){if(t<=0||t!==(0|t))throw"YUV plane dimensions must be a positive integer"},validateOffset:function(t){if(t<0||t!==(0|t))throw"YUV plane offsets must be a non-negative integer"},format:function(t){var e=t.width,r=t.height,n=t.chromaWidth||e,i=t.chromaHeight||r,a=t.cropLeft||0,o=t.cropTop||0,s=t.cropWidth||e-a,u=t.cropHeight||r-o,l=t.displayWidth||s,c=t.displayHeight||u;return this.validateDimension(e),this.validateDimension(r),this.validateDimension(n),this.validateDimension(i),this.validateOffset(a),this.validateOffset(o),this.validateDimension(s),this.validateDimension(u),this.validateDimension(l),this.validateDimension(c),{width:e,height:r,chromaWidth:n,chromaHeight:i,cropLeft:a,cropTop:o,cropWidth:s,cropHeight:u,displayWidth:l,displayHeight:c}},allocPlane:function(t,e){return r.validateDimension(t),r.validateDimension(e),{bytes:new Uint8Array(t*e),stride:t}},suitableStride:function(t){r.validateDimension(t);var e=t%4;return 0==e?t:t+(4-e)},allocPlane:function(t,e,r,n,i){var a,o;if(this.validateDimension(t),this.validateDimension(e),i=i||0,n=n||this.suitableStride(t),this.validateDimension(n),n<t)throw"Invalid input stride for YUV plane; must be larger than width";if(a=n*e,r){if(r.length-i<a)throw"Invalid input buffer for YUV plane; must be large enough for stride times height";o=r.slice(i,i+a)}else o=new Uint8Array(a),n=n||this.suitableStride(t);return{bytes:o,stride:n}},lumaPlane:function(t,e,r,n){return this.allocPlane(t.width,t.height,e,r,n)},chromaPlane:function(t,e,r,n){return this.allocPlane(t.chromaWidth,t.chromaHeight,e,r,n)},frame:function(t,e,r,n){return{format:t,y:e=e||this.lumaPlane(t),u:r=r||this.chromaPlane(t),v:n=n||this.chromaPlane(t)}},copyPlane:function(t){return{bytes:t.bytes.slice(),stride:t.stride}},copyFrame:function(t){return{format:t.format,y:this.copyPlane(t.y),u:this.copyPlane(t.u),v:this.copyPlane(t.v)}},transferables:function(t){return[t.y.bytes.buffer,t.u.bytes.buffer,t.v.bytes.buffer]}};t.exports=r},function(t,e,r){var n=r(149),i=r(150),a=r(151),o=r(153);t.exports=function(t,e){return n(t)||i(t,e)||a(t,e)||o()}},,,,,,,function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(113),i=r(114),a=r(115);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|d(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):h(t,e);if("Buffer"===e.type&&a(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|d(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(t).length;default:if(n)return F(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return P(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return A(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var a,o=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,r/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=r;a<s;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(l(t,a+h)!==l(e,h)){f=!1;break}if(f)return a}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[r+o]=s}return o}function _(t,e,r,n){return V(F(e,t.length-r),t,r,n)}function w(t,e,r,n){return V(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function k(t,e,r,n){return w(t,e,r,n)}function x(t,e,r,n){return V(H(e),t,r,n)}function E(t,e,r,n){return V(function(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function P(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a,o,s,u,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=r)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(n,i),c=t.slice(e,r),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],o=c[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return k(this,t,e,r);case"base64":return x(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=M(t[a]);return i}function R(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-r,2);i<a;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-r,4);i<a;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function O(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,a){return a||O(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,a){return a||O(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var o=u.isBuffer(t)?t:F(new u(t,n).toString()),s=o.length;for(a=0;a<r-e;++a)this[a+e]=o[a%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var r;e=e||1/0;for(var n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function H(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(36))},function(t,e,r){"use strict";t.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,e(i=t[o],a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,(n=t[a])!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}(t))}},function(t,e,r){"use strict";var n=r(122);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(t){var e=new i;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var a=0;a<r.length;++a){var o=r[a];if("array"===o||"object"==typeof o&&o.blockIndices){if(e.argTypes[a]="array",e.arrayArgs.push(a),e.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),e.shimArgs.push("array"+a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(a),e.shimArgs.push("scalar"+a);else if("index"===o){if(e.indexArgs.push(a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(a),a<e.pre.args.length&&e.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<e.post.args.length&&e.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[a]);e.argTypes[a]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(a)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,n(e)}},function(t,e,r){"use strict";var n=r(38),i=r(37),a=r(83),o=r(125);t.exports=function(t,e,r){var s,u,l=e.shape,c=l.length,f=1,h=new Array(c),d=0;for(s=c-1;s>=0;--s)if(h[s]=f,f*=l[s],d=Math.max(d,o.scratchMemory(l[s])),e.shape[s]!==r.shape[s])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var p,y=4*f+d;p="array"===e.dtype||"float64"===e.dtype||"custom"===e.dtype?a.mallocDouble(y):a.mallocFloat(y);var v,g,m,b,_=i(p,l.slice(0),h,0),w=i(p,l.slice(0),h.slice(0),f),k=i(p,l.slice(0),h.slice(0),2*f),x=i(p,l.slice(0),h.slice(0),3*f),E=4*f;for(n.assign(_,e),n.assign(w,r),s=c-1;s>=0&&(o(t,f/l[s],l[s],p,_.offset,w.offset,E),0!==s);--s){for(g=1,m=k.stride,b=x.stride,u=s-1;u<c;++u)b[u]=m[u]=g,g*=l[u];for(u=s-2;u>=0;--u)b[u]=m[u]=g,g*=l[u];n.assign(k,_),n.assign(x,w),v=_,_=k,k=v,v=w,w=x,x=v}n.assign(e,_),n.assign(r,w),a.free(p)}},function(t,e,r){"use strict";(function(t){var n=r(84),i=r(124),a=r(79).Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,l=t.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=i([32,0])),l.BIGUINT64||(l.BIGUINT64=i([32,0])),l.BIGINT64||(l.BIGINT64=i([32,0])),l.BUFFER||(l.BUFFER=i([32,0]));var c=l.DATA,f=l.BUFFER;function h(t){if(t){var e=t.length||t.byteLength,r=n.log2(e);c[r].push(t)}}function d(t){t=n.nextPow2(t);var e=n.log2(t),r=c[e];return r.length>0?r.pop():new ArrayBuffer(t)}function p(t){return new Uint8Array(d(t),0,t)}function y(t){return new Uint16Array(d(2*t),0,t)}function v(t){return new Uint32Array(d(4*t),0,t)}function g(t){return new Int8Array(d(t),0,t)}function m(t){return new Int16Array(d(2*t),0,t)}function b(t){return new Int32Array(d(4*t),0,t)}function _(t){return new Float32Array(d(4*t),0,t)}function w(t){return new Float64Array(d(8*t),0,t)}function k(t){return o?new Uint8ClampedArray(d(t),0,t):p(t)}function x(t){return s?new BigUint64Array(d(8*t),0,t):null}function E(t){return u?new BigInt64Array(d(8*t),0,t):null}function S(t){return new DataView(d(t),0,t)}function P(t){t=n.nextPow2(t);var e=n.log2(t),r=f[e];return r.length>0?r.pop():new a(t)}e.free=function(t){if(a.isBuffer(t))f[n.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|n.log2(e);c[r].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeBigUint64=e.freeInt8=e.freeInt16=e.freeInt32=e.freeBigInt64=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(t){h(t.buffer)},e.freeArrayBuffer=h,e.freeBuffer=function(t){f[n.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return d(t);switch(e){case"uint8":return p(t);case"uint16":return y(t);case"uint32":return v(t);case"int8":return g(t);case"int16":return m(t);case"int32":return b(t);case"float":case"float32":return _(t);case"double":case"float64":return w(t);case"uint8_clamped":return k(t);case"bigint64":return E(t);case"biguint64":return x(t);case"buffer":return P(t);case"data":case"dataview":return S(t);default:return null}return null},e.mallocArrayBuffer=d,e.mallocUint8=p,e.mallocUint16=y,e.mallocUint32=v,e.mallocInt8=g,e.mallocInt16=m,e.mallocInt32=b,e.mallocFloat32=e.mallocFloat=_,e.mallocFloat64=e.mallocDouble=w,e.mallocUint8Clamped=k,e.mallocBigUint64=x,e.mallocBigInt64=E,e.mallocDataView=S,e.mallocBuffer=P,e.clearCache=function(){for(var t=0;t<32;++t)l.UINT8[t].length=0,l.UINT16[t].length=0,l.UINT32[t].length=0,l.INT8[t].length=0,l.INT16[t].length=0,l.INT32[t].length=0,l.FLOAT[t].length=0,l.DOUBLE[t].length=0,l.BIGUINT64[t].length=0,l.BIGINT64[t].length=0,l.UINT8C[t].length=0,c[t].length=0,f[t].length=0}}).call(this,r(36))},function(t,e,r){"use strict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(i),e.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},function(t,e,r){"use strict";t.exports={printThreshold:7,nFloatingValues:5}},function(t,e,r){"use strict";t.exports={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array,array:Array}},function(t,e,r){"use strict";var n=r(37),i=r(18),a=r(49),o=r(134);t.exports=function(t){if(t instanceof HTMLCanvasElement)return function(t){var e=t.getContext("2d").getImageData(0,0,t.width,t.height),r=[t.width,t.height,4],a=[4,4*t.width,1],s=n(new Uint8Array(e.data),r,a,0).transpose(1,0);o(s)&&(s=s.pick(null,null,0));return new i(s)}(t);if(t instanceof HTMLImageElement)return function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var r=e.getContext("2d");r.drawImage(t,0,0);var a=r.getImageData(0,0,t.width,t.height),s=[t.width,t.height,4],u=[4,4*t.width,1],l=n(new Uint8Array(a.data),s,u,0).transpose(1,0);o(l)&&(l=l.pick(null,null,0));return new i(l)}(t);throw new a.ValueError("expect input to be either an HTML Canvas or a (loaded) Image")}},function(t,e,r){"use strict";var n=r(18);t.exports.getRawData=function(t){var e,r;t instanceof n&&(t=t.selection);var i=0,a=t.shape,o=a[0],s=a[1],u=a[2]||1,l=new Uint8Array(o*s*u);if(3===t.shape.length)if(3===u)for(e=0;e<o;++e)for(r=0;r<s;++r)l[i++]=t.get(e,r,0),l[i++]=t.get(e,r,1),l[i++]=t.get(e,r,2);else if(4===u)for(e=0;e<o;++e)for(r=0;r<s;++r)l[i++]=t.get(e,r,0),l[i++]=t.get(e,r,1),l[i++]=t.get(e,r,2),l[i++]=t.get(e,r,3);else{if(1!==u)return new Error("Incompatible array shape");for(e=0;e<o;++e)for(r=0;r<s;++r)l[i++]=t.get(e,r,0)}else{if(2!==t.shape.length)return new Error("Invalid image");for(e=0;e<o;++e)for(r=0;r<s;++r)l[i++]=t.get(e,r)}return l},t.exports.setRawData=function(t,e){var r,n,i,a=0,o=t.shape[0],s=t.shape[1],u=t.shape[2]||1;if(3===t.shape.length)if(3===u)for(r=0;r<o;++r)for(n=0;n<s;++n)e[a++]=t.get(r,n,0),e[a++]=t.get(r,n,1),e[a++]=t.get(r,n,2),e[a++]=255;else if(4===u)for(r=0;r<o;++r)for(n=0;n<s;++n)e[a++]=t.get(r,n,0),e[a++]=t.get(r,n,1),e[a++]=t.get(r,n,2),e[a++]=t.get(r,n,3);else{if(1!==u)return new Error("Incompatible array shape");for(r=0;r<o;++r)for(n=0;n<s;++n)i=t.get(r,n,0),e[a++]=i,e[a++]=i,e[a++]=i,e[a++]=255}else{if(2!==t.shape.length)return new Error("Invalid image");for(r=0;r<o;++r)for(n=0;n<s;++n)i=t.get(r,n),e[a++]=i,e[a++]=i,e[a++]=i,e[a++]=255}}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i){var a=e-1,o=e+n-1,s=t-1,u=t+r-1;return 0!==e&&0!==t?i.selection.get(s,a)-i.selection.get(u,a)-i.selection.get(s,o)+i.selection.get(u,o):0===e&&0===t?i.selection.get(t+r-1,e+n-1):0===e?-i.selection.get(s,e+n-1)+i.selection.get(t+r-1,e+n-1):-i.selection.get(u,a)+i.selection.get(u,o)}},,,,,function(t,e){function r(){return t.exports=r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r.apply(this,arguments)}t.exports=r},function(t,e,r){"use strict";(function(e){var n,i=(n=r(116))&&"object"==typeof n&&"default"in n?n.default:n;t.exports=function(t){for(var r,n=(r=t,i.atob?i.atob(r):e.from(r,"base64").toString("binary")),a=new Uint8Array(n.length),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}}).call(this,r(79).Buffer)},function(t,e,r){!function(){"use strict";var e=r(60),n=r(143),i=r(146),a={FrameSink:e,SoftwareFrameSink:n,WebGLFrameSink:i,attach:function(t,e){return("webGL"in(e=e||{})?e.webGL:i.isAvailable())?new i(t,e):new n(t,e)}};t.exports=a}()},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),o=new x(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return S()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,o),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function d(){}var p={};p[i]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,i)&&(p=v);var g=d.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(i,a){function o(){return new e((function(n,o){!function n(i,a,o,s){var u=l(t[i],t,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}(i,a,n,o)}))}return n=n?n.then(o,o):o()}}function _(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=g.constructor=d,d.constructor=h,h.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new b(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(g),s(g,o,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e);var n=r(4),i=r.n(n),a=r(5),o=r.n(a),s=r(1),u=r.n(s),l=r(6),c=r.n(l),f=r(7),h=r.n(f),d=r(3),p=r.n(d),y=r(0),v=r.n(y),g=r(27),m=r.n(g),b=r(32),_=r.n(b),w=r(11);function k(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E=w.a.get("Events.js"),S=function(){function t(e){i()(this,t),v()(this,"eventsQueue",{}),v()(this,"target",{}),v()(this,"disallowRepeat",!1),this.target=e}return o()(t,[{key:"add",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=k(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.on(a,r,n)}}catch(t){i.e(t)}finally{i.f()}}},{key:"on",value:function(t,e,r){if(void 0===this.eventsQueue[t]&&(this.eventsQueue[t]={methods:[],once:!1}),"function"==typeof e){if(!this.disallowRepeat||!this.eventsQueue[t].methods.includes(e))return this.eventsQueue[t].methods.push(e),void 0!==r&&(this.eventsQueue[t].once=r),this.target}else E.error("on","the argument is not function.",e)}},{key:"once",value:function(t,e){this.on(t,e,!0)}},{key:"off",value:function(t,e){var r=this.eventsQueue[t];if(r){var n=r.methods;if(e)for(var i=n.length;i--;)n[i]===e&&n.splice(i,1);else delete this.eventsQueue[t];return this.target}}},{key:"emit",value:function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=this.eventsQueue[t];if(a){var o=a.methods;return o.forEach((function(t){t.apply(e.target,n)})),a.once&&this.off(t),this.target}}},{key:"clear",value:function(t){delete this.eventsQueue[t]}},{key:"clearAll",value:function(){this.eventsQueue={}}}]),t}(),P=function(t){var e=new S(t);return function(t){return e.target=t,e}},T=r(12),A=r.n(T),B=w.a.get("Element.js"),R=function(){function t(){i()(this,t)}return o()(t,null,[{key:"createEl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1?arguments[1]:void 0;if("string"!=typeof t)return B.error("please input element name"),null;var r=document.createElement(t,e);return r}},{key:"registerElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HTMLElement,r=arguments.length>2?arguments[2]:void 0,n=document.registerElement(t,{prototype:Object.create(e.prototype),extends:r});return n}},{key:"addEl",value:function(t,e){if(t&&e)try{e.appendChild(t)}catch(t){B.error(t)}}},{key:"removeEl",value:function(t){try{var e=t.parentNode;e&&e.removeChild(t)}catch(t){B.error(t)}}},{key:"addClass",value:function(t){try{for(var e,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(e=t.classList).add.apply(e,n)}catch(t){B.error(t)}}},{key:"removeClass",value:function(){}},{key:"hasClass",value:function(){}},{key:"isElement",value:function(t){try{return t instanceof HTMLElement}catch(e){return"object"===A()(t)&&1===t.nodeType&&"object"===A()(t.style)&&"object"===A()(t.ownerDocument)}}},{key:"setAttributes",value:function(e,r){if(t.isElement(e))for(var n=0,i=r.length;n<i;n++){var a=r[n],o=a.name;o=a.name.replace(/["|']/g,""),e.setAttribute(o,a.value)}}},{key:"syncAttributes",value:function(e,r){var n=r.attributes;t.setAttributes(e,n);var i=e.attributes;t.setAttributes(r,i)}},{key:"getClientWidth",value:function(){return document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth}},{key:"getClientHeight",value:function(){return document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight}},{key:"adaptSizeElement",value:function(t,e,r,n){var i=r,a=n;a.width=t||a.width||i.offsetWidth,a.height=e||a.height||i.offsetHeight;var o=a.width,s=a.height,u=0;a.style.position="absolute",i.offsetWidth<=0&&(i.style.width=o+"px"),i.offsetHeight<=0&&(i.style.height=s+"px");var l=i.offsetWidth/o,c=i.offsetHeight/s;u=c>l?l:c,a.style.top=i.offsetTop+(i.offsetHeight-s*u)/2+"px",a.style.left=i.offsetLeft+(i.offsetWidth-o*u)/2+"px",a.style.transform="scale(".concat(u,", ").concat(u,")"),a.style["transform-origin"]="top left",a.style.display="inline-block"}}]),t}(),L=r(30),C=r.n(L),D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),v()(this,"logger",null),v()(this,"__instance__",null),v()(this,"__singleton__",null),this.options=e,this.setLogger(this.constructor.name+".js")}return o()(t,[{key:"setLogger",value:function(t){this.logger=new w.a(t)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):P(this)}}],[{key:"getInstance",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.__instance__=C()(this,e),this.__instance__}},{key:"getSingleton",value:function(){if(!this.__singleton__){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.__singleton__=C()(this,e)}return this.__singleton__}}]),t}();function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var O=function(t){c()(r,t);var e=I(r);function r(t){var n;return i()(this,r),n=e.call(this),v()(u()(n),"component",null),n.component=t.component,n}return o()(r,[{key:"confirm",value:function(){}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.component.data.content=t,"default"!==this.component.data.display&&""!==this.component.data.display||this.component.showBox(),"show"!==this.component.data.display&&this.component.show()}},{key:"hide",value:function(){this.component.hide()}}]),r}(D),U=r(26),N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),v()(this,"logger",null),this.options=e,this.debug=e.debug||!1,this.setLogger(this.constructor.name+".js")}return o()(t,[{key:"setLogger",value:function(t){this.logger=new w.a(t)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):P(this)}},{key:"alert",get:function(){var t="";return this.options&&this.options.alertError&&(t=this.options.alertError),t}}]),t}(),j=r(10);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var F=function(t){c()(r,t);var e=M(r);function r(){var t;return i()(this,r),t=e.call(this),v()(u()(t),"loadData",null),v()(u()(t),"sourceURL",""),t}return o()(r,[{key:"init",value:function(){}},{key:"setLoadData",value:function(t){this.loadData=t}},{key:"setSourceURL",value:function(t){this.sourceURL=t}},{key:"getLoadData",value:function(){return this.getLoadData}},{key:"getSourceURL",value:function(){return this.getSourceURL}}]),r}(N),H={LOAD_PLAYLIST:10,get 10(){return"loading playlist"},LOADED_PLAYLIST:11,get 11(){return"playlist is loaded"},IDLE:0,get 0(){return"is free"},LOADING:1,get 1(){return"loading segment"},DONE:2,get 2(){return"segment is loaded"},ERROR:3,get 3(){return"load get error"}},V=w.a.get("M3U8Parser.js",{level:2}),W={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",streamInf:"STREAM-INF",isComment:function(t){return t&&"#"===t[0]&&!t.startsWith(W.tagPrefix)},isBlank:function(t){return""===t},canStrip:function(t){return W.isBlank(t)||W.isComment(t)}},z=0,$=1,Y={file:void 0,name:void 0,start:0,end:0,discontinuity:void 0,duration:void 0},q=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),v()(this,"source",""),v()(this,"segments",[]),v()(this,"_currentSegment",null),v()(this,"discontinuous",null),v()(this,"tags",{VERSION:void 0,TARGETDURATION:void 0}),v()(this,"_state",null),this.source=e,this.options=r,this.parse(this.source)}return o()(t,[{key:"readSegment",value:function(t){var e=W.segmentParse.exec(t);if(null!==e){var r=parseFloat(e[1],10),n=e[3];r%1!=0&&this.tags.VERSION>=3&&V.info("readsegment","Version must be 3 or higher to support floating.","duration:",r),r<this.tags.TARGETDURATION&&V.info("readsegment","Segment duration must be less than the TARGETDURATION","duration:",r),r*=1e3,this._currentSegment=Object.assign({},Y,{duration:r,name:n,discontinuity:this.discontinuous});var i=this.segments[this.segments.length-1]||{start:0,end:0};this._currentSegment.start=i.end,this._currentSegment.end=i.end+r,this.discontinuous=!1,this._state=$}else V.warn("readsegment","read segment failed","line:",t)}},{key:"readTag",value:function(t){var e=W.tagParse.exec(t);if(null!==e)return{name:e[1],value:e[3]}}},{key:"readLine",value:function(t){if(t.startsWith(W.segmentPrefix))return this.readSegment(t);var e=this.readTag(t);if(e)switch(e.name){case W.version:this.tags.VERSION=parseFloat(e.value,10);break;case W.mediaSequence:this.tags.MEDIA_SEQUENCE=parseFloat(e.value,10);break;case W.allowCache:this.tags.ALLOW_CACHE=!!/\s*(YES|yes)\s*/.test(e.value);break;case W.discontinuity:this.tags.DISCONTINUITY=!0,this.discontinuous=!0;break;case W.targetDuration:this.tags.TARGETDURATION=parseFloat(e.value,10);break;case W.combined:this.tags.COMBINED=e.value;break;case W.streamInf:this.tags.STREAM_INF=e.value;break;case W.endList:this.tags.ENDLIST="EOF";break;default:V.warn("readLine","unknow line","line:",t)}}},{key:"addFile",value:function(t){if("#"!==t[0]){this._currentSegment.file=t;var e=this.parseSDParam(t);if(e>=0){this._currentSegment.start=e,this._currentSegment.end=e+this._currentSegment.duration;var r=this.segments[this.segments.length-1]||{sd:0,start:0,end:0};r.duration=e-r.start,r.end=e}this._currentSegment.name||(this._currentSegment.name=t.substr(Math.max(0,t.lastIndexOf("/")),t.lastIndexOf("."))),this.segments.push(this._currentSegment),this._state=z}else{var n=this.readTag(t);switch(n.name){case"PROGRAM-DATE-TIME":var i=new Date(n.value);this._currentSegment.time=i;break;default:V.warn("addFile","Invalid tag.","tag.name:",n.name)}}}},{key:"parseSDParam",value:function(t){var e=-1;try{var r=new URL(t).searchParams.get("sd");r&&(e=parseInt(r,10))}catch(t){}return e}},{key:"parse",value:function(t){var e=this;if("string"==typeof(t=t||this.source)){this._state=z,this.discontinuous=!1;var r=t.split(W.lineDelimiter);if(r[0]==W.extensionHeader)return r.forEach((function(t){if(!W.canStrip(t))switch(e._state){case z:e.readLine(t);break;case $:e.addFile(t);break;default:Object(U.a)("parsing m3u8 get an error, it is unknow state.")}})),this;V.error("parse","it is not a valid  m3u8 header","header:",r[0])}else Object(U.a)("m3u8 file is not text.",t)}},{key:"version",get:function(){return this.tags.VERSION}},{key:"duration",get:function(){return this.segments.length?this.segments.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,r="number"==typeof t?t:t.duration;return r+e.duration})):0}},{key:"targetDuration",get:function(){return this.tags.TARGETDURATION}},{key:"mediaSequence",get:function(){return this.tags.MEDIA_SEQUENCE}},{key:"allowCache",get:function(){return this.tags.ALLOW_CACHE}},{key:"length",get:function(){return this.segments.length}}]),t}(),G=r(54),X=r.n(G);function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Object";return function(e){var r="[object "+t+"]";return Object.prototype.toString.call(e)==r}}var Q=function(){function t(){i()(this,t)}return o()(t,null,[{key:"importScripts",value:function(t,e,r){var n="ready"+Date.now();t instanceof Array?X()(t,n):X()([t],n),X.a.ready(n,{success:e,error:r})}},{key:"blobData",value:function(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}},{key:"escapeHTML",value:function(e){if(t.isString(e))return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"getInnerWidthHeight",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"Fullscreen",value:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&(t.webkitRequestFullScreen(),setTimeout((function(){console.error("fullscreen success"),document.dispatchEvent(new Event("fullscreenchange"))}),0))}},{key:"exitFullscreen",value:function(){var t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&(t.webkitExitFullscreen(),setTimeout((function(){console.error("exitfullscreen success"),document.dispatchEvent(new Event("fullscreenchange"))}),0))}},{key:"buildFilePath",value:function(t,e){return t.map((function(t){return e+t}))}},{key:"insertSort",value:function(t,e,r){var n,i,a=t.length;if(0!==a)if(r){var o=r(e);n=o.key,i=o.value;for(var s=0;s<a;s++)if(i<t[s][n]){for(var u=a;u>s;)t[u]=t[u-1],u--;return void(t[s]=e)}t.push(e)}else{i=e;for(var l=0;l<a;l++)if(i<t[l]){for(var c=a;c>l;)t[c]=t[c-1],c--;return void(t[l]=i)}t.push(i)}else t.push(e)}},{key:"isSafari",value:function(){var t=navigator.userAgent;return/Safari/.test(t)&&!/Chrome/.test(t)}},{key:"msec2sec",value:function(t){var e=(t/1e3).toFixed(3);return parseFloat(e,10)}}]),t}();v()(Q,"isObject",(function(){return K("Object")})),v()(Q,"isString",(function(){return K("String")})),v()(Q,"isFunction",(function(){return K("Function")}));var J=r(42),Z=r.n(J);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var et=function(t){c()(r,t);var e=tt(r);function r(){return i()(this,r),e.call(this)}return o()(r,[{key:"add",value:function(t){this.push(Object.freeze(t))}},{key:"addAll",value:function(t){var e=this;t.forEach((function(t){e.add(t)}))}},{key:"get",value:function(t){return this[t]}},{key:"getLast",value:function(){return this[this.length-1]}},{key:"getBy",value:function(t){var e=this;if("function"==typeof t){var r=new this.constructor;return this.every((function(n,i){return!0===t.call(e,n,i,e)&&r.add(n),!0})),r}}},{key:"indexOfByTime",value:function(t,e){e||(e=function(e){return t>=e.start&&t<e.end});for(var r=this.length-1,n=0;n<=r;){var i=Math.floor((r+n)/2),a=this[i];if(e(a))return i;a.start>t?r=i-1:n=i+1}return-1}},{key:"getByTime",value:function(t){var e=this.indexOfByTime(t);if(e>=0)return this[e]}},{key:"getByKey",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Array.isArray(e[0])&&(e=e[0]),this.getBy((function(t){var r=!1;return e.every((function(e){return!Object.prototype.hasOwnProperty.call(t,e)||(r=!0,!1)})),r}))}},{key:"getByValue",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Array.isArray(e[0])&&(e=e[0]),this.getBy((function(t){var r=!1;return t.each((function(t,n){if(e.includes(n))return r=!0,!1})),r}))}},{key:"getByKeyValue",value:function(t,e){return this.getBy((function(r){return r[t]===e}))}},{key:"getValues",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Array.isArray(e[0])&&(e=e[0]),this.map((function(t){return e.length?t.get(t,e):t.getValues(t)}))}},{key:"indexOfBy",value:function(t){var e=0,r=this.length;for(t=t||function(){return!1};e<r;){if(!0===t.call(this,this[e],e,this))return e;e++}return-1}},{key:"indexOfByKey",value:function(t,e){return this.indexOfBy((function(r){return r[t]===e}))}},{key:"indexOfByKeyValue",value:function(t,e){return this.indexOfByKey(t,e)}},{key:"each",value:function(t){if("function"==typeof t)return this.forEach(t),this}},{key:"remove",value:function(t,e){return this.length<=0||(t=t<0?0:t,e=e||t+1,this.splice(t,e-t)),this}},{key:"removeItem",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Array.isArray(e[0])&&(e=e[0]),this.removeBy((function(t){return e.includes(t)}))}},{key:"removeBy",value:function(t){for(var e=0,r=this.length;e<r;e++)!0===t.call(this,this[e],e,this)&&(this.splice(e,1),r--,e--);return this}},{key:"removeByKeyValue",value:function(t,e){return this.removeBy((function(r){return r[t]===e}))}},{key:"toJSON",value:function(){var t=Array.from(this);return t.forEach((function(e,r){t[r]=e&&"function"==typeof e.toJSON?e.toJSON():e})),t}},{key:"toArray",value:function(){return Array.from(this)}},{key:"size",get:function(){return this.length}}]),r}(Z()(Array)),rt=function(){function t(){i()(this,t)}return o()(t,[{key:"pair",value:function(){return Object.entries(this)}},{key:"keys",value:function(){return Object.keys(this)}},{key:"set",value:function(t,e){return this[t]=e,this}},{key:"get",value:function(t){return this[t]}},{key:"add",value:function(t,e){return Object.prototype.hasOwnProperty.call(this,t)||this.set(t,e),this}},{key:"addAll",value:function(t){for(var e in t)this.add(e,t[e]);return this}},{key:"toJSON",value:function(){var t={};for(var e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t[e]=this[e]);return t}}]),t}();function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var it=function(t){c()(r,t);var e=nt(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"no",0),v()(u()(n),"name",null),v()(u()(n),"duration",0),v()(u()(n),"file",null),v()(u()(n),"start",0),v()(u()(n),"end",0),Object.assign(u()(n),t),n}return r}(rt);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var ot=function(t){c()(r,t);var e=at(r);function r(t){return i()(this,r),e.call(this,t)}return o()(r,[{key:"add",value:function(t){t instanceof it||(t=new it(t)),t.no=this.length+1,Q.isObject(t)&&this.push(t)}}]),r}(et),st=r(2),ut=r(55),lt=r.n(ut),ct=r(56),ft=r.n(ct),ht=r(94),dt=r.n(ht),pt=r(95),yt=r.n(pt),vt=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return lt()(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(ft.a),gt=function(t){for(var e,r=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=r.length;i--;)""!==r[i]&&((e=/([^=]*)=(.*)/.exec(r[i]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),n[e[0]]=e[1]);return n},mt=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}lt()(e,t);var r=e.prototype;return r.push=function(t){var e,r,n=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,r){var n=r(t);return n===t?e:e.concat([n])}),[t]).forEach((function(t){for(var i=0;i<n.customParsers.length;i++)if(n.customParsers[i].call(n,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return r={type:"tag",tagType:"inf"},e[1]&&(r.duration=parseFloat(e[1])),e[2]&&(r.title=e[2]),void n.trigger("data",r);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"targetduration"},e[1]&&(r.duration=parseInt(e[1],10)),void n.trigger("data",r);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"totalduration"},e[1]&&(r.duration=parseInt(e[1],10)),void n.trigger("data",r);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"version"},e[1]&&(r.version=parseInt(e[1],10)),void n.trigger("data",r);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",tagType:"media-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void n.trigger("data",r);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void n.trigger("data",r);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return r={type:"tag",tagType:"playlist-type"},e[1]&&(r.playlistType=e[1]),void n.trigger("data",r);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"byterange"},e[1]&&(r.length=parseInt(e[1],10)),e[2]&&(r.offset=parseInt(e[2],10)),void n.trigger("data",r);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return r={type:"tag",tagType:"allow-cache"},e[1]&&(r.allowed=!/NO/.test(e[1])),void n.trigger("data",r);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(r={type:"tag",tagType:"map"},e[1]){var a=gt(e[1]);if(a.URI&&(r.uri=a.URI),a.BYTERANGE){var o=a.BYTERANGE.split("@"),s=o[0],u=o[1];r.byterange={},s&&(r.byterange.length=parseInt(s,10)),u&&(r.byterange.offset=parseInt(u,10))}}n.trigger("data",r)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(r={type:"tag",tagType:"stream-inf"},e[1]){if(r.attributes=gt(e[1]),r.attributes.RESOLUTION){var l=r.attributes.RESOLUTION.split("x"),c={};l[0]&&(c.width=parseInt(l[0],10)),l[1]&&(c.height=parseInt(l[1],10)),r.attributes.RESOLUTION=c}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}n.trigger("data",r)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return r={type:"tag",tagType:"media"},e[1]&&(r.attributes=gt(e[1])),void n.trigger("data",r);if(e=/^#EXT-X-ENDLIST/.exec(t))n.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return r={type:"tag",tagType:"program-date-time"},e[1]&&(r.dateTimeString=e[1],r.dateTimeObject=new Date(e[1])),void n.trigger("data",r);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return r={type:"tag",tagType:"key"},e[1]&&(r.attributes=gt(e[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void n.trigger("data",r);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return r={type:"tag",tagType:"start"},e[1]&&(r.attributes=gt(e[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void n.trigger("data",r);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return r={type:"tag",tagType:"cue-out-cont"},e[1]?r.data=e[1]:r.data="",void n.trigger("data",r);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return r={type:"tag",tagType:"cue-out"},e[1]?r.data=e[1]:r.data="",void n.trigger("data",r);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return r={type:"tag",tagType:"cue-in"},e[1]?r.data=e[1]:r.data="",void n.trigger("data",r);n.trigger("data",{type:"tag",data:t.slice(4)})}}}else n.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},r.addParser=function(t){var e=this,r=t.expression,n=t.customType,i=t.dataParser,a=t.segment;"function"!=typeof i&&(i=function(t){return t}),this.customParsers.push((function(t){if(r.exec(t))return e.trigger("data",{type:"custom",data:i(t),customType:n,segment:a}),!0}))},r.addTagMapper=function(t){var e=t.expression,r=t.map;this.tagMappers.push((function(t){return e.test(t)?r(t):t}))},e}(ft.a),bt=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new vt,e.parseStream=new mt,e.lineStream.pipe(e.parseStream);var r,n,i=u()(e),a=[],o={},s=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var f=0;return e.parseStream.on("data",(function(t){var e,u;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(o.byterange=e,e.length=t.length,"offset"in t||(t.offset=f)),"offset"in t&&(o.byterange=e,e.offset=t.offset),f=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(o.duration=t.duration),0===t.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:yt()(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(n.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){r={},t.uri&&(r.uri=t.uri),t.byterange&&(r.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes?(o.attributes||(o.attributes={}),dt()(o.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var r=this.manifest.mediaGroups[t.attributes.TYPE];r[t.attributes["GROUP-ID"]]=r[t.attributes["GROUP-ID"]]||{},e=r[t.attributes["GROUP-ID"]],(u={default:/yes/i.test(t.attributes.DEFAULT)}).default?u.autoselect=!0:u.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(u.language=t.attributes.LANGUAGE),t.attributes.URI&&(u.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(u.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(u.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(u.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=u}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),o.dateTimeString=t.dateTimeString,o.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=t.data},"cue-out-cont":function(){o.cueOutCont=t.data},"cue-in":function(){o.cueIn=t.data}}[t.tagType]||s).call(i)},uri:function(){o.uri=t.uri,a.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),n&&(o.key=n),o.timeline=c,r&&(o.map=r),o={}},comment:function(){},custom:function(){t.segment?(o.custom=o.custom||{},o.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(i)})),e}lt()(e,t);var r=e.prototype;return r.push=function(t){this.lineStream.push(t)},r.end=function(){this.lineStream.push("\n")},r.addParser=function(t){this.parseStream.addParser(t)},r.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(ft.a);function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function wt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(r),!0).forEach((function(e){v()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Et={HLS:function(t){c()(r,t);var e=_t(r);function r(t){var n;return i()(this,r),n=e.call(this),v()(u()(n),"state",H.IDLE),v()(u()(n),"maxBufferDuration",j.b.maxDuration),v()(u()(n),"maxBufferSize",j.b.maxSize),v()(u()(n),"baseUrl",""),v()(u()(n),"options",null),v()(u()(n),"httpWorker",null),v()(u()(n),"sourceData",null),v()(u()(n),"segmentPool",[]),v()(u()(n),"currentNo",null),v()(u()(n),"maxRetryCount",j.b.maxRetryCount),n.options=t,n.loaderController=n.options.loaderController,n.dataController=n.loaderController.dataController,n.httpWorker=t.httpWorker,n.setSegmentPool(new ot),n}return o()(r,[{key:"loadPlaylist",value:function(t){var e=this;this.options.player.options.beforeLoad?this.options.player.options.beforeLoad(this.sourceURL,this.options.sourceURL).then((function(t){e.options.sourceURL=t,e.httpWorker.postMessage({type:"invoke",fileType:"m3u8",method:"get",name:"playlist",url:t})})):this.httpWorker.postMessage({type:"invoke",fileType:"m3u8",method:"get",name:"playlist",url:this.sourceURL}),this.httpWorker.onmessage=function(r){var n=r.data,i=r.data.data;if(i)"playlist"==n.name&&e.parsePlaylist(i,t);else{var a="Get the ".concat(n.fileType," file error. URL: ").concat(n.url);e.events.emit(st.default.PlayerAlert,a),e.events.emit(st.default.LoaderError,a,n);var o=[e.state,"request playlist error.","data:",n,a];e.events.emit(st.default.PlayerThrowError,o)}}}},{key:"parsePlaylist",value:function(t,e){var r,n=new bt;n.push(t),n.end();var i=n.manifest,a=null===(r=i.playlists)||void 0===r?void 0:r.length;if(a){var o=i.playlists[a-1];return this.sourceURL=o.uri,void this.loadPlaylist(e)}var s=new q(t);if(s.segments&&s.segments.length){s.segments.forEach((function(t){t.start=Q.msec2sec(t.start),t.end=Q.msec2sec(t.end),t.duration=Q.msec2sec(t.duration)})),this.setSourceData(Object.freeze(s)),this.segmentPool.addAll(s.segments),e.call(this,s)}else{this.events.emit(st.default.LoaderError,s),this.events.emit(st.default.PlayerAlert,"Parse playlist file error.");var u=[this.state,"Parse playlist error.","data:",s];this.events.emit(st.default.PlayerThrowError,u)}}},{key:"setSourceData",value:function(t){this.sourceData=t}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setSegmentPool",value:function(t){this.segmentPool=t}},{key:"getSegmentPool",value:function(){return this.segmentPool}},{key:"isNotFree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t="["+t+"]loader is not free. please wait.",this.state!==H.IDLE&&this.state!==H.DONE&&(this.logger.warn("isNotFree","check status for loader","notice:",t),!0)}},{key:"getBaseUrl",value:function(t){var e=this.options.sourceURL;if(!(t.indexOf("//")>-1)){var r=e.lastIndexOf("/");return e.substr(0,r+1)}return""}},{key:"checkLoadCondition",value:function(t){if(t.no>this.segmentPool.length)return!1;var e=this.dataController.getLoadDataBufferPool().bufferDuration;return!(this.options.player.playbackRate<=1&&e>=this.maxBufferDuration)||(this.logger.info("checkLoadCondition","stop load next segment.","bufferDuration:",e,"maxBufferDuration:",this.maxBufferDuration),!1)}},{key:"loadFile",value:function(t,e,r){var n=this;if(t instanceof it)if(this.isNotFree()&&"seek"!==e&&"start"!==e)this.logger.warn("loadFile","is loading","segment:",t,"type:",e);else{if(!this.checkLoadCondition(t))return this.state=H.IDLE,void this.logger.warn("loadFile","checkLoadCondition failed","segment:",t,"type:",e);this.currentNo=t.no;var i=this.getBaseUrl(t.file)+t.file,a=1,o=function(){if(n.options.player.options.beforeLoad)n.options.player.options.beforeLoad(t.file,n.options.sourceURL).then((function(e){n.httpWorker.postMessage({type:"invoke",fileType:"ts",method:"get",name:t.no,url:e})}));else{var e=function(t,e){return"function"==typeof n.options.processURL?n.options.processURL(t,e):t}(i,t);n.httpWorker.postMessage({type:"invoke",fileType:"ts",method:"get",name:t.no,url:e})}};this.state=H.LOADING,this.events.emit(st.default.LoaderLoading,t,e,r),this.httpWorker.onmessage=function(i){n.state=H.DONE;var s=i.data;if(n.logger.info("loadfile","httpWorker","onmessage get data"),s&&"error"!==s.type)"notice"===s.type?"speed"===s.noticeType&&n.events.emit(st.default.LoaderUpdateSpeed,s.data):"ts"===s.fileType&&s.name===t.no?(n.logger.info("loadFile","read success","data no:",s.name),n.state=H.IDLE,n.events.emit(st.default.LoaderLoaded,s,t,e,r)):n.logger.warn("loadFile","is not ts file or the segment'no is not equal.","fileType:",s.fileType,"data:",s);else if(n.state=H.ERROR,a<=n.maxRetryCount)n.logger.warn("loadFile","retry to load","count:",a,"segment:",t),o(),a+=1;else{n.events.emit(st.default.LoaderError,t,e,r);n.events.emit(st.default.PlayerAlert,"Load file error, please concat administrator.");var u=[n.state,"Load File error.","load count:",a,"segment:",t];n.events.emit(st.default.PlayerThrowError,u)}},o()}}},{key:"destroy",value:function(){this.httpWorker&&this.httpWorker.terminate()}}]),r}(F)},St=function(t){c()(r,t);var e=xt(r);function r(t,n){var a;return i()(this,r),a=e.call(this),v()(u()(a),"state",null),v()(u()(a),"exeLoader",null),v()(u()(a),"loadData",null),v()(u()(a),"type","HLS"),v()(u()(a),"options",null),v()(u()(a),"dataController",null),a.type=t||a.type,a.player=n.player,a.options=n.player.options,a.dataController=a.player.dataController,a.init(a.type,a.options),a}return o()(r,[{key:"init",value:function(t,e){this.bindEvent(),this.setExeLoader(new Et[t](kt(kt({},e),{},{player:this.player,loaderController:this}))),this.setSourceURL(e.sourceURL),this.player.loadData?this.setLoadData(this.player.loadData):this.setLoadData(this.dataController.getDataInstance("load",e)),this.exeLoader.setLoadData(this.loadData)}},{key:"run",value:function(){this.state=H.LOAD_PLAYLIST,this.events.emit(st.default.LoaderPlayListStart,this),this.logger.info("run",H[this.state],"url:",this.options.sourceURL),this.loadPlaylist()}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.LoaderLoadFile,(function(e,r,n){t.exeLoader.loadFile(e,r,n)}))}},{key:"loadPlaylist",value:function(t){var e=this;this.exeLoader.loadPlaylist((function(r){r?(e.dataController.setLoadDataSourceData(e.exeLoader.getSourceData()),e.dataController.setLoadDataSegmentPool(e.exeLoader.getSegmentPool()),e.state=H.LOADED_PLAYLIST,e.events.emit(st.default.LoaderPlayListLoaded,e),"function"==typeof t&&t.call(e,r)):e.logger.error("run","start load m3u8","data:",r)}))}},{key:"switchPlaylist",value:function(t,e){this.setSourceURL(t),this.dataController.clearLoadData(),this.state=H.LOAD_PLAYLIST,this.events.emit(st.default.LoaderPlayListStart,this),this.logger.info("switchPlaylist",H[this.state],"url:",t),this.loadPlaylist(e)}},{key:"setExeLoader",value:function(t){this.exeLoader=t}},{key:"getExeLoader",value:function(){return this.exeLoader}},{key:"setSourceURL",value:function(t){this.exeLoader.setSourceURL(t)}},{key:"getSourceURL",value:function(){return this.exeLoader.getSourceURL()}},{key:"setLoadData",value:function(t){this.loadData=t}},{key:"getLoadData",value:function(){return this.loadData}},{key:"getSourceData",value:function(){return this.exeLoader.getSourceData()}},{key:"destroy",value:function(){this.exeLoader.destroy()}}]),r}(D);function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Tt=function(t){c()(r,t);var e=Pt(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"no",0),v()(u()(n),"start",0),v()(u()(n),"end",0),v()(u()(n),"blob",null),v()(u()(n),"arrayBuffer",null),v()(u()(n),"duration",0),Object.assign(u()(n),t),n}return o()(r,[{key:"size",get:function(){return this.blob.size}}]),r}(rt);function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Bt=function(t){c()(r,t);var e=At(r);function r(t){return i()(this,r),e.call(this,t)}return o()(r,[{key:"add",value:function(t){t instanceof Tt||(t=new Tt(t));var e=this.length;if(0!==e){for(;e--;)if(t.no<=this[e].no)return void this.splice(e,1,t);return this.push(t),this}this.push(t)}},{key:"getBufferSize",value:function(){return this.length<=0?0:this.reduce((function(t,e){return t+e.blob.size}),0)}},{key:"getBufferDuration",value:function(){return this.length<=0?0:this.reduce((function(t,e){return t+(e.end-e.start)}),0)}},{key:"bufferSize",get:function(){return this.getBufferSize()}},{key:"bufferDuration",get:function(){return this.getBufferDuration()}}]),r}(et);function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Lt=function(t){c()(r,t);var e=Rt(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this),v()(u()(t),"bufferPool",[]),v()(u()(t),"sourceData",{}),v()(u()(t),"options",{}),v()(u()(t),"segmentPool",[]),v()(u()(t),"readBufferNo",null),v()(u()(t),"startLoadTime",null),v()(u()(t),"currentSeekTime",null),t.options=n,t.init(),t}return o()(r,[{key:"init",value:function(){var t=this;this.setBufferPool(new Bt),this.events.on(st.default.LoadDataReadBufferByNo,(function(e,r){t.readBufferByNo(e,r)})),this.events.on(st.default.LoadDataReadBuffer,(function(e,r){t.readBuffer(e,r)})),this.events.on(st.default.LoaderLoaded,(function(e,r,n,i){var a=t.createBuffer({arrayBuffer:Uint8Array.from(e.arrayBuffer)},r);if(t.segmentLoaded(r,a),"seek"===n&&i===t.currentSeekTime)return t.events.emit(st.default.LoadDataSeek,a,i),void t.removeBufferByNo(a.no);i===t.startLoadTime&&t.events.emit(st.default.LoadDataFirstLoaded,a,i)}))}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"startLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.logger.info("startLoad","begin to load ts data","time:",t),isNaN(t)?this.logger.error("seekTime","seek","time:",t):(this.startLoadTime=t,this.loadSegmentByTime(t,"start"))}},{key:"readBuffer",value:function(t,e){var r=this.getSegmentByTime(t);r&&this.readBufferByNo(r.no,e)}},{key:"segmentLoaded",value:function(t,e){e&&this.addBufferPool(e),t.no===this.options.player.currentIndex&&this.readBufferByNo(t.no),t.no<this.segmentPool.getLast().no&&this.loadSegmentByNo(t.no+1)}},{key:"seekTime",value:function(t){if(isNaN(t))this.logger.error("seekTime","seek","time:",t);else{var e;this.currentSeekTime=t;var r=this.bufferPool.indexOfByTime(t);r>-1?(e=this.bufferPool[r],this.events.emit(st.default.LoadDataSeek,e,t)):(this.removeBufferPool(this.bufferPool.length),this.loadSegmentByTime(t,"seek"))}}},{key:"loadSegmentByTime",value:function(t,e){if(!isNaN(t)){var r=this.segmentPool.indexOfByTime(t);if(r>=0){var n=this.segmentPool[r];this.events.emit(st.default.LoaderLoadFile,n,e,t)}else this.logger.error("loadSegmentByTime","time over","time:",t,"type:",e)}}},{key:"createBuffer",value:function(t,e){if(t){var r={start:e.start,end:e.end,no:e.no,duration:e.end-e.start,arrayBuffer:t.arrayBuffer};return new Tt(r)}}},{key:"isValidSegmentNo",value:function(t){return!isNaN(t)&&t>0&&t<=this.segmentPool.length}},{key:"loadSegmentByNo",value:function(t){var e=t-1,r=this.segmentPool.get(e);r&&this.events.emit(st.default.LoaderLoadFile,r,"play")}},{key:"readBufferByNo",value:function(t,e){this.isValidSegmentNo(t)?(this.readBufferNo=t,e=e||function(t){this.events.emit(st.default.LoadDataRead,t)},this.getBlobByNo(t,e)):this.logger.error("readBufferByNo","check buffer no","is not valid no",t)}},{key:"getSegmentByTime",value:function(t){var e=this.segmentPool.indexOfByTime(t);return this.segmentPool[e]}},{key:"getBlobByNo",value:function(t,e){if(isNaN(t))this.logger.error("getBlobByNo","isNaN","no:",t);else{var r;if(!this.isBufferReading)return this.isBufferReading=!0,r=this.bufferPool.getByKeyValue("no",t)[0],"function"==typeof e&&(e.call(this,r),r&&this.removeBufferByNo(r.no)),this.isBufferReading=!1,r;this.logger.warn("getBlobByNo","isBufferReading","no:",t)}}},{key:"addBufferPool",value:function(t){if(this.bufferPool.length){if(this.bufferPool[0].no===t.no+1)return this.bufferPool.unshift(t),!0;var e=this.bufferPool.getLast();if(t.no-e.no==1)return this.bufferPool.push(t),!0;if(this.bufferPool.indexOfByKey("no",t.no))return!0;this.bufferPool.splice(0,this.bufferPool.length)}this.bufferPool.push(t)}},{key:"removeBufferPool",value:function(t){this.bufferPool.splice(0,t+1)}},{key:"removeBufferByNo",value:function(t){var e=this.bufferPool.indexOfByKey("no",t);if(!(e<=-1))return this.removeBufferPool(e),this.bufferPool.length?this.bufferPool.getLast().no<this.segmentPool.getLast().no&&this.loadSegmentByNo(this.bufferPool.getLast().no+1):t<this.segmentPool.getLast().no&&this.loadSegmentByNo(t+1),!0}},{key:"clear",value:function(){this.sourceData={},this.readBufferNo=null,this.currentSeekTime=null,this.bufferPool.length=0,this.segmentPool.length=0}},{key:"getSegmentByNo",value:function(t){return this.segmentPool.get(t-1)}},{key:"getSegment",value:function(t){return this.segmentPool.getByTime(t)}},{key:"setSourceData",value:function(t){this.sourceData=t}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setBufferPool",value:function(t){this.bufferPool=t}},{key:"getBufferPool",value:function(){return this.bufferPool}},{key:"setSegmentPool",value:function(t){this.segmentPool=t}},{key:"getSegmentPool",value:function(){return this.segmentPool}}]),r}(N);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Dt=function(t){c()(r,t);var e=Ct(r);function r(t){var n;return i()(this,r),n=e.call(this),v()(u()(n),"loadData",null),n.options=t,n}return o()(r,[{key:"setLoadData",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.loadData=C()(Lt,e)}},{key:"getLoadData",value:function(){return this.loadData}},{key:"getLoadDataBufferPool",value:function(){return this.loadData.bufferPool}},{key:"setLoadDataSourceData",value:function(t){this.loadData.setSourceData(t)}},{key:"setLoadDataSegmentPool",value:function(t){this.loadData.setSegmentPool(t)}},{key:"startLoad",value:function(t){t=Math.max(t,0),this.startLoadData(t)}},{key:"startLoadData",value:function(t){this.loadData.startLoad(t)}},{key:"clearLoadData",value:function(){this.loadData.clear()}},{key:"getDataInstance",value:function(t){if(t)switch(t){case"load":if(!this.loadData){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.setLoadData.apply(this,r)}return this.loadData;default:return null}}}]),r}(D);function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Ot,Ut,Nt=function(t){c()(r,t);var e=It(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"checkHanlder",null),v()(u()(n),"resetStatus",{processor:!1,audioPlayer:!1}),n.player=t.player,n.player?(n.audioPlayer=t.audioPlayer,n.imagePlayer=t.imagePlayer,n.loadData=t.loadData,n.bindEvent(),n):h()(n)}return o()(r,[{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.ProcessorResetEnd,(function(){t.checkResetReady("processor")})),this.events.on(st.default.AudioPlayerReady,(function(){t.checkResetReady("audioPlayer")})),this.events.on(st.default.PlayerResetReady,(function(){t.onResetReady()})),this.events.on(st.default.LoadDataSeek,(function(e,r){t.onSeek(e,r)})),this.events.on(st.default.ImagePlayerRenderEnd,(function(e,r){t.onRenderEnd(e,r)})),this.events.on(st.default.ImagePlayerWait,(function(){t.audioPlayer.pause()}))}},{key:"play",value:function(t){this.logger.warn("play","play start"),this.sync(t)}},{key:"sync",value:function(t){var e=this.player,r=this.audioPlayer,n=this.imagePlayer,i=r.offset,a=n.offset,o=Math.min(i,a),s=Math.max(i,a);r.need||(o=a,s=a);var u=e.playbackRate;if(e.seeking&&(e.seeking=!1),!e.reseting&&"pause"!==e.status&&"waiting"!==r.status&&"wait"!==n.status)if("end"!==e.status){if(this.setCurrentTime(t),!(t<o))return r.need&&t>=i&&t<=a?(this.events.once(st.default.AudioPlayerPlaySuccess,(function(){n.render(a)})),r.playbackRate=u,void r.play()):void(t>=a&&(!r.need||t<=i)?n.render(t):t>s&&(this.audioPlayer.playbackRate=u,this.audioPlayer.play(),n.render(t)));this.sync(o)}else r.paused||r.pause()}},{key:"setCurrentTime",value:function(t){var e=t-(this.player.startPts||0);this.player.currentTime=e,this.events.emit(st.default.PlayerTimeUpdate,e)}},{key:"pause",value:function(){this.audioPlayer.pause(),this.clearDrawHanlder()}},{key:"seek",value:function(t){var e=this,r=this.imagePlayer.isBuffered(t),n=this.audioPlayer.isBuffered(t);this.player.pause(),r&&n?(this.logger.warn("seek","seek in buffer, time: ".concat(t,", buffer: ").concat(this.player.buffer()[0],", ").concat(this.player.buffer()[1])),this.audioPlayer.need?(this.audioPlayer.onSeekedHandler=function(){e.imagePlayer.render(t,!1)},this.audioPlayer.currentTime=t):(this.imagePlayer.render(t,!1),this.events.emit(st.default.StreamDataReady))):this.reset()}},{key:"reset",value:function(t){this.logger.info("reset","reset start"),this.player.reseting=!0,this.events.emit(st.default.PlayerReset,t),this.resetStatus={processor:!1,audioPlayer:!1},this.player.processController.reset(),this.player.streamController.reset(),this.player.audioPlayer.reset(t),this.player.imagePlayer.reset(),this.player.currentIndex=null}},{key:"checkResetReady",value:function(t){var e=this.resetStatus;if(t&&"string"==typeof t){e[t]=!0;for(var r=Object.keys(e),n=0;n<r.length;n++)if(!e[r[n]])return!1;this.logger.warn("checkResetReady","reset ready"),this.events.emit(st.default.PlayerResetReady)}}},{key:"onResetReady",value:function(){this.player.reseting=!1,this.logger.info("onResetReady","reset Ready"),this.player.changing&&this.events.emit(st.default.DataProcessorReady),this.player.seeking&&this.player.loadData.seekTime(this.player.currentTime/1e3)}},{key:"onSeek",value:function(t,e){var r=this.player.currentTime;this.logger.info("onseek",r,t,t.no,e),t&&t.no&&Math.abs(r-Math.floor(1e3*e))<2?(this.player.currentIndex=t.no,this.logger.info("seektime:",t.no,e,this.player.currentTime),this.player.seekSegmentNo=t.no,this.player.streamController.startLoad(t.no)):this.logger.warn("seek failue, not found data",r,t,e)}},{key:"clearDrawHanlder",value:function(){clearTimeout(this.drawFrameHanlder),this.drawFrameHanlder=null}},{key:"onRenderEnd",value:function(t,e){this.player.seekTime&&(this.logger.info("onRenderEnd","seektoRenderTime:",Date.now()-this.player.seekTime),this.player.seekTime=null);var r=this.imagePlayer,n=this.audioPlayer,i=this.player.playbackRate,a=n.currentTime,o=r.currentTime,s=n.offset,u=r.fragDuration,l=a-o,c=0;n.need?o<s?this.drawNext(o+u*i,u):(l>0&&l>u?u=(c=o+Math.ceil(l/u+i)*u)-a:(c=o+u*i,u-=l),this.drawNext(c,u)):this.drawNext(t+e,Math.ceil(e/i))}},{key:"drawNext",value:function(t,e){var r=this;this.drawFrameHanlder&&this.clearDrawHanlder(),this.drawFrameHanlder=setTimeout((function(){r.sync(t)}),e)}}]),r}(N);function jt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function Ht(t){if(Ot){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Ot.apply(void 0,[t].concat(r))}}function Vt(t){if(Ut){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Ut.apply(void 0,[t].concat(r))}}var Wt=function(){function t(e){i()(this,t),this.payload=e,this.nri=(96&this.payload[0])>>5,this.ntype=31&this.payload[0]}return o()(t,null,[{key:"type",value:function(e){return e.ntype in t.TYPES?t.TYPES[e.ntype]:"UNKNOWN"}},{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var e;return e={},v()(e,t.IDR,"IDR"),v()(e,t.SEI,"SEI"),v()(e,t.SPS,"SPS"),v()(e,t.PPS,"PPS"),v()(e,t.NDR,"NDR"),v()(e,t.AUD,"AUD"),e}}]),o()(t,[{key:"toString",value:function(){return"".concat(t.type(this),": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri>>6}},{key:"type",value:function(){return this.ntype}},{key:"isKeyframe",value:function(){return this.ntype==t.IDR}},{key:"getSize",value:function(){return 4+this.payload.byteLength}},{key:"getData",value:function(){var t=new Uint8Array(this.getSize());return new DataView(t.buffer).setUint32(0,this.getSize()-4),t.set(this.payload,4),t}}]),t}(),zt=function(){function t(e){i()(this,t),this.data=e,this.index=0,this.bitLength=8*e.byteLength}return o()(t,[{key:"skipBits",value:function(t){if(this.bitsAvailable<t)return!1;this.index+=t}},{key:"readBits",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getBits(t,this.index,e);return r}},{key:"getBits",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.bitsAvailable<t)return 0;var n=e%8,i=this.data[e/8|0]&255>>>n,a=8-n;if(a>=t)return r&&(this.index+=t),i>>a-t;r&&(this.index+=a);var o=t-a;return i<<o|this.getBits(o,e+a,r)}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitLength-this.index;++t)if(0!==this.getBits(1,this.index+t,!1))return this.index+=t,t;return t}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readBits(8*t)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}}]),t}(),$t=function(){function t(e){i()(this,t),this.remuxer=e,this.track=e.mp4track}return o()(t,null,[{key:"extractNALu",value:function(t){for(var e,r,n=0,i=t.byteLength,a=0,o=[];n<i;)switch(e=t[n++],a){case 0:0===e&&(a=1);break;case 1:a=0===e?2:0;break;case 2:case 3:0===e?a=3:1===e&&n<i?(r&&o.push(t.subarray(r,n-a-1)),r=n,a=0):a=0}return r&&o.push(t.subarray(r,i)),o}},{key:"skipScalingList",value:function(t,e){for(var r=8,n=8,i=0;i<e;i++)0!==n&&(n=(r+t.readEG()+256)%256),r=0===n?r:n}},{key:"readSPS",value:function(e){var r,n,i,a,o,s,u=new zt(e),l=0,c=0,f=0,h=0,d=1;if(u.readUByte(),r=u.readUByte(),u.readBits(5),u.skipBits(3),u.readUByte(),u.skipUEG(),100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r){var p=u.readUEG();if(3===p&&u.skipBits(1),u.skipUEG(),u.skipUEG(),u.skipBits(1),u.readBoolean()){s=3!==p?8:12;for(var y=0;y<s;++y)u.readBoolean()&&(y<6?t.skipScalingList(u,16):t.skipScalingList(u,64))}}u.skipUEG();var v=u.readUEG();if(0===v)u.readUEG();else if(1===v){u.skipBits(1),u.skipEG(),u.skipEG(),n=u.readUEG();for(var g=0;g<n;++g)u.skipEG()}if(u.skipUEG(),u.skipBits(1),i=u.readUEG(),a=u.readUEG(),0===(o=u.readBits(1))&&u.skipBits(1),u.skipBits(1),u.readBoolean()&&(l=u.readUEG(),c=u.readUEG(),f=u.readUEG(),h=u.readUEG()),u.readBoolean()){if(u.readBoolean()){var m;switch(u.readUByte()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[u.readUByte()<<8|u.readUByte(),u.readUByte()<<8|u.readUByte()]}m&&(d=m[0]/m[1])}if(u.readBoolean()&&u.skipBits(1),u.readBoolean()&&(u.skipBits(4),u.readBoolean()&&u.skipBits(24)),u.readBoolean()&&(u.skipUEG(),u.skipUEG()),u.readBoolean())u.readUInt(),u.readUInt(),u.readBoolean()}return{width:Math.ceil((16*(i+1)-2*l-2*c)*d),height:(2-o)*(a+1)*16-(o?2:4)*(f+h)}}}]),o()(t,[{key:"parseSPS",value:function(e){var r=t.readSPS(new Uint8Array(e));this.track.width=r.width,this.track.height=r.height,this.track.sps=[new Uint8Array(e)],this.track.codec="avc1.";for(var n=new DataView(e.buffer,e.byteOffset+1,4),i=0;i<3;++i){var a=n.getUint8(i).toString(16);a.length<2&&(a="0"+a),this.track.codec+=a}}},{key:"parsePPS",value:function(t){this.track.pps=[new Uint8Array(t)]}},{key:"parseNAL",value:function(t){if(!t)return!1;var e=!1;switch(t.type()){case Wt.NDR:case Wt.IDR:e=!0;break;case Wt.PPS:this.track.pps||(this.parsePPS(t.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),e=!0;break;case Wt.SPS:this.track.sps||(this.parseSPS(t.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),e=!0;break;case Wt.AUD:Ht("AUD - ignoing and disable HD mode for live channel"),this.remuxer.isHDAvail&&(this.remuxer.isHDAvail=!1);break;case Wt.SEI:Ht("SEI - ignoing")}return e}}]),t}(),Yt=function(){function t(e){i()(this,t),this.listener={},this.type=""|e}return o()(t,[{key:"on",value:function(t,e){return this.listener[t]||(this.listener[t]=[]),this.listener[t].push(e),!0}},{key:"off",value:function(t,e){if(this.listener[t]){var r=this.listener[t].indexOf(e);return r>-1&&this.listener[t].splice(r,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(t,e){return!!this.listener[t]&&(this.listener[t].map((function(t){t.apply(null,[e])})),!0)}}]),t}(),qt=Math.pow(2,32)-1,Gt=function(){function t(){i()(this,t)}return o()(t,null,[{key:"init",value:function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))}},{key:"box",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(var i,a=8,o=r.length,s=o;o--;)a+=r[o].byteLength;for((i=new Uint8Array(a))[0]=a>>24&255,i[1]=a>>16&255,i[2]=a>>8&255,i[3]=255&a,i.set(t,4),o=0,a=8;o<s;++o)i.set(r[o],a),a+=r[o].byteLength;return i}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,r){r*=e;var n=Math.floor(r/(qt+1)),i=Math.floor(r%(qt+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))}},{key:"moov",value:function(e,r,n){for(var i=e.length,a=[];i--;)a[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(n,r)].concat(a).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))}},{key:"mvhd",value:function(e,r){r*=e;var n=Math.floor(r/(qt+1)),i=Math.floor(r%(qt+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)}},{key:"sdtp",value:function(e){var r,n,i=e.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,a)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var r,n,i,a=[],o=[];for(r=0;r<e.sps.length;r++)i=(n=e.sps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)i=(n=e.pps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,l=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var e=t.config.byteLength,r=new Uint8Array(26+e+3);return r.set([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),r.set(t.config,26),r.set([6,1,2],26+e),r}},{key:"mp4a",value:function(e){var r=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"stsd",value:function(e){return"audio"===e.type?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var r=e.id,n=e.duration*e.timescale,i=e.width,a=e.height,o=Math.floor(n/(qt+1)),s=Math.floor(n%(qt+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(e,r){var n=t.sdtp(e),i=e.id,a=Math.floor(r/(qt+1)),o=Math.floor(r%(qt+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,n.length+16+20+8+16+8+8),n)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,r){var n,i,a,o,s,u,l=e.samples||[],c=l.length,f=12+16*c,h=new Uint8Array(f);for(r+=8+f,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)a=(i=l[n]).duration,o=i.size,s=i.flags,u=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return t.box(t.types.trun,h)}},{key:"initSegment",value:function(e,r,n){t.types||t.init();var i,a=t.moov(e,r,n);return(i=new Uint8Array(t.FTYP.byteLength+a.byteLength)).set(t.FTYP),i.set(a,t.FTYP.byteLength),i}}]),t}(),Xt=function(){function t(e){i()(this,t),this.remuxer=e,this.track=e.mp4track,this.aacHeader=null}return o()(t,[{key:"getHeaderLength",value:function(t){return 1&t[1]?7:9}},{key:"getFrameLength",value:function(t){return(3&t[3])<<11|t[4]<<3|(224&t[5])>>>5}},{key:"isAACPattern",value:function(t){return 255===t[0]&&240==(240&t[1])&&0==(6&t[1])}},{key:"extractAAC",value:function(t){var e,r,n=0,i=t.byteLength,a=[];if(!this.isAACPattern(t))return Vt("Invalid ADTS audio format"),a;for(e=this.getHeaderLength(t),this.aacHeader||(this.aacHeader=t.subarray(0,e));n<i;)r=this.getFrameLength(t),a.push(t.subarray(e,r)),t=t.slice(r),n+=r;return a}},{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getAACHeaderData",get:function(){return this.aacHeader}},{key:"setAACHeaderData",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.aacHeader=t}}]),o()(t,[{key:"setAACConfig",value:function(){var t,e,r,n=new Uint8Array(2),i=this.getAACHeaderData;i&&(t=1+((192&i[2])>>>6),e=(60&i[2])>>>2,r=(1&i[2])<<2,r|=(192&i[3])>>>6,n[0]=t<<3,n[0]|=(14&e)>>1,n[1]|=(1&e)<<7,n[1]|=r<<3,this.track.codec="mp4a.40."+t,this.track.channelCount=r,this.track.config=n,this.remuxer.readyToDecode=!0)}}]),t}(),Kt=1,Qt=function(){function t(){i()(this,t),this.seq=1}return o()(t,null,[{key:"getTrackID",value:function(){return Kt++}}]),o()(t,[{key:"flush",value:function(){this.seq++,this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!(!this.readyToDecode||!this.samples.length)||null}}]),t}(),Jt=function(t){c()(r,t);var e=Ft(r);function r(){var t;return i()(this,r),(t=e.call(this)).readyToDecode=!1,t.nextDts=0,t.dts=0,t.timescale=1e3,t.mp4track={id:Qt.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:t.timescale,duration:t.timescale,samples:[],config:"",codec:""},t.samples=[],t.aac=new Xt(u()(t)),t}return o()(r,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale}},{key:"remux",value:function(t){var e,r,n,i=jt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e=(r=a.units).byteLength,this.samples.push({units:r,size:e,duration:a.duration}),this.mp4track.len+=e,this.readyToDecode||this.aac.setAACConfig()}}catch(t){i.e(t)}finally{i.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var t,e,r=new Uint8Array(this.mp4track.len),n=0,i=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var a=this.samples.shift();(e=a.duration)<=0?(Ht("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(e)),this.mp4track.len-=a.size):(this.nextDts+=e,t={size:a.size,duration:e,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},r.set(a.units,n),n+=a.size,i.push(t))}return i.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}}]),r}(Qt),Zt=function(t){c()(r,t);var e=Ft(r);function r(){var t;return i()(this,r),(t=e.call(this)).readyToDecode=!1,t.nextDts=0,t.dts=0,t.timescale=1e3,t.mp4track={id:Qt.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t.timescale,duration:t.timescale,samples:[]},t.samples=[],t.h264=new $t(u()(t)),t}return o()(r,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps=""}},{key:"remux",value:function(t){var e,r,n,i,a,o,s=jt(t);try{for(s.s();!(o=s.n()).done;){e=o.value,r=[],i=0,a=!1;var u,l=jt(e.units);try{for(l.s();!(u=l.n()).done;)n=u.value,this.h264.parseNAL(n)&&(r.push(n),i+=n.getSize(),a||(a=n.isKeyframe()))}catch(t){l.e(t)}finally{l.f()}r.length>0&&this.readyToDecode&&(this.mp4track.len+=i,this.samples.push({units:r,size:i,keyFrame:a,duration:e.duration}))}}catch(t){s.e(t)}finally{s.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var t,e,r=new Uint8Array(this.mp4track.len),n=0,i=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var a=this.samples.shift(),o=a.units;if((e=a.duration)<=0)Ht("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(e)),this.mp4track.len-=a.size;else{this.nextDts+=e,t={size:a.size,duration:e,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:a.keyFrame?0:1,dependsOn:a.keyFrame?2:1}};var s,u=jt(o);try{for(u.s();!(s=u.n()).done;){var l=s.value;r.set(l.getData(),n),n+=l.getSize()}}catch(t){u.e(t)}finally{u.f()}i.push(t)}}return i.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}}]),r}(Qt);function te(t,e){var r=new Uint8Array((0|t.byteLength)+(0|e.byteLength));return r.set(t,0),r.set(e,0|t.byteLength),r}var ee=function(t){c()(r,t);var e=Ft(r);function r(t){var n;return i()(this,r),(n=e.call(this,"remuxer")).initialized=!1,n.trackTypes=[],n.tracks={},n.mediaDuration=t?1/0:1e3,n}return o()(r,[{key:"addTrack",value:function(t){"video"!==t&&"both"!==t||(this.tracks.video=new Zt,this.trackTypes.push("video")),"audio"!==t&&"both"!==t||(this.tracks.audio=new Jt,this.trackTypes.push("audio"))}},{key:"reset",value:function(){var t,e=jt(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var r=t.value;this.tracks[r].resetTrack()}}catch(t){e.e(t)}finally{e.f()}this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(this.initialized){var t,e=jt(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var r=t.value,n=this.tracks[r],i=n.getPayload();if(i&&i.byteLength){var a={type:r,payload:te(Gt.moof(n.seq,n.dts,n.mp4track),Gt.mdat(i)),dts:n.dts};this.dispatch("buffer",a);var o=(h=n.dts/1e3,d=void 0,p=void 0,y=void 0,v=void 0,v="",d=Math.floor(h),(p=parseInt(d/3600,10)%24)>0&&(v+=(p<10?"0"+p:p)+":"),v+=((y=parseInt(d/60,10)%60)<10?"0"+y:y)+":"+((d=d<0?0:d%60)<10?"0"+d:d));Ht("put segment (".concat(r,"): ").concat(n.seq," dts: ").concat(n.dts," samples: ").concat(n.mp4track.samples.length," second: ").concat(o)),n.flush()}}}catch(t){e.e(t)}finally{e.f()}}else if(this.isReady()){this.dispatch("ready");var s,u=jt(this.trackTypes);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this.tracks[l],f={type:l,payload:Gt.initSegment([c.mp4track],this.mediaDuration,c.mp4track.timescale)};this.dispatch("buffer",f)}}catch(t){u.e(t)}finally{u.f()}Ht("Initial segment generated."),this.initialized=!0}var h,d,p,y,v}},{key:"isReady",value:function(){var t,e=jt(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(!this.tracks[r].readyToDecode||!this.tracks[r].samples.length)return!1}}catch(t){e.e(t)}finally{e.f()}return!0}},{key:"remux",value:function(t){var e,r=jt(this.trackTypes);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=t[n];"audio"===n&&this.tracks.video&&!this.tracks.video.readyToDecode||i.length>0&&this.tracks[n].remux(i)}}catch(t){r.e(t)}finally{r.f()}this.flush()}}]),r}(Yt),re=function(t){c()(r,t);var e=Ft(r);function r(t,n){var a;return i()(this,r),(a=e.call(this,"buffer")).type=n,a.queue=new Uint8Array,a.cleaning=!1,a.pendingCleaning=0,a.cleanOffset=30,a.cleanRanges=[],a.sourceBuffer=t,a.sourceBuffer.addEventListener("updateend",(function(){a.dispatch("updateend",Date.now()),a.pendingCleaning>0&&(a.initCleanup(a.pendingCleaning),a.pendingCleaning=0),a.cleaning=!1,a.cleanRanges.length&&a.doCleanup()})),a.sourceBuffer.addEventListener("error",(function(t){a.dispatch("error",{type:a.type,name:"buffer",error:t})})),a}return o()(r,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(this.cleanRanges.length){var t=this.cleanRanges.shift();Ht("".concat(this.type," remove range [").concat(t[0]," - ").concat(t[1],")")),this.cleaning=!0,this.sourceBuffer.remove(t[0],t[1]),this.dispatch("clearBuffer")}else this.cleaning=!1}},{key:"initCleanup",value:function(t){if(this.sourceBuffer.updating)this.pendingCleaning=t;else if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var e=0;e<this.sourceBuffer.buffered.length;++e){var r=this.sourceBuffer.buffered.start(e),n=this.sourceBuffer.buffered.end(e);t-r>this.cleanOffset&&r<(n=t-this.cleanOffset)&&this.cleanRanges.push([r,n])}this.doCleanup()}}},{key:"doAppend",value:function(){if(this.queue.length&&!this.sourceBuffer.updating)try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(t){if("QuotaExceededError"===t.name)return Ht("".concat(this.type," buffer quota full")),void this.dispatch("error",{type:this.type,name:"QuotaExceeded",error:"buffer error"});Vt("Error occured while appending ".concat(this.type," buffer -  ").concat(t.name,": ").concat(t.message)),this.dispatch("error",{type:this.type,name:"unexpectedError",error:"buffer error"})}}},{key:"feed",value:function(t){this.queue=te(this.queue,t)}}]),r}(Yt);window.MediaSource=window.MediaSource||window.WebKitMediaSource;var ne=function(t){c()(r,t);var e=Ft(r);function r(t){var n;i()(this,r),n=e.call(this,"jmuxer"),window.MediaSource=window.MediaSource||window.WebKitMediaSource;if(n.options=Object.assign({},{node:"",mode:"both",flushingTime:1500,clearBuffer:!0,onReady:null,fps:30,debug:!1,onClearBuffer:null},t),n.options.debug&&(Ot=console.log,Ut=console.error),"string"==typeof n.options.node&&""==n.options.node&&Vt("no video element were found to render, provide a valid video element"),n.options.fps||(n.options.fps=30),n.frameDuration=1e3/n.options.fps|0,n.node="string"==typeof n.options.node?document.getElementById(n.options.node):n.options.node,n.sourceBuffers={},n.isMSESupported=!!window.MediaSource,!n.isMSESupported)throw"Oops! Browser does not support media source extension.";return n.setupMSE(),n.remuxController=new ee(n.options.clearBuffer),n.remuxController.addTrack(n.options.mode),"audio"===n.options.mode&&(n.aacParser=n.remuxController.tracks.audio.aac),n.mseReady=!1,n.lastCleaningTime=Date.now(),n.keyframeCache=[],n.frameCounter=0,n.remuxController.on("buffer",n.onBuffer.bind(u()(n))),n.remuxController.on("ready",n.createBuffer.bind(u()(n))),n.startInterval(),n}return o()(r,null,[{key:"isSupported",value:function(t){return window.MediaSource&&window.MediaSource.isTypeSupported(t)}}]),o()(r,[{key:"setupMSE",value:function(){this.mediaSource=new MediaSource,this.node.src=URL.createObjectURL(this.mediaSource),this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"feed",value:function(t){var e,r,n,i=!1,a={video:[],audio:[]};t&&this.remuxController&&(n=t.duration?parseInt(t.duration):0,t.video&&(e=$t.extractNALu(t.video)).length>0&&(a.video=this.getVideoFrames(e,n),i=!0),t.audio&&(r=this.aacParser.extractAAC(t.audio)).length>0&&(a.audio=this.getAudioFrames(r,n),i=!0),i?this.remuxController.remux(a):Vt("Input object must have video and/or audio property. Make sure it is not empty and valid typed array"))}},{key:"getVideoFrames",value:function(t,e){var r,n,i,a,o=[],s=[],u=0,l=[],c=jt(t);try{for(c.s();!(a=c.n()).done;)r=a.value,n=new Wt(r),o.push(n),n.type()!==Wt.IDR&&n.type()!==Wt.NDR||(s.push({units:o}),o=[],this.options.clearBuffer&&(n.type()===Wt.IDR&&l.push(this.frameCounter),this.frameCounter++))}catch(t){c.e(t)}finally{c.f()}return e?(i=e/s.length|0,u=e-i*s.length):i=this.frameDuration,s.map((function(t){t.duration=u>0?i+1:i,0!==u&&u--})),this.options.clearBuffer&&(l=l.map((function(t){return t*i/1e3})),this.keyframeCache=this.keyframeCache.concat(l)),s}},{key:"getAudioFrames",value:function(t,e){var r,n,i,a=[],o=0,s=jt(t);try{for(s.s();!(i=s.n()).done;)r=i.value,a.push({units:r})}catch(t){s.e(t)}finally{s.f()}return e?(n=e/a.length|0,o=e-n*a.length):n=this.frameDuration,a.map((function(t){t.duration=o>0?n+1:n,0!==o&&o--})),a}},{key:"destroy",value:function(){if(this.aacParser=null,this.stopInterval(),this.mediaSource){try{this.bufferControllers&&(this.mediaSource.endOfStream(),this.removeSourceBuffer())}catch(t){Vt("mediasource is not available to end ".concat(t.message))}this.mediaSource=null}if(this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var t in this.bufferControllers)this.bufferControllers[t].destroy();this.bufferControllers=null}this.node=!1,this.mseReady=!1,this.videoStarted=!1}},{key:"createBuffer",value:function(){if(this.mseReady&&this.remuxController&&this.remuxController.isReady()&&!this.bufferControllers)for(var t in this.bufferControllers={},this.remuxController.tracks){var e=this.remuxController.tracks[t];if(!r.isSupported("".concat(t,'/mp4; codecs="').concat(e.mp4track.codec,'"')))return Vt("Browser does not support codec"),!1;var n=this.mediaSource.addSourceBuffer("".concat(t,'/mp4; codecs="').concat(e.mp4track.codec,'"'));this.bufferControllers[t]=new re(n,t),this.sourceBuffers[t]=n,this.bufferControllers[t].on("error",this.onBufferError.bind(this)),this.bufferControllers[t].on("clearBuffer",this.onClearBuffer.bind(this)),this.bufferControllers[t].on("updateend",this.onUpdateEnd.bind(this))}}},{key:"onUpdateEnd",value:function(t){"function"==typeof this.options.onUpdateEnd&&this.options.onUpdateEnd(t)}},{key:"startInterval",value:function(){var t=this;this.interval=setInterval((function(){t.bufferControllers&&(t.releaseBuffer(),t.clearBuffer())}),this.options.flushingTime)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"releaseBuffer",value:function(){for(var t in this.bufferControllers)this.bufferControllers[t].doAppend()}},{key:"getSafeBufferClearLimit",value:function(t){for(var e,r="audio"===this.options.mode&&t||0,n=0;n<this.keyframeCache.length&&!(this.keyframeCache[n]>=t);n++)e=this.keyframeCache[n];return e&&(this.keyframeCache=this.keyframeCache.filter((function(t){return t<e&&(r=t),t>=e}))),r}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var t in this.bufferControllers){var e=this.getSafeBufferClearLimit(this.node.currentTime);this.bufferControllers[t].initCleanup(e)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(t){this.bufferControllers&&this.bufferControllers[t.type]&&this.bufferControllers[t.type].feed(t.payload)}},{key:"onClearBuffer",value:function(){"function"==typeof this.options.onClearBuffer&&this.options.onClearBuffer()}},{key:"removeSourceBuffer",value:function(){if(this.mediaSource){var t=this.sourceBuffers;for(var e in t)this.mediaSource.removeSourceBuffer(t[e])}}},{key:"onMSEOpen",value:function(){this.mseReady=!0,this.createBuffer(),"function"==typeof this.options.onReady&&(this.options.onReady(),this.options.onReady=null)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(t){if("QuotaExceeded"!=t.name){if(this.mediaSource.sourceBuffers.length>0&&this.sourceBuffers[t.type]&&this.mediaSource.removeSourceBuffer(this.sourceBuffers[t.type]),0==this.mediaSource.sourceBuffers.length)try{this.mediaSource.endOfStream()}catch(t){Vt("mediasource is not available to end")}}else this.bufferControllers[t.type].initCleanup(this.node.currentTime)}}]),r}(Yt);function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var ae=function(t){c()(r,t);var e=ie(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"source",[]),v()(u()(n),"onPlay",void 0),n.source=t.source,n.onPlay=t.onPlay,n.init(),n}return o()(r,[{key:"init",value:function(){}},{key:"extract",value:function(t,e){for(var r=this.provide(e),n=0;n<r.size;n++)t[2*n]=r.left[n],t[2*n+1]=r.right[n];return r.size}},{key:"provide",value:function(t){for(var e=t,r=new Float32Array(e),n=new Float32Array(e),i=0,a=0,o=0;this.source.length>0;){var s=this.source.shift(),u=s.loadedPosition||0;a=s.startTime+s.duration*u/s.length;var l=Math.min(s.length-u,e-i),c=s.getChannelData(0),f=s.numberOfChannels>1?s.getChannelData(1):s.getChannelData(0);if(r.set(c.slice(u,u+l),i),n.set(f.slice(u,u+l),i),o+=l,i+=l,(u+=l)<s.length){s.loadedPosition=u,this.source.unshift(s);break}}return this.onPlay&&this.onPlay(a),{left:r,right:n,size:o}}}]),r}(N);function oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ue(t,e,r){return e&&se(t.prototype,e),r&&se(t,r),t}function le(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function he(t,e){return!e||"object"!==A()(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t,e,r){return(de="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ce(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}var pe=function(){function t(){oe(this,t),this._vector=new Float32Array,this._position=0,this._frameCount=0}return ue(t,[{key:"clear",value:function(){this.receive(this._frameCount),this.rewind()}},{key:"put",value:function(t){this._frameCount+=t}},{key:"putSamples",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=2*(e=e||0);r>=0||(r=(t.length-n)/2);var i=2*r;this.ensureCapacity(r+this._frameCount);var a=this.endIndex;this.vector.set(t.subarray(n,n+i),a),this._frameCount+=r}},{key:"putBuffer",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=e||0,r>=0||(r=t.frameCount-e),this.putSamples(t.vector,t.position+e,r)}},{key:"receive",value:function(t){t>=0&&!(t>this._frameCount)||(t=this.frameCount),this._frameCount-=t,this._position+=t}},{key:"receiveSamples",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=2*e,n=this.startIndex;t.set(this._vector.subarray(n,n+r)),this.receive(e)}},{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.startIndex+2*e,i=2*r;t.set(this._vector.subarray(n,n+i))}},{key:"ensureCapacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=parseInt(2*t);if(this._vector.length<e){var r=new Float32Array(e);r.set(this._vector.subarray(this.startIndex,this.endIndex)),this._vector=r,this._position=0}else this.rewind()}},{key:"ensureAdditionalCapacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.ensureCapacity(this._frameCount+t)}},{key:"rewind",value:function(){this._position>0&&(this._vector.set(this._vector.subarray(this.startIndex,this.endIndex)),this._position=0)}},{key:"vector",get:function(){return this._vector}},{key:"position",get:function(){return this._position}},{key:"startIndex",get:function(){return 2*this._position}},{key:"frameCount",get:function(){return this._frameCount}},{key:"endIndex",get:function(){return 2*(this._position+this._frameCount)}}]),t}(),ye=function(){function t(e){oe(this,t),e?(this._inputBuffer=new pe,this._outputBuffer=new pe):this._inputBuffer=this._outputBuffer=null}return ue(t,[{key:"clear",value:function(){this._inputBuffer.clear(),this._outputBuffer.clear()}},{key:"inputBuffer",get:function(){return this._inputBuffer},set:function(t){this._inputBuffer=t}},{key:"outputBuffer",get:function(){return this._outputBuffer},set:function(t){this._outputBuffer=t}}]),t}(),ve=function(t){function e(t){var r;return oe(this,e),(r=he(this,ce(e).call(this,t))).reset(),r._rate=1,r}return le(e,t),ue(e,[{key:"reset",value:function(){this.slopeCount=0,this.prevSampleL=0,this.prevSampleR=0}},{key:"clone",value:function(){var t=new e;return t.rate=this._rate,t}},{key:"process",value:function(){var t=this._inputBuffer.frameCount;this._outputBuffer.ensureAdditionalCapacity(t/this._rate+1);var e=this.transpose(t);this._inputBuffer.receive(),this._outputBuffer.put(e)}},{key:"transpose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===t)return 0;for(var e=this._inputBuffer.vector,r=this._inputBuffer.startIndex,n=this._outputBuffer.vector,i=this._outputBuffer.endIndex,a=0,o=0;this.slopeCount<1;)n[i+2*o]=(1-this.slopeCount)*this.prevSampleL+this.slopeCount*e[r],n[i+2*o+1]=(1-this.slopeCount)*this.prevSampleR+this.slopeCount*e[r+1],o+=1,this.slopeCount+=this._rate;if(this.slopeCount-=1,1!==t)t:for(;;){for(;this.slopeCount>1;)if(this.slopeCount-=1,(a+=1)>=t-1)break t;var s=r+2*a;n[i+2*o]=(1-this.slopeCount)*e[s]+this.slopeCount*e[s+2],n[i+2*o+1]=(1-this.slopeCount)*e[s+1]+this.slopeCount*e[s+3],o+=1,this.slopeCount+=this._rate}return this.prevSampleL=e[r+2*t-2],this.prevSampleR=e[r+2*t-1],o}},{key:"rate",set:function(t){this._rate=t}}]),e}(ye),ge=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;oe(this,t),this._pipe=e,this.inputSize=r}return ue(t,[{key:"fillInputBuffer",value:function(){throw new Error("fillInputBuffer() not overridden")}},{key:"fillOutputBuffer",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.inputSize;this.outputBuffer.frameCount<t;){var r=e-this.inputBuffer.frameCount;if(this.fillInputBuffer(r),this.inputBuffer.frameCount<e)break;this._pipe.process()}}},{key:"clear",value:function(){this._pipe.clear()}},{key:"pipe",get:function(){return this._pipe}},{key:"inputBuffer",get:function(){return this._pipe.inputBuffer}},{key:"outputBuffer",get:function(){return this._pipe.outputBuffer}}]),t}(),me=function(){},be=function(t){function e(t,r){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:me;return oe(this,e),(n=he(this,ce(e).call(this,r,i))).callback=a,n.sourceSound=t,n.historyBufferSize=22050,n._sourcePosition=0,n.outputBufferPosition=0,n._position=0,n}return le(e,t),ue(e,[{key:"onEnd",value:function(){this.callback()}},{key:"fillInputBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Float32Array(2*t),r=this.sourceSound.extract(e,t,this._sourcePosition);this._sourcePosition+=r,this.inputBuffer.putSamples(e,0,r)}},{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.fillOutputBuffer(this.outputBufferPosition+e);var r=Math.min(e,this.outputBuffer.frameCount-this.outputBufferPosition);this.outputBuffer.extract(t,this.outputBufferPosition,r);var n=this.outputBufferPosition+r;return this.outputBufferPosition=Math.min(this.historyBufferSize,n),this.outputBuffer.receive(Math.max(n-this.historyBufferSize,0)),this._position+=r,r}},{key:"handleSampleData",value:function(t){this.extract(t.data,4096)}},{key:"clear",value:function(){de(ce(e.prototype),"clear",this).call(this),this.outputBufferPosition=0}},{key:"position",get:function(){return this._position},set:function(t){if(t>this._position)throw new RangeError("New position may not be greater than current position");var e=this.outputBufferPosition-(this._position-t);if(e<0)throw new RangeError("New position falls outside of history buffer");this.outputBufferPosition=e,this._position=t}},{key:"sourcePosition",get:function(){return this._sourcePosition},set:function(t){this.clear(),this._sourcePosition=t}}]),e}(ge),_e=[[124,186,248,310,372,434,496,558,620,682,744,806,868,930,992,1054,1116,1178,1240,1302,1364,1426,1488,0],[-100,-75,-50,-25,25,50,75,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-20,-15,-10,-5,5,10,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-4,-3,-2,-1,1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],we=function(t){function e(t){var r;return oe(this,e),(r=he(this,ce(e).call(this,t)))._quickSeek=!0,r.midBufferDirty=!1,r.midBuffer=null,r.overlapLength=0,r.autoSeqSetting=!0,r.autoSeekSetting=!0,r._tempo=1,r.setParameters(44100,0,0,8),r}return le(e,t),ue(e,[{key:"clear",value:function(){de(ce(e.prototype),"clear",this).call(this),this.clearMidBuffer()}},{key:"clearMidBuffer",value:function(){this.midBufferDirty&&(this.midBufferDirty=!1,this.midBuffer=null)}},{key:"setParameters",value:function(t,e,r,n){t>0&&(this.sampleRate=t),n>0&&(this.overlapMs=n),e>0?(this.sequenceMs=e,this.autoSeqSetting=!1):this.autoSeqSetting=!0,r>0?(this.seekWindowMs=r,this.autoSeekSetting=!1):this.autoSeekSetting=!0,this.calculateSequenceParameters(),this.calculateOverlapLength(this.overlapMs),this.tempo=this._tempo}},{key:"calculateOverlapLength",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t=(t=this.sampleRate*e/1e3)<16?16:t,t-=t%8,this.overlapLength=t,this.refMidBuffer=new Float32Array(2*this.overlapLength),this.midBuffer=new Float32Array(2*this.overlapLength)}},{key:"checkLimits",value:function(t,e,r){return t<e?e:t>r?r:t}},{key:"calculateSequenceParameters",value:function(){var t,e;this.autoSeqSetting&&(t=150+-50*this._tempo,t=this.checkLimits(t,50,125),this.sequenceMs=Math.floor(t+.5)),this.autoSeekSetting&&(e=25- -10/1.5*.5+-10/1.5*this._tempo,e=this.checkLimits(e,15,25),this.seekWindowMs=Math.floor(e+.5)),this.seekWindowLength=Math.floor(this.sampleRate*this.sequenceMs/1e3),this.seekLength=Math.floor(this.sampleRate*this.seekWindowMs/1e3)}},{key:"clone",value:function(){var t=new e;return t.tempo=this._tempo,t.setParameters(this.sampleRate,this.sequenceMs,this.seekWindowMs,this.overlapMs),t}},{key:"seekBestOverlapPosition",value:function(){return this._quickSeek?this.seekBestOverlapPositionStereoQuick():this.seekBestOverlapPositionStereo()}},{key:"seekBestOverlapPositionStereo",value:function(){var t,e,r,n=0;for(this.preCalculateCorrelationReferenceStereo(),t=0,e=Number.MIN_VALUE;n<this.seekLength;n+=1)(r=this.calculateCrossCorrelationStereo(2*n,this.refMidBuffer))>e&&(e=r,t=n);return t}},{key:"seekBestOverlapPositionStereoQuick",value:function(){var t,e,r,n,i,a=0;for(this.preCalculateCorrelationReferenceStereo(),e=Number.MIN_VALUE,t=0,n=0,i=0;a<4;a+=1){for(var o=0;_e[a][o]&&!((i=n+_e[a][o])>=this.seekLength);)(r=this.calculateCrossCorrelationStereo(2*i,this.refMidBuffer))>e&&(e=r,t=i),o+=1;n=t}return t}},{key:"preCalculateCorrelationReferenceStereo",value:function(){for(var t,e,r=0;r<this.overlapLength;r+=1)e=r*(this.overlapLength-r),t=2*r,this.refMidBuffer[t]=this.midBuffer[t]*e,this.refMidBuffer[t+1]=this.midBuffer[t+1]*e}},{key:"calculateCrossCorrelationStereo",value:function(t,e){var r=this._inputBuffer.vector;t+=this._inputBuffer.startIndex;for(var n,i=0,a=2,o=2*this.overlapLength;a<o;a+=2)i+=r[n=a+t]*e[a]+r[n+1]*e[a+1];return i}},{key:"overlap",value:function(t){this.overlapStereo(2*t)}},{key:"overlapStereo",value:function(t){var e=this._inputBuffer.vector;t+=this._inputBuffer.startIndex;for(var r,n,i,a,o,s=this._outputBuffer.vector,u=this._outputBuffer.endIndex,l=0,c=1/this.overlapLength;l<this.overlapLength;l+=1)n=(this.overlapLength-l)*c,i=l*c,a=(r=2*l)+t,s[(o=r+u)+0]=e[a+0]*i+this.midBuffer[r+0]*n,s[o+1]=e[a+1]*i+this.midBuffer[r+1]*n}},{key:"process",value:function(){var t,e,r;if(null===this.midBuffer){if(this._inputBuffer.frameCount<this.overlapLength)return;this.midBuffer=new Float32Array(2*this.overlapLength),this._inputBuffer.receiveSamples(this.midBuffer,this.overlapLength)}for(;this._inputBuffer.frameCount>=this.sampleReq;){t=this.seekBestOverlapPosition(),this._outputBuffer.ensureAdditionalCapacity(this.overlapLength),this.overlap(Math.floor(t)),this._outputBuffer.put(this.overlapLength),(e=this.seekWindowLength-2*this.overlapLength)>0&&this._outputBuffer.putBuffer(this._inputBuffer,t+this.overlapLength,e);var n=this._inputBuffer.startIndex+2*(t+this.seekWindowLength-this.overlapLength);this.midBuffer.set(this._inputBuffer.vector.subarray(n,n+2*this.overlapLength)),this.skipFract+=this.nominalSkip,r=Math.floor(this.skipFract),this.skipFract-=r,this._inputBuffer.receive(r)}}},{key:"tempo",set:function(t){var e;this._tempo=t,this.calculateSequenceParameters(),this.nominalSkip=this._tempo*(this.seekWindowLength-this.overlapLength),this.skipFract=0,e=Math.floor(this.nominalSkip+.5),this.sampleReq=Math.max(e+this.overlapLength,this.seekWindowLength)+this.seekLength},get:function(){return this._tempo}},{key:"inputChunkSize",get:function(){return this.sampleReq}},{key:"outputChunkSize",get:function(){return this.overlapLength+Math.max(0,this.seekWindowLength-2*this.overlapLength)}},{key:"quickSeek",set:function(t){this._quickSeek=t}}]),e}(ye),ke=function(t,e){return(t>e?t-e:e-t)>1e-10},xe=function(){function t(){oe(this,t),this.transposer=new ve(!1),this.stretch=new we(!1),this._inputBuffer=new pe,this._intermediateBuffer=new pe,this._outputBuffer=new pe,this._rate=0,this._tempo=0,this.virtualPitch=1,this.virtualRate=1,this.virtualTempo=1,this.calculateEffectiveRateAndTempo()}return ue(t,[{key:"clear",value:function(){this.transposer.clear(),this.stretch.clear()}},{key:"clone",value:function(){var e=new t;return e.rate=this.rate,e.tempo=this.tempo,e}},{key:"calculateEffectiveRateAndTempo",value:function(){var t=this._tempo,e=this._rate;this._tempo=this.virtualTempo/this.virtualPitch,this._rate=this.virtualRate*this.virtualPitch,ke(this._tempo,t)&&(this.stretch.tempo=this._tempo),ke(this._rate,e)&&(this.transposer.rate=this._rate),this._rate>1?this._outputBuffer!=this.transposer.outputBuffer&&(this.stretch.inputBuffer=this._inputBuffer,this.stretch.outputBuffer=this._intermediateBuffer,this.transposer.inputBuffer=this._intermediateBuffer,this.transposer.outputBuffer=this._outputBuffer):this._outputBuffer!=this.stretch.outputBuffer&&(this.transposer.inputBuffer=this._inputBuffer,this.transposer.outputBuffer=this._intermediateBuffer,this.stretch.inputBuffer=this._intermediateBuffer,this.stretch.outputBuffer=this._outputBuffer)}},{key:"process",value:function(){this._rate>1?(this.stretch.process(),this.transposer.process()):(this.transposer.process(),this.stretch.process())}},{key:"rate",get:function(){return this._rate},set:function(t){this.virtualRate=t,this.calculateEffectiveRateAndTempo()}},{key:"rateChange",set:function(t){this._rate=1+.01*t}},{key:"tempo",get:function(){return this._tempo},set:function(t){this.virtualTempo=t,this.calculateEffectiveRateAndTempo()}},{key:"tempoChange",set:function(t){this.tempo=1+.01*t}},{key:"pitch",set:function(t){this.virtualPitch=t,this.calculateEffectiveRateAndTempo()}},{key:"pitchOctaves",set:function(t){this.pitch=Math.exp(.69314718056*t),this.calculateEffectiveRateAndTempo()}},{key:"pitchSemitones",set:function(t){this.pitchOctaves=t/12}},{key:"inputBuffer",get:function(){return this._inputBuffer}},{key:"outputBuffer",get:function(){return this._outputBuffer}}]),t}(),Ee=function(){function t(e){oe(this,t),this.buffer=e,this._position=0}return ue(t,[{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.position=r;for(var n=this.buffer.getChannelData(0),i=this.dualChannel?this.buffer.getChannelData(1):this.buffer.getChannelData(0),a=0;a<e;a++)t[2*a]=n[a+r],t[2*a+1]=i[a+r];return Math.min(e,n.length-r)}},{key:"dualChannel",get:function(){return this.buffer.numberOfChannels>1}},{key:"position",get:function(){return this._position},set:function(t){this._position=t}}]),t}(),Se=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:me,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4096,i=t.createScriptProcessor(n,2,2),a=new Float32Array(2*n);return i.onaudioprocess=function(t){var i=t.outputBuffer.getChannelData(0),o=t.outputBuffer.getChannelData(1),s=e.extract(a,n);r(e.sourcePosition),0===s&&e.onEnd();for(var u=0;u<s;u++)i[u]=a[2*u],o[u]=a[2*u+1]},i},Pe=function(t){var e,r,n,i=Math.floor(t/60),a=t-60*i;return"".concat(i,":").concat((e=parseInt(a),n=n||"0",(e+="").length>=(r=2)?e:new Array(r-e.length+1).join(n)+e))},Te=function(t){var e=this.timePlayed,r=this.sampleRate;if(this.sourcePosition=t,this.timePlayed=t/r,e!==this.timePlayed){var n=new CustomEvent("play",{detail:{timePlayed:this.timePlayed,formattedTimePlayed:this.formattedTimePlayed,percentagePlayed:this.percentagePlayed}});this._node.dispatchEvent(n)}};!function(){function t(e,r,n){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:me;oe(this,t),this._soundtouch=new xe;var o=new Ee(r);this.timePlayed=0,this.sourcePosition=0,this._filter=new be(o,this._soundtouch,a),this._node=Se(e,this._filter,(function(t){return Te.call(i,t)})),this.tempo=1,this.rate=1,this.duration=r.duration,this.sampleRate=e.sampleRate,this.listeners=[]}ue(t,[{key:"connect",value:function(t){this._node.connect(t)}},{key:"disconnect",value:function(){this._node.disconnect()}},{key:"on",value:function(t,e){this.listeners.push({name:t,cb:e}),this._node.addEventListener(t,(function(t){return e(t.detail)}))}},{key:"off",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.listeners;e&&(r=r.filter((function(t){return t.name===e}))),r.forEach((function(e){t._node.removeEventListener(e.name,(function(t){return e.cb(t.detail)}))}))}},{key:"formattedDuration",get:function(){return Pe(this.duration)}},{key:"formattedTimePlayed",get:function(){return Pe(this.timePlayed)}},{key:"percentagePlayed",get:function(){return 100*this._filter.sourcePosition/(this.duration*this.sampleRate)},set:function(t){this._filter.sourcePosition=parseInt(t*this.duration*this.sampleRate)}},{key:"node",get:function(){return this._node}},{key:"pitch",set:function(t){this._soundtouch.pitch=t}},{key:"pitchSemitones",set:function(t){this._soundtouch.pitchSemitones=t}},{key:"rate",set:function(t){this._soundtouch.rate=t}},{key:"tempo",set:function(t){this._soundtouch.tempo=t}}])}();function Ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Be=function(t){c()(r,t);var e=Ae(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"soundTouch",void 0),v()(u()(n),"filter",void 0),n.init(t.source),n}return o()(r,[{key:"init",value:function(t){this.soundTouch=new xe,this.soundTouch.tempo=1,this.soundTouch.rate=1,this.filter=new be(t,this.soundTouch,2048)}},{key:"provide",value:function(t){for(var e=new Float32Array(2*t),r=this.filter.extract(e,t),n=new Float32Array(r),i=new Float32Array(r),a=0;a<r;a++)n[a]=e[2*a],i[a]=e[2*a+1];return{size:r,left:n,right:i}}},{key:"rate",set:function(t){this.soundTouch.tempo=t}}]),r}(N);function Re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Le=function(t){c()(r,t);var e=Re(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"currentRate",1),v()(u()(n),"source",[]),v()(u()(n),"commonProcessor",void 0),v()(u()(n),"rateProcessor",void 0),v()(u()(n),"audioTime",0),n.source=t.source,n.init(),n}return o()(r,[{key:"init",value:function(){var t=this;this.commonProcessor=new ae({source:this.source,onPlay:function(e){t.audioTime=e}}),this.rateProcessor=new Be({source:this.commonProcessor})}},{key:"provide",value:function(t){var e=(1===this.currentRate?this.commonProcessor:this.rateProcessor).provide(t);return e.audioTime=this.audioTime,e}},{key:"rate",set:function(t){this.currentRate=t,this.rateProcessor.rate=t}}]),r}(N);function Ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var De="canplaythrough",Ie="seeked",Oe="waiting",Ue=function(t){c()(r,t);var e=Ce(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"audioContext",null),v()(u()(n),"scriptNode",null),v()(u()(n),"gainNode",null),v()(u()(n),"delay",0),v()(u()(n),"audioBuffer",new ArrayBuffer(0)),v()(u()(n),"decodedBuffer",[]),v()(u()(n),"isFirstPlay",!0),v()(u()(n),"defaultVolume",1),v()(u()(n),"currentRate",1),v()(u()(n),"eventListeners",{}),v()(u()(n),"canPlay",!1),v()(u()(n),"interval",void 0),v()(u()(n),"seekTimeDelta",0),v()(u()(n),"audioTime",0),v()(u()(n),"audioProvider",void 0),v()(u()(n),"isWaiting",!1),t=Object.assign({},t),n.flushTime=t.flushTime||1e3,n.onReady=t.onReady,n.init(),n}return o()(r,[{key:"init",value:function(){this.audioProvider=new Le({source:this.decodedBuffer}),"function"==typeof this.onReady&&setTimeout(this.onReady,0)}},{key:"feed",value:function(t){var e=t.audio;this.audioBuffer=this.appendByteArray(this.audioBuffer,e),this.canPlay||(this.canPlay=!0,this.triggerEvent(De))}},{key:"appendByteArray",value:function(t,e){var r=new Uint8Array((0|t.byteLength)+(0|e.byteLength));return r.set(new Uint8Array(t),0),r.set(new Uint8Array(e),0|t.byteLength),r.buffer}},{key:"decodeAudioData",value:function(t){var e=this;this.audioBuffer&&this.audioBuffer.byteLength>0&&(this.audioContext.decodeAudioData(this.audioBuffer,(function(r){r.startTime=e.delay,e.delay+=r.duration,e.decodedBuffer.push(r),t&&t.call()}),(function(t){e.logger.error("decodeAudioData",t)})),this.audioBuffer=new ArrayBuffer(0))}},{key:"play",value:function(){var t=this;return new Promise((function(e,r){t.isFirstPlay?(t.isFirstPlay=!1,t.logger.info("startPlay"),t.audioContext=new(window.AudioContext||window.webkitAudioContext),t.gainNode=t.audioContext.createGain(),t.gainNode.gain.value=t.defaultVolume,t.scriptNode=t.audioContext.createScriptProcessor(2048,2,2),t.scriptNode.onaudioprocess=function(e){var r=e.outputBuffer,n=r.length,i=t.audioProvider.provide(n);if(0!==i.size){t.isWaiting&&(t.isWaiting=!1,t.triggerEvent(De));var a=r.getChannelData(0),o=r.getChannelData(1);if(0!=i.audioTime&&(t.audioTime=i.audioTime),a.set(i.left),o.set(i.right),i.size<n){var s=new Float32Array(n-i.size);a.set(s,i.size),o.set(s,i.size)}}else t.isWaiting||(t.isWaiting=!0,t.triggerEvent(Oe))},t.scriptNode.connect(t.gainNode),t.gainNode.connect(t.audioContext.destination),t.decodeAudioData.call(t,t.testAutoplay.bind(t,e,r)),t.interval=setInterval(t.decodeAudioData.bind(t),t.flushTime)):"suspended"===t.audioContext.state?t.audioContext.resume().then((function(){t.logger.info("play","Audio is resumed"),e()})):(t.logger.info("Audio resumed from waiting"),e())}))}},{key:"pause",value:function(){var t=this;this.audioContext&&this.audioContext.suspend().then((function(){t.logger.info("pause","Audio is paused")}))}},{key:"addEventListener",value:function(t,e){this.eventListeners[t]=e}},{key:"triggerEvent",value:function(t){var e=this.eventListeners[t];e&&e.call()}},{key:"buffer",value:function(){var t=0;this.decodedBuffer.length>0&&(t=this.decodedBuffer[0].startTime);return{start:1e3*t,end:parseInt(1e3*this.delay)}}},{key:"destroy",value:function(){this.delay=0,this.audioContext&&(clearInterval(this.interval),this.scriptNode.disconnect(),this.scriptNode=null,this.audioContext.close(),this.audioContext=null),this.gainNode=null,this.audioBuffer=new ArrayBuffer(0),this.canPlay=!1,this.isFirstPlay=!0,this.decodedBuffer.length=0,this.seekTimeDelta=0,this.audioTime=0}},{key:"testAutoplay",value:function(t,e){var r=R.createEl("audio"),n=r.play();r=null;var i=!1;void 0!==n?(n.catch((function(){i=!0})),setTimeout((function(){n=null,i?e("Autoplay is prevented"):t()}),100)):e("Promise is undefined")}},{key:"currentTime",get:function(){return this.audioTime},set:function(t){var e=this;for(this.audioTime=t;this.decodedBuffer.length>0;){var r=this.decodedBuffer.shift();if(r.startTime<=t&&r.startTime+r.duration>t){r.loadedPosition=parseInt(r.length*(t-r.startTime)/r.duration),this.decodedBuffer.unshift(r);break}}setTimeout((function(){e.triggerEvent(Ie)}),0)}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(t){this.gainNode?this.gainNode.gain.value=t:this.defaultVolume=t}},{key:"playbackRate",set:function(t){t!==this.currentRate&&(this.currentRate=t,this.audioProvider.rate=t)}}]),r}(N);function Ne(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var je=function(t){c()(r,t);var e=Ne(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"need",!0),v()(u()(t),"first",!1),v()(u()(t),"offset",0),v()(u()(t),"currentPTS",0),v()(u()(t),"ready",!1),v()(u()(t),"end",!1),v()(u()(t),"lastData",null),v()(u()(t),"nodeParent",null),v()(u()(t),"useJMuxer",!1),t.player=n.audioNode,t.createAudioMuxer(),t.bindEvent(),t.logger.info("audioDecoder",t.useJMuxer?"JMuxer":"AudioContext"),t}return o()(r,[{key:"bindEvent",value:function(){var t=this;this.bindNodeEvent(),this.events.on(st.default.PlayerMaxPTS,(function(e){t.currentPTS===e&&(t.end=!0)}))}},{key:"bindNodeEvent",value:function(){var t=this;this.addEventListener("seeked",(function(){t.onSeekedHandler&&t.onSeekedHandler(),t.events.emit("AudioPlayer.seeked")})),this.addEventListener("canplaythrough",(function(){t.logger.info("canplaythrough"),t.ready||(t.ready=!0,t.status="ready",t.logger.info("constructor","canplaythrough","ready"),t.events.emit(st.default.AudioPlayerDataReady))})),this.addEventListener("waiting",(function(){t.ready=!1,t.end?(t.useJMuxer||t.player.destroy(),t.status="end",t.events.emit(st.default.AudioPlayerEnd,"audio"),t.logger.info("audioPlayer end")):(t.logger.warn("audioPlayer waiting",t.player.currentTime,t.currentPTS),t.status="waiting",t.events.emit(st.default.AudioPlayerWait,"audio"))}))}},{key:"reset",value:function(){this.lastData=null,this.first=!1,this.offset=0,this.currentPTS=0,this.ready=!1,this.end=!1,this.clear(),this.createAudioMuxer(),this.bindNodeEvent(),this.stime=null}},{key:"createNode",value:function(){this.player=document.createElement("audio"),this.player.classList.add("goldplay__audio--player"),this.parentNode.appendChild(this.player)}},{key:"createAudioMuxer",value:function(){this.useJMuxer?this.audioDecoder=new ne({node:this.player,mode:"audio",debug:!1,clearBuffer:!0,flushingTime:10,onReady:this.onMSEReady.bind(this)}):(this.audioDecoder=new Ue({flushTime:100,onReady:this.onMSEReady.bind(this)}),this.player=this.audioDecoder)}},{key:"onMSEReady",value:function(){this.logger.info("onMSEReady","AudioPlayerReady"),this.events.emit(st.default.AudioPlayerReady)}},{key:"clear",value:function(){this.audioDecoder.destroy(),this.audioDecoder=null}},{key:"play",value:function(){var t=this;"playing"!==this.status&&(this.status="playing",this.player.play().then((function(){t.events.emit(st.default.AudioPlayerPlaySuccess)})).catch((function(e){t.logger.error("play","errorInfo:",e),t.events.emit(st.default.AudioPlayerPlayFail)})))}},{key:"pause",value:function(){"pause"!==this.status&&(this.status="pause",this.player.pause())}},{key:"send",value:function(t){if(!t.PTS)return this.need=!1,void this.events.emit(st.default.AudioPlayerDataReady);if(this.need=!0,this.audioDecoder){if(this.stime||(this.stime=Date.now()),(t=this.format(t)).audioEnd)return this.logger.info("push","audioEnd"),this.feed(this.lastData),void(this.lastData=null);if(this.first||(this.first=!0,this.offset=t.start),t.PTS>this.currentPTS){if(!this.lastData)return void(this.lastData=t);this.lastData.duration=t.PTS-this.lastData.PTS,this.feed(this.lastData),t.duration=this.lastData.duration,this.lastData=t}}else this.logger.error("send","audioDecoder is:",this.audioDecoder)}},{key:"feed",value:function(t){this.audioDecoder.feed({audio:t.data_byte,duration:t.duration}),this.currentPTS=t.PTS}},{key:"format",value:function(t){return t&&t.data_byte&&(t.start=t.PTS),t}},{key:"addEventListener",value:function(t,e){this.player.addEventListener(t,e)}},{key:"isBuffered",value:function(t){return!this.need||-1!==[this.buffer()].findIndex((function(e){return t>=e.start&&t<e.end}))}},{key:"buffer",value:function(){if(this.useJMuxer){for(var t=this.player.buffered,e=t.length,r={};e>0;)r.start=1e3*t.start(e-1)+this.offset,r.end=1e3*t.end(e-1)+this.offset,e--;return r}var n=this.player.buffer();return{start:n.start+this.offset,end:n.end+this.offset}}},{key:"muted",set:function(t){this.player.muted=!!t}},{key:"playbackRate",set:function(t){this.player.playbackRate=t}},{key:"volume",get:function(){return this.player.volume},set:function(t){this.player.volume=t,this.muted=0===t}},{key:"currentTime",get:function(){return parseInt(1e3*this.player.currentTime+this.offset)},set:function(t){this.player.currentTime=(t-this.offset)/1e3}},{key:"paused",get:function(){return this.player.paused}},{key:"offset",set:function(t){this.offset=t}}]),r}(N),Me={playerContainer:"goldplay__container",screenContainer:"goldplay__screen--container",screenCanvas:"goldplay__screen--canvas",audioContainer:"goldplay__audio--container",audioPlayer:"goldplay__audio--player",controlContainer:"goldplay__control--container",containerFullPage:"goldplay__container-fullpage",containerFullScreen:"goldplay__container-fullscreen",controlContainerFloat:"goldplay__control--container-float",bigPlayButton:"goldplay__screen--bigplay",poster:"goldplay__screen--poster",nearside:"goldplay__control--nearside",sidebar:"goldplay__control--sidebar",buttonBlock:"goldplay__control--button-block",playButton:"goldplay__control--play",pauseButton:"goldplay__control--pause",replayButton:"goldplay__control--replay",speedBar:"goldplay__speed-bar",speedBarBox:"goldplay__speed-bar--box",rateBar:"goldplay__rate-bar",rateBarBox:"goldplay__rate-bar--box",fullPage:"goldplay__control--fullpage",fullScreen:"goldplay__control--fullscreen",waitingBar:"goldplay__waiting-bar",progressBar:"goldplay__progress-bar",progressBarHover:"goldplay__progress-bar-hover",progressBarPlay:"goldplay__progressbar--play",progressBarPlayHover:"goldplay__progressbar--play-hover",progressBarLoad:"goldplay__progressbar--load",progressBarLoadHover:"goldplay__progressbar--load-hover",progressBarDot:"goldplay__progressbar--dot",progressBarDotHover:"goldplay__progressbar--dot-hover",volumeBar:"goldplay__volume-bar",volumeBarAudio:"goldplay__volume-bar--audio",volumeBarAudioOn:"goldplay__volume-bar--audio-on",volumeBarAudioOff:"goldplay__volume-bar--audio-off",volumeBarHandle:"goldplay__volume-bar--handle",volumeBarRod:"goldplay__volume-bar--rod",volumeBarRodHover:"goldplay__volume-bar--rod-hover",volumeBarSize:"goldplay__volume-bar--size",volumeBarColumn:"goldplay__volume-bar--column",alertBox:"goldplay__alter-box",alertClose:"goldplay__alter--close"};function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var He=Me,Ve=function(){function t(){i()(this,t)}return o()(t,null,[{key:"createContainer",value:function(t){var e=function(t){c()(r,t);var e=Fe(r);function r(){return i()(this,r),e.apply(this,arguments)}return r}(Z()(HTMLDivElement));customElements.get("gp-container")||customElements.define("gp-container",e,{extends:"div"});var r=R.createEl("gp-container","div");return r.className=He.playerContainer,r.style.width=(t.options.width?t.options.width:t.el.offsetWidth)+"px",r.style.height=(t.options.height?t.options.height:t.el.offsetHeight)+"px",r}},{key:"createScreenContainer",value:function(t){var e=t.$container,r=function(t){c()(r,t);var e=Fe(r);function r(){return i()(this,r),e.apply(this,arguments)}return r}(Z()(HTMLDivElement));customElements.get("gp-screen")||customElements.define("gp-screen",r,{extends:"div"});var n,a=R.createEl("gp-screen","div");return a.classList.add(He.screenContainer),n=t.controlBarAutoHide||!1===t.controlBar?e.offsetHeight:e.offsetHeight-t.controlBarHeight,a.style.height=n+"px",a}},{key:"createAudioContainer",value:function(){var t=R.createEl("gp-audio");return t.classList.add(He.audioContainer),t.style.display="none",t}},{key:"createAudio",value:function(){var t=R.createEl("audio");return t.classList.add(He.audioPlayer),t.controls=!0,t}},{key:"clearCavans",value:function(t){var e=t.getContext("webgl");e.clear(e.COLOR_BUFFER_BIT)}}]),t}();v()(Ve,"createCanvas",(function(t){var e=R.createEl("canvas");return e.style.display="none",e.classList.add(He.screenCanvas),e.width=t.options.screenWidth||t.screenWidth,e.height=t.options.screenHeight||t.screenHeight,e}));var We=w.a.get("Template.js"),ze=function(){function t(){i()(this,t)}return o()(t,null,[{key:"mergeVar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t||""===t)return t;try{var r=new RegExp("\\${'?\"?\\s*([.:a-z0-9_s]+?)\\s*'?\"?}","ig");return t.replace(r,(function(t,r){r=r.trim();var n=e[r];return n=(n=void 0===(n=null===n?"":n)?"":n)||""}))}catch(e){return We.error("mergeVar","replace variable","error:",e),t}}},{key:"makeValue",value:function(e,r,n){if("string"!=typeof r&&"function"!=typeof r)return r;if("function"==typeof r&&(r=r.call(this,this.data)),!n)return t.escapeHTML.call(this,r);var i,a=function(e){var r="";return e&&(r=" ".concat(t.slotReplaceName,'="true"')),'<gp-slot style="display:none"'.concat(r,"></gp-slot>")};if(t.isSoltType(n)){if("function"!=typeof this.getComponent)return We.error("makeValue","the object is not support slot mode.",this.getComponent,r),r;switch(n){case t.slotTypeMap.component:i=r;var o=this.getComponent(i);"object"===A()(o)&&o.element?(o.element.setAttribute(t.slotReplaceName,"true"),r=o.element.outerHTML):r=a(i);break;case t.slotTypeMap.html:r=t.mergeVar.call(this,r,this.data)}var s="";void 0!==i&&(s=" ".concat(t.slotComName,'="').concat(i,'" '));var u="$1 "+t.slotTypeName+'="'+n+'" '+t.slotKeyName+'="'+e+'"'+s+"$2";return"string"==typeof r&&(r=(r=""===r?a():r).replace(/^\s*(<\s?[\w-]*)(.*[\r|\n|>])/,u)),r}if("string"==typeof n){var l=$e[n];return"function"==typeof l&&(r=l.call(this,r)),r}return t.escapeHTML.call(this,r)}},{key:"escapeHTML",value:function(t){return"string"!=typeof t?t:t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"generate",value:function(e,r,n){var i=this,a=n[n.length-1]||{},o=[e[0]];return r.forEach((function(r,s){if(r){var u,l,c=r.split(t.pipSeparator);c.length>1&&(r=c[0],l=c[1]),u=Number.isInteger(r)?n[r]:a[r],void 0!==(u=t.makeValue.bind(i)(r,u,l))&&o.push(u),void 0!==e[s+1]&&o.push(e[s+1])}})),o.join("")}},{key:"create",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a;a=Array.isArray(e)?"array":"function"==typeof e?"function":"string";var o=this;if("object"===A()(o)||"function"==typeof o)if(void 0!==e&&""!==e)switch(void 0!==o.data&&null!==o.data||(We.info("create","this object.data is undefined or null",o),o.data={}),a){case"array":return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i[i.length-1]||{};"object"===A()(o)&&(o.__template__={tplObj:e,keys:n,dict:s});var u=t.generate.bind(o);return u(e,n,i)};case"function":var s=t.create.bind(o);return e.call(o,o.data,s,o);default:return function(r){return r=void 0!==r?r:o.data,t.mergeVar(e,r)}}else We.error("create","have not give tplObj parameter.",e);else We.error("create","this is not an object.",o)}},{key:"isSoltType",value:function(e){return e=String(e).toLowerCase(),t.slotTypeMap[e]}}]),t}();ze.pipSeparator="|",ze.slotTypeName="gp-slot-type",ze.slotKeyName="gp-slot-key",ze.slotComName="gp-slot-com",ze.slotReplaceName="gp-slot-replace",ze.slotTypeMap={html:"html",component:"component"};var $e={trim:function(t){return t.trim()},upperCase:function(t){return t.toUpperCase()},lowerCase:function(t){return t.toLowerCase()}},Ye=ze,qe=r(20),Ge=r.n(qe),Xe=r(31),Ke=r.n(Xe),Qe=w.a.get("Observer.js"),Je=function(){function t(e){i()(this,t),v()(this,"object",null),this.setObject(e)}var e;return o()(t,[{key:"setObject",value:function(t){this.object=t}},{key:"watch",value:(e=Ke()(Ge.a.mark((function t(e,r,n){var i;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"==typeof(i=this.object).watch){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,i.watch(e,r,n);case 5:!1!==t.sent&&"function"==typeof i.render&&i.render(e,r,n),"function"==typeof i.afterWatch&&i.afterWatch(e,r,n);case 8:case"end":return t.stop()}}),t,this)}))),function(t,r,n){return e.apply(this,arguments)})},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,n=e.set,i=e.get;t=t||r.data;var a=r.object,o={set:function(t,e,i){return"function"==typeof n?n.call(r,t,e,i):(t[e]!==i&&(t[e]=i,a.__template__&&Object.prototype.hasOwnProperty.call(a.__template__.dict,e)&&r.watch(t,e,i)),!0)},get:function(t,e){return"function"==typeof i?i.call(r,t,e):"object"===A()(t[e])&&null!==t[e]?new Proxy(t[e],o):Reflect.get(t,e)}};return new Proxy(t,o)}}]),t}(),Ze=function(t){return"object"!==A()(t)&&Qe.error("observer","this is not an object."),new Je(t)};function tr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return er(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function nr(t){if(t){var e=[],r=[];for(r.push(t);r.length;){var n=r.shift(),i=n.getAttribute(Ye.slotTypeName);if(!Ye.isSoltType(i)){e.push(n);for(var a=n.children,o=0,s=a.length;o<s;o++)r.push(a[o])}}return e}}var ir=function(t){return t.getAttribute&&t.getAttribute(Ye.slotTypeName)===Ye.slotTypeMap.html},ar=function(t,e){return!(!(r=t).getAttribute||r.getAttribute(Ye.slotTypeName)!==Ye.slotTypeMap.component||t.getAttribute(Ye.slotComName)===e.getAttribute(Ye.slotComName));var r},or=function(t,e,r){var n;(t||e)&&(!t&&e?r.appendChild(e):!e&&t?r.removeChild(t):t.tagName!==e.tagName||(n=e,ir(t)&&ir(n))||ar(t,e)?t.replaceWith(e.cloneNode(!0)):t.nodeType===Node.TEXT_NODE&&t.nodeValue!==e.nodeValue?t.nodeValue=e.nodeValue:t.setAttribute&&R.setAttributes(t,e))},sr=function(t){c()(r,t);var e=rr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"createTemplate",null),v()(u()(t),"template",""),v()(u()(t),"element",null),v()(u()(t),"eventsList",{}),v()(u()(t),"data",{}),v()(u()(t),"id",""),t.id=n.id||t.constructor.name,t.options=n,t.createTemplate=Ye.create.bind(u()(t)),t}return o()(r,[{key:"getTemplate",value:function(){return this.template}},{key:"setTemplate",value:function(t){this.template=t}},{key:"init",value:function(){this.data=Ze(this).create(this.data),this.render(),"function"==typeof this.afterInit&&this.afterInit()}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){}},{key:"watch",value:function(){}},{key:"render",value:function(){var t="";t="function"==typeof this.template?this.template(this.data):this.template;var e=R.createEl("div");if("string"==typeof t){e.innerHTML=t;var r,n=e.firstElementChild,i=tr(n.querySelectorAll("["+Ye.slotReplaceName+"]"));try{for(i.s();!(r=i.n()).done;){var a=r.value;if("true"===a.getAttribute(Ye.slotReplaceName)){var o=a.getAttribute(Ye.slotComName),s=this.getComponent(o);if(!s)continue;var u=s.element;R.isElement(this.element)?a.replaceWith(u.cloneNode(!0)):a.replaceWith(u),s.element.removeAttribute(Ye.slotReplaceName)}}}catch(t){i.e(t)}finally{i.f()}R.isElement(this.element)?this.replaceNode(this.element,n):this.element=n}else this.logger.error("render:","this template is not html string","html:",t)}},{key:"replaceNode",value:function(t,e){if(t&&e){var r=nr(t),n=nr(e),i=r.length,a=n.length,o=Math.max(i,a);if(o<=0||t.tagName!==e.tagName)return t.replaceWith(e),void(this.element=e);for(;o--;){var s=r[o],u=n[o];if(s)if(u){if(s.tagName===u.tagName&&R.syncAttributes(s,u),!s.isEqualNode(u)){var l=Math.max(s.childNodes.length,u.childNodes.length);if(l<=0)or(s,u,s.parentNode);else for(var c=0,f=l;c<f;c++){var h=s.childNodes[c],d=u.childNodes[c];(h||d)&&or(h,d,s)}}}else s.parentNode.removeChild(s);else t.appendChild(u)}}}},{key:"show",value:function(){this.data.display="show",this.element&&(this.element.style.display="inline-block")}},{key:"hide",value:function(){this.data.display="hide",this.element&&(this.element.style.display="none")}},{key:"resetPosition",value:function(){var t=this.element.parentNode,e=t.offsetWidth,r=t.offsetHeight;this.element.style.marginTop=(r-this.element.offsetHeight)/2+"px",this.element.style.marginLeft=(e-this.element.offsetWidth)/2+"px"}},{key:"replace",value:function(t){this.element.replaceWith(t),this.element=t}},{key:"update",value:function(t){this.element.innerHTML=t}},{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,r,n),{destroy:function(){t.removeEventListener(e,r)}}}},{key:"removeEventListenerAll",value:function(){var t=this;Object.keys(this.eventsList).forEach((function(e){t.eventsList[e].destroy()}))}},{key:"getComponent",value:function(t){if(void 0!==t)return this.options.componentsController?this.options.componentsController.getComponent(t):void 0}},{key:"getHTMLString",value:function(){return this.element.outerHTML}},{key:"destroy",value:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.events.emit("Component_"+this.id+".destroy",this),this.removeEventListenerAll()}}]),r}(N),ur=r(9),lr=r.n(ur),cr={formatHHMMSS:function(t){var e=parseInt(t,10),r=Math.floor(e/3600),n=Math.floor((e-3600*r)/60),i=e-3600*r-60*n;r<10&&(r="0"+r),n<10&&(n="0"+n),i<10&&(i="0"+i);var a="";return"00"!==r&&(a=r+":"),a+n+":"+i}},fr={formatBytes:function(t,e){if(0==t)return"0 Bytes";var r=e<=0?0:e||2,n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}};function hr(){var t=lr()(['\n  <gp-poster class="goldplay__screen--poster">\n  <img src="','" width="','" data-display="','" heigth="','" class="goldplay__screen--poster-image">\n  <gp-speed class="goldplay__screen--poster-speed">',"</gp-speed>\n  </gp-poster>\n  "]);return hr=function(){return t},t}function dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var pr=function(t){c()(r,t);var e=dr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(hr(),"poster","width","display","height","speed")),v()(u()(t),"data",{poster:"",status:"",display:"show",speed:"",width:"",height:""}),v()(u()(t),"options",{}),t.options=n,n.player.poster&&(t.data.poster=n.player.poster),Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"resetPosition",value:function(){if(this.element){var t=this.element.parentNode.offsetWidth,e=this.element.parentNode.offsetHeight;this.element.style.width=t+"px",this.element.style.marginTop=(e-this.element.offsetHeight-20)/2+"px"}}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.LoaderUpdateSpeed,(function(e){"show"===t.data.display&&(t.data.speed=fr.formatBytes(e.speed)+" /s")}))}},{key:"hide",value:function(){"hide"!==this.data.display&&(this.element.style.opacity=0,this.element.style.display="none",this.data.display="hide")}}]),r}(sr);function yr(){var t=lr()(['\n    <gp-control class="goldplay__control--container ','" style="width:',"px;height:","px;opacity:",'" data-status="','">\n      ',"\n      ","\n      ","\n    </gp-control>\n  "]);return yr=function(){return t},t}function vr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var gr=function(t){c()(r,t);var e=vr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(yr(),"containerFloatCss","width","height","opacity","status","progressBarName|component","sideControlBarName|component","nearControlBarName|component")),v()(u()(t),"hideDelayTime",void 0),v()(u()(t),"hideTimeCount",void 0),v()(u()(t),"data",{progressBarName:"progressBar",sideControlBarName:"sideControlBar",nearControlBarName:"nearControlBar",width:"",height:"",opacity:1,containerFloatCss:"",display:"show",status:""}),v()(u()(t),"options",{}),t.options=n,t.hideDelayTime=t.options.player.controlBarAutoHideTime||3,n.player.controlBarAutoHide&&(t.data.containerFloatCss=t.options.cssName.controlContainerFloat,t.resetPosition()),Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"initProps",value:function(){this.hideTimeCount=this.hideDelayTime}},{key:"bindEvent",value:function(){var t=this,e=this.options;e.player.controlBarAutoHide&&(e.$container.addEventListener("mousemove",(function(){t.hideTimeCount<=0&&(t.data.display="show",t.show()),t.hideTimeCount=t.hideDelayTime})),setInterval((function(){t.hideTimeCount>0?t.hideTimeCount-=1:"hide"!==t.data.display&&(t.data.display="hide",t.hide())}),100))}},{key:"setSize",value:function(t,e){void 0!==t&&(this.data.width=t),void 0!==e&&(this.data.height=e)}},{key:"show",value:function(){var t,e=this;this.options.player.controlBarAutoHide?(clearTimeout(t),t=setTimeout((function(){e.data.opacity=1}),1)):this.data.opacity=1}},{key:"hide",value:function(){this.data.opacity=0}},{key:"resetPosition",value:function(){this.setSize(this.options.$container.offsetWidth,this.options.player.controlBarHeight)}}]),r}(sr),mr=w.a.get("Delegator.js");function br(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:"object"===A()(t)&&(1===t.nodeType&&"string"==typeof t.nodeName)}function _r(t){t.preventDefault(),t.stopPropagation()}function wr(t,e,r,n,i){var a=function(t,e){if(t&&t.matches){if(!Array.isArray(e))return t.matches(e);for(var r=0,n=e.length;r<n;r++)if(t.matches(e[r]))return!0}return!1};function o(t){for(var e=(t=t||window.event).target||t.srcElement,i=t.currentTarget,o=!0;o&&e!==i&&e;){if(a(e,r)&&(o=!1!==n.call(e,t)),!o)return void _r(t);e=e.parentNode}}n.__delegateWrapper=o,function(t,e,r,n){void 0===n&&(n="blur"===e||"focus"===e),br(t)&&t.addEventListener(e,r,n)}(t,e,o,i)}var kr=function(){function t(e){return i()(this,t),v()(this,"element",null),br(e)?this.element=e:mr.error("constructor","new instance","element:",this.element),this}return o()(t,[{key:"off",value:function(t,e,r){return e.__delegateWrapper&&delete(e=e.__delegateWrapper).__delegateWrapper,this.element.removeEventListener(t,e,r),this}},{key:"on",value:function(t,e,r,n){var i=this;return Array.isArray(e)?e.forEach((function(e){wr(i.element,t,e,r,n)})):wr(this.element,t,e,r,n),this}},{key:"once",value:function(t,e,r,n){return this.on(t,e,r,{capture:n,once:!0}),this}}]),t}(),xr=null,Er=function(t){return"string"==typeof t&&(t=document.querySelector(t)),xr?xr.element=t:xr=new kr(t),xr},Sr=function(){function t(e,r){var n=r.$container,a=r.type,o=r.scope,s=r.onStart,u=r.onDrag,l=r.onRelease;i()(this,t),v()(this,"$container",null),v()(this,"$ele",null),v()(this,"active",!1),v()(this,"offsetX",0),v()(this,"offsetY",0),v()(this,"offsetLeft",0),v()(this,"offsetTop",0),v()(this,"orginOffsetLeft",0),v()(this,"orginOffsetTop",0),v()(this,"orginOffsetWidth",0),v()(this,"orginOffsetHeight",0),v()(this,"initialX",0),v()(this,"initialY",0),v()(this,"type","default"),v()(this,"scope",{}),this.$container=n||document.body,this.$ele=e,this.type=a,this.scope=o,this.eventsList={},this.onStart=s,this.onDrag=u,this.onRelease=l,this.bindEvent()}return o()(t,[{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,r,n),{destroy:function(){t.removeEventListener(e,r)}}}},{key:"removeEventListenerAll",value:function(){var t=this;Object.keys(this.eventsList).forEach((function(e){t.eventsList[e].destroy()}))}},{key:"bindEvent",value:function(){var t=this;this.eventsList.mousedown=this.addEventListener(this.$container,"mousedown",(function(e){t.start(e)}),!1),this.eventsList.mouseup=this.addEventListener(this.$container,"mouseup",(function(e){t.release(e)}),!1),this.eventsList.mousemove=this.addEventListener(this.$container,"mousemove",(function(e){t.drag(e)}),!1)}},{key:"start",value:function(t){t.target===this.$ele&&(void 0===this.scope&&void 0!==this.$container&&(this.scope={left:this.$container.offsetLeft,right:this.$container.offsetLeft+this.$container.offsetWidth,top:this.$container.offsetTop,bottom:this.$container.offsetTop+this.$container.offsetHeight}),this.offsetLeft=this.$ele.offsetLeft,this.offsetTop=this.$ele.offsetTop,this.active=!0,this.initialX=t.clientX,this.initialY=t.clientY,this.orginOffsetLeft=this.$ele.offsetLeft,this.orginOffsetTop=this.$ele.offsetTop,this.orginOffsetWidth=this.$ele.offsetWidth,this.orginOffsetHeight=this.$ele.offsetHeight,"function"==typeof this.onStart&&this.onStart.call(this,this.offsetX,this.offsetY,t,this))}},{key:"release",value:function(t){this.active=!1,"function"==typeof this.onRelease&&this.onRelease.call(this,this.offsetX,this.offsetY,t,this)}},{key:"drag",value:function(t){this.active&&(t.preventDefault(),t.stopPropagation(),this.offsetX=t.clientX-this.initialX+this.offsetLeft,this.offsetY=t.clientY-this.initialY+this.offsetTop,this.setPosition(t))}},{key:"setPosition",value:function(t){switch(this.type){case"vertical":this.offsetX=this.orginOffsetLeft,this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight);break;case"level":this.offsetY=this.orginOffsetTop,this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),this.offsetX<this.scope.left&&(this.offsetX=this.scope.left);break;default:isNaN(this.scope.right)||this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),isNaN(this.scope.left)||this.offsetX<this.scope.left&&(this.offsetX=this.scope.left),isNaN(this.scope.top)||this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),isNaN(this.scope.bottom)||this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight)}this.$ele.style.left=this.offsetX+"px",this.$ele.style.top=this.offsetY+"px","function"==typeof this.onDrag&&this.onDrag.call(this,this.offsetX,this.offsetY,t,this)}},{key:"destroy",value:function(){this.$ele.parentNode.removeChild(this.$ele),this.removeEventListenerAll()}}]),t}(),Pr=function(t,e){return new Sr(t,e)};function Tr(){var t=lr()(['\n    <gp-control-progressbar class="goldplay__progress-bar ','" data-status="','">\n      <div class="goldplay__progressbar--load ','">\n      </div>\n      <div class="goldplay__progressbar--play ','">\n      </div>\n      <span class="goldplay__progressbar--dot ','" title="','"></span>\n    </gp-control-progressbar>\n  ']);return Tr=function(){return t},t}function Ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Br=function(t){c()(r,t);var e=Ar(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(Tr(),"progressBarHoverCss","status","progressBarLoadHoverCss","progressBarPlayHoverCss","progressBarDotHoverCss","time")),v()(u()(t),"options",{}),v()(u()(t),"data",{playWidth:"",dot:"",time:"",status:""}),v()(u()(t),"setProgressBarSize",(function(e){t.$progressBarPlay.style.width=e+"px"})),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"watch",value:function(){var t=this.options.cssName;"dragstart"===this.data.status?(this.data.progressBarHoverCss=t.progressBarHover,this.data.progressBarLoadHoverCss=t.progressBarLoadHover,this.data.progressBarPlayHoverCss=t.progressBarPlayHover,this.data.progressBarDotHoverCss=t.progressBarDotHover):"dragend"===this.data.status&&(this.data.progressBarHoverCss="",this.data.progressBarLoadHoverCss="",this.data.progressBarPlayHoverCss="",this.data.progressBarDotHoverCss="")}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){var t=this.element,e=this.options.cssName;this.$progressDragDot=t.querySelector("."+e.progressBarDot),this.$progressBarPlay=t.querySelector("."+e.progressBarPlay),this.$progressBarLoad=t.querySelector("."+e.progressBarLoad),this.timer=this.getComponent("timer"),this.pauseButton=this.getComponent("pauseButton")}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,r=!1;this.events.on(st.default.PlayerTimeUpdate,(function(e){var n=t.options.loadData.sourceData.duration;if(!r&&e&&n){var i=e/1e3/n*t.progressBarWidth;t.setProgressPosition(i),t.timer.data.time=cr.formatHHMMSS(e/1e3)}})),this.events.on(st.default.PlayerbufferUpdate,(function(e){!r&&e&&t.updateProgressLoad(e)})),Er(this.options.$controlBarContainer).on("click","."+e.progressBar,(function(r){if(r.target!==t.$progressDragDot){var n=(t.options.loadData.sourceData.duration||0)/t.progressBarWidth,i=0;r.target.classList.contains(e.progressBarLoad)&&(i=r.target.offsetLeft-r.target.parentNode.offsetLeft);var a=i+r.offsetX,o=a*n*1e3;return t.setProgressPosition(a),t.logger.info("bindEvent","click to seek","seekTime:",o,"offsetX:",a),r.target!==t.$progressBarLoad&&t.clearLoadBar(r.offsetX),t.timer.data.time=cr.formatHHMMSS(o/1e3),t.events.emit(st.default.PlayerOnSeek,o),!1}})),this.progressDragEvent=Pr(this.$progressDragDot,{$container:document.body,type:"level",scope:{left:this.progressBarLeft,right:this.progressBarLeft+this.progressBarWidth,top:this.$progressDragDot.offsetTop,bottom:this.$progressDragDot.offsetTop+this.$progressDragDot.offsetHeight},onStart:function(){r=!0,t.data.status="dragstart"},onDrag:function(e){var r;r=t.options.player.controlBarAutoHide?e:e-t.options.$controlBarContainer.offsetLeft;var n=0,i=t.$progressDragDot.offsetWidth;t.progressBarWidth-r<=i&&(n=i),t.setProgressBarSize(r),t.data.status="draging";var a=t.getSeekTime(t.progressBarWidth-n);t.timer.data.time=cr.formatHHMMSS(a/1e3),t.data.time=t.timer.data.time},onRelease:function(e,n,i){if(r){var a=t.getSeekTime();i.target!==t.$progressBarLoad&&t.clearLoadBar(e),t.events.emit(st.default.PlayerOnSeek,a),t.logger.info("bindEvent","onDrag release seek","seekTime:",a),t.data.status="dragend",r=!1}}})}},{key:"setProgressPosition",value:function(t){var e=Math.min(t,this.progressBarWidth),r=this.$progressDragDot,n=this.progressBarWidth,i=0,a=r.offsetWidth/2;e>n||n-e<=a?i=a-(n-e):e<=a&&(i=-(a-e));var o=e-i-r.offsetWidth/2;this.setProgressPlayWidth(e),this.setProgressDragDotLeft(o+this.progressBarLeft)}},{key:"setProgressPlayWidth",value:function(t){this.$progressBarPlay.style.width=t+"px"}},{key:"setProgressDragDotLeft",value:function(t){this.$progressDragDot.style.left=t+"px"}},{key:"getProgressPlayLeftWidth",value:function(){return{offsetLeft:this.$progressBarPlay.offsetLeft,offsetWidth:this.$progressBarPlay.offsetWidth}}},{key:"getProgressLoadLeftWidth",value:function(){return{offsetLeft:this.$progressBarLoad.offsetLeft,offsetWidth:this.$progressBarLoad.offsetWidth}}},{key:"setProgressLoadLeftWidth",value:function(t,e){var r=this.progressBarLeft+this.progressBarWidth;(t=Math.min(t,r))+e>r&&(e=r-t),this.$progressBarLoad.style.left=t+"px",this.$progressBarLoad.style.width=e+"px"}},{key:"updateProgressLoad",value:function(t){var e=this.options.loadData.sourceData.duration;if(e){var r=this.progressBarWidth,n=this.progressBarLeft,i=t[0]/1e3/e*r,a=t[1]/1e3/e*r,o=Math.floor(n+i),s=Math.floor(a-i);this.setProgressLoadLeftWidth(o,s)}}},{key:"getSeekTime",value:function(t,e){var r=this.progressBarWidth,n=(e=e||this.options.loadData.sourceData.duration||0)/(t||r);return this.$progressBarPlay.offsetWidth*n*1e3}},{key:"clearLoadBar",value:function(t){t<this.$progressBarLoad.offsetLeft-this.progressBarLeft&&(this.$progressBarLoad.style.width="0px")}},{key:"getDragDotPosition",value:function(){return{offsetLeft:this.$progressDragDot.offsetLeft,offsetTop:this.$progressDragDot.offsetTop,left:this.$progressDragDot.style.left,top:this.$progressDragDot.style.top}}},{key:"clearDragDotTop",value:function(){this.$progressDragDot.style.top=""}},{key:"progressBarWidth",get:function(){return this.element.offsetWidth}},{key:"progressBarLeft",get:function(){return this.element.offsetLeft}}]),r}(sr);function Rr(){var t=lr()(['\n  <gp-button class="goldplay__control--play" data-status="','" title="','">\n  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  viewBox="0 0 232.153 232.153" width="20" height="20" style="enable-background:new 0 0 232.153 232.153;" xml:space="preserve">\n  <g >\n  <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M203.791,99.628L49.307,2.294c-4.567-2.719-10.238-2.266-14.521-2.266\n    c-17.132,0-17.056,13.227-17.056,16.578v198.94c0,2.833-0.075,16.579,17.056,16.579c4.283,0,9.955,0.451,14.521-2.267\n    l154.483-97.333c12.68-7.545,10.489-16.449,10.489-16.449S216.471,107.172,203.791,99.628z" fill="#f1f1f1"/>\n  </g>\n  </svg>\n  </gp-button>\n  ']);return Rr=function(){return t},t}function Lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Cr=function(t){c()(r,t);var e=Lr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(Rr(),"status","title")),v()(u()(t),"data",{title:"play",play:">"}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return r}(sr);function Dr(){var t=lr()(['\n  <gp-button class="goldplay__control--pause" title="','" status="','">\n  ',"\n  </gp-button>\n  "]);return Dr=function(){return t},t}function Ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function Or(){var t=lr()(['\n<svg style="display:','" class="goldplay__control--pausing" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 26 26" style="background:none" xml:space="preserve">\n<g>\n<path d="M2.667,0h6v26h-6V0z M15.333,0v26h6V0H15.333z" fill="#f1f1f1"/>\n</g>\n</svg>\n']);return Or=function(){return t},t}var Ur=Ye.create(Or(),"pauseHide"),Nr=function(t){c()(r,t);var e=Ir(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate((function(t,e){return e(Dr(),"title","status","icon|html")}))),v()(u()(t),"data",{title:"pause",pauseHide:"",pauseLoadingHide:"none",icon:Ur,status:"",display:""}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"watch",value:function(){"pauseloading"===this.data.status?(this.data.pauseHide="none",this.data.pauseLoadingHide="inline-block",this.data.title="loading",this.data.icon='\n<svg version="1.1" class="goldplay__control--pause-loading" style="display:${\'pauseLoadingHide\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 612 792" style="background:none;margin: -4px 0 0 -5px;" xml:space="preserve">\n<linearGradient id="goldplay-pause-loading-gradient" gradientUnits="userSpaceOnUse" x1="1.98" y1="784.6123" x2="26.2101" y2="770.623" gradientTransform="matrix(21.8571 0 0 21.8571 -2.0895 -16600.5293)">\n    <stop offset="0.1682" style="stop-color:#f1f1f1;stop-opacity:0"></stop>\n    <stop offset="0.7502" style="stop-color:#f1f1f1"></stop>\n    <stop offset="1" style="stop-color:#f1f1f1"></stop>\n</linearGradient>\n<path style="transform-origin: center center;animation: goldplay-rotate-360 .8s linear infinite;" fill="url(#goldplay-pause-loading-gradient)" d="M306,133.714c144.257,0,262.286,118.028,262.286,262.286c0,144.257-118.029,262.286-262.286,262.286\n  C161.743,658.286,43.714,540.257,43.714,396C43.714,251.743,161.743,133.714,306,133.714 M306,90C137.7,90,0,227.7,0,396\n  s137.7,306,306,306s306-137.7,306-306S474.3,90,306,90L306,90z">\n    <animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0" to="360" dur=".8s" repeatCount="indefinite" />\n</path>\n<g>\n    <g>\n        <path fill="#f1f1f1" d="M229.5,514.028L229.5,514.028c-13.114,0-21.857-8.742-21.857-21.856V295.457\n        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.715\n        C251.357,503.1,242.614,514.028,229.5,514.028z"></path>\n        <path fill="#f1f1f1" d="M229.5,273.6c-13.114,0-21.857,8.743-21.857,21.857v196.715c0,10.928,8.743,21.856,21.857,21.856\n        s21.857-10.929,21.857-21.856V295.457C251.357,282.343,242.614,273.6,229.5,273.6L229.5,273.6z"></path>\n    </g>\n    <g>\n        <path fill="#f1f1f1" d="M382.5,518.4L382.5,518.4c-13.114,0-21.857-8.743-21.857-21.857V299.829\n        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.714\n        C404.357,509.657,395.614,518.4,382.5,518.4z"></path>\n        <path fill="#f1f1f1" d="M382.5,277.972c-10.929,0-21.857,8.743-21.857,21.857v196.714c0,10.929,10.929,21.857,21.857,21.857\n        s21.857-10.929,21.857-21.857V299.829C404.357,288.9,393.429,277.972,382.5,277.972L382.5,277.972z"></path>\n    </g>\n</g>\n</svg>\n'):"pause"===this.data.status&&(this.data.pauseHide="inline-block",this.data.pauseLoadingHide="none",this.data.title="pause",this.data.icon=Ur)}}]),r}(sr);function jr(){var t=lr()(['\n  <gp-button class="goldplay__control--replay" title="','" data-display="','">\n  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n  width="24px" height="24px" viewBox="0 0 245.000000 206.000000"\n  preserveAspectRatio="xMidYMid meet">\n <g transform="translate(0.000000,206.000000) scale(0.100000,-0.100000)"\n fill="#f1f1f1" stroke="1">\n <path d="M1250 2046 c-286 -55 -525 -211 -681 -445 -91 -136 -152 -302 -167\n -453 -12 -119 3 -108 -143 -109 -70 -1 -156 -4 -192 -8 l-65 -6 262 -265 262\n -265 266 265 265 265 -62 6 c-35 4 -123 7 -197 8 l-134 1 7 69 c26 284 232\n 543 504 635 201 69 404 53 596 -47 62 -32 103 -63 177 -137 83 -83 102 -108\n 142 -190 63 -130 77 -193 77 -340 0 -178 -37 -298 -134 -435 -91 -126 -220\n -224 -369 -278 -72 -26 -99 -31 -218 -35 -117 -4 -146 -1 -215 17 -104 29\n -205 79 -283 142 l-63 52 -89 -89 c-49 -49 -89 -96 -89 -106 0 -24 154 -136\n 253 -185 89 -44 177 -74 272 -95 84 -17 303 -15 391 5 403 91 691 371 795 772\n 19 76 23 114 22 240 0 129 -4 164 -27 249 -99 377 -406 673 -778 751 -104 22\n -297 28 -385 11z"/>\n <path d="M1227 1418 c-9 -68 -7 -695 2 -770 l6 -57 240 200 c132 110 251 210\n 264 223 l23 24 -257 213 c-141 118 -260 215 -264 217 -5 1 -11 -21 -14 -50z"/>\n </g>\n </svg>\n  </gp-button>\n  ']);return jr=function(){return t},t}function Mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Fr=function(t){c()(r,t);var e=Mr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(jr(),"title","display")),v()(u()(t),"data",{title:"replay",display:"",replay:"->"}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return r}(sr);function Hr(){var t=lr()(['\n  <gp-volume class="goldplay__volume-bar">\n    <gp-overbox class="goldplay-hoverbox goldplay__volume-bar--handle">\n      <span class="goldplay__volume-bar--precent">','</span>\n      <span class="goldplay__volume-bar--rod ','" title="adjust volume"></span>\n      <span class="goldplay__volume-bar--size">&nbsp;</span>\n      <span class="goldplay__volume-bar--column">&nbsp;</span>\n    </gp-overbox>\n    <gp-button class="goldplay__volume-bar--audio ','" title="','" data-mute="','" data-volume-size="','"  data-last-volume="','">\n    ',"\n    </gp-button>\n  </gp-volume>\n  "]);return Hr=function(){return t},t}function Vr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function Wr(){var t=lr()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">\n<path d="M12.2 13.914v6.678a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2l.412-.353-2.558-2.558a.5.5 0 0 1 0-.707l.707-.707a.5.5 0 0 1 .707 0l16.849 16.849a.5.5 0 0 1 0 .707l-.707.707a.5.5 0 0 1-.707 0l-2.386-2.386a10 10 0 0 1-2.33 1.422c-.526.229-.583.284-.987.377v-2.375l.007-.003a8.332 8.332 0 0 0 1.717-1.014l-1.67-1.669a5.251 5.251 0 0 1-.054.034v-.089l-2-2zM8.373 4.96l3.002-2.572a.5.5 0 0 1 .825.38v6.019L8.373 4.959zm9.867 9.867c.48-.99.76-2.115.76-3.347 0-3.418-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48a9.954 9.954 0 0 1-1.326 4.98l-1.634-1.633zm-1.766-1.766L14.2 10.786V7.057a5.247 5.247 0 0 1 2.274 6.003z" fill="#f1f1f1"></path>\n</svg>\n']);return Wr=function(){return t},t}function zr(){var t=lr()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">\n<path d="M5.2 7.68l6.175-5.293a.5.5 0 0 1 .825.38v17.825a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2zm9 13.35v-2.375l.007-.003C16.852 17.493 19 14.897 19 11.479s-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48c0 4.106-2.474 7.633-6.013 9.174-.526.229-.583.284-.987.377zm0-13.973c1.5.925 2.5 2.582 2.5 4.473 0 1.892-1 3.55-2.5 4.473V7.057z" fill="#f1f1f1"></path>\n</svg>\n']);return zr=function(){return t},t}var $r=Ye.create(zr(),"audioOnHide"),Yr=Ye.create(Wr(),"audioOffHide"),qr=function(t){c()(r,t);var e=Vr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(Hr(),"dataPrecent","volumeBarRodHoverCss","audioOffClass","title","dataMute","dataVolumeSize","dataLastVolume","icon|html")),v()(u()(t),"options",{}),v()(u()(t),"data",{audioONHide:"",audioOffHide:"",audioOffClass:"",dataVolumeSize:"",dataPrecent:"",dataLastVolume:"",dataMute:"",volumeBarRodHoverCss:"",icon:$r,title:"turn off"}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"watch",value:function(){this.data.dataPrecent=Math.floor(100*this.data.dataVolumeSize),""!==this.data.audioOffClass?(this.data.dataMute="true",this.data.audioOffHide="inline-block",this.data.audioOnHide="none",this.data.icon=Yr,this.data.title="turn on"):(this.data.dataMute="",this.data.audioOffHide="none",this.data.audioOnHide="inline-block",this.data.icon=$r,this.data.title="turn off")}},{key:"initProps",value:function(){var t=this.element,e=this.options.cssName;this.INIT_VOLUME_SIZE=void 0===this.options.player.defaultVolumeSize?.5:this.options.player.defaultVolumeSize,this.$volumeBarHandle=t.querySelector("."+e.volumeBarHandle),this.$volumeBarRod=t.querySelector("."+e.volumeBarRod),this.$volumeBarAudio=t.querySelector("."+e.volumeBarAudio),this.$volumeBarSize=t.querySelector("."+e.volumeBarSize),this.$volumeBarColumn=t.querySelector("."+e.volumeBarColumn),this.volumeBarColumnHeight=this.$volumeBarColumn.offsetHeight,this.volumeBarColumnTop=this.$volumeBarColumn.offsetTop,this.volumeBarRodHeight=this.$volumeBarRod.offsetHeight,this.volumeBarRodHeightHalf=this.volumeBarRodHeight/2,this.volumeBarColumnRealTop=this.volumeBarColumnTop+this.volumeBarRodHeightHalf,this.volumeBarColumnMaxHeight=this.volumeBarColumnHeight-this.volumeBarRodHeight}},{key:"bindEvent",value:function(){var t,e=this,r=this.options.$controlBarContainer,n=this.options.cssName;Er(r).on("mouseover","."+n.volumeBar,(function(){clearTimeout(t),e.showVolumeBarHandle()})),Er(r).on("mousewheel","."+n.volumeBarHandle,(function(t){var r=t.wheelDelta/500;r=e.data.dataVolumeSize+r,e.setVolumeSize(r),t.preventDefault(),t.stopPropagation()})),Er(r).on("click",["."+n.volumeBarColumn,"."+n.volumeBarSize],(function(t){var r=0;return t.target===e.$volumeBarColumn?r=(e.$volumeBarColumn.offsetHeight-t.offsetY)/t.target.offsetHeight:t.target===e.$volumeBarSize&&(r=e.$volumeBarColumn.offsetHeight-t.target.offsetHeight+t.offsetY,r=e.$volumeBarColumn.offsetHeight-r,r/=e.$volumeBarColumn.offsetHeight),e.setVolumeSize(r),!1})),Er(r).on("click","."+n.volumeBarAudio,(function(t){return e.$volumeBarAudio.classList.contains(n.volumeBarAudioOff)?e.setAudioOn(t.offsetY):e.setAudioOff(t.offsetY),!1}));Er(r).on("mouseout","."+n.volumeBar,(function(r){t=setTimeout((function(){!function(t){var r=e.element,n={y:r.offsetTop+e.$volumeBarHandle.offsetTop,x:r.offsetLeft};return n.width=r.offsetWidth,n.height=e.$volumeBarHandle.offsetHeight,t.pageX>n.x&&t.pageX<n.x+n.width&&t.pageY>n.y&&t.pageY<n.y+n.height}(r)?e.hideVolumeBarHandle():clearTimeout(t)}),j.c.hideBarBoxTime)})),this.volumeDragEvent=Pr(this.$volumeBarRod,{$container:this.element,type:"vertical",scope:{top:this.volumeBarColumnTop,right:0,bottom:this.volumeBarColumnTop+this.volumeBarColumnHeight,left:0},onStart:function(){e.data.volumeBarRodHoverCss=e.options.cssName.volumeBarRodHover},onDrag:function(t,r){r-=1,e.dragHandle(r)},onRelease:function(){e.data.volumeBarRodHoverCss=""}})}},{key:"hideVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="hidden"}},{key:"showVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="visible"}},{key:"getVolume",value:function(){var t=(this.$volumeBarSize.offsetHeight-this.volumeBarRodHeight)/this.volumeBarColumnMaxHeight;return t=Math.min(t,1),(t=Math.max(t,0)).toFixed(2)}},{key:"setVolume",value:function(t){this.data.dataVolumeSize=Number(t),this.events.emit(st.default.PlayerOnVolume,t)}},{key:"initVolumeSize",value:function(){this.data.dataLastVolume=this.INIT_VOLUME_SIZE,this.setAudioOn()}},{key:"setAudioOn",value:function(){var t=this.data.dataLastVolume||0;this.setVolume(t);var e=parseFloat(t,10),r=Math.floor(e*this.volumeBarColumnMaxHeight),n=this.volumeBarColumnTop+(this.volumeBarColumnMaxHeight-r);this.$volumeBarSize.style.marginTop=n+"px",this.$volumeBarSize.style.height=r+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=n+"px",this.data.audioOffClass=""}},{key:"setAudioOff",value:function(){this.setVolume(0),this.data.audioOffClass=this.options.cssName.volumeBarAudioOff;var t=this.getVolume();t>0&&(this.data.dataLastVolume=t),this.$volumeBarSize.style.height=this.volumeBarRodHeight+"px",this.$volumeBarSize.style.marginTop=this.volumeBarColumnRealTop-this.volumeBarRodHeightHalf+this.volumeBarColumnMaxHeight+"px",this.$volumeBarRod.style.top=this.volumeBarColumnRealTop+this.volumeBarColumnMaxHeight-this.volumeBarRodHeightHalf+"px"}},{key:"dragHandle",value:function(t){this.$volumeBarSize.style.marginTop=t+1+"px",this.$volumeBarSize.style.height=this.volumeBarColumnHeight-t+this.volumeBarRodHeight+"px";var e=this.getVolume();e<=0?this.setAudioOff(t):"true"==this.data.dataMute&&this.setAudioOn(t),this.setVolume(e)}},{key:"setVolumeSize",value:function(t){if((t=t.toFixed(2))>=1?t=1:t<.001&&(t=0),t!==this.data.dataVolumeSize){this.setVolume(t);var e=this.volumeBarColumnMaxHeight,r=e-t*e+this.volumeBarColumnTop;this.$volumeBarSize.style.marginTop=r+"px",this.$volumeBarSize.style.height=t*e+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=r+"px",t<=0?this.data.audioOffClass=this.options.cssName.volumeBarAudioOff:"true"==this.data.dataMute&&(this.data.audioOffClass="")}}}]),r}(sr);function Gr(){var t=lr()(['\n  <gp-wait class="goldplay-tip goldplay__waiting-bar" title="','" data-status="','">\n    <span class="goldplay__waiting-bar--icon">\n    <svg width="60px" height="60px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background: none;opacity:0.8">\n    <circle cx="50" cy="50" fill="none" stroke-linecap="round" r="40" stroke-width="8" stroke="#f6f6f6" stroke-dasharray="62.83185307179586 62.83185307179586" transform="rotate(17.8841 50 50)">\n    <animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="0.7s" begin="0s" repeatCount="indefinite">\n    </animateTransform>\n    </circle>\n    </svg>\n  </span>\n  <gp-speed class="goldplay__waiting-bar--speed">',"</gp-speed>\n  </gp-wait>\n  "]);return Gr=function(){return t},t}function Xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Kr=function(t){c()(r,t);var e=Xr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(Gr(),"title","status","speed")),v()(u()(t),"data",{title:"waiting",speed:"",status:"",display:"show"}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.LoaderUpdateSpeed,(function(e){"show"===t.data.display&&(t.data.speed=fr.formatBytes(e.speed)+" /s")})),this.events.on(st.default.StreamDataReady,(function(){t.hideWaiting()}))}},{key:"showWaiting",value:function(){var t=this.options.cssName,e=this.options.$screenContainer;e.querySelector("."+t.waitingBar)||e.prepend(this.element),this.data.display="show",this.show(),this.resetPosition()}},{key:"hideWaiting",value:function(){var t=this.options.cssName;this.options.$screenContainer.querySelector("."+t.waitingBar)&&(this.data.display="hide",this.data.speed="Loading...",this.hide())}}]),r}(sr);function Qr(){var t=lr()(['\n  <gp-alert class="goldplay-tip goldplay__alter-box" title="','" data-display="','">\n  <em title="close" class="goldplay__alter--close">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background:none;opacity:0.6" xml:space="preserve" width="20px" height="20px" viewBox="0 0 496.158 496.158">\n    <path style="fill:#ff3300;" d="M496.158,248.085c0-137.021-111.07-248.082-248.076-248.082C111.07,0.003,0,111.063,0,248.085\n    c0,137.002,111.07,248.07,248.082,248.07C385.088,496.155,496.158,385.087,496.158,248.085z"/>\n    <path style="fill:#FFFFFF;" d="M277.042,248.082l72.528-84.196c7.91-9.182,6.876-23.041-2.31-30.951\n    c-9.172-7.904-23.032-6.876-30.947,2.306l-68.236,79.212l-68.229-79.212c-7.91-9.188-21.771-10.216-30.954-2.306\n    c-9.186,7.91-10.214,21.77-2.304,30.951l72.522,84.196l-72.522,84.192c-7.91,9.182-6.882,23.041,2.304,30.951\n    c4.143,3.569,9.241,5.318,14.316,5.318c6.161,0,12.294-2.586,16.638-7.624l68.229-79.212l68.236,79.212\n    c4.338,5.041,10.47,7.624,16.637,7.624c5.069,0,10.168-1.749,14.311-5.318c9.186-7.91,10.22-21.77,2.31-30.951L277.042,248.082z"/>\n    </svg>\n  </em>\n  <span class="goldplay__alter--warn">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="30" height="30" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n    <path style="fill:#495A79;" d="M501.461,383.799L320.501,51.401C306.7,28.6,282.7,14.8,256,14.8s-50.7,13.8-64.501,36.601\n      L10.539,383.799C-3.259,407.501-3.56,435.701,9.941,459.4c13.499,23.699,37.798,37.8,65.099,37.8h361.92\n      c27.301,0,51.601-14.101,65.099-37.8C515.56,435.701,515.259,407.501,501.461,383.799z"/>\n    <path style="fill:#42516D;" d="M502.059,459.4c-13.499,23.699-37.798,37.8-65.099,37.8H256V14.8c26.7,0,50.7,13.801,64.501,36.601\n      L501.461,383.8C515.259,407.501,515.56,435.701,502.059,459.4z"/>\n    <path style="fill:#FFDE33;" d="M475.661,399.1L294.699,66.699C286.601,52.9,271.901,44.8,256,44.8s-30.601,8.101-38.699,21.899\n      L36.339,399.1c-8.399,14.101-8.399,31.199-0.298,45.3c8.099,14.399,22.798,22.8,39,22.8h361.92c16.201,0,30.901-8.401,39-22.8\n      C484.06,430.299,484.06,413.201,475.661,399.1z"/>\n    <path style="fill:#FFBC33;" d="M475.96,444.4c-8.099,14.399-22.798,22.8-39,22.8H256V44.8c15.901,0,30.601,8.101,38.699,21.899\n      L475.661,399.1C484.06,413.201,484.06,430.299,475.96,444.4z"/>\n    <g>\n      <path style="fill:#495A79;" d="M256,437.2c-16.538,0-30-13.462-30-30s13.462-30,30-30s30,13.462,30,30S272.538,437.2,256,437.2z"/>\n      <path style="fill:#495A79;" d="M286,317.2c0,16.538-13.462,30-30,30s-30-13.462-30-30v-150c0-16.538,13.462-30,30-30\n        s30,13.462,30,30V317.2z"/>\n    </g>\n    <g>\n      <path style="fill:#42516D;" d="M286,407.2c0-16.538-13.462-30-30-30v60C272.538,437.2,286,423.738,286,407.2z"/>\n      <path style="fill:#42516D;" d="M286,317.2v-150c0-16.538-13.462-30-30-30v210C272.538,347.2,286,333.738,286,317.2z"/>\n    </g>\n    </svg>\n  </span>\n  <gp-content class="goldplay__alter--content">',"</gp-content>\n  </gp-alert>\n  "]);return Qr=function(){return t},t}function Jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Zr=function(t){c()(r,t);var e=Jr(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(Qr(),"title","display","content|trim")),v()(u()(t),"data",{title:"alert",display:"default",content:""}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"bindEvent",value:function(){var t=this,e=this.options.$screenContainer,r=this.options.cssName;Er(e).on("click","."+r.alertClose,(function(){t.hide()}))}},{key:"afterWatch",value:function(){"show"===this.data.display&&this.resetPosition()}},{key:"showBox",value:function(){var t=this.options.cssName,e=this.options.$screenContainer;e.querySelector("."+t.alertBox)||e.prepend(this.element),this.data.display="show",this.show()}},{key:"hideBox",value:function(){var t=this.options.cssName;this.options.$screenContainer.querySelector("."+t.alertBox)&&(this.data.display="hide",this.hide())}},{key:"show",value:function(){this.element.style.opacity=1,this.element.style.display="inline-block",this.resetPosition()}},{key:"hide",value:function(){this.element.style.opacity=0,this.element.style.display="none"}}]),r}(sr);function tn(){var t=lr()(['\n  <gp-time class="goldplay__control--timer">\n  <span gid="time" class="goldplay__control--timer-play">','</span>\n  <span gid="slash">','</span>\n  <span gid="total-time" class="goldplay__control--timer-total">',"</span>\n  </gp-time>\n  "]);return tn=function(){return t},t}function en(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var rn=function(t){c()(r,t);var e=en(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(tn(),"time","slash","totalTime")),v()(u()(t),"data",{time:"00:00",totalTime:"",slash:"/"}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"setTotalTime",value:function(t){var e=t.sourceData;this.data.totalTime=cr.formatHHMMSS(e.duration)}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.LoaderPlayListLoaded,(function(e){t.setTotalTime(e.loadData)}))}},{key:"updateTime",value:function(t){this.element.querySelector('[gid="time"]').innerHTML=t}},{key:"updateTotalTime",value:function(t){this.element.querySelector('[gid="total-time"]').innerHTML=t}}]),r}(sr);function nn(){var t=lr()(['\n  <gp-speed class="goldplay__speed-bar" title="','">\n  <gp-overbox class="goldplay-hoverbox goldplay__speed-bar--box">\n  ','\n  </gp-overbox>\n  <gp-button class="goldplay__speed-bar--link">\n  ',"\n  </gp-button>\n  </gp-speed>\n  "]);return nn=function(){return t},t}function an(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function on(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return sn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sn(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var un=function(t){c()(r,t);var e=an(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(nn(),"title","speedListHTML|html","currentSpeedName")),v()(u()(t),"data",{title:"speed",currentSpeed:1,speedList:null,currentSpeedName:"ÂÄçÈÄü",speedListHTML:""}),v()(u()(t),"options",{}),t.options=n,t.speedList=t.options.player.options.speedList||j.c.speedList,t.updateSpeedListHTML(),Object.assign(t.data,n.data),t.init(),t.initProps(),t.showHideBar(),t}return o()(r,[{key:"initProps",value:function(){var t=this.options.cssName;this.$barBox=this.element.querySelector("."+t.speedBarBox)}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,r=this.options.$controlBarContainer;Er(r).on("mouseover","."+e.speedBar,(function(){clearTimeout(n),t.showBarBoxHandle()}));var n;Er(r).on("mouseout","."+e.speedBar,(function(e){n=setTimeout((function(){!function(e){var r=t.element,n={y:t.$barBox.offsetTop,x:r.offsetLeft};return n.width=r.offsetWidth,n.height=t.$barBox.offsetHeight,e.pageX>n.x&&e.pageX<n.x+n.width&&e.pageY>n.y&&e.pageY<n.y+n.height}(e)?t.hideBarBoxHandle():clearTimeout(n)}),j.c.hideBarBoxTime)})),Er(this.element).on("click","[gp-node-li]",(function(e){var r=e.target,n=parseFloat(r.getAttribute("value"),10);if(n!==t.data.currentSpeed){t.data.currentSpeed=n;var i=t.speedList.filter((function(t){return t.value===n}));t.events.emit(st.default.PlayerSpeedTo,i[0]),t.updateSpeedListHTML()}}))}},{key:"showHideBar",value:function(){this.speedList.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var t=33+28*this.speedList.length,e=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-t+"px",this.$barBox.style.marginLeft=-e+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateSpeedListHTML",value:function(t){var e=this.speedList;if(!(e.length<=0)){void 0===t&&(t=this.data.currentSpeed);var r,n=e.slice(0,e.length).reverse(),i=on(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.value===t?a.selected=!0:delete a.selected}}catch(t){i.e(t)}finally{i.f()}return this.data.speedListHTML=function(t){if(t){var e,r=["<ul>"],n=on(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a="",o="";i.selected&&(a="gp-selected",o=" selected=".concat(i.selected)),r.push('\n    <li class="'.concat(a,'" gp-node-li value="').concat(i.value,'" ').concat(o,">").concat(i.name,"</li>\n    "))}}catch(t){n.e(t)}finally{n.f()}return r.push("</ul>"),r.join("")}}(n)}}}]),r}(sr);function ln(){var t=lr()(['\n  <gp-subtitle class="goldplay__subtitle">\n  </gp-subtitle>\n  ']);return ln=function(){return t},t}function cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var fn=function(t){c()(r,t);var e=cn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(ln())),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return r}(sr);function hn(){var t=lr()(['\n  <gp-rate class="goldplay__rate-bar" title="','">\n  <gp-overbox class="goldplay-hoverbox goldplay__rate-bar--box">\n  ','\n  </gp-overbox>\n  <gp-button class="goldplay__rate-bar--link">\n  ',"\n  </gp-button>\n  </gp-rate>\n  "]);return hn=function(){return t},t}function dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function pn(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return yn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yn(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vn=function(t){c()(r,t);var e=dn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"rateList",[]),v()(u()(t),"defaultRate",{value:"600",name:"È´òÊ∏Ö"}),v()(u()(t),"template",t.createTemplate(hn(),"title","rateListHTML|html","currentRateName")),v()(u()(t),"data",{title:"stream rate",currentRate:"600",currentRateName:"È´òÊ∏Ö",rateListHTML:""}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.rateList=t.options.player.options.rateList||t.rateList,t.defaultRate=t.options.player.options.defaultRate||t.defaultRate,t.setDefaultRate(),t.updateRateListHTML(),t.init(),t.initProps(),t.showHideBar(),t}return o()(r,[{key:"initProps",value:function(){var t=this.options.cssName;this.$barBox=this.element.querySelector("."+t.rateBarBox)}},{key:"setDefaultRate",value:function(){var t=this;if(!(this.rateList.length<=0)){var e=this.rateList.find((function(e){return String(e.value)===String(t.defaultRate.value)}));e?(this.data.currentRateName=e.name,this.data.currentRate=e.value):(this.data.currentRateName=this.rateList[0].name,this.data.currentRate=this.rateList[0].value)}}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,r=this.options.$controlBarContainer;Er(r).on("mouseover","."+e.rateBar,(function(){clearTimeout(n),t.showBarBoxHandle()}));var n;Er(r).on("mouseout","."+e.rateBar,(function(e){n=setTimeout((function(){!function(e){var r=t.element,n={y:t.$barBox.offsetTop,x:r.offsetLeft};return n.width=r.offsetWidth,n.height=t.$barBox.offsetHeight,e.pageX>n.x&&e.pageX<n.x+n.width&&e.pageY>n.y&&e.pageY<n.y+n.height}(e)?t.hideBarBoxHandle():clearTimeout(n)}),j.c.hideBarBoxTime)})),Er(this.element).on("click","[gp-node-li]",(function(e){var r=e.target.getAttribute("value");if(r!==t.data.currentRate){t.data.currentRate=r;var n=t.rateList.filter((function(t){return t.value===r}));t.events.emit(st.default.PlayerChangeRate,n[0]),t.data.currentRateName=n[0].name,t.updateRateListHTML(),t.hideBarBoxHandle()}}))}},{key:"showHideBar",value:function(){var t=this.rateList;t&&t.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var t=33+28*this.rateList.length,e=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-t+"px",this.$barBox.style.marginLeft=-e+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateRateListHTML",value:function(t){var e=this.rateList;if(!(e.length<=0)){void 0===t&&(t=this.data.currentRate);var r,n=e.slice(0,e.length).reverse(),i=pn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.value===t?a.selected=!0:delete a.selected}}catch(t){i.e(t)}finally{i.f()}return this.data.rateListHTML=function(t){if(t){var e,r=["<ul>"],n=pn(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a="",o="";i.selected&&(a="gp-selected",o=" selected=".concat(i.selected)),r.push('\n    <li class="'.concat(a,'" gp-node-li value="').concat(i.value,'" ').concat(o,">").concat(i.name,"</li>\n    "))}}catch(t){n.e(t)}finally{n.f()}return r.push("</ul>"),r.join("")}}(n)}}}]),r}(sr);function gn(){var t=lr()(['\n  <gp-setting class="goldplay__setting-bar">\n  </gp-setting>\n  ']);return gn=function(){return t},t}function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var bn=function(t){c()(r,t);var e=mn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(gn())),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return r}(sr);function _n(){var t=lr()(['\n  <gp-button class="goldplay__control--fullpage" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "]);return _n=function(){return t},t}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function kn(){var t=lr()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20" height="20" viewBox="0 0 24 24">\n<path d="M3.5 6h17a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-17a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5zM6 9v6h12V9H6z" fill="#f1f1f1"></path>\n</svg>\n']);return kn=function(){return t},t}function xn(){var t=lr()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20" height="20" viewBox="0 0 24 24">\n  <path d="M2.5 4h19a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-19a.5.5 0 0 1-.5-.5v-15a.5.5 0 0 1 .5-.5zM5 7v10h14V7H5z" fill="#f1f1f1"></path>\n</svg>\n']);return xn=function(){return t},t}var En=Ye.create(xn(),"fullpageHide"),Sn=Ye.create(kn(),"fullpageExitHide"),Pn=function(t){c()(r,t);var e=wn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"containerOriginStyle",""),v()(u()(t),"template",t.createTemplate(_n(),"title","status","icon|html")),v()(u()(t),"data",{fullpageHide:"",fullpageExitHide:"none",status:"",icon:En,title:"fullpage"}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"watch",value:function(){"fullpage"===this.data.status?(this.data.fullpageHide="none",this.data.fullpageExitHide="inline-block",this.data.title="exit fullspage",this.data.icon=Sn):(this.data.fullpageHide="inline-block",this.data.fullpageExitHide="none",this.data.title="fullpage",this.data.icon=En)}},{key:"initProps",value:function(){var t=this.options;this.$container=this.options.$container,this.$screenContainer=t.$screenContainer,this.$controlBarContainer=this.getComponent("controlBarContainer").element,this.originWidth=t.$container.offsetWidth,this.originHeight=t.$container.offsetHeight,this.containerOriginStyle=t.$container.getAttribute("style"),this.screenContainerOrginStyle=this.$screenContainer.getAttribute("style"),this.controlContainerOrginWidth=this.$controlBarContainer.style.width}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,r=document,n=window;Er(this.$controlBarContainer).on("click","."+e.fullPage,(function(){var e=t.data.status;"fullscreen"===t.getComponent("fullScreen").data.status&&Q.exitFullscreen(),"fullpage"===e?t.exitFullPage():t.fullPage()})),this.eventsList.esckeyup=this.addEventListener(r,"keyup",(function(e){27===e.keyCode&&"fullpage"===t.data.status&&t.exitFullPage()})),this.eventsList.windowresize=this.addEventListener(n,"resize",(function(){if("fullpage"===t.data.status){var e=Q.getInnerWidthHeight();t.resizeTo(e.width,e.height),t.resetPosition()}}))}},{key:"fullPage",value:function(){this.data.status="fullpage";var t=this.options,e=this.options.cssName,r=Q.getInnerWidthHeight();this.saveOriginPosition(),t.$container.classList.add(e.containerFullPage),this.resizeTo(r.width,r.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){var t=this.getComponent("progressBar");this.posterOriginStyle=this.getComponent("poster").element.getAttribute("style"),this.originScroll={scrollX:scrollX,scrollY:scrollY},this.progressBarOriginLeft=t.progressBarLeft,this.progressBarOriginWidth=t.progressBarWidth,this.progressBarPlayWidthRate=t.getProgressPlayLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadWidthRate=t.getProgressLoadLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadLeftRate=(t.getProgressLoadLeftWidth().offsetLeft-this.progressBarOriginLeft)/this.progressBarOriginWidth}},{key:"setProgressBarPosition",value:function(){var t=this.getComponent("progressBar"),e=t.progressBarWidth,r=t.progressBarLeft,n=e*this.progressBarPlayWidthRate,i=e*this.progressBarLoadWidthRate,a=e*this.progressBarLoadLeftRate;t.setProgressPosition(n),t.setProgressLoadLeftWidth(a+r,i),this.getComponent("progressBar").clearDragDotTop()}},{key:"resizeTo",value:function(t,e){var r=this.options,n=r.player,i=n.controlBarAutoHide?e:e-n.controlBarHeight;n.$screenContainer.style.width=t+"px",n.$screenContainer.style.height=i+"px",r.$container.style.width=t+"px",r.$container.style.height=e+"px"}},{key:"resetPosition",value:function(){var t=this.options;this.setProgressBarPosition(),t.player.resizeScreen(),this.getComponent("bigPlayButton").resetPosition(),this.getComponent("poster").resetPosition(),this.getComponent("waitingBar").resetPosition(),this.getComponent("controlBarContainer").resetPosition()}},{key:"exitFullPage",value:function(){this.data.status="exitfullpage";var t=this.options.cssName;this.saveOriginPosition(),this.$container.classList.remove(t.containerFullPage),this.resetScreen()}},{key:"resetScreen",value:function(){this.$container.setAttribute("style",this.containerOriginStyle),this.$screenContainer.setAttribute("style",this.screenContainerOrginStyle),this.$controlBarContainer.style.width=this.controlContainerOrginWidth,this.getComponent("poster").element.setAttribute("style",this.posterOriginStyle),scrollTo(this.originScroll.scrollX,this.originScroll.scrollY),this.resetPosition()}}]),r}(sr);function Tn(){var t=lr()(['\n  <gp-button class="goldplay__control--fullscreen" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "]);return Tn=function(){return t},t}function An(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Bn='\n<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreen" style="display:${\'fullscreenHide\'}" width="20" height="20" viewBox="0 0 24 24">\n<path d="M15 5.057V2h6.5a.5.5 0 0 1 .5.5V9h-2.943V5.057H15zm-6 0H5.057V9H2V2.5a.5.5 0 0 1 .5-.5H9v3.057zM15 22v-2.943h4.057V15H22v6.5a.5.5 0 0 1-.5.5H15zm-6 0H2.5a.5.5 0 0 1-.5-.5V15h3.057v4.057H9V22z" fill="#f1f1f1"></path>\n</svg>\n',Rn=function(t){c()(r,t);var e=An(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(Tn(),"title","status","icon|html")),v()(u()(t),"data",{fullscreenHide:"inline-block",fullscreenExitHide:"none",status:"",icon:Bn,title:"fullscreen"}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"watch",value:function(){"fullscreen"===this.data.status?(this.data.fullscreenHide="none",this.data.fullscreenExitHide="inline-block",this.data.title="exit fullscreen",this.data.icon='\n<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreenExit" style="display:${\'fullscreenExitHide\'}"  width="20" height="20" viewBox="0 0 24 24">\n<path d="M22 5.943V9h-6.5a.5.5 0 0 1-.5-.5V2h2.943v3.943H22zm-20 0h3.943V2H9v6.5a.5.5 0 0 1-.5.5H2V5.943zM22 15v2.943h-4.057V22H15v-6.5a.5.5 0 0 1 .5-.5H22zM2 15h6.5a.5.5 0 0 1 .5.5V22H5.943v-4.057H2V15z" fill="#f1f1f1"></path>\n</svg>\n'):(this.data.fullscreenHide="inline-block",this.data.fullscreenExitHide="none",this.data.title="fullscreen",this.data.icon=Bn)}},{key:"initProps",value:function(){this.getComponent("fullPage").initProps.call(this)}},{key:"bindEvent",value:function(){var t=this,e=this.options.$container,r=this.options.cssName,n=document,i=window;this.eventsList.fullscreenchange=this.addEventListener(n,"fullscreenchange",(function(){if(document.fullscreenElement||document.webkitFullscreenElement)t.fullScreen();else{var n=t.getComponent("fullPage");"fullpage"===n.data.status?(e.classList.remove(r.containerFullScreen),t.data.status="exitfullscreen",n.fullPage()):t.exitFullScreen()}})),this.eventsList.windowresize=this.addEventListener(i,"resize",(function(){document.fullscreenElement&&(t.resizeTo(screen.width,screen.height-(window.outerHeight-window.innerHeight)),t.resetPosition())})),Er(this.$controlBarContainer).on("click","."+r.fullScreen,(function(){var e=t.data.status;t.saveOriginPosition(),"fullscreen"===e?Q.exitFullscreen():Q.Fullscreen()}))}},{key:"fullScreen",value:function(){this.data.status="fullscreen";var t=this.options,e=this.options.cssName,r={width:screen.width,height:screen.height-(outerHeight-innerHeight)};Q.isSafari()&&(r.height=r.height+38),t.$container.classList.add(e.containerFullScreen),this.resizeTo(r.width,r.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){this.getComponent("fullPage").saveOriginPosition.call(this)}},{key:"resizeTo",value:function(t,e){this.getComponent("fullPage").resizeTo.call(this,t,e)}},{key:"resetPosition",value:function(){this.getComponent("fullPage").resetPosition.call(this)}},{key:"setProgressBarPosition",value:function(){this.getComponent("fullPage").setProgressBarPosition.call(this)}},{key:"exitFullScreen",value:function(){this.data.status="exitfullscreen";var t=this.options.cssName;this.saveOriginPosition(),this.options.$container.classList.remove(t.containerFullScreen),this.resetScreen(),this.saveOriginPosition()}},{key:"resetScreen",value:function(){this.getComponent("fullPage").resetScreen.call(this)}}]),r}(sr);function Ln(){var t=lr()(['\n  <gp-button class="goldplay__screen--bigplay" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "]);return Ln=function(){return t},t}function Cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}function Dn(){var t=lr()(['<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nwidth="','" height="','" viewBox="0 0 438.533 438.533" style="','" xml:space="preserve">\n<g>\n<path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0\n c-39.781,0-76.466,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267\n s9.804,76.463,29.407,110.062c19.607,33.585,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407\n s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.599,29.403-70.287,29.403-110.062\n C438.533,179.489,428.732,142.795,409.133,109.203z M328.904,234.966L173.588,326.33c-2.856,1.711-5.902,2.567-9.136,2.567\n c-3.045,0-6.09-0.764-9.135-2.286c-6.09-3.614-9.136-8.939-9.136-15.985V127.907c0-7.041,3.046-12.371,9.136-15.987\n c6.28-3.427,12.369-3.333,18.271,0.284l155.316,91.36c6.088,3.424,9.134,8.663,9.134,15.703\n C338.038,226.308,334.992,231.537,328.904,234.966z" fill="','">\n</g>\n</svg>\n']);return Dn=function(){return t},t}var In=Ye.create(Dn(),"width","height","iconStyle","fillColor"),On=function(t){c()(r,t);var e=Cn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"template",t.createTemplate(Ln(),"title","status","icon|html")),v()(u()(t),"data",{titie:"click to play",iconStyle:"opacity:0.5",display:"hide",status:"",width:100,height:100,fillColor:"#999",icon:In}),v()(u()(t),"options",{}),t.options=n,Object.assign(t.data,n.data),t.init(),t}return o()(r,[{key:"watch",value:function(){if("show"===this.data.display){var t=(this.element.parentNode.offsetHeight-this.data.height)/2;this.data.iconStyle="opacity:0.7;margin-top:".concat(t,"px")}}},{key:"resetPosition",value:function(){if("show"===this.data.display){var t=this.element.parentNode,e=t.offsetWidth,r=t.offsetHeight;!0===this.options.player.controlBarAutoHide&&(r-=this.options.player.controlBarHeight);var n=t.offsetTop,i=t.offsetLeft;this.element.style.width=e+"px",this.element.style.height=r+"px",this.element.style.top=n+"px",this.element.style.left=i+"px"}}},{key:"bindEvent",value:function(){var t=this,e=this.options.$screenContainer,r=this.options.cssName;Er(e).on("click","."+r.bigPlayButton,(function(){t.events.emit(st.default.PlayerOnPlay,t),t.events.emit(st.default.ControlBarPlay,t),t.hide()})),Er(e).on("mouseover","."+r.bigPlayButton,(function(){t.data.fillColor=t.options.bigPlayButtonColor||"#fff"})),Er(e).on("mouseout","."+r.bigPlayButton,(function(e){var r=t.element,n={y:r.offsetTop,x:r.offsetLeft};n.width=r.offsetWidth,n.height=r.offsetHeight,e.pageX>n.x&&e.pageX<n.x+n.width&&e.pageY>n.y&&e.pageY<n.y+n.height||(t.data.fillColor="#999")}))}},{key:"show",value:function(){var t=this;"show"!==this.data.display&&(this.data.display="show",this.element.style.opacity="1",setTimeout((function(){t.element.style.display="inline-block"}),1))}},{key:"hide",value:function(){"hide"!==this.data.display&&(this.element.style.opacity="0",this.data.display="hide",this.element.style.display="none")}}]),r}(sr);function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Nn=function(t){c()(r,t);var e=Un(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),(t=e.call(this,n)).options=Object.assign(t.options,n),t.componentsController=t.options.componentsController,t.init(),t}return o()(r,[{key:"render",value:function(){var t=this,e=R.createEl("gp-button-block");e.classList.add("goldplay__control--button-block"),r.componentList.forEach((function(r){var n=t.componentsController.getComponent(r);e.appendChild(n.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t){r.componentList.push(t)}}]),r}(sr);v()(Nn,"componentList",["playButton","pauseButton","replayButton"]);var jn=Nn;function Mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Fn=function(t){c()(r,t);var e=Mn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),(t=e.call(this,n)).options=Object.assign(t.options,n),t.componentsController=t.options.componentsController,t.init(),t}return o()(r,[{key:"render",value:function(){var t=this,e=R.createEl("gp-control-sidebar");e.classList.add("goldplay__control--sidebar"),r.componentList.forEach((function(r){var n=t.componentsController.getComponent(r);e.appendChild(n.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t,e){(e<0||e>r.componentList.length)&&(e=r.componentList.length),r.componentList.splice(e,0,t)}}]),r}(sr);v()(Fn,"componentList",["speedBar","rateBar","volumeBar","fullPage","fullScreen"]);var Hn=Fn;function Vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Wn=function(t){c()(r,t);var e=Vn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),(t=e.call(this,n)).options=Object.assign(t.options,n),t.componentsController=t.options.componentsController,t.init(),t}return o()(r,[{key:"render",value:function(){var t=this,e=R.createEl("gp-control-nearside");e.classList.add("goldplay__control--button-block"),r.componentList.forEach((function(r){var n=t.componentsController.getComponent(r);e.appendChild(n.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t,e){(e<0||e>r.componentList.length)&&(e=r.componentList.length),r.componentList.splice(e,0,t)}}]),r}(sr);v()(Wn,"componentList",["playControl","timer"]);var zn=Wn,$n={BaseComponent:sr,controlBarContainer:gr,bigPlayButton:On,poster:pr,progressBar:Br,playButton:Cr,pauseButton:Nr,replayButton:Fr,volumeBar:qr,waitingBar:Kr,alertBox:Zr,timer:rn,speedBar:un,subtitle:fn,rateBar:vn,settingBar:bn,fullPage:Pn,fullScreen:Rn,playControl:jn,sideControlBar:Hn,nearControlBar:zn};function Yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var qn=Me,Gn=function(t){return t.substr(0,1).toUpperCase()+t.substr(1)},Xn=function(t){c()(r,t);var e=Yn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"allComponents",{}),v()(u()(t),"controlBarController",null),v()(u()(t),"options",{cssName:qn}),t.options=Object.assign(t.options,n),t.options.componentsController=u()(t),t.initComponents(),t.$container=t.options.$container,t.$screenContainer=t.options.$screenContainer,t.$canvas=t.options.$canvas,t.$audioContainer=t.options.$audioContainer,t.$audio=t.options.$audio,t.options.$controlBarContainer=t.controlBarContainer.element,t.bindEvent(),t}return o()(r,[{key:"run",value:function(){for(var t in this.controlBarController&&this.controlBarController.run(),$n)this[t]&&"function"==typeof this[t].registerMethod&&this[t].registerMethod()}},{key:"initComponents",value:function(){for(var t in $n){var e=$n[t];this.allComponents[t]||this.createComponent(e,t)}}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.PlayerLoadedMetaData,(function(){t.poster.hide()})),this.events.on(st.default.AudioPlayerPlayFail,(function(){t.drawBigPlayButton(),t.getComponent("poster").hide(),t.events.emit(st.default.PlayerOnPause,t),t.events.emit(st.default.ControlBarPause,t)})),this.bindAlertBoxEvent(),this.bindWaitingBarEvent()}},{key:"bindWaitingBarEvent",value:function(){this.waitingBar.initProps(),this.waitingBar.bindEvent()}},{key:"drawBigPlayButton",value:function(){this.$screenContainer.prepend(this.bigPlayButton.element),this.bigPlayButton.show(),this.bigPlayButton.bindEvent(),this.bigPlayButton.resetPosition()}},{key:"setControlBarController",value:function(t){this.controlBarController=t}},{key:"getControlBarController",value:function(){return this.controlBarController||this.options.player.controlBarContainer}},{key:"bindAlertBoxEvent",value:function(){this.alertBox.initProps(),this.alertBox.bindEvent()}},{key:"drawPoster",value:function(){this.$screenContainer.prepend(this.poster.element),this.poster.data.display="show",this.poster.bindEvent(),this.poster.resetPosition()}},{key:"createComponent",value:function(t,e){var r=Gn(e);this["set"+r](new t(this.options)),this[e]=this["get"+r](),this.allComponents[e]||(this.allComponents[e]=this[e])}},{key:"getComponent",value:function(t){return this.allComponents[t]||$n[t]&&this.createComponent($n[t],t),this.allComponents[t]}},{key:"resetAllComponents",value:function(){var t=this,e=Object.getOwnPropertyNames(this),r={};e.forEach((function(e){$n[e]&&(r[e]=t[e])})),this.allComponents=r}},{key:"getAllComponents",value:function(){return this.allComponents}}]),r}(D);for(var Kn in Xn.addComponet=function(t){var e=Gn(t);Xn.prototype["set"+e]=function(e){this[t]=e},Xn.prototype["get"+e]=function(){return this[t]}},$n)Xn.addComponet(Kn);var Qn=Xn;function Jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Zn=Me,ti=function(t){c()(r,t);var e=Jn(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,r),t=e.call(this,n),v()(u()(t),"player",null),v()(u()(t),"loadData",null),v()(u()(t),"options",{cssName:Zn}),t.options=Object.assign(t.options,n),t.player=t.options.player,t.loadData=t.player.loadData,t.componentsController=t.player.componentsController,t.$screenContainer=t.player.$screenContainer,t.initComponents(),t}return o()(r,[{key:"initComponents",value:function(){var t=this.componentsController;this.options.controlBar?Object.assign(this,t.getAllComponents()):Object.assign(this,{BaseComponent:t.getComponent("BaseComponent"),waitingBar:t.getComponent("waitingBar")}),this.container=this.controlBarContainer}},{key:"run",value:function(){this.drawLayout(),this.bindEvent(),this.player.autoPlay?this.events.emit(st.default.ControlBarPlay):this.events.emit(st.default.ControlBarPause)}},{key:"bindEvent",value:function(){this.bindWaitingBarEvent(),this.options.controlBar&&(this.timer.setTotalTime(this.loadData),this.bindSpeedEvent(),this.bindContainerEvent(),this.bindTimerEvent(),this.bindPlayEvent(),this.bindProgressEvent(),this.bindRateEvent(),this.bindVolumeEvent(),this.bindFullPage(),this.bindFullScreen())}},{key:"bindContainerEvent",value:function(){this.container.initProps(),this.container.bindEvent()}},{key:"bindTimerEvent",value:function(){this.timer.initProps(),this.timer.bindEvent()}},{key:"bindSpeedEvent",value:function(){this.speedBar.bindEvent(),this.speedBar.resetBoxPosition()}},{key:"bindRateEvent",value:function(){this.rateBar.bindEvent(),this.rateBar.resetBoxPosition()}},{key:"bindFullPage",value:function(){this.fullPage.initProps(),this.fullPage.bindEvent()}},{key:"bindFullScreen",value:function(){this.fullScreen.initProps(),this.fullScreen.bindEvent()}},{key:"bindWaitingBarEvent",value:function(){var t=this;[st.default.PlayerWait,st.default.PlayerSeeking,st.default.PlayerReset,st.default.PlayerChangeRate,st.default.PlayerChangeSrc].forEach((function(e){t.events.on(e,(function(){t.waitingBar.showWaiting()}))})),this.events.on(st.default.PlayerSeekEnd,(function(){t.waitingBar.hideWaiting()})),this.events.on(st.default.PlayerPlay,(function(){t.waitingBar.hideWaiting()})),this.events.on(st.default.PlayerPlaying,(function(){t.waitingBar.hideWaiting()}))}},{key:"bindPlayEvent",value:function(){var t=this;this.events.on(st.default.ControlBarPlay,(function(){"pause"!==t.pauseButton.data.status&&(t.pauseButton.data.status="pause"),t.replayButton.hide(),t.playButton.hide(),t.pauseButton.show(),t.bigPlayButton.hide()})),this.events.on(st.default.ControlBarPause,(function(){"pause"!==t.player.status&&(t.pauseButton.data.status="pause"),t.playButton.show(),t.pauseButton.hide()})),this.events.on(st.default.PlayerEnd,(function(){t.replayButton.show(),t.pauseButton.hide(),t.playButton.hide()})),this.events.on(st.default.PlayerPlay,(function(){t.events.emit(st.default.ControlBarPlay,t)})),this.events.on(st.default.PlayerPause,(function(){t.events.emit(st.default.ControlBarPause,t)})),this.events.on(st.default.PlayerOnSeek,(function(e){e<1e3*t.loadData.sourceData.duration&&t.events.emit(st.default.ControlBarPauseLoading)})),this.events.on(st.default.ControlBarPauseLoading,(function(){"pauseloading"!==t.pauseButton.data.status&&(t.pauseButton.data.status="pauseloading"),t.replayButton.hide(),t.playButton.hide(),t.pauseButton.show()})),Er(this.options.$container).on("click","."+Zn.playButton,(function(){"play"!==t.player.status&&t.events.emit(st.default.PlayerOnPlay,t)})),Er(this.options.$container).on("click","."+Zn.pauseButton,(function(){"pause"!==t.player.status&&t.events.emit(st.default.PlayerOnPause,t)})),Er(this.options.$container).on("click","."+Zn.replayButton,(function(){t.events.emit(st.default.PlayerOnSeek,t.player.startTime)}))}},{key:"bindProgressEvent",value:function(){this.progressBar.initProps(),this.progressBar.bindEvent()}},{key:"bindVolumeEvent",value:function(){this.volumeBar.initProps(),this.volumeBar.initVolumeSize(),this.volumeBar.bindEvent()}},{key:"drawLayout",value:function(){var t=this.options.$container;if(this.container){var e=this.container.element;t.append(e)}}},{key:"destroy",value:function(){this.removeEventListenerGlobal(),this.container&&this.container.destroy()}},{key:"removeEventListenerGlobal",value:function(){this.progressBar&&this.progressBar.progressDragEvent&&this.progressBar.progressDragEvent.removeEventListenerAll(),this.volumeBar&&this.volumeBar.volumeDragEvent&&this.volumeBar.volumeDragEvent.removeEventListenerAll(),this.fullPage&&this.fullPage.removeEventListenerAll(),this.fullScreen&&this.fullScreen.removeEventListenerAll()}}]),r}(D),ei=r(53),ri=r.n(ei);function ni(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var ii=function(t){c()(r,t);var e=ni(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"isLast",!1),n.type=t.type,n.libPath=t.libPath,n.player=t.player,n.init(),n}return o()(r,[{key:"init",value:function(){"ts"==this.type&&this.initNornalWorker(),this.bindEvent(),this.loadjs()}},{key:"initNornalWorker",value:function(){this.processor=this.initWorker()}},{key:"initWorker",value:function(){var t=this,e=ri()(187);return e.onmessage=function(e){var r=e.data,n=r.type,i=r.no,a=r.data;switch(n){case"dataProcessorReady":t.onDataProcessorReady();break;case"decoded":t.onDecoded(a,i);break;case"demuxedAAC":t.onDemuxedAAC(a,i);break;case"partEnd":t.onPartEnd(a);break;case"resetEnd":t.onResetEnd();break;case"maxPTS":t.onMaxPTS(a);break;case"flushEnd":t.onFlushEnd(a)}},e}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.DemuxStartDemux,this.onStartDemux.bind(this)),this.events.on(st.default.DemuxLast,(function(){t.isLast=!0})),this.events.on(st.default.DecodeFlush,(function(){t.flush()}))}},{key:"flush",value:function(){this.processor.postMessage({type:"flush"})}},{key:"loadjs",value:function(){this.processor.postMessage({type:"loadwasm",libPath:this.libPath,codec:this.options.codec})}},{key:"reset",value:function(){this.isLast=!1,this.processor.terminate(),this.initNornalWorker(),this.loadjs()}},{key:"onFlushEnd",value:function(t){this.events.emit(st.default.DecodeFlushEnd,t)}},{key:"onMaxPTS",value:function(t){this.events.emit(st.default.PlayerMaxPTS,t.maxAudioPTS,t.maxVideoPTS)}},{key:"onDemuxedAAC",value:function(t,e){this.events.emit(st.default.DemuxAAC,t,e)}},{key:"onDataProcessorReady",value:function(){this.player.seeking||this.player.reseting?this.events.emit(st.default.ProcessorResetEnd):this.events.emit(st.default.DataProcessorReady)}},{key:"onStartDemux",value:function(t){this.player.reseting||(this.logger.info("onStartDemux","postMessage to demux"),t&&t.arrayBuffer&&t.arrayBuffer.byteLength>0?this.processor.postMessage({type:"startDemux",data:t.arrayBuffer,no:t.no,isLast:this.isLast},[t.arrayBuffer.buffer]):this.logger.error("onStartDemux","data is null","data:",t))}},{key:"onDecoded",value:function(t,e){this.player.reseting||this.events.emit(st.default.DecodeDecoded,t,e)}},{key:"onPartEnd",value:function(t){this.events.emit(st.default.DecodeApppendEnd,t)}},{key:"onResetEnd",value:function(){this.events.emit(st.default.ProcessorResetEnd)}},{key:"destroy",value:function(){this.processor&&this.processor.terminate()}}]),r}(N);function ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var oi=function(t){c()(r,t);var e=ai(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"currentIndex",null),v()(u()(n),"retryTime",0),v()(u()(n),"dataReady",{audioReady:!1,imageReady:!1}),v()(u()(n),"hasInit",!1),v()(u()(n),"loadDataStatus","loading"),v()(u()(n),"duration",0),v()(u()(n),"tsNumber",0),n.loadData=t.loadData,n.imagePlayer=t.imagePlayer,n.audioPlayer=t.audioPlayer,n.player=t.player,n.bindEvent(),n}return o()(r,[{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.LoadDataRead,(function(e){if(e){var r=e.no;"".concat(t.player.options.sourceURL,"-").concat(r);t.onRead(e)}})),this.events.on(st.default.DemuxVideo,(function(e,r){t.onVideoDemuxed(e,r)})),this.events.on(st.default.DemuxAAC,(function(e,r){t.onAACDemuxed(e,r)})),this.events.on(st.default.DecodeDecoded,(function(e,r){t.onDecoded(e,r)})),this.events.on(st.default.DecodeApppendEnd,(function(e){t.onAppendEnd(e)})),this.events.on(st.default.ImagePlayerReady,(function(){t.logger.info("bindevent","Events.ImagePlayerReady"),t.checkDataReady("imageReady")})),this.events.on(st.default.AudioPlayerDataReady,(function(){t.logger.info("bindevent","Events.AudioPlayerDataReady"),t.player.receiveAACTime=null,t.checkDataReady("audioReady")})),this.events.on(st.default.AudioPlayerWait,(function(){t.dataReady.audioReady=!1,t.events.emit(st.default.PlayerWait,"audioPlayer")})),this.events.on(st.default.ImagePlayerWait,(function(){t.dataReady.imageReady=!1,t.events.emit(st.default.PlayerWait,"imagePlayer")})),this.events.on(st.default.ImagePlayerEnd,(function(){t.logger.info("bindevent","........imageplayer end"),t.events.emit(st.default.PlayerEnd)})),this.events.on(st.default.PlayerWait,(function(){t.logger.warn("player status wait"),t.player.statusBeforeWait=t.player.status,t.player.status="wait","loadend"===t.loadDataStatus&&(t.loadDataStatus="loading",t.loadNext())})),this.events.on(st.default.PlayerLoadNext,(function(){"loadend"===t.loadDataStatus&&(t.loadDataStatus="loading",t.loadNext())})),this.events.on(st.default.DecodeFlushEnd,(function(e){t.logger.info("flushend>>>>>>>>>>>>>>>",e),t.imagePlayer.maxPTS=e}))}},{key:"checkDataReady",value:function(t){var e=this.dataReady;e[t]=!0;for(var r=Object.keys(e),n=0,i=0;i<r.length&&e[r[i]];i++)n++;n==r.length&&this.events.emit(st.default.StreamDataReady)}},{key:"setBaseInfo",value:function(t){this.duration=t.duration,this.tsNumber=t.tsNumber}},{key:"reset",value:function(){this.dataReady={audioReady:!1,imageReady:!1},this.currentIndex=null,this.loadDataStatus="loading"}},{key:"startLoad",value:function(t){this.logger.info("startLoad","index:",t),this.currentIndex=t,this.player.currentIndex=t,this.events.emit(st.default.LoadDataReadBufferByNo,t)}},{key:"loadNext",value:function(){this.player.reseting||(this.currentIndex>=this.tsNumber?this.logger.info("loadNext","load end","currentIndex",this.currentIndex,"tsNumber:",this.tsNumber):(this.currentIndex+=1,this.player.currentIndex=this.currentIndex,this.logger.info("loadNext","load next ts","tsno:",this.currentIndex),this.events.emit(st.default.LoadDataReadBufferByNo,this.currentIndex)))}},{key:"onDecoded",value:function(t,e){var r=this;t.forEach((function(t){r.player.reseting||t.pts>=r.player.currentTime&&r.imagePlayer.push(t)}))}},{key:"onAppendEnd",value:function(t){return t?(this.logger.info("onAppendEnd","events.decodeFlush",t),void this.events.emit(st.default.DecodeFlush)):(this.logger.info("onAppendEnd","start load next ts condition",this.checkBuffer(),this.currentIndex),this.checkBuffer()&&null!==this.currentIndex?(this.logger.info("onAppendEnd","load next ts. currentIndex:",this.currentIndex),void this.loadNext()):(this.loadDataStatus="loadend",void this.logger.info("onAppendEnd","load ts stop")))}},{key:"onAACDemuxed",value:function(t,e){var r=this;this.player.reseting||(t.length||this.audioPlayer.send({}),t.forEach((function(t){(t.PTS>=r.player.currentTime||t.audioEnd)&&(!r.player.receiveAACTime&&r.player.seeking&&(r.player.receiveAACTime=Date.now()),r.audioPlayer.send(t))})))}},{key:"onVideoDemuxed",value:function(t){this.player.reseting||this.events.emit(st.default.DecodeStartDecode,t)}},{key:"checkBuffer",value:function(){var t=this.player,e=t.currentTime,r=(t.buffer()[1]||0)-e;return!(t.playbackRate<=1&&r>=t.maxBufferLength)}},{key:"onRead",value:function(t){this.player.reseting?console.error("onRead reseting"):t&&t.arrayBuffer&&(t.no===this.currentIndex||this.player.playbackRate>1)?(this.retryTime=0,this.logger.warn("onRead","get stream data"),t.no===this.tsNumber&&(this.logger.info("onRead","the last ts"),this.events.emit(st.default.DemuxLast)),this.events.emit(st.default.DemuxStartDemux,t)):this.logger.error("onRead","load ts failred","tsno:",this.currentIndex)}},{key:"readFromCache",value:function(t,e){var r=this;t.forEach((function(t){(t.PTS>=r.player.currentTime||t.audioEnd)&&(!r.player.receiveAACTime&&r.player.seeking&&(r.player.receiveAACTime=Date.now()),r.audioPlayer.send(t))})),e.forEach((function(t){r.player.reseting||t.pts>=r.player.currentTime&&r.imagePlayer.push(t)})),this.events.emit(st.default.DecodeFlush)}}]),r}(N);function si(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var ui=function(t){c()(r,t);var e=si(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"maxBufferLength",0),v()(u()(n),"duration",0),v()(u()(n),"pool",[]),v()(u()(n),"start",0),v()(u()(n),"end",0),v()(u()(n),"offset",0),v()(u()(n),"fps",25),n.maxBufferLength=t.maxBufferLength,n}return o()(r,[{key:"push",value:function(t){var e=this.pool,r=e.length;0===r&&(this.offset=t.pts,this.start=t.pts,this.fps=t.fps);var n=this.insertSort(e,t);e[n-1]&&(e[n-1].duration=e[n].pts-e[n-1].pts),e[n+1]&&(e[n].duration=e[n+1].pts-e[n].pts),this.end=this.pool[r].pts+this.pool[r].duration,this.duration=this.end-this.start}},{key:"insertSort",value:function(t,e){var r=t.length;if(0===r)return t.push(e),0;for(var n=0;n<r;n++)if(e.pts<t[n].pts){for(var i=r;i>n;)t[i]=t[i-1],i--;return t[n]=e,n}return t.push(e),t.length-1}},{key:"reset",value:function(){this.duration=0,this.pool=[],this.start=0,this.end=0,this.offset=0}},{key:"findByIndex",value:function(t){var e=this.buffer.length;return t<e?(this.currentIndex=t,this.buffer[t]):(this.logger.error("input index ".concat(t,"is not found, current maxIndex is ").concat(e-1)),null)}},{key:"find",value:function(t){var e=this.pool,r=e.length;if(this.isBuffered(t)&&0!==r){var n=this.findIndex(t);if(-1!==n){var i=e[n];return this.checkBuffer(t),i}}}},{key:"findIndex",value:function(t){return this.pool.findIndex((function(e){var r=parseInt(e.pts);return t>=r&&t<r+e.duration}))}},{key:"isBuffered",value:function(t){return t>=this.start&&t<this.end}},{key:"checkBuffer",value:function(t){if(this.duration>this.maxBufferLength){if(t>this.start){var e=this.findIndex(t),r=this.pool.splice(0,e);r.forEach((function(t){null})),r=null,this.start=this.pool[0].pts,this.duration=this.end-this.start}return!1}return this.events.emit(st.default.PlayerLoadNext),!0}},{key:"buffer",value:function(){return{start:this.start,end:this.end}}}]),r}(N),li=r(96),ci=r.n(li),fi=r(71),hi=r.n(fi);function di(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var pi=function(t){c()(r,t);var e=di(r);function r(t){var n;return i()(this,r),n=e.call(this),v()(u()(n),"canvas",null),n.setCanvas(t.canvas),n.setRender(),n}return o()(r,[{key:"setCanvas",value:function(t){this.canvas=t}},{key:"setRender",value:function(t){this.render=ci.a.attach(t||this.canvas)}},{key:"clear",value:function(){this.render.clear()}},{key:"drawFrame",value:function(t){var e,r,n,i,a,o=Date.now(),s=t.buf_y,u=t.buf_u,l=t.buf_v,c=t.width,f=t.height,h=c/2,d=f/2;e={bytes:s,stride:t.stride_y},r={bytes:u,stride:t.stride_u},n={bytes:l,stride:t.stride_v},i=hi.a.format({width:c,height:f,chromaWidth:h,chromaHeight:d}),a=hi.a.frame(i,e,r,n),this.render.drawFrame(a);var p=Date.now();p-o>10&&this.logger.warn("drawFrame","reandertime:",p-o)}}]),r}(N);function yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var vi=function(t){c()(r,t);var e=yi(r);function r(t){var n;return i()(this,r),n=e.call(this,t),v()(u()(n),"status","pause"),v()(u()(n),"_currentTime",0),v()(u()(n),"maxPTS",null),v()(u()(n),"ready",!1),v()(u()(n),"firstRender",!1),n.imageData=new ui({events:t.events,maxBufferLength:t.maxBufferLength}),n.screen=new pi({canvas:t.canvas}),n.playHandler=null,n.player=t.player,n.debug=t.debug||!1,n}return o()(r,[{key:"setScreenRender",value:function(t){this.screen.setCanvas(t),this.screen.setRender(t)}},{key:"clear",value:function(){this.screen.clear()}},{key:"play",value:function(t){"play"!==this.status&&(this.status="play",this.render(t))}},{key:"pause",value:function(){"pause"!==this.status&&(this.status="pause",clearTimeout(this.playHandler),this.playHandler=null)}},{key:"checkBuffer",value:function(){return this.imageData.checkBuffer(this.currentTime)}},{key:"push",value:function(t){if(!this.player.reseting){this.imageData.push(t);var e=this.end-this.player.currentTime,r=j.d.READYBUFFERLENGTH;if(this.player.playbackRate>1&&(r*=8*this.player.playbackRate),e>r&&!this.ready){this.ready=!0,this.status="ready",this.events.emit(st.default.ImagePlayerReady),null==this.player.startPts&&(this.player.startPts=this.imageData.start);var n=this.player.currentTime+this.player.startPts;this.render(n,!1)}this.events.emit(st.default.ImagePlayerBuffeUpdate)}}},{key:"find",value:function(t){return this.imageData.find(t)}},{key:"buffer",value:function(){return this.imageData.buffer()}},{key:"isBuffered",value:function(t){return this.imageData.isBuffered(t)}},{key:"render",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(t<this.imageData.offset)){var r=this.find(t);return r?(this.firstRender||(this.firstRender=!0,this.events.emit(st.default.PlayerLoadedMetaData,r.width,r.height)),this.screen.drawFrame(r),this.currentTime=r.pts,e&&this.events.emit(st.default.ImagePlayerRenderEnd,t,r.duration),r):this.maxPTS&&t>=this.maxPTS+this.fragDuration?(this.status="end",void this.events.emit(st.default.ImagePlayerEnd,this.maxPTS)):(this.logger.warn("Events.ImagePlayerWait",t,this.start,this.end,this.maxPTS),this.logger.warn("render","not yuv data"),this.status="wait",this.ready=!1,this.events.emit(st.default.ImagePlayerWait,"image","this"),!1)}}},{key:"reset",value:function(){this.status="pause",this.ready=!1,this.imageData.reset(),this.maxPTS=null,this.currentTime=0}},{key:"currentTime",set:function(t){this._currentTime=t},get:function(){return this._currentTime}},{key:"offset",get:function(){return this.imageData.offset}},{key:"fragDuration",get:function(){return Math.ceil(1e3/this.imageData.fps)}},{key:"start",get:function(){return this.imageData.start}},{key:"end",get:function(){return this.imageData.end}},{key:"duration",get:function(){return this.imageData.duration}}]),r}(N);function gi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var mi=new WeakMap,bi=new WeakMap,_i=new WeakMap,wi=new WeakMap,ki=new WeakMap,xi=function(t){c()(r,t);var e=gi(r);function r(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,r),n=e.call(this),v()(u()(n),"mode",j.c.mode),v()(u()(n),"$container",null),v()(u()(n),"componentsController",null),v()(u()(n),"controlBar",!1),v()(u()(n),"controlBarController",null),v()(u()(n),"controlBarHeight",50),v()(u()(n),"alertError",null),v()(u()(n),"dataController",null),v()(u()(n),"demuxer",null),v()(u()(n),"decoder",null),v()(u()(n),"preload",!0),v()(u()(n),"startTime",0),v()(u()(n),"screenWidth",null),v()(u()(n),"screenHeight",null),v()(u()(n),"options",{}),mi.set(u()(n),{writable:!0,value:j.c.libPath}),v()(u()(n),"readyStatus",{dataProcessor:!1,firstData:!1,audioPlayer:!1}),v()(u()(n),"reseting",!1),bi.set(u()(n),{writable:!0,value:0}),_i.set(u()(n),{writable:!0,value:!1}),wi.set(u()(n),{writable:!0,value:1}),ki.set(u()(n),{writable:!0,value:!1}),v()(u()(n),"maxBufferLength",j.d.MAXBUFFERLENGTH),v()(u()(n),"seekSegmentNo",-1),v()(u()(n),"status","init"),v()(u()(n),"loader",null),v()(u()(n),"currentIndex",null),v()(u()(n),"startIndex",1),v()(u()(n),"loadData",null),v()(u()(n),"paused",!1),v()(u()(n),"autoPlay",!0),v()(u()(n),"duration",0),v()(u()(n),"tsNumber",0),t||n.logger.error("Please pass in a dom object as the display container"),n.el=t,Object.assign(n.options,a),n.options.sourceURL=n.options.sourceURL||n.options.source,n.options.streamList=n.options.streamList||[],n.options.events=P(),n.maxBufferLength=void 0!==a.maxBufferLength?a.maxBufferLength:n.maxBufferLength,n.autoPlay=void 0!==a.autoPlay?a.autoPlay:n.autoPlay,n.controlBar=a.controlBar||n.controlBar,n.controlBarAutoHide=void 0!==a.controlBarAutoHide?a.controlBarAutoHide:n.controlBarAutoHide,_()(u()(n),mi,void 0!==a.libPath?a.libPath:m()(u()(n),mi)),n.preload=void 0===a.preload?n.preload:a.preload,n.startTime=void 0===a.startTime?n.startTime:a.startTime,n.originStartTime=n.startTime,n.playbackRate=void 0===a.playbackRate?n.playbackRate:a.playbackRate,n}return o()(r,[{key:"setAlertError",value:function(){this.options.alertError=this.alertError=O.getInstance({player:this,component:this.componentsController.alertBox,events:this.options.events})}},{key:"setDataController",value:function(){this.dataController=Dt.getInstance({player:this,events:this.options.events})}},{key:"setLoadData",value:function(){this.dataController.setLoadData({player:this,events:this.options.events}),this.loadData=this.dataController.loadData}},{key:"setComponentsController",value:function(){this.componentsController=Qn.getInstance({$container:this.$container,$screenContainer:this.$screenContainer,$canvas:this.$canvas,$audioContainer:this.$audioContainer,$audio:this.$audio,loadData:this.loadData,bigPlayButtonColor:this.bigPlayButtonColor,player:this,events:this.options.events})}},{key:"setControlBarController",value:function(){var t=Object.assign({},this.options,{$container:this.$container,$screenContainer:this.$screenContainer,controlBar:this.controlBar,controlBarAutoHide:this.controlBarAutoHide,player:this});this.controlBarController=ti.getInstance(t)}},{key:"setLoadController",value:function(){this.loaderController=St.getInstance(this.options.type,{player:this,events:this.options.events})}},{key:"setProcessorController",value:function(){this.processController=new ii({type:"ts",codec:this.options.codec,libPath:m()(this,mi),events:this.options.events,player:this})}},{key:"setStreamController",value:function(){this.streamController=new oi({events:this.options.events,loadData:this.loadData,imagePlayer:this.imagePlayer,audioPlayer:this.audioPlayer,player:this})}},{key:"setImagerPlayer",value:function(){this.imagePlayer=new vi({events:this.options.events,canvas:this.$canvas,maxBufferLength:this.maxBufferLength,player:this})}},{key:"setAudioPlayer",value:function(){this.audioPlayer=new je({player:this,events:this.options.events,audioNode:this.$audio})}},{key:"setAction",value:function(){this.action=new Nt({player:this,screen:this.screen,imagePlayer:this.imagePlayer,loadData:this.loadData,audioPlayer:this.audioPlayer,events:this.options.events})}},{key:"init",value:function(){this.controlBarHeight=this.options.controlBarHeight||this.controlBarHeight,this.options.httpWorker=ri()(148,{name:"httpWorker"}),this.currentTime=this.startTime,this.addEl(),this.setDataController(),this.setLoadData(),this.setLoadController(),this.setComponentsController(),this.setControlBarController(),this.componentsController.setControlBarController(this.controlBarController),this.setProcessorController(),this.setAlertError(),this.componentsController.drawPoster(),this.setImagerPlayer(),this.setAudioPlayer(),this.setAction(),this.setStreamController(),this.preload&&this.run(),this.bindEvent()}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.default.PlayerOnPlay,(function(){t.play()})),this.events.on(st.default.PlayerOnPause,(function(){t.pause()})),this.events.on(st.default.PlayerOnVolume,(function(e){t.volume=e})),this.events.on(st.default.DataProcessorReady,(function(){t.logger.info("bindEvent","decoder ready"),t.checkReady("dataProcessor")})),this.events.on(st.default.AudioPlayerReady,(function(){t.logger.info("bindEvent","audioPlayer ready"),t.seeking||t.checkReady("audioPlayer")})),this.events.on(st.default.PlayerReady,(function(){t.logger.info("bindEvent","player ready"),t.onReady()})),this.events.on(st.default.PlayerSpeedTo,(function(e){t.changeSpeed(e)})),this.events.on(st.default.PlayerChangeRate,(function(e){t.changeRate(e)})),this.events.on(st.default.PlayerWait,(function(){t.onWait()})),this.events.on(st.default.PlayerPlay,(function(){t.onPlay()})),this.events.on(st.default.LoaderPlayListLoaded,(function(e){"function"==typeof t.options.afterLoadPlaylist&&t.options.afterLoadPlaylist(t.laodData.sourceData);var r=e.loadData.sourceData;t.duration=r.duration,t.tsNumber=r.length,t.streamController.setBaseInfo({duration:t.duration,tsNumber:t.tsNumber}),t.dataController.startLoad(t.startTime),t.setStartTime(t.originStartTime)})),this.events.on(st.default.LoadDataFirstLoaded,(function(e){t.logger.info("bindEvent","first data ready"),t.startIndex=e.no,t.streamController.currentIndex=e.no,t.checkReady("firstData")})),this.events.on(st.default.StreamDataReady,(function(){t.logger.info("bindEvent","dataReady"),t.onDataReady()})),this.events.on(st.default.PlayerLoadedMetaData,(function(e,r){t.setCanvas(),t.resizeScreen(e,r)})),this.events.on(st.default.PlayerEnd,(function(){t.status="end"})),this.events.on(st.default.ImagePlayerBuffeUpdate,(function(){var e=t.buffer();t.events.emit(st.default.PlayerbufferUpdate,e)})),this.events.on(st.default.PlayerOnSeek,(function(e){t.seek(Math.floor(e))})),this.events.on(st.default.PlayerAlert,(function(e){t.alertError.show(e)})),this.events.on(st.default.PlayerThrowError,(function(e){U.a.apply(t,e)})),this.events.on(st.default.PlayerTimeUpdate,(function(e){t.options.onTimeupdate&&t.options.onTimeupdate(e)}))}},{key:"reset",value:function(t){this.action&&this.action.reset(t)}},{key:"switchPlaylist",value:function(t,e){this.loaderController.switchPlaylist(t,e)}},{key:"changeSpeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.playbackRate=t.value||1}},{key:"setStartTime",value:function(t){this.startTime=t}},{key:"changeRate",value:function(t){this.pause(),this.events.emit(st.default.ControlBarPauseLoading,this),this.setStartTime((this.currentTime-5e3)/1e3),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.reset(!0),this.switchPlaylist(t.url)}},{key:"changeSrc",value:function(t,e){this.pause(),this.events.emit(st.default.ControlBarPauseLoading,this),this.events.emit(st.default.PlayerChangeSrc,this),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.currentTime=this.startTime,this.imagePlayer.clear(),this.reset(!0),this.switchPlaylist(t,e)}},{key:"setCanvas",value:function(){var t=Ve.createCanvas(this);if(R.isElement(this.$canvas)){if(this.$canvas.width&&this.$canvas.height)return this.imagePlayer.setScreenRender(t),this.$canvas.replaceWith(t),void(this.$canvas=t)}else this.$screen.appendChild(t),this.$canvas=t}},{key:"destroy",value:function(){this.controlBarController&&(this.controlBarController.destroy(),delete this.controlBarController),this.$container&&(this.el.removeChild(this.$container),delete this.$container),this.processController.destroy(),this.loaderController.destroy()}},{key:"run",value:function(){this.loaderController.run()}},{key:"checkReady",value:function(t){var e=this.readyStatus;if(t&&"string"==typeof t){e[t]=!0;for(var r=Object.keys(e),n=0;n<r.length;n++)if(!e[r[n]])return!1;return this.logger.info("checkReady","player ready"),this.events.emit(st.default.PlayerReady),!0}return this.logger.error("checkReady","check ready","type is no correct, type:",t),!1}},{key:"addEl",value:function(){var t,e,r,n;this.el?(t=Ve.createContainer(this),this.el.appendChild(t),this.$container=t,e=Ve.createScreenContainer(this),this.$screen=e,t.appendChild(e),this.$screenContainer=e,this.setCanvas(),n=Ve.createAudio(this),this.$audio=n,(r=Ve.createAudioContainer(this)).appendChild(n),this.$audioContainer=r,t.appendChild(r)):this.logger.error("addEl","not found el.","el:",this.options.el)}},{key:"onWait",value:function(){this.logger.info("onWait","wait,wait,wait")}},{key:"onPlay",value:function(){this.logger.info("onPlay","play, play, play")}},{key:"onReady",value:function(){this.changing||this.componentsController.run(),this.changing&&this.logger.info("onReady","change ready","startIndex:",this.startIndex),this.streamController.startLoad(this.startIndex)}},{key:"onDataReady",value:function(){this.changing&&(this.changing=!1,this.play()),"playing"===this.statusBeforeSeek||this.autoPlay&&!this.paused||"playing"===this.statusBeforeWait&&"wait"===this.status&&"wait"!==this.imagePlayer.status&&"wait"!==this.audioPlayer.status?this.play():this.events.emit(st.default.ControlBarPause)}},{key:"buffer",value:function(){var t=this.imagePlayer.buffer(),e=this.audioPlayer.buffer(),r=Math.max(t.start,e.start),n=Math.min(t.end,e.end);return this.audioPlayer.need||(r=t.start,n=t.end),r<n?[r,n]:[0,0]}},{key:"play",value:function(){this.logger.info("play",this.status),"playing"!==this.status&&(this.logger.info("start play"),this.status="playing",this.paused=!1,this.action.play(this.currentTime+(this.startPts||0)),this.events.emit(st.default.PlayerPlay,this))}},{key:"on",value:function(t,e){this.events.on("Player."+t,e)}},{key:"off",value:function(t,e){this.events.off("Player."+t,e)}},{key:"once",value:function(t,e){this.events.once("Player."+t,e)}},{key:"pause",value:function(){"pause"!=this.status&&(this.logger.info("pause"),this.status="pause",this.action.pause(),this.paused=!0,this.events.emit(st.default.PlayerPause,this))}},{key:"seek",value:function(t){t<this.startTime||(t>=1e3*this.duration?this.logger.info("seek","seek to time:",t):(this.statusBeforeSeek=this.status,this.seekTime=Date.now(),this.seeking=!0,this.currentTime=t,this.action.seek(t+this.startPts)))}},{key:"resizeScreen",value:function(t,e){R.adaptSizeElement(t,e,this.$screenContainer,this.$canvas)}},{key:"muted",get:function(){return m()(this,ki)},set:function(t){_()(this,ki,!!t)}},{key:"playbackRate",set:function(t){_()(this,wi,t)},get:function(){return m()(this,wi)}},{key:"seeking",set:function(t){_()(this,_i,t),t?this.events.emit(st.default.PlayerSeeking):this.events.emit(st.default.PlayerSeekEnd)},get:function(){return m()(this,_i)}},{key:"currentTime",get:function(){return m()(this,bi)},set:function(t){_()(this,bi,t)}},{key:"volume",get:function(){return this.audioPlayer.volume},set:function(t){this.audioPlayer.volume=t}}]),r}(N);r(154);function Ei(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var Si=function(t){c()(r,t);var e=Ei(r);function r(t,n){var a;return i()(this,r),a=e.call(this,t,n),v()(u()(a),"libPath",null),a.options.processURL=n.processURL,a.libPath=n.libPath,!1!==a.options.needInit&&a.init(),a}return o()(r,null,[{key:"getComponent",value:function(t){return $n[t]}},{key:"registerComponent",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if("string"!=typeof t||!t)throw new Error('Illegal component name, "'.concat(t,'"; must be a non-empty string.'));var i=Object.prototype.isPrototypeOf.call(sr,e.prototype);if(!i)throw new Error('Illegal component, "'.concat(t,'"; must be a BaseComponent subclass.'));$n[t]=e,Qn.addComponet(t),"left"===r?zn.addCustomControl(t,n):Hn.addCustomControl(t,n)}}]),r}(xi);e.default=Si},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=l(t),o=n[0],s=n[1],u=new a(function(t,e,r){return 3*(e+r)/4-r}(0,o,s)),c=0,f=s>0?o-4:o;for(r=0;r<f;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[c++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(c(t,o,o+16383>s?s:o+16383));1===i?(e=t[r-1],a.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],a.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return a.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,a,o=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+f],f+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+t[e+f],f+=h,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=l}return(d?-1:1)*o*Math.pow(2,a-n)},e.write=function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+d]=255&o,d+=p,o/=256,l-=8);t[r+d-p]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,r(36))},function(t,e,r){"use strict";var n=r(37),i=r(24),a=r(38),o=r(82),s=r(85),u=r(86),l=r(18),c=r(39),f=r(49);function h(t,e){return l.new(t).mod(e)}function d(t,e){return l.new(t).transpose(e)}function p(t,e,r,n){if(1===arguments.length)return p(0,t,1,void 0);if(2===arguments.length&&c.isNumber(e))return p(t,e,1,void 0);if(2===arguments.length)return p(0,t,1,e);if(3===arguments.length&&!c.isNumber(r))return p(t,e,1,r);for(var i=[],a=0;t<e;)i[a++]=t,t+=r;return l.new(i,n)}function y(t,e){c.isNumber(t)&&t>=0&&(t=[t]);var r=c.shapeSize(t),n=c.getType(e),i=new l(new n(r),t);return"array"===i.dtype&&a.assigns(i.selection,0),i}function v(t,e){c.isNumber(t)&&t>=0&&(t=[t]);var r=c.shapeSize(t),n=c.getType(e),i=new l(new n(r),t);return a.assigns(i.selection,1),i}var g=i({args:["array","scalar"],body:function(t,e){t=t<-30?0:t>30?1:1/(1+Math.exp(-1*e*t))}});var m=i({args:["array","scalar","scalar"],body:function(t,e,r){t=Math.min(Math.max(e,t),r)}});var b=i({args:["array","scalar"],body:function(t,e){t=Math.max(e*t,t)}});var _=i({args:["array"],body:function(t){t=(Math.exp(2*t)-1)/(Math.exp(2*t)+1)}});function w(t){var e=t instanceof l?t.clone():l.new(t);return a.abseq(e.selection),e}function k(t){var e,r;for(arguments.length>1&&(t=[].slice.call(arguments)),e=0;e<t.length;e++)r=t[e],t[e]=r instanceof l?r.tolist():c.isNumber(r)?[r]:r;var n=t[0];for(e=1;e<t.length;e++){r=t[e];var i=c.getShape(n),a=c.getShape(r);if(i.length!==a.length)throw new f.ValueError("all the input arrays must have same number of dimensions");if(1===i.length&&1===a.length)n=n.concat(r);else if(2===i.length&&2===a.length&&i[0]===a[0]||1===i.length&&2===a.length&&i[0]===a[0]||2===i.length&&1===a.length&&i[0]===a[0])for(var o=0;o<i[0];o++)n[o]=n[o].concat(r[o]);else{if(!(3===i.length&&3===a.length&&i[0]===a[0]&&i[1]===a[1]||2===i.length&&3===a.length&&i[0]===a[0]&&i[1]===a[1]||3===i.length&&2===a.length&&i[0]===a[0]&&i[1]===a[1]))throw new f.ValueError('cannot concatenate  "'+i+'" with "'+a+'"');for(var s=0;s<i[0];s++){for(var u=new Array(i[1]),h=0;h<i[1];h++)u[h]=n[s][h].concat(r[s][h]);n[s]=u}}}return l.new(n,t[0].dtype)}function x(t,e){for(var r=v((t=l.new(t)).ndim).tolist(),n=e;n<0;)n+=t.ndim;if(void 0===r[n])throw new f.ValueError("axis="+e+"invalid for the "+t.ndim+"-dimensional input array");return r[n]=-1,t.step.apply(t,r)}t.exports={config:s,dtypes:u,NdArray:l,ndarray:n,array:l.new,arange:p,reshape:function(t,e){return l.new(t).reshape(e)},zeros:y,ones:v,empty:function(t,e){c.isNumber(t)&&t>=0&&(t=[t]);var r=c.shapeSize(t),n=c.getType(e);return new l(new n(r),t)},flatten:function(t){return l.new(t).flatten()},flip:x,random:function(t){if(0===arguments.length)return l.new(Math.random());t=1===arguments.length?c.isNumber(t)?[0|t]:t:[].slice.call(arguments);var e=c.shapeSize(t),r=new l(new Float64Array(e),t);return a.random(r.selection),r},softmax:function(t){var e=l.new(t).exp(),r=e.sum();return a.divseq(e.selection,r),e},sigmoid:function(t,e){return t=l.new(t).clone(),e=e||1,g(t.selection,e),t},leakyRelu:function(t,e){e=e||.001;var r=t instanceof l?t.clone():l.new(t);return b(r.selection,e),r},abs:w,arccos:function(t){var e=t instanceof l?t.clone():l.new(t);return a.acoseq(e.selection),e},arcsin:function(t){var e=t instanceof l?t.clone():l.new(t);return a.asineq(e.selection),e},arctan:function(t){var e=t instanceof l?t.clone():l.new(t);return a.ataneq(e.selection),e},cos:function(t){var e=t instanceof l?t.clone():l.new(t);return a.coseq(e.selection),e},sin:function(t){var e=t instanceof l?t.clone():l.new(t);return a.sineq(e.selection),e},tan:function(t){var e=t instanceof l?t.clone():l.new(t);return a.taneq(e.selection),e},tanh:function(t){var e=t instanceof l?t.clone():l.new(t);return _(e.selection),e},clip:function(t,e,r){1===arguments.length?(e=0,r=1):2===arguments.length&&(r=1);var n=t instanceof l?t.clone():l.new(t);return m(n.selection,e,r),n},exp:function(t){return l.new(t).exp()},log:function(t){return l.new(t).log()},sqrt:function(t){return l.new(t).sqrt()},power:function(t,e){return l.new(t).pow(e)},sum:function(t){return l.new(t).sum()},mean:function(t){return l.new(t).mean()},std:function(t,e){return l.new(t).std(e)},dot:function(t,e){return l.new(t).dot(e)},add:function(t,e){return l.new(t).add(e)},subtract:function(t,e){return l.new(t).subtract(e)},multiply:function(t,e){return l.new(t).multiply(e)},divide:function(t,e){return l.new(t).divide(e)},negative:function(t){return l.new(t).negative()},equal:function(t,e){return l.new(t).equal(e)},max:function(t){return l.new(t).max()},min:function(t){return l.new(t).min()},mod:h,remainder:h,concatenate:k,transpose:d,errors:f,broadcast:function(t,e){if(0!==t.length&&0!==e.length){for(var r=t.slice().reverse(),n=e.slice().reverse(),i=Math.max(t.length,e.length),a=new Array(i),o=0;o<i;o++)if(r[o]&&1!==r[o])if(n[o]&&1!==n[o]){if(r[o]!==n[o])return;a[o]=r[o]}else a[o]=r[o];else a[o]=n[o];return a.reverse()}},round:function(t){return l.new(t).round()},convolve:function(t,e){return l.new(t).convolve(e)},fftconvolve:function(t,e){return l.new(t).fftconvolve(e)},fft:function(t){var e=(t=t instanceof l?t.clone():l.new(t)).shape,r=e.length;if(2!==e[r-1])throw new f.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var n=new Array(r),i=new Array(r);return n[r-1]=0,i[r-1]=1,o(1,t.selection.pick.apply(t.selection,n),t.selection.pick.apply(t.selection,i)),t},ifft:function(t){var e=(t=t instanceof l?t.clone():l.new(t)).shape,r=e.length;if(2!==e[r-1])throw new f.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var n=new Array(r),i=new Array(r);return n[r-1]=0,i[r-1]=1,o(-1,t.selection.pick.apply(t.selection,n),t.selection.pick.apply(t.selection,i)),t},diag:function(t){return l.new(t).diag()},identity:function(t,e){for(var r=y([t,t],e),n=0;n<t;n++)r.set(n,n,1);return r},stack:function(t,e){if(e=e||0,!t||0===t.length)throw new f.ValueError("need at least one array to stack");for(var r,n=(t=t.map((function(t){return c.isNumber(t)?t:l.new(t)})))[0].shape||[],i=1;i<t.length;i++)for(var a=t[i].shape||[],o=Math.max(n.length,a.length),s=0;s<o;s++)if(n[s]!==a[s])throw new f.ValueError("all input arrays must have the same shape");if(0===n.length)r=k(t);else{r=y([t.length].concat(n));for(i=0;i<t.length;i++)r.pick(i).assign(t[i],!1)}if(e){e<0&&(e=r.ndim+e);var u=r.ndim,h=new Array(u);for(i=0;i<u;i++)h[i]=i<e?i+1:i===e?0:i;return r.transpose(h)}return r},rot90:function(t,e,r){for(e=e||1;e<0;)e+=4;if(e%=4,t=l.new(t),1!==(r=l.new(r||[0,1])).shape.length||2!==r.shape[0])throw new f.ValueError("len(axes) must be 2");if((r=r.tolist())[0]===r[1]||w(r[0]-r[1])===t.ndim)throw new f.ValueError("Axes must be different.");if(0===e)return t;if(2===e)return x(x(t,r[0]),r[1]);var n=p(t.ndim).tolist(),i=n[r[0]];return n[r[0]]=n[r[1]],n[r[1]]=i,1===e?d(x(t,r[1]),n):x(d(t,n),r[1])},int8:function(t){return l.new(t,"int8")},uint8:function(t){return l.new(t,"uint8")},int16:function(t){return l.new(t,"int16")},uint16:function(t){return l.new(t,"uint16")},int32:function(t){return l.new(t,"int32")},uint32:function(t){return l.new(t,"uint32")},float32:function(t){return l.new(t,"float32")},float64:function(t){return l.new(t,"float64")},images:r(130)}},function(t,e,r){"use strict";t.exports=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){"use strict";(function(e){var n=r(121),i=r(80),a=0;function o(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function s(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}t.exports=function(t){for(var r=["(",t,")()"].join(""),u=n.parse(r,{range:!0}),l="_inline_"+a+++"_",c=function(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}(u),f=new Array(c.length),h=0;h<c.length;++h)f[h]=new o([l,"arg",h,"_"].join(""),!1,!1);for(var d=new Array(r.length),p=(h=0,r.length);h<p;++h)d[h]=r.charAt(h);var y,v=[],g=[];function m(t,e){for(var r=t.range[0],n=t.range[1],i=r+1;i<n;++i)d[i]="";d[r]=e}return function t(r,n){if(r.parent=n,"MemberExpression"===r.type)r.computed?(t(r.object,r),t(r.property,r)):"ThisExpression"===r.object.type?m(r,(b=r.property.name,_="this_"+b.replace(/\_/g,"__"),g.push(_),_)):t(r.object,r);else{if("ThisExpression"===r.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===r.type){var i=r.name,a=c.indexOf(i);if(a>=0){var o=f[a],s=function(t){return"AssignmentExpression"===t.parent.type&&t.parent.left===t?"="===t.parent.operator?1:3:"UpdateExpression"===t.parent.type?3:2}(r);1&s&&(o.lvalue=!0),2&s&&(o.rvalue=!0),++o.count,m(r,o.name)}else(function(t){if("eval"===t)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?t in window:void 0!==e?t in e:"undefined"!=typeof self&&t in self})(i)||m(r,function(t){var e=l+t.replace(/\_/g,"__");return v.push(e),e}(i))}else if("Literal"===r.type)"string"==typeof r.value&&m(r,"'"+r.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===r.type)throw new Error("cwise-parser: with() statements not allowed");for(var u=Object.keys(r),h=0,d=u.length;h<d;++h)if("parent"!==u[h]){var p=r[u[h]];if(p)if(p instanceof Array)for(var y=0;y<p.length;++y)p[y]&&"string"==typeof p[y].type&&t(p[y],r);else"string"==typeof p.type&&t(p,r)}}}var b,_}(u.body[0].expression.callee.body,void 0),i(v),i(g),new s((y=u.body[0].expression.callee.body,d.slice(y.range[0],y.range[1]).join("")),f,g,v)}}).call(this,r(36))},function(t,e,r){var n,i,a;!function(r,o){"use strict";i=[e],void 0===(a="function"==typeof(n=function(t){var e,r,n,i,a,o,s,u,l,c,f,h,d,p,y,v,g,m;function b(t,e){if(!t)throw new Error("ASSERT: "+e)}function _(t){return t>=48&&t<=57}function w(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function k(t){return"01234567".indexOf(t)>=0}function x(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function E(t){return 10===t||13===t||8232===t||8233===t}function S(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function P(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function T(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function A(t){return"eval"===t||"arguments"===t}function B(t,e,r,n,i){var a;b("number"==typeof r,"Comment must have valid position"),g.lastCommentStart>=r||(g.lastCommentStart=r,a={type:t,value:e},m.range&&(a.range=[r,n]),m.loc&&(a.loc=i),m.comments.push(a),m.attachComment&&(m.leadingComments.push(a),m.trailingComments.push(a)))}function R(t){var e,r,n,i;for(e=f-t,r={start:{line:h,column:f-d-t}};f<p;)if(n=l.charCodeAt(f),++f,E(n))return m.comments&&(i=l.slice(e+t,f-1),r.end={line:h,column:f-d-1},B("Line",i,e,f-1,r)),13===n&&10===l.charCodeAt(f)&&++f,++h,void(d=f);m.comments&&(i=l.slice(e+t,f),r.end={line:h,column:f-d},B("Line",i,e,f,r))}function L(){var t,e,r,n;for(m.comments&&(t=f-2,e={start:{line:h,column:f-d-2}});f<p;)if(E(r=l.charCodeAt(f)))13===r&&10===l.charCodeAt(f+1)&&++f,++h,++f,d=f,f>=p&&q({},o.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===l.charCodeAt(f+1))return++f,++f,void(m.comments&&(n=l.slice(t+2,f-2),e.end={line:h,column:f-d},B("Block",n,t,f,e)));++f}else++f;q({},o.UnexpectedToken,"ILLEGAL")}function C(){var t,e;for(e=0===f;f<p;)if(x(t=l.charCodeAt(f)))++f;else if(E(t))++f,13===t&&10===l.charCodeAt(f)&&++f,++h,d=f,e=!0;else if(47===t)if(47===(t=l.charCodeAt(f+1)))++f,++f,R(2),e=!0;else{if(42!==t)break;++f,++f,L()}else if(e&&45===t){if(45!==l.charCodeAt(f+1)||62!==l.charCodeAt(f+2))break;f+=3,R(3)}else{if(60!==t)break;if("!--"!==l.slice(f+1,f+4))break;++f,++f,++f,++f,R(4)}}function D(t){var e,r,n,i=0;for(r="u"===t?4:2,e=0;e<r;++e){if(!(f<p&&w(l[f])))return"";n=l[f++],i=16*i+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(i)}function I(){var t,e;for(t=l.charCodeAt(f++),e=String.fromCharCode(t),92===t&&(117!==l.charCodeAt(f)&&q({},o.UnexpectedToken,"ILLEGAL"),++f,(t=D("u"))&&"\\"!==t&&S(t.charCodeAt(0))||q({},o.UnexpectedToken,"ILLEGAL"),e=t);f<p&&P(t=l.charCodeAt(f));)++f,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==l.charCodeAt(f)&&q({},o.UnexpectedToken,"ILLEGAL"),++f,(t=D("u"))&&"\\"!==t&&P(t.charCodeAt(0))||q({},o.UnexpectedToken,"ILLEGAL"),e+=t);return e}function O(){var t,r;return t=f,{type:1===(r=92===l.charCodeAt(f)?I():function(){var t,e;for(t=f++;f<p;){if(92===(e=l.charCodeAt(f)))return f=t,I();if(!P(e))break;++f}return l.slice(t,f)}()).length?e.Identifier:function(t){if(c&&T(t))return!0;switch(t.length){case 2:return"if"===t||"in"===t||"do"===t;case 3:return"var"===t||"for"===t||"new"===t||"try"===t||"let"===t;case 4:return"this"===t||"else"===t||"case"===t||"void"===t||"with"===t||"enum"===t;case 5:return"while"===t||"break"===t||"catch"===t||"throw"===t||"const"===t||"yield"===t||"class"===t||"super"===t;case 6:return"return"===t||"typeof"===t||"delete"===t||"switch"===t||"export"===t||"import"===t;case 7:return"default"===t||"finally"===t||"extends"===t;case 8:return"function"===t||"continue"===t||"debugger"===t;case 10:return"instanceof"===t;default:return!1}}(r)?e.Keyword:"null"===r?e.NullLiteral:"true"===r||"false"===r?e.BooleanLiteral:e.Identifier,value:r,lineNumber:h,lineStart:d,start:t,end:f}}function U(){var t,r,n,i,a=f,s=l.charCodeAt(f),u=l[f];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++f,m.tokenize&&(40===s?m.openParenToken=m.tokens.length:123===s&&(m.openCurlyToken=m.tokens.length)),{type:e.Punctuator,value:String.fromCharCode(s),lineNumber:h,lineStart:d,start:a,end:f};default:if(61===(t=l.charCodeAt(f+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return f+=2,{type:e.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(t),lineNumber:h,lineStart:d,start:a,end:f};case 33:case 61:return f+=2,61===l.charCodeAt(f)&&++f,{type:e.Punctuator,value:l.slice(a,f),lineNumber:h,lineStart:d,start:a,end:f}}}return">>>="===(i=l.substr(f,4))?{type:e.Punctuator,value:i,lineNumber:h,lineStart:d,start:a,end:f+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:e.Punctuator,value:n,lineNumber:h,lineStart:d,start:a,end:f+=3}:u===(r=n.substr(0,2))[1]&&"+-<>&|".indexOf(u)>=0||"=>"===r?{type:e.Punctuator,value:r,lineNumber:h,lineStart:d,start:a,end:f+=2}:"<>=!+-*%&|^/".indexOf(u)>=0?(++f,{type:e.Punctuator,value:u,lineNumber:h,lineStart:d,start:a,end:f}):void q({},o.UnexpectedToken,"ILLEGAL")}function N(){var t,r,n;if(b(_((n=l[f]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=f,t="","."!==n){if(t=l[f++],n=l[f],"0"===t){if("x"===n||"X"===n)return++f,function(t){for(var r="";f<p&&w(l[f]);)r+=l[f++];return 0===r.length&&q({},o.UnexpectedToken,"ILLEGAL"),S(l.charCodeAt(f))&&q({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:h,lineStart:d,start:t,end:f}}(r);if(k(n)&&function(){var t,e;for(t=f+1;t<p;++t){if("8"===(e=l[t])||"9"===e)return!1;if(!k(e))return!0}return!0}())return function(t){for(var r="0"+l[f++];f<p&&k(l[f]);)r+=l[f++];return(S(l.charCodeAt(f))||_(l.charCodeAt(f)))&&q({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:h,lineStart:d,start:t,end:f}}(r)}for(;_(l.charCodeAt(f));)t+=l[f++];n=l[f]}if("."===n){for(t+=l[f++];_(l.charCodeAt(f));)t+=l[f++];n=l[f]}if("e"===n||"E"===n)if(t+=l[f++],"+"!==(n=l[f])&&"-"!==n||(t+=l[f++]),_(l.charCodeAt(f)))for(;_(l.charCodeAt(f));)t+=l[f++];else q({},o.UnexpectedToken,"ILLEGAL");return S(l.charCodeAt(f))&&q({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(t),lineNumber:h,lineStart:d,start:r,end:f}}function j(){var t,r,n,i;return v=null,C(),t=f,r=function(){var t,e,r,n;for(b("/"===(t=l[f]),"Regular expression literal must start with a slash"),e=l[f++],r=!1,n=!1;f<p;)if(e+=t=l[f++],"\\"===t)E((t=l[f++]).charCodeAt(0))&&q({},o.UnterminatedRegExp),e+=t;else if(E(t.charCodeAt(0)))q({},o.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){n=!0;break}"["===t&&(r=!0)}return n||q({},o.UnterminatedRegExp),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,r,n;for(e="",r="";f<p&&P((t=l[f]).charCodeAt(0));)if(++f,"\\"===t&&f<p)if("u"===(t=l[f])){if(n=++f,t=D("u"))for(r+=t,e+="\\u";n<f;++n)e+=l[n];else f=n,r+="u",e+="\\u";G({},o.UnexpectedToken,"ILLEGAL")}else e+="\\",G({},o.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}(),i=function(t,e){var r;try{r=new RegExp(t,e)}catch(t){q({},o.InvalidRegExp)}return r}(r.value,n.value),m.tokenize?{type:e.RegularExpression,value:i,lineNumber:h,lineStart:d,start:t,end:f}:{literal:r.literal+n.literal,value:i,start:t,end:f}}function M(){var t,e,r,n;return C(),t=f,e={start:{line:h,column:f-d}},r=j(),e.end={line:h,column:f-d},m.tokenize||(m.tokens.length>0&&(n=m.tokens[m.tokens.length-1]).range[0]===t&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||m.tokens.pop()),m.tokens.push({type:"RegularExpression",value:r.literal,range:[t,f],loc:e})),r}function F(){var t;return C(),f>=p?{type:e.EOF,lineNumber:h,lineStart:d,start:f,end:f}:S(t=l.charCodeAt(f))?O():40===t||41===t||59===t?U():39===t||34===t?function(){var t,r,n,i,a,s,u,c,y="",v=!1;for(u=h,c=d,b("'"===(t=l[f])||'"'===t,"String literal must starts with a quote"),r=f,++f;f<p;){if((n=l[f++])===t){t="";break}if("\\"===n)if((n=l[f++])&&E(n.charCodeAt(0)))++h,"\r"===n&&"\n"===l[f]&&++f,d=f;else switch(n){case"u":case"x":s=f,(a=D(n))?y+=a:(f=s,y+=n);break;case"n":y+="\n";break;case"r":y+="\r";break;case"t":y+="\t";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:k(n)?(0!==(i="01234567".indexOf(n))&&(v=!0),f<p&&k(l[f])&&(v=!0,i=8*i+"01234567".indexOf(l[f++]),"0123".indexOf(n)>=0&&f<p&&k(l[f])&&(i=8*i+"01234567".indexOf(l[f++]))),y+=String.fromCharCode(i)):y+=n}else{if(E(n.charCodeAt(0)))break;y+=n}}return""!==t&&q({},o.UnexpectedToken,"ILLEGAL"),{type:e.StringLiteral,value:y,octal:v,startLineNumber:u,startLineStart:c,lineNumber:h,lineStart:d,start:r,end:f}}():46===t?_(l.charCodeAt(f+1))?N():U():_(t)?N():m.tokenize&&47===t?function(){var t,e;if(!(t=m.tokens[m.tokens.length-1]))return M();if("Punctuator"===t.type){if("]"===t.value)return U();if(")"===t.value)return!(e=m.tokens[m.openParenToken-1])||"Keyword"!==e.type||"if"!==e.value&&"while"!==e.value&&"for"!==e.value&&"with"!==e.value?U():M();if("}"===t.value){if(m.tokens[m.openCurlyToken-3]&&"Keyword"===m.tokens[m.openCurlyToken-3].type){if(!(e=m.tokens[m.openCurlyToken-4]))return U()}else{if(!m.tokens[m.openCurlyToken-4]||"Keyword"!==m.tokens[m.openCurlyToken-4].type)return U();if(!(e=m.tokens[m.openCurlyToken-5]))return M()}return n.indexOf(e.value)>=0?U():M()}return M()}return"Keyword"===t.type&&"this"!==t.value?M():U()}():U()}function H(){var t,n,i;return C(),t={start:{line:h,column:f-d}},n=F(),t.end={line:h,column:f-d},n.type!==e.EOF&&(i=l.slice(n.start,n.end),m.tokens.push({type:r[n.type],value:i,range:[n.start,n.end],loc:t})),n}function V(){var t;return f=(t=v).end,h=t.lineNumber,d=t.lineStart,v=void 0!==m.tokens?H():F(),f=t.end,h=t.lineNumber,d=t.lineStart,t}function W(){var t,e,r;t=f,e=h,r=d,v=void 0!==m.tokens?H():F(),f=t,h=e,d=r}function z(t,e){this.line=t,this.column=e}function $(t,e,r,n){this.start=new z(t,e),this.end=new z(r,n)}function Y(){var t,e,r,n;return t=f,e=h,r=d,C(),n=h!==e,f=t,h=e,d=r,n}function q(t,e){var r,n=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(function(t,e){return b(e<n.length,"Message reference must be in range"),n[e]}));throw"number"==typeof t.lineNumber?((r=new Error("Line "+t.lineNumber+": "+i)).index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-d+1):((r=new Error("Line "+h+": "+i)).index=f,r.lineNumber=h,r.column=f-d+1),r.description=i,r}function G(){try{q.apply(null,arguments)}catch(t){if(!m.errors)throw t;m.errors.push(t)}}function X(t){if(t.type===e.EOF&&q(t,o.UnexpectedEOS),t.type===e.NumericLiteral&&q(t,o.UnexpectedNumber),t.type===e.StringLiteral&&q(t,o.UnexpectedString),t.type===e.Identifier&&q(t,o.UnexpectedIdentifier),t.type===e.Keyword){if(function(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(t.value))q(t,o.UnexpectedReserved);else if(c&&T(t.value))return void G(t,o.StrictReservedWord);q(t,o.UnexpectedToken,t.value)}q(t,o.UnexpectedToken,t.value)}function K(t){var r=V();r.type===e.Punctuator&&r.value===t||X(r)}function Q(t){var r=V();r.type===e.Keyword&&r.value===t||X(r)}function J(t){return v.type===e.Punctuator&&v.value===t}function Z(t){return v.type===e.Keyword&&v.value===t}function tt(){var t,r=f,n=h,i=d,a=v;if(59===l.charCodeAt(f)||J(";"))V();else{if(t=h,C(),h!==t)return f=r,h=n,d=i,void(v=a);v.type===e.EOF||J("}")||X(v)}}function et(t){return t.type===i.Identifier||t.type===i.MemberExpression}function rt(t,e){var r,n,i;return r=c,i=v,n=St(),e&&c&&A(t[0].name)&&G(e,o.StrictParamName),c=r,y.markEnd(y.createFunctionExpression(null,t,[],n),i)}function nt(){var t,r;return r=v,(t=V()).type===e.StringLiteral||t.type===e.NumericLiteral?(c&&t.octal&&G(t,o.StrictOctalLiteral),y.markEnd(y.createLiteral(t),r)):y.markEnd(y.createIdentifier(t.value),r)}function it(){var t,r,n,i,a,s;return s=v,(t=v).type===e.Identifier?(n=nt(),"get"!==t.value||J(":")?"set"!==t.value||J(":")?(K(":"),i=yt(),y.markEnd(y.createProperty("init",n,i),s)):(r=nt(),K("("),(t=v).type!==e.Identifier?(K(")"),G(t,o.UnexpectedToken,t.value),i=rt([])):(a=[mt()],K(")"),i=rt(a,t)),y.markEnd(y.createProperty("set",r,i),s)):(r=nt(),K("("),K(")"),i=rt([]),y.markEnd(y.createProperty("get",r,i),s))):t.type!==e.EOF&&t.type!==e.Punctuator?(r=nt(),K(":"),i=yt(),y.markEnd(y.createProperty("init",r,i),s)):void X(t)}function at(){var t,r,n,s;if(J("("))return function(){var t;return K("("),t=vt(),K(")"),t}();if(J("["))return function(){var t,e=[];for(t=v,K("[");!J("]");)J(",")?(V(),e.push(null)):(e.push(yt()),J("]")||K(","));return V(),y.markEnd(y.createArrayExpression(e),t)}();if(J("{"))return function(){var t,e,r,n,s,u=[],l={},f=String;for(s=v,K("{");!J("}");)e=(t=it()).key.type===i.Identifier?t.key.name:f(t.key.value),n="init"===t.kind?a.Data:"get"===t.kind?a.Get:a.Set,r="$"+e,Object.prototype.hasOwnProperty.call(l,r)?(l[r]===a.Data?c&&n===a.Data?G({},o.StrictDuplicateProperty):n!==a.Data&&G({},o.AccessorDataProperty):n===a.Data?G({},o.AccessorDataProperty):l[r]&n&&G({},o.AccessorGetSet),l[r]|=n):l[r]=n,u.push(t),J("}")||K(",");return K("}"),y.markEnd(y.createObjectExpression(u),s)}();if(t=v.type,s=v,t===e.Identifier)n=y.createIdentifier(V().value);else if(t===e.StringLiteral||t===e.NumericLiteral)c&&v.octal&&G(v,o.StrictOctalLiteral),n=y.createLiteral(V());else if(t===e.Keyword){if(Z("function"))return function(){var t,e,r,n,i,a,s,u,l,f=null;l=v,Q("function"),J("(")||(t=v,f=mt(),c?A(t.value)&&G(t,o.StrictFunctionName):A(t.value)?(r=t,n=o.StrictFunctionName):T(t.value)&&(r=t,n=o.StrictReservedWord));i=Pt(r),a=i.params,e=i.stricted,r=i.firstRestricted,i.message&&(n=i.message);u=c,s=St(),c&&r&&q(r,n);c&&e&&G(e,n);return c=u,y.markEnd(y.createFunctionExpression(f,a,[],s),l)}();Z("this")?(V(),n=y.createThisExpression()):X(V())}else t===e.BooleanLiteral?((r=V()).value="true"===r.value,n=y.createLiteral(r)):t===e.NullLiteral?((r=V()).value=null,n=y.createLiteral(r)):J("/")||J("/=")?(n=void 0!==m.tokens?y.createLiteral(M()):y.createLiteral(j()),W()):X(V());return y.markEnd(n,s)}function ot(){var t=[];if(K("("),!J(")"))for(;f<p&&(t.push(yt()),!J(")"));)K(",");return K(")"),t}function st(){var t,r;return r=v,function(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}(t=V())||X(t),y.markEnd(y.createIdentifier(t.value),r)}function ut(){return K("."),st()}function lt(){var t;return K("["),t=vt(),K("]"),t}function ct(){var t,e,r;return r=v,Q("new"),t=function(){var t,e,r;b(g.allowIn,"callee of new expression always allow in keyword."),r=v,t=Z("new")?ct():at();for(;J(".")||J("[");)J("[")?(e=lt(),t=y.createMemberExpression("[",t,e)):(e=ut(),t=y.createMemberExpression(".",t,e)),y.markEnd(t,r);return t}(),e=J("(")?ot():[],y.markEnd(y.createNewExpression(t,e),r)}function ft(){var t,r,n=v;return t=function(){var t,e,r,n,i=g.allowIn;for(n=v,g.allowIn=!0,t=Z("new")?ct():at();;){if(J("."))r=ut(),t=y.createMemberExpression(".",t,r);else if(J("("))e=ot(),t=y.createCallExpression(t,e);else{if(!J("["))break;r=lt(),t=y.createMemberExpression("[",t,r)}y.markEnd(t,n)}return g.allowIn=i,t}(),v.type===e.Punctuator&&(!J("++")&&!J("--")||Y()||(c&&t.type===i.Identifier&&A(t.name)&&G({},o.StrictLHSPostfix),et(t)||G({},o.InvalidLHSInAssignment),r=V(),t=y.markEnd(y.createPostfixExpression(r.value,t),n))),t}function ht(){var t,r,n;return v.type!==e.Punctuator&&v.type!==e.Keyword?r=ft():J("++")||J("--")?(n=v,t=V(),r=ht(),c&&r.type===i.Identifier&&A(r.name)&&G({},o.StrictLHSPrefix),et(r)||G({},o.InvalidLHSInAssignment),r=y.createUnaryExpression(t.value,r),r=y.markEnd(r,n)):J("+")||J("-")||J("~")||J("!")?(n=v,t=V(),r=ht(),r=y.createUnaryExpression(t.value,r),r=y.markEnd(r,n)):Z("delete")||Z("void")||Z("typeof")?(n=v,t=V(),r=ht(),r=y.createUnaryExpression(t.value,r),r=y.markEnd(r,n),c&&"delete"===r.operator&&r.argument.type===i.Identifier&&G({},o.StrictDelete)):r=ft(),r}function dt(t,r){var n=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword)return 0;switch(t.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function pt(){var t,e,r,n,i;return i=v,t=function(){var t,e,r,n,i,a,o,s,u,l;if(t=v,u=ht(),0===(i=dt(n=v,g.allowIn)))return u;for(n.prec=i,V(),e=[t,v],a=[u,n,o=ht()];(i=dt(v,g.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),r=y.createBinaryExpression(s,u,o),e.pop(),t=e[e.length-1],y.markEnd(r,t),a.push(r);(n=V()).prec=i,a.push(n),e.push(v),r=ht(),a.push(r)}for(r=a[l=a.length-1],e.pop();l>1;)r=y.createBinaryExpression(a[l-1].value,a[l-2],r),l-=2,t=e.pop(),y.markEnd(r,t);return r}(),J("?")&&(V(),e=g.allowIn,g.allowIn=!0,r=yt(),g.allowIn=e,K(":"),n=yt(),t=y.createConditionalExpression(t,r,n),y.markEnd(t,i)),t}function yt(){var t,r,n,a,s,u;return t=v,s=v,a=r=pt(),v.type!==e.Punctuator||"="!==(u=v.value)&&"*="!==u&&"/="!==u&&"%="!==u&&"+="!==u&&"-="!==u&&"<<="!==u&&">>="!==u&&">>>="!==u&&"&="!==u&&"^="!==u&&"|="!==u||(et(r)||G({},o.InvalidLHSInAssignment),c&&r.type===i.Identifier&&A(r.name)&&G(t,o.StrictLHSAssignment),t=V(),n=yt(),a=y.markEnd(y.createAssignmentExpression(t.value,r,n),s)),a}function vt(){var t,e=v;if(t=yt(),J(",")){for(t=y.createSequenceExpression([t]);f<p&&J(",");)V(),t.expressions.push(yt());y.markEnd(t,e)}return t}function gt(){var t,e;return e=v,K("{"),t=function(){for(var t,e=[];f<p&&!J("}")&&void 0!==(t=At());)e.push(t);return e}(),K("}"),y.markEnd(y.createBlockStatement(t),e)}function mt(){var t,r;return r=v,(t=V()).type!==e.Identifier&&X(t),y.markEnd(y.createIdentifier(t.value),r)}function bt(t){var e,r,n=null;return r=v,e=mt(),c&&A(e.name)&&G({},o.StrictVarName),"const"===t?(K("="),n=yt()):J("=")&&(V(),n=yt()),y.markEnd(y.createVariableDeclarator(e,n),r)}function _t(t){var e=[];do{if(e.push(bt(t)),!J(","))break;V()}while(f<p);return e}function wt(){var t,e,r,n,i,a,s,u,l,c,f=g.allowIn;return t=e=r=null,Q("for"),K("("),J(";")?V():(Z("var")||Z("let")?(g.allowIn=!1,c=v,u=V(),l=_t(),t=y.markEnd(y.createVariableDeclaration(l,u.value),c),g.allowIn=f,1===t.declarations.length&&Z("in")&&(V(),n=t,i=vt(),t=null)):(g.allowIn=!1,t=vt(),g.allowIn=f,Z("in")&&(et(t)||G({},o.InvalidLHSInForIn),V(),n=t,i=vt(),t=null)),void 0===n&&K(";")),void 0===n&&(J(";")||(e=vt()),K(";"),J(")")||(r=vt())),K(")"),s=g.inIteration,g.inIteration=!0,a=Et(),g.inIteration=s,void 0===n?y.createForStatement(t,e,r,a):y.createForInStatement(n,i,a)}function kt(){var t,e,r,n=[];for(r=v,Z("default")?(V(),t=null):(Q("case"),t=vt()),K(":");f<p&&!(J("}")||Z("default")||Z("case"));)e=Et(),n.push(e);return y.markEnd(y.createSwitchCase(t,n),r)}function xt(){var t,e,r,n,i=[],a=null;return Q("try"),t=gt(),Z("catch")&&i.push((n=v,Q("catch"),K("("),J(")")&&X(v),e=mt(),c&&A(e.name)&&G({},o.StrictCatchVariable),K(")"),r=gt(),y.markEnd(y.createCatchClause(e,r),n))),Z("finally")&&(V(),a=gt()),0!==i.length||a||q({},o.NoCatchOrFinally),y.createTryStatement(t,[],i,a)}function Et(){var t,r,n,a,s,u,h,d,m,b=v.type;if(b===e.EOF&&X(v),b===e.Punctuator&&"{"===v.value)return gt();if(a=v,b===e.Punctuator)switch(v.value){case";":return y.markEnd((K(";"),y.createEmptyStatement()),a);case"(":return y.markEnd(function(){var t=vt();return tt(),y.createExpressionStatement(t)}(),a)}if(b===e.Keyword)switch(v.value){case"break":return y.markEnd(function(){var t,r=null;return Q("break"),59===l.charCodeAt(f)?(V(),g.inIteration||g.inSwitch||q({},o.IllegalBreak),y.createBreakStatement(null)):Y()?(g.inIteration||g.inSwitch||q({},o.IllegalBreak),y.createBreakStatement(null)):(v.type===e.Identifier&&(t="$"+(r=mt()).name,Object.prototype.hasOwnProperty.call(g.labelSet,t)||q({},o.UnknownLabel,r.name)),tt(),null!==r||g.inIteration||g.inSwitch||q({},o.IllegalBreak),y.createBreakStatement(r))}(),a);case"continue":return y.markEnd(function(){var t,r=null;return Q("continue"),59===l.charCodeAt(f)?(V(),g.inIteration||q({},o.IllegalContinue),y.createContinueStatement(null)):Y()?(g.inIteration||q({},o.IllegalContinue),y.createContinueStatement(null)):(v.type===e.Identifier&&(t="$"+(r=mt()).name,Object.prototype.hasOwnProperty.call(g.labelSet,t)||q({},o.UnknownLabel,r.name)),tt(),null!==r||g.inIteration||q({},o.IllegalContinue),y.createContinueStatement(r))}(),a);case"debugger":return y.markEnd((Q("debugger"),tt(),y.createDebuggerStatement()),a);case"do":return y.markEnd((Q("do"),m=g.inIteration,g.inIteration=!0,h=Et(),g.inIteration=m,Q("while"),K("("),d=vt(),K(")"),J(";")&&V(),y.createDoWhileStatement(h,d)),a);case"for":return y.markEnd(wt(),a);case"function":return y.markEnd(Tt(),a);case"if":return y.markEnd(function(){var t,e,r;return Q("if"),K("("),t=vt(),K(")"),e=Et(),Z("else")?(V(),r=Et()):r=null,y.createIfStatement(t,e,r)}(),a);case"return":return y.markEnd((u=null,Q("return"),g.inFunctionBody||G({},o.IllegalReturn),32===l.charCodeAt(f)&&S(l.charCodeAt(f+1))?(u=vt(),tt(),y.createReturnStatement(u)):Y()?y.createReturnStatement(null):(J(";")||J("}")||v.type===e.EOF||(u=vt()),tt(),y.createReturnStatement(u))),a);case"switch":return y.markEnd(function(){var t,e,r,n,i;if(Q("switch"),K("("),t=vt(),K(")"),K("{"),e=[],J("}"))return V(),y.createSwitchStatement(t,e);for(n=g.inSwitch,g.inSwitch=!0,i=!1;f<p&&!J("}");)null===(r=kt()).test&&(i&&q({},o.MultipleDefaultsInSwitch),i=!0),e.push(r);return g.inSwitch=n,K("}"),y.createSwitchStatement(t,e)}(),a);case"throw":return y.markEnd(function(){var t;return Q("throw"),Y()&&q({},o.NewlineAfterThrow),t=vt(),tt(),y.createThrowStatement(t)}(),a);case"try":return y.markEnd(xt(),a);case"var":return y.markEnd((Q("var"),s=_t(),tt(),y.createVariableDeclaration(s,"var")),a);case"while":return y.markEnd(function(){var t,e,r;return Q("while"),K("("),t=vt(),K(")"),r=g.inIteration,g.inIteration=!0,e=Et(),g.inIteration=r,y.createWhileStatement(t,e)}(),a);case"with":return y.markEnd(function(){var t,e;return c&&(C(),G({},o.StrictModeWith)),Q("with"),K("("),t=vt(),K(")"),e=Et(),y.createWithStatement(t,e)}(),a)}return(t=vt()).type===i.Identifier&&J(":")?(V(),n="$"+t.name,Object.prototype.hasOwnProperty.call(g.labelSet,n)&&q({},o.Redeclaration,"Label",t.name),g.labelSet[n]=!0,r=Et(),delete g.labelSet[n],y.markEnd(y.createLabeledStatement(t,r),a)):(tt(),y.markEnd(y.createExpressionStatement(t),a))}function St(){var t,r,n,a,s,u,h,d,m=[];for(d=v,K("{");f<p&&v.type===e.StringLiteral&&(r=v,t=At(),m.push(t),t.expression.type===i.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(c=!0,n&&G(n,o.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(a=g.labelSet,s=g.inIteration,u=g.inSwitch,h=g.inFunctionBody,g.labelSet={},g.inIteration=!1,g.inSwitch=!1,g.inFunctionBody=!0;f<p&&!J("}")&&void 0!==(t=At());)m.push(t);return K("}"),g.labelSet=a,g.inIteration=s,g.inSwitch=u,g.inFunctionBody=h,y.markEnd(y.createBlockStatement(m),d)}function Pt(t){var e,r,n,i,a,s,u=[];if(K("("),!J(")"))for(i={};f<p&&(r=v,e=mt(),a="$"+r.value,c?(A(r.value)&&(n=r,s=o.StrictParamName),Object.prototype.hasOwnProperty.call(i,a)&&(n=r,s=o.StrictParamDupe)):t||(A(r.value)?(t=r,s=o.StrictParamName):T(r.value)?(t=r,s=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,a)&&(t=r,s=o.StrictParamDupe)),u.push(e),i[a]=!0,!J(")"));)K(",");return K(")"),{params:u,stricted:n,firstRestricted:t,message:s}}function Tt(){var t,e,r,n,i,a,s,u,l,f;return f=v,Q("function"),n=v,t=mt(),c?A(n.value)&&G(n,o.StrictFunctionName):A(n.value)?(s=n,u=o.StrictFunctionName):T(n.value)&&(s=n,u=o.StrictReservedWord),e=(a=Pt(s)).params,i=a.stricted,s=a.firstRestricted,a.message&&(u=a.message),l=c,r=St(),c&&s&&q(s,u),c&&i&&G(i,u),c=l,y.markEnd(y.createFunctionDeclaration(t,e,[],r),f)}function At(){if(v.type===e.Keyword)switch(v.value){case"const":case"let":return t=v.value,n=v,Q(t),r=_t(t),tt(),y.markEnd(y.createVariableDeclaration(r,t),n);case"function":return Tt();default:return Et()}var t,r,n;if(v.type!==e.EOF)return Et()}function Bt(){var t,r;return C(),W(),r=v,c=!1,t=function(){for(var t,r,n,a=[];f<p&&(r=v).type===e.StringLiteral&&(t=At(),a.push(t),t.expression.type===i.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(c=!0,n&&G(n,o.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(;f<p&&void 0!==(t=At());)a.push(t);return a}(),y.markEnd(y.createProgram(t),r)}function Rt(){var t,e,r,n=[];for(t=0;t<m.tokens.length;++t)r={type:(e=m.tokens[t]).type,value:e.value},m.range&&(r.range=e.range),m.loc&&(r.loc=e.loc),n.push(r);m.tokens=n}(r={})[(e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",r[e.EOF]="<end>",r[e.Identifier]="Identifier",r[e.Keyword]="Keyword",r[e.NullLiteral]="Null",r[e.NumericLiteral]="Numeric",r[e.Punctuator]="Punctuator",r[e.StringLiteral]="String",r[e.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},a={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘ß‘±-’ñ’ô’°-÷á◊ê-◊™◊∞-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡¢†‡¢¢-‡¢¨‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡•∑‡•π-‡•ø‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω‡±ò‡±ô‡±†‡±°‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µ†‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∑·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§ú·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·ßÅ-·ßá·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≥©-·≥¨·≥Æ-·≥±·≥µ·≥∂·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∏Ø„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöóÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í™Ä-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú]"),NonAsciiIdentifierPart:new RegExp("[¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÃÄ-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“É-“á“ä-‘ß‘±-’ñ’ô’°-÷á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊á◊ê-◊™◊∞-◊≤ÿê-ÿöÿ†-Ÿ©ŸÆ-€ì€ï-€ú€ü-€®€™-€º€ø‹ê-›ä›ç-ﬁ±ﬂÄ-ﬂµﬂ∫‡†Ä-‡†≠‡°Ä-‡°õ‡¢†‡¢¢-‡¢¨‡£§-‡£æ‡§Ä-‡•£‡•¶-‡•Ø‡•±-‡•∑‡•π-‡•ø‡¶Å-‡¶É‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶º-‡ßÑ‡ßá‡ßà‡ßã-‡ßé‡ßó‡ßú‡ßù‡ßü-‡ß£‡ß¶-‡ß±‡®Å-‡®É‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©ô-‡©ú‡©û‡©¶-‡©µ‡™Å-‡™É‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™º-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´ê‡´†-‡´£‡´¶-‡´Ø‡¨Å-‡¨É‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨º-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ñ‡≠ó‡≠ú‡≠ù‡≠ü-‡≠£‡≠¶-‡≠Ø‡≠±‡ÆÇ‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øê‡Øó‡Ø¶-‡ØØ‡∞Å-‡∞É‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω-‡±Ñ‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±ò‡±ô‡±†-‡±£‡±¶-‡±Ø‡≤Ç‡≤É‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤º-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥û‡≥†-‡≥£‡≥¶-‡≥Ø‡≥±‡≥≤‡¥Ç‡¥É‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω-‡µÑ‡µÜ-‡µà‡µä-‡µé‡µó‡µ†-‡µ£‡µ¶-‡µØ‡µ∫-‡µø‡∂Ç‡∂É‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑≤‡∑≥‡∏Å-‡∏∫‡πÄ-‡πé‡πê-‡πô‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫π‡∫ª-‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªà-‡ªç‡ªê-‡ªô‡ªú-‡ªü‡ºÄ‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ºæ-‡Ωá‡Ωâ-‡Ω¨‡Ω±-‡æÑ‡æÜ-‡æó‡æô-‡æº‡øÜ·ÄÄ-·Åâ·Åê-·Çù·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·çù-·çü·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úî·ú†-·ú¥·ùÄ-·ùì·ù†-·ù¨·ùÆ-·ù∞·ù≤·ù≥·ûÄ-·üì·üó·üú·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·††-·°∑·¢Ä-·¢™·¢∞-·£µ·§Ä-·§ú·§†-·§´·§∞-·§ª·•Ü-·•≠·•∞-·•¥·¶Ä-·¶´·¶∞-·ßâ·ßê-·ßô·®Ä-·®õ·®†-·©û·©†-·©º·©ø-·™â·™ê-·™ô·™ß·¨Ä-·≠ã·≠ê-·≠ô·≠´-·≠≥·ÆÄ-·Ø≥·∞Ä-·∞∑·±Ä-·±â·±ç-·±Ω·≥ê-·≥í·≥î-·≥∂·¥Ä-·∑¶·∑º-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Äå‚Äç‚Äø‚ÅÄ‚Åî‚Å±‚Åø‚Çê-‚Çú‚Éê-‚Éú‚É°‚É•-‚É∞‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚µø-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∑†-‚∑ø‚∏Ø„ÄÖ-„Äá„Ä°-„ÄØ„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çô„Çö„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-Íò´ÍôÄ-ÍôØÍô¥-ÍôΩÍôø-ÍöóÍöü-Íõ±Íúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ßÍ°Ä-Í°≥Í¢Ä-Í£ÑÍ£ê-Í£ôÍ£†-Í£∑Í£ªÍ§Ä-Í§≠Í§∞-Í•ìÍ•†-Í•ºÍ¶Ä-ÍßÄÍßè-ÍßôÍ®Ä-Í®∂Í©Ä-Í©çÍ©ê-Í©ôÍ©†-Í©∂Í©∫Í©ªÍ™Ä-Í´ÇÍ´õ-Í´ùÍ´†-Í´ØÍ´≤-Í´∂Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ™ÍØ¨ÍØ≠ÍØ∞-ÍØπÍ∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ù-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔ∏Ä-Ô∏èÔ∏†-Ô∏¶Ô∏≥Ô∏¥Ôπç-ÔπèÔπ∞-Ôπ¥Ôπ∂-ÔªºÔºê-ÔºôÔº°-Ôº∫ÔºøÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú]")},u={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===i.Program&&t.body.length>0)){for(m.trailingComments.length>0?m.trailingComments[0].range[0]>=t.range[1]?(r=m.trailingComments,m.trailingComments=[]):m.trailingComments.length=0:m.bottomRightStack.length>0&&m.bottomRightStack[m.bottomRightStack.length-1].trailingComments&&m.bottomRightStack[m.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=m.bottomRightStack[m.bottomRightStack.length-1].trailingComments,delete m.bottomRightStack[m.bottomRightStack.length-1].trailingComments);m.bottomRightStack.length>0&&m.bottomRightStack[m.bottomRightStack.length-1].range[0]>=t.range[0];)e=m.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):m.leadingComments.length>0&&m.leadingComments[m.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=m.leadingComments,m.leadingComments=[]),r&&(t.trailingComments=r),m.bottomRightStack.push(t)}},markEnd:function(t,e){return m.range&&(t.range=[e.start,f]),m.loc&&(t.loc=new $(void 0===e.startLineNumber?e.lineNumber:e.startLineNumber,e.start-(void 0===e.startLineStart?e.lineStart:e.startLineStart),h,f-d),this.postProcess(t)),m.attachComment&&this.processComment(t),t},postProcess:function(t){return m.source&&(t.loc.source=m.source),t},createArrayExpression:function(t){return{type:i.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:i.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){return{type:"||"===t||"&&"===t?i.LogicalExpression:i.BinaryExpression,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:i.BlockStatement,body:t}},createBreakStatement:function(t){return{type:i.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:i.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:i.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:i.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:i.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:i.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:i.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:i.EmptyStatement}},createExpressionStatement:function(t){return{type:i.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:i.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:i.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:i.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:i.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:i.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:i.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:i.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:i.Literal,value:t.value,raw:l.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:i.MemberExpression,computed:"["===t,object:e,property:r}},createNewExpression:function(t,e){return{type:i.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:i.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:i.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:i.Program,body:t}},createProperty:function(t,e,r){return{type:i.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:i.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:i.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:i.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:i.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:i.ThisExpression}},createThrowStatement:function(t){return{type:i.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:i.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return"++"===t||"--"===t?{type:i.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:i.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:i.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:i.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:i.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:i.WithStatement,object:t,body:e}}},t.version="1.2.5",t.tokenize=function(t,r){var n;"string"==typeof t||t instanceof String||(t=String(t)),y=u,f=0,h=(l=t).length>0?1:0,d=0,p=l.length,v=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},m={},(r=r||{}).tokens=!0,m.tokens=[],m.tokenize=!0,m.openParenToken=-1,m.openCurlyToken=-1,m.range="boolean"==typeof r.range&&r.range,m.loc="boolean"==typeof r.loc&&r.loc,"boolean"==typeof r.comment&&r.comment&&(m.comments=[]),"boolean"==typeof r.tolerant&&r.tolerant&&(m.errors=[]);try{if(W(),v.type===e.EOF)return m.tokens;for(V();v.type!==e.EOF;)try{V()}catch(t){if(v,m.errors){m.errors.push(t);break}throw t}Rt(),n=m.tokens,void 0!==m.comments&&(n.comments=m.comments),void 0!==m.errors&&(n.errors=m.errors)}catch(t){throw t}finally{m={}}return n},t.parse=function(t,e){var r,n;n=String,"string"==typeof t||t instanceof String||(t=n(t)),y=u,f=0,h=(l=t).length>0?1:0,d=0,p=l.length,v=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},m={},void 0!==e&&(m.range="boolean"==typeof e.range&&e.range,m.loc="boolean"==typeof e.loc&&e.loc,m.attachComment="boolean"==typeof e.attachComment&&e.attachComment,m.loc&&null!==e.source&&void 0!==e.source&&(m.source=n(e.source)),"boolean"==typeof e.tokens&&e.tokens&&(m.tokens=[]),"boolean"==typeof e.comment&&e.comment&&(m.comments=[]),"boolean"==typeof e.tolerant&&e.tolerant&&(m.errors=[]),m.attachComment&&(m.range=!0,m.comments=[],m.bottomRightStack=[],m.trailingComments=[],m.leadingComments=[]));try{r=Bt(),void 0!==m.comments&&(r.comments=m.comments),void 0!==m.tokens&&(Rt(),r.tokens=m.tokens),void 0!==m.errors&&(r.errors=m.errors)}catch(t){throw t}finally{m={}}return r},t.Syntax=function(){var t,e={};for(t in"function"==typeof Object.create&&(e=Object.create(null)),i)i.hasOwnProperty(t)&&(e[t]=i[t]);return"function"==typeof Object.freeze&&Object.freeze(e),e}()})?n.apply(e,i):n)||(t.exports=a)}()},function(t,e,r){"use strict";var n=r(123);t.exports=function(t){var e=["'use strict'","var CACHED={}"],r=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<t.arrayArgs.length;++c){var f=t.arrayArgs[c];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),a.push("t"+f),a.push("r"+f),o.push("t"+f),o.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[c]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[c])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),c=0;c<t.scalarArgs.length;++c)s.push("scalar"+t.scalarArgs[c]);return r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(n.bind(void 0,t))}},function(t,e,r){"use strict";var n=r(80);function i(t,e,r){var n,i,a=t.length,o=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],l=[],c=0,f=0;for(n=0;n<a;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<o;++i)for(n=0;n<a;++n)f=c,c=t[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",c].join("")):l.push(["d",i,"s",n,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=a-1;n>=0;--n)c=t[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<a;++n){for(f=c,c=t[n],i=0;i<o;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function a(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o);c=e.offsetArgs[f].array,l="+q"+f;case"array":l="p"+c+l;var h="l"+o,d="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(i.push(["var ",h,"=",d,".get(",l,")"].join("")),n=n.replace(u,h),a.push([d,".set(",l,",",h,")"].join(""))):n=n.replace(u,[d,".get(",l,")"].join("")):n=n.replace(u,[d,"[",l,"]"].join("")):"generic"===r[c]?(i.push(["var ",h,"=",d,".get(",l,")"].join("")),n=n.replace(u,h),s.lvalue&&a.push([d,".set(",l,",",h,")"].join(""))):(i.push(["var ",h,"=",d,"[",l,"]"].join("")),n=n.replace(u,h),s.lvalue&&a.push([d,"[",l,"]=",h].join("")));else{for(var p=[s.name],y=[l],v=0;v<Math.abs(e.arrayBlockIndices[c]);v++)p.push("\\s*\\[([^\\]]+)\\]"),y.push("$"+(v+1)+"*t"+c+"b"+v);if(u=new RegExp(p.join(""),"g"),l=y.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[d,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,a.join("\n")].join("\n").trim()}function o(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}t.exports=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,s=new Array(t.arrayArgs.length),u=new Array(t.arrayArgs.length),l=0;l<t.arrayArgs.length;++l)u[l]=e[2*l],s[l]=e[2*l+1];var c=[],f=[],h=[],d=[],p=[];for(l=0;l<t.arrayArgs.length;++l){t.arrayBlockIndices[l]<0?(h.push(0),d.push(r),c.push(r),f.push(r+t.arrayBlockIndices[l])):(h.push(t.arrayBlockIndices[l]),d.push(t.arrayBlockIndices[l]+r),c.push(0),f.push(t.arrayBlockIndices[l]));for(var y=[],v=0;v<s[l].length;v++)h[l]<=s[l][v]&&s[l][v]<d[l]&&y.push(s[l][v]-h[l]);p.push(y)}var g=["SS"],m=["'use strict'"],b=[];for(v=0;v<r;++v)b.push(["s",v,"=SS[",v,"]"].join(""));for(l=0;l<t.arrayArgs.length;++l){g.push("a"+l),g.push("t"+l),g.push("p"+l);for(v=0;v<r;++v)b.push(["t",l,"p",v,"=t",l,"[",h[l]+v,"]"].join(""));for(v=0;v<Math.abs(t.arrayBlockIndices[l]);++v)b.push(["t",l,"b",v,"=t",l,"[",c[l]+v,"]"].join(""))}for(l=0;l<t.scalarArgs.length;++l)g.push("Y"+l);if(t.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),t.indexArgs.length>0){var _=new Array(r);for(l=0;l<r;++l)_[l]="0";b.push(["index=[",_.join(","),"]"].join(""))}for(l=0;l<t.offsetArgs.length;++l){var w=t.offsetArgs[l],k=[];for(v=0;v<w.offset.length;++v)0!==w.offset[v]&&(1===w.offset[v]?k.push(["t",w.array,"p",v].join("")):k.push([w.offset[v],"*t",w.array,"p",v].join("")));0===k.length?b.push("q"+l+"=0"):b.push(["q",l,"=",k.join("+")].join(""))}var x=n([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((b=b.concat(x)).length>0&&m.push("var "+b.join(",")),l=0;l<t.arrayArgs.length;++l)m.push("p"+l+"|=0");t.pre.body.length>3&&m.push(a(t.pre,t,u));var E=a(t.body,t,u),S=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(p);S<r?m.push(function(t,e,r,n){for(var a=e.length,o=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;c<o;++c)l.push(["var offset",c,"=p",c].join(""));for(c=t;c<a;++c)l.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",e[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",e[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",e[c],"]=j",c].join(""));for(c=0;c<o;++c){for(var f=["offset"+c],h=t;h<a;++h)f.push(["j",h,"*t",c,"p",e[h]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}for(l.push(i(e,r,n)),c=t;c<a;++c)l.push("}");return l.join("\n")}(S,p[0],t,E)):m.push(i(p[0],t,E)),t.post.body.length>3&&m.push(a(t.post,t,u)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+m.join("\n")+"\n----------");var P=[t.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",S,o(u)].join("");return new Function(["function ",P,"(",g.join(","),"){",m.join("\n"),"} return ",P].join(""))()}},function(t,e,r){"use strict";t.exports=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,n){var i=0|e[n];if(i<=0)return[];var a,o=new Array(i);if(n===e.length-1)for(a=0;a<i;++a)o[a]=r;else for(a=0;a<i;++a)o[a]=t(e,r,n+1);return o}(t,e,0)}return[]}},function(t,e,r){var n=r(84);function i(t,e,r,i,a,o){var s,u,l,c,f,h,d,p,y,v,g,m,b,_,w,k,x,E,S,P,T,A,B,R;for(t|=0,e|=0,a|=0,o|=0,s=r|=0,u=n.log2(s),E=0;E<e;++E){for(d=s>>1,f=0,l=0;l<s-1;l++){for(l<f&&(b=i[a+l],i[a+l]=i[a+f],i[a+f]=b,b=i[o+l],i[o+l]=i[o+f],i[o+f]=b),h=d;h<=f;)f-=h,h>>=1;f+=h}for(g=-1,m=0,v=1,p=0;p<u;p++){for(y=v,v<<=1,k=1,x=0,f=0;f<y;f++){for(l=f;l<s;l+=v)S=i[a+(c=l+y)],P=i[o+c],T=i[a+l],A=i[o+l],_=(B=k*(S+P))-P*(k+x),w=B+(R=S*(x-k)),i[a+c]=T-_,i[o+c]=A-w,i[a+l]+=_,i[o+l]+=w;R=k*(m-g),k=(B=g*(k+x))-x*(g+m),x=B+R}m=Math.sqrt((1-g)/2),t<0&&(m=-m),g=Math.sqrt((1+g)/2)}if(t<0){var L=1/s;for(l=0;l<s;l++)i[a+l]*=L,i[o+l]*=L}a+=r,o+=r}}t.exports=function(t,e,r,a,o,s,u){t|=0,e|=0,r|=0,o|=0,s|=0,n.isPow2(r)?i(t,e,r,a,o,s):function(t,e,r,a,o,s,u){t|=0,e|=0,r|=0,o|=0,s|=0,u|=0;var l,c,f,h,d,p,y,v,g,m=n.nextPow2(2*r+1),b=u,_=b+r,w=_+r,k=w+m,x=k+m,E=x+m,S=-t*Math.PI/r;for(g=0;g<r;++g)c=S*(g*g%(2*r)),h=Math.cos(c),d=Math.sin(c),a[x+(m-g)]=a[x+g]=a[b+g]=h,a[E+(m-g)]=a[E+g]=a[_+g]=d;for(g=r;g<=m-r;++g)a[x+g]=0;for(g=r;g<=m-r;++g)a[E+g]=0;i(1,1,m,a,x,E),S=t<0?1/r:1;for(l=0;l<e;++l){for(g=0;g<r;++g)c=a[o+g],f=a[s+g],h=a[b+g],d=-a[_+g],p=h*(c+f),y=c*(d-h),v=f*(h+d),a[w+g]=p-v,a[k+g]=p+y;for(g=r;g<m;++g)a[w+g]=0;for(g=r;g<m;++g)a[k+g]=0;for(i(1,1,m,a,w,k),g=0;g<m;++g)c=a[w+g],f=a[k+g],h=a[x+g],d=a[E+g],p=h*(c+f),y=c*(d-h),v=f*(h+d),a[w+g]=p-v,a[k+g]=p+y;for(i(-1,1,m,a,w,k),g=0;g<r;++g)c=a[w+g],f=a[k+g],h=a[b+g],d=-a[_+g],p=h*(c+f),y=c*(d-h),v=f*(h+d),a[o+g]=S*(p-v),a[s+g]=S*(p+y);o+=r,s+=r}}(t,e,r,a,o,s,u)},t.exports.scratchMemory=function(t){return n.isPow2(t)?0:2*t+4*n.nextPow2(2*t+1)}},function(t,e,r){"use strict";t.exports=function(t,e,r,s,u){void 0===s&&(s=1);void 0===u&&(u=0);var l=1!==s,c=0!==u,f=a(t),h=a(e),d=a(r);!function(t,e,r){var n=i(t),a=i(e),o=i(r);if(n[0]!==a[0]||n[1]!==o[1]||a[1]!==o[0])throw new Error("Mismatched array shapes for matrix product")}(t,e,r);var p=[f,h,d,l,c].join(":"),y=o[p];y||(y=o[p]=n(f,h,d,l,c));return y(t,e,r,s,u)};var n=r(127);function i(t){return Array.isArray(t)?[t.length,t[0].length]:t.shape}function a(t){if(Array.isArray(t)){if(Array.isArray(t))return["r","native"]}else if(t.shape&&2===t.shape.length)return t.order[0]?["r",t.dtype]:["c",t.dtype];throw new Error("Unrecognized data type")}var o={}},function(t,e,r){"use strict";t.exports=function(t,e,r,u,l){var c=["gemm",t[0],t[1],"a",e[0],e[1],"b",r[0],r[1],u?"alpha":"",l?"beta":""].join(""),f=["function ",c,"(o,a,b,A,B){","var ",n("o",t),n("a",e),n("b",r),"i,j,k;"];"r"===e[0]&&"c"===r[0]?f.push.apply(f,function(t,e,r,n,u){var l=[],c="r"===t[0]?[1,0]:[0,1],f=[1,0],h=[0,1],d=["i","j"];l.push.apply(l,i(c,"o",t)),c[1]?(l.push("for(j=0;j<od1;++j){"),l.push("for(i=0;i<od0;++i){")):(l.push("for(i=0;i<od0;++i){"),l.push("for(j=0;j<od1;++j){"));l.push.apply(l,i(f,"a",e,"i")),l.push.apply(l,i(h,"b",r,void 0,"j")),l.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",s(f,"a",e,"i","k"),"*",s(h,"b",r,"k","j"),";"),l.push.apply(l,a(f,"a",e,0,"k")),l.push.apply(l,a(h,"b",r,0,"k")),l.push("}"),n&&l.push("r*=A;");u&&l.push("r+=B*",s(c,"o",t,"i","j"),";");return l.push.apply(l,o(c,"o",t,"i","j","r")),l.push.apply(l,a(c,"o",t,0,d[1])),l.push("}"),l.push.apply(l,a(c,"o",t,1,d[0])),l.push("}"),l}(t,e,r,u,l)):f.push.apply(f,function(t,e,r,n,u){var l=[],c=["od0","od1","ad1"],f=[1,0],h=[1,0],d=[0,1];l.push.apply(l,function(t,e){var r,n=[],u="r"===t[0]?[1,0]:[0,1];e&&n.push("if(B!==1.0){");n.push.apply(n,i(u,"o",t)),u[0]?(n.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),r=["i","j"]):(n.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),r=["j","i"]);e?n.push.apply(n,o(u,"o",t,"i","j","B*"+s(u,"o",t,"i","j"))):n.push.apply(n,o(u,"o",t,"i","j","0"));n.push.apply(n,a(u,"o",t,0,r[1])),n.push("}"),n.push.apply(n,a(u,"o",t,1,r[0])),n.push("}"),e&&n.push("}");return n}(t,u));for(var p=0;p<3;++p)l.push("for(var i",p,"=",c[p],";i",p,">0;){","var w",p,"=",32,";","if(i",p,"<",32,"){","w",p,"=i",p,";","i",p,"=0;","}else{","i",p,"-=",32,";","}");l.push.apply(l,i(f,"o",t,"i0","i1","w1")),l.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),l.push.apply(l,i(h,"a",e,"(i0+i)","i2")),l.push.apply(l,i(d,"b",r,"i2","(i1+j)")),l.push("for(k=0;k<w2;++k){"),l.push("r+=",s(h,"a",e,"(i0+i)","(i2+k)"),"*",s(d,"b",r,"(i2+k)","(i1+j)"),";"),l.push.apply(l,a(h,"a",e,0,"(i2+k)")),l.push.apply(l,a(d,"b",r,0,"(i2+k)")),l.push("}");var y="r";n&&(y="A*r");return l.push.apply(l,o(f,"o",t,"(i0+i)","(i1+j)",y+"+"+s(f,"o",t,"(i0+i)","(i1+j)"))),l.push.apply(l,a(f,"o",t,0,"(i1+j)")),l.push("}"),l.push.apply(l,a(f,"o",t,1,"(i0+i)")),l.push("}}}}"),l}(t,e,r,u,l));return f.push("}return ",c),new Function(f.join(""))()};function n(t,e){return"native"===e[1]?[t,"d0=",t,".length,",t,"d1=",t,"[0].length,"].join(""):[t,"d0=",t,".shape[0],",t,"d1=",t,".shape[1],",t,"s0=",t,".stride[0],",t,"s1=",t,".stride[1],",t,"o=",t,".offset,",t,"d=",t,".data,"].join("")}function i(t,e,r,n,i,a){var o=[];return"native"===r[1]?t[0]&&(n?o.push("var ",e,"p=",e,"[",n,"];"):o.push("var ",e,"p=",e,"[0];")):n&&i?a?o.push("var ",e,"t0=",e,"s",t[0],",",e,"t1=",e,"s",t[1],"-",e,"s",t[0],"*",a,",",e,"p=",e,"o+",n,"*",e,"s0+",i,"*",e,"s1;"):o.push("var ",e,"t0=",e,"s",t[0],",",e,"p=",e,"o+",n,"*",e,"s0+",i,"*",e,"s1;"):n?o.push("var ",e,"t0=",e,"s",t[0],",",e,"p=",e,"o+",n,"*",e,"s0;"):i?o.push("var ",e,"t0=",e,"s",t[0],",",e,"p=",e,"o+",i,"*",e,"s1;"):o.push("var ",e,"t0=",e,"s",t[0],",",e,"t1=",e,"s",t[1],"-",e,"s",t[0],"*",e,"d",t[0],",",e,"p=",e,"o;"),o}function a(t,e,r,n,i){var a=[];return"native"===r[1]?t[0]&&1===n&&a.push(e,"p=",e,"[",i,"+1]"):a.push(e,"p+=",e,"t",n,";"),a}function o(t,e,r,n,i,a){var o=[];return"native"===r[1]?t[0]?o.push(e,"p[",i,"]=",a,";"):o.push(e,"[",n,"][",i,"]=",a,";"):"generic"===r[1]?o.push(e,"d.set(",e,"p,",a,");"):o.push(e,"d[",e,"p]=",a,";"),o}function s(t,e,r,n,i){var a=[];return"native"===r[1]?t[0]?a.push(e,"p[",i,"]"):a.push(e,"[",n,"][",i,"]"):"generic"===r[1]?a.push(e,"d.get(",e,"p)"):a.push(e,"d[",e,"p]"),a.join("")}},function(t,e,r){(function(t,n){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",l="[object Array]",c="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",y="[object Map]",v="[object Number]",g="[object Object]",m="[object RegExp]",b="[object Set]",_="[object String]",w="[object Symbol]",k="[object WeakMap]",x="[object ArrayBuffer]",E="[object DataView]",S="[object Float32Array]",P="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",B="[object Int32Array]",R="[object Uint8Array]",L="[object Uint16Array]",C="[object Uint32Array]",D=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,O=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,j=RegExp(U.source),M=RegExp(N.source),F=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,V=/<%=([\s\S]+?)%>/g,W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/,$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,q=RegExp(Y.source),G=/^\s+|\s+$/g,X=/^\s+/,K=/\s+$/,Q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,ut=/^(?:0|[1-9]\d*)$/,lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,ft=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="[\\ud800-\\udfff]",yt="["+dt+"]",vt="["+ht+"]",gt="\\d+",mt="[\\u2700-\\u27bf]",bt="[a-z\\xdf-\\xf6\\xf8-\\xff]",_t="[^\\ud800-\\udfff"+dt+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",wt="\\ud83c[\\udffb-\\udfff]",kt="[^\\ud800-\\udfff]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Et="[\\ud800-\\udbff][\\udc00-\\udfff]",St="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Pt="(?:"+bt+"|"+_t+")",Tt="(?:"+St+"|"+_t+")",At="(?:"+vt+"|"+wt+")"+"?",Bt="[\\ufe0e\\ufe0f]?"+At+("(?:\\u200d(?:"+[kt,xt,Et].join("|")+")[\\ufe0e\\ufe0f]?"+At+")*"),Rt="(?:"+[mt,xt,Et].join("|")+")"+Bt,Lt="(?:"+[kt+vt+"?",vt,xt,Et,pt].join("|")+")",Ct=RegExp("['‚Äô]","g"),Dt=RegExp(vt,"g"),It=RegExp(wt+"(?="+wt+")|"+Lt+Bt,"g"),Ot=RegExp([St+"?"+bt+"+(?:['‚Äô](?:d|ll|m|re|s|t|ve))?(?="+[yt,St,"$"].join("|")+")",Tt+"+(?:['‚Äô](?:D|LL|M|RE|S|T|VE))?(?="+[yt,St+Pt,"$"].join("|")+")",St+"?"+Pt+"+(?:['‚Äô](?:d|ll|m|re|s|t|ve))?",St+"+(?:['‚Äô](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,Rt].join("|"),"g"),Ut=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),Nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,jt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mt=-1,Ft={};Ft[S]=Ft[P]=Ft[T]=Ft[A]=Ft[B]=Ft[R]=Ft["[object Uint8ClampedArray]"]=Ft[L]=Ft[C]=!0,Ft[u]=Ft[l]=Ft[x]=Ft[c]=Ft[E]=Ft[f]=Ft[h]=Ft[d]=Ft[y]=Ft[v]=Ft[g]=Ft[m]=Ft[b]=Ft[_]=Ft[k]=!1;var Ht={};Ht[u]=Ht[l]=Ht[x]=Ht[E]=Ht[c]=Ht[f]=Ht[S]=Ht[P]=Ht[T]=Ht[A]=Ht[B]=Ht[y]=Ht[v]=Ht[g]=Ht[m]=Ht[b]=Ht[_]=Ht[w]=Ht[R]=Ht["[object Uint8ClampedArray]"]=Ht[L]=Ht[C]=!0,Ht[h]=Ht[d]=Ht[k]=!1;var Vt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wt=parseFloat,zt=parseInt,$t="object"==typeof t&&t&&t.Object===Object&&t,Yt="object"==typeof self&&self&&self.Object===Object&&self,qt=$t||Yt||Function("return this")(),Gt=e&&!e.nodeType&&e,Xt=Gt&&"object"==typeof n&&n&&!n.nodeType&&n,Kt=Xt&&Xt.exports===Gt,Qt=Kt&&$t.process,Jt=function(){try{var t=Xt&&Xt.require&&Xt.require("util").types;return t||Qt&&Qt.binding&&Qt.binding("util")}catch(t){}}(),Zt=Jt&&Jt.isArrayBuffer,te=Jt&&Jt.isDate,ee=Jt&&Jt.isMap,re=Jt&&Jt.isRegExp,ne=Jt&&Jt.isSet,ie=Jt&&Jt.isTypedArray;function ae(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function oe(t,e,r,n){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(n,o,r(o),t)}return n}function se(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function ue(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function le(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function ce(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function fe(t,e){return!!(null==t?0:t.length)&&we(t,e,0)>-1}function he(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function de(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function pe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function ye(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}function ve(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function ge(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var me=Se("length");function be(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function _e(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function we(t,e,r){return e==e?function(t,e,r){var n=r-1,i=t.length;for(;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):_e(t,xe,r)}function ke(t,e,r,n){for(var i=r-1,a=t.length;++i<a;)if(n(t[i],e))return i;return-1}function xe(t){return t!=t}function Ee(t,e){var r=null==t?0:t.length;return r?Ae(t,e)/r:NaN}function Se(t){return function(e){return null==e?void 0:e[t]}}function Pe(t){return function(e){return null==t?void 0:t[e]}}function Te(t,e,r,n,i){return i(t,(function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)})),r}function Ae(t,e){for(var r,n=-1,i=t.length;++n<i;){var a=e(t[n]);void 0!==a&&(r=void 0===r?a:r+a)}return r}function Be(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Re(t){return function(e){return t(e)}}function Le(t,e){return de(e,(function(e){return t[e]}))}function Ce(t,e){return t.has(e)}function De(t,e){for(var r=-1,n=t.length;++r<n&&we(e,t[r],0)>-1;);return r}function Ie(t,e){for(var r=t.length;r--&&we(e,t[r],0)>-1;);return r}function Oe(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}var Ue=Pe({"√Ä":"A","√Å":"A","√Ç":"A","√É":"A","√Ñ":"A","√Ö":"A","√†":"a","√°":"a","√¢":"a","√£":"a","√§":"a","√•":"a","√á":"C","√ß":"c","√ê":"D","√∞":"d","√à":"E","√â":"E","√ä":"E","√ã":"E","√®":"e","√©":"e","√™":"e","√´":"e","√å":"I","√ç":"I","√é":"I","√è":"I","√¨":"i","√≠":"i","√Æ":"i","√Ø":"i","√ë":"N","√±":"n","√í":"O","√ì":"O","√î":"O","√ï":"O","√ñ":"O","√ò":"O","√≤":"o","√≥":"o","√¥":"o","√µ":"o","√∂":"o","√∏":"o","√ô":"U","√ö":"U","√õ":"U","√ú":"U","√π":"u","√∫":"u","√ª":"u","√º":"u","√ù":"Y","√Ω":"y","√ø":"y","√Ü":"Ae","√¶":"ae","√û":"Th","√æ":"th","√ü":"ss","ƒÄ":"A","ƒÇ":"A","ƒÑ":"A","ƒÅ":"a","ƒÉ":"a","ƒÖ":"a","ƒÜ":"C","ƒà":"C","ƒä":"C","ƒå":"C","ƒá":"c","ƒâ":"c","ƒã":"c","ƒç":"c","ƒé":"D","ƒê":"D","ƒè":"d","ƒë":"d","ƒí":"E","ƒî":"E","ƒñ":"E","ƒò":"E","ƒö":"E","ƒì":"e","ƒï":"e","ƒó":"e","ƒô":"e","ƒõ":"e","ƒú":"G","ƒû":"G","ƒ†":"G","ƒ¢":"G","ƒù":"g","ƒü":"g","ƒ°":"g","ƒ£":"g","ƒ§":"H","ƒ¶":"H","ƒ•":"h","ƒß":"h","ƒ®":"I","ƒ™":"I","ƒ¨":"I","ƒÆ":"I","ƒ∞":"I","ƒ©":"i","ƒ´":"i","ƒ≠":"i","ƒØ":"i","ƒ±":"i","ƒ¥":"J","ƒµ":"j","ƒ∂":"K","ƒ∑":"k","ƒ∏":"k","ƒπ":"L","ƒª":"L","ƒΩ":"L","ƒø":"L","≈Å":"L","ƒ∫":"l","ƒº":"l","ƒæ":"l","≈Ä":"l","≈Ç":"l","≈É":"N","≈Ö":"N","≈á":"N","≈ä":"N","≈Ñ":"n","≈Ü":"n","≈à":"n","≈ã":"n","≈å":"O","≈é":"O","≈ê":"O","≈ç":"o","≈è":"o","≈ë":"o","≈î":"R","≈ñ":"R","≈ò":"R","≈ï":"r","≈ó":"r","≈ô":"r","≈ö":"S","≈ú":"S","≈û":"S","≈†":"S","≈õ":"s","≈ù":"s","≈ü":"s","≈°":"s","≈¢":"T","≈§":"T","≈¶":"T","≈£":"t","≈•":"t","≈ß":"t","≈®":"U","≈™":"U","≈¨":"U","≈Æ":"U","≈∞":"U","≈≤":"U","≈©":"u","≈´":"u","≈≠":"u","≈Ø":"u","≈±":"u","≈≥":"u","≈¥":"W","≈µ":"w","≈∂":"Y","≈∑":"y","≈∏":"Y","≈π":"Z","≈ª":"Z","≈Ω":"Z","≈∫":"z","≈º":"z","≈æ":"z","ƒ≤":"IJ","ƒ≥":"ij","≈í":"Oe","≈ì":"oe","≈â":"'n","≈ø":"s"}),Ne=Pe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function je(t){return"\\"+Vt[t]}function Me(t){return Ut.test(t)}function Fe(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function He(t,e){return function(r){return t(e(r))}}function Ve(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var s=t[r];s!==e&&s!==o||(t[r]=o,a[i++]=r)}return a}function We(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function ze(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function $e(t){return Me(t)?function(t){var e=It.lastIndex=0;for(;It.test(t);)++e;return e}(t):me(t)}function Ye(t){return Me(t)?function(t){return t.match(It)||[]}(t):function(t){return t.split("")}(t)}var qe=Pe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ge=function t(e){var r,n=(e=null==e?qt:Ge.defaults(qt.Object(),e,Ge.pick(qt,jt))).Array,i=e.Date,ht=e.Error,dt=e.Function,pt=e.Math,yt=e.Object,vt=e.RegExp,gt=e.String,mt=e.TypeError,bt=n.prototype,_t=dt.prototype,wt=yt.prototype,kt=e["__core-js_shared__"],xt=_t.toString,Et=wt.hasOwnProperty,St=0,Pt=(r=/[^.]+$/.exec(kt&&kt.keys&&kt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Tt=wt.toString,At=xt.call(yt),Bt=qt._,Rt=vt("^"+xt.call(Et).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=Kt?e.Buffer:void 0,It=e.Symbol,Ut=e.Uint8Array,Vt=Lt?Lt.allocUnsafe:void 0,$t=He(yt.getPrototypeOf,yt),Yt=yt.create,Gt=wt.propertyIsEnumerable,Xt=bt.splice,Qt=It?It.isConcatSpreadable:void 0,Jt=It?It.iterator:void 0,me=It?It.toStringTag:void 0,Pe=function(){try{var t=Zi(yt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Xe=e.clearTimeout!==qt.clearTimeout&&e.clearTimeout,Ke=i&&i.now!==qt.Date.now&&i.now,Qe=e.setTimeout!==qt.setTimeout&&e.setTimeout,Je=pt.ceil,Ze=pt.floor,tr=yt.getOwnPropertySymbols,er=Lt?Lt.isBuffer:void 0,rr=e.isFinite,nr=bt.join,ir=He(yt.keys,yt),ar=pt.max,or=pt.min,sr=i.now,ur=e.parseInt,lr=pt.random,cr=bt.reverse,fr=Zi(e,"DataView"),hr=Zi(e,"Map"),dr=Zi(e,"Promise"),pr=Zi(e,"Set"),yr=Zi(e,"WeakMap"),vr=Zi(yt,"create"),gr=yr&&new yr,mr={},br=Pa(fr),_r=Pa(hr),wr=Pa(dr),kr=Pa(pr),xr=Pa(yr),Er=It?It.prototype:void 0,Sr=Er?Er.valueOf:void 0,Pr=Er?Er.toString:void 0;function Tr(t){if(zo(t)&&!Do(t)&&!(t instanceof Lr)){if(t instanceof Rr)return t;if(Et.call(t,"__wrapped__"))return Ta(t)}return new Rr(t)}var Ar=function(){function t(){}return function(e){if(!Wo(e))return{};if(Yt)return Yt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Br(){}function Rr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Lr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Cr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Dr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ir(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Or(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ir;++e<r;)this.add(t[e])}function Ur(t){var e=this.__data__=new Dr(t);this.size=e.size}function Nr(t,e){var r=Do(t),n=!r&&Co(t),i=!r&&!n&&No(t),a=!r&&!n&&!i&&Jo(t),o=r||n||i||a,s=o?Be(t.length,gt):[],u=s.length;for(var l in t)!e&&!Et.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oa(l,u))||s.push(l);return s}function jr(t){var e=t.length;return e?t[Un(0,e-1)]:void 0}function Mr(t,e){return xa(gi(t),Gr(e,0,t.length))}function Fr(t){return xa(gi(t))}function Hr(t,e,r){(void 0!==r&&!Bo(t[e],r)||void 0===r&&!(e in t))&&Yr(t,e,r)}function Vr(t,e,r){var n=t[e];Et.call(t,e)&&Bo(n,r)&&(void 0!==r||e in t)||Yr(t,e,r)}function Wr(t,e){for(var r=t.length;r--;)if(Bo(t[r][0],e))return r;return-1}function zr(t,e,r,n){return Zr(t,(function(t,i,a){e(n,t,r(t),a)})),n}function $r(t,e){return t&&mi(e,_s(e),t)}function Yr(t,e,r){"__proto__"==e&&Pe?Pe(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function qr(t,e){for(var r=-1,i=e.length,a=n(i),o=null==t;++r<i;)a[r]=o?void 0:ys(t,e[r]);return a}function Gr(t,e,r){return t==t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t}function Xr(t,e,r,n,i,a){var o,s=1&e,l=2&e,h=4&e;if(r&&(o=i?r(t,n,i,a):r(t)),void 0!==o)return o;if(!Wo(t))return t;var k=Do(t);if(k){if(o=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Et.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!s)return gi(t,o)}else{var D=ra(t),I=D==d||D==p;if(No(t))return fi(t,s);if(D==g||D==u||I&&!i){if(o=l||I?{}:ia(t),!s)return l?function(t,e){return mi(t,ea(t),e)}(t,function(t,e){return t&&mi(e,ws(e),t)}(o,t)):function(t,e){return mi(t,ta(t),e)}(t,$r(o,t))}else{if(!Ht[D])return i?t:{};o=function(t,e,r){var n=t.constructor;switch(e){case x:return hi(t);case c:case f:return new n(+t);case E:return function(t,e){var r=e?hi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case S:case P:case T:case A:case B:case R:case"[object Uint8ClampedArray]":case L:case C:return di(t,r);case y:return new n;case v:case _:return new n(t);case m:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case b:return new n;case w:return i=t,Sr?yt(Sr.call(i)):{}}var i}(t,D,s)}}a||(a=new Ur);var O=a.get(t);if(O)return O;a.set(t,o),Xo(t)?t.forEach((function(n){o.add(Xr(n,e,r,n,t,a))})):$o(t)&&t.forEach((function(n,i){o.set(i,Xr(n,e,r,i,t,a))}));var U=k?void 0:(h?l?Yi:$i:l?ws:_s)(t);return se(U||t,(function(n,i){U&&(n=t[i=n]),Vr(o,i,Xr(n,e,r,i,t,a))})),o}function Kr(t,e,r){var n=r.length;if(null==t)return!n;for(t=yt(t);n--;){var i=r[n],a=e[i],o=t[i];if(void 0===o&&!(i in t)||!a(o))return!1}return!0}function Qr(t,e,r){if("function"!=typeof t)throw new mt(a);return ba((function(){t.apply(void 0,r)}),e)}function Jr(t,e,r,n){var i=-1,a=fe,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;r&&(e=de(e,Re(r))),n?(a=he,o=!1):e.length>=200&&(a=Ce,o=!1,e=new Or(e));t:for(;++i<s;){var c=t[i],f=null==r?c:r(c);if(c=n||0!==c?c:0,o&&f==f){for(var h=l;h--;)if(e[h]===f)continue t;u.push(c)}else a(e,f,n)||u.push(c)}return u}Tr.templateSettings={escape:F,evaluate:H,interpolate:V,variable:"",imports:{_:Tr}},Tr.prototype=Br.prototype,Tr.prototype.constructor=Tr,Rr.prototype=Ar(Br.prototype),Rr.prototype.constructor=Rr,Lr.prototype=Ar(Br.prototype),Lr.prototype.constructor=Lr,Cr.prototype.clear=function(){this.__data__=vr?vr(null):{},this.size=0},Cr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Cr.prototype.get=function(t){var e=this.__data__;if(vr){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Et.call(e,t)?e[t]:void 0},Cr.prototype.has=function(t){var e=this.__data__;return vr?void 0!==e[t]:Et.call(e,t)},Cr.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vr&&void 0===e?"__lodash_hash_undefined__":e,this},Dr.prototype.clear=function(){this.__data__=[],this.size=0},Dr.prototype.delete=function(t){var e=this.__data__,r=Wr(e,t);return!(r<0)&&(r==e.length-1?e.pop():Xt.call(e,r,1),--this.size,!0)},Dr.prototype.get=function(t){var e=this.__data__,r=Wr(e,t);return r<0?void 0:e[r][1]},Dr.prototype.has=function(t){return Wr(this.__data__,t)>-1},Dr.prototype.set=function(t,e){var r=this.__data__,n=Wr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Ir.prototype.clear=function(){this.size=0,this.__data__={hash:new Cr,map:new(hr||Dr),string:new Cr}},Ir.prototype.delete=function(t){var e=Qi(this,t).delete(t);return this.size-=e?1:0,e},Ir.prototype.get=function(t){return Qi(this,t).get(t)},Ir.prototype.has=function(t){return Qi(this,t).has(t)},Ir.prototype.set=function(t,e){var r=Qi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Or.prototype.add=Or.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Or.prototype.has=function(t){return this.__data__.has(t)},Ur.prototype.clear=function(){this.__data__=new Dr,this.size=0},Ur.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Ur.prototype.get=function(t){return this.__data__.get(t)},Ur.prototype.has=function(t){return this.__data__.has(t)},Ur.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Dr){var n=r.__data__;if(!hr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ir(n)}return r.set(t,e),this.size=r.size,this};var Zr=wi(un),tn=wi(ln,!0);function en(t,e){var r=!0;return Zr(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function rn(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(null!=o&&(void 0===s?o==o&&!Qo(o):r(o,s)))var s=o,u=a}return u}function nn(t,e){var r=[];return Zr(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function an(t,e,r,n,i){var a=-1,o=t.length;for(r||(r=aa),i||(i=[]);++a<o;){var s=t[a];e>0&&r(s)?e>1?an(s,e-1,r,n,i):pe(i,s):n||(i[i.length]=s)}return i}var on=ki(),sn=ki(!0);function un(t,e){return t&&on(t,e,_s)}function ln(t,e){return t&&sn(t,e,_s)}function cn(t,e){return ce(e,(function(e){return Fo(t[e])}))}function fn(t,e){for(var r=0,n=(e=si(e,t)).length;null!=t&&r<n;)t=t[Sa(e[r++])];return r&&r==n?t:void 0}function hn(t,e,r){var n=e(t);return Do(t)?n:pe(n,r(t))}function dn(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":me&&me in yt(t)?function(t){var e=Et.call(t,me),r=t[me];try{t[me]=void 0;var n=!0}catch(t){}var i=Tt.call(t);n&&(e?t[me]=r:delete t[me]);return i}(t):function(t){return Tt.call(t)}(t)}function pn(t,e){return t>e}function yn(t,e){return null!=t&&Et.call(t,e)}function vn(t,e){return null!=t&&e in yt(t)}function gn(t,e,r){for(var i=r?he:fe,a=t[0].length,o=t.length,s=o,u=n(o),l=1/0,c=[];s--;){var f=t[s];s&&e&&(f=de(f,Re(e))),l=or(f.length,l),u[s]=!r&&(e||a>=120&&f.length>=120)?new Or(s&&f):void 0}f=t[0];var h=-1,d=u[0];t:for(;++h<a&&c.length<l;){var p=f[h],y=e?e(p):p;if(p=r||0!==p?p:0,!(d?Ce(d,y):i(c,y,r))){for(s=o;--s;){var v=u[s];if(!(v?Ce(v,y):i(t[s],y,r)))continue t}d&&d.push(y),c.push(p)}}return c}function mn(t,e,r){var n=null==(t=ya(t,e=si(e,t)))?t:t[Sa(ja(e))];return null==n?void 0:ae(n,t,r)}function bn(t){return zo(t)&&dn(t)==u}function _n(t,e,r,n,i){return t===e||(null==t||null==e||!zo(t)&&!zo(e)?t!=t&&e!=e:function(t,e,r,n,i,a){var o=Do(t),s=Do(e),d=o?l:ra(t),p=s?l:ra(e),k=(d=d==u?g:d)==g,S=(p=p==u?g:p)==g,P=d==p;if(P&&No(t)){if(!No(e))return!1;o=!0,k=!1}if(P&&!k)return a||(a=new Ur),o||Jo(t)?Wi(t,e,r,n,i,a):function(t,e,r,n,i,a,o){switch(r){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!a(new Ut(t),new Ut(e)));case c:case f:case v:return Bo(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case _:return t==e+"";case y:var s=Fe;case b:var u=1&n;if(s||(s=We),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;n|=2,o.set(t,e);var d=Wi(s(t),s(e),n,i,a,o);return o.delete(t),d;case w:if(Sr)return Sr.call(t)==Sr.call(e)}return!1}(t,e,d,r,n,i,a);if(!(1&r)){var T=k&&Et.call(t,"__wrapped__"),A=S&&Et.call(e,"__wrapped__");if(T||A){var B=T?t.value():t,R=A?e.value():e;return a||(a=new Ur),i(B,R,r,n,a)}}if(!P)return!1;return a||(a=new Ur),function(t,e,r,n,i,a){var o=1&r,s=$i(t),u=s.length,l=$i(e).length;if(u!=l&&!o)return!1;var c=u;for(;c--;){var f=s[c];if(!(o?f in e:Et.call(e,f)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var p=!0;a.set(t,e),a.set(e,t);var y=o;for(;++c<u;){f=s[c];var v=t[f],g=e[f];if(n)var m=o?n(g,v,f,e,t,a):n(v,g,f,t,e,a);if(!(void 0===m?v===g||i(v,g,r,n,a):m)){p=!1;break}y||(y="constructor"==f)}if(p&&!y){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,r,n,i,a)}(t,e,r,n,_n,i))}function wn(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=yt(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var u=(s=r[i])[0],l=t[u],c=s[1];if(o&&s[2]){if(void 0===l&&!(u in t))return!1}else{var f=new Ur;if(n)var h=n(l,c,u,t,e,f);if(!(void 0===h?_n(c,l,3,n,f):h))return!1}}return!0}function kn(t){return!(!Wo(t)||(e=t,Pt&&Pt in e))&&(Fo(t)?Rt:ot).test(Pa(t));var e}function xn(t){return"function"==typeof t?t:null==t?Ys:"object"==typeof t?Do(t)?Bn(t[0],t[1]):An(t):eu(t)}function En(t){if(!fa(t))return ir(t);var e=[];for(var r in yt(t))Et.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Sn(t){if(!Wo(t))return function(t){var e=[];if(null!=t)for(var r in yt(t))e.push(r);return e}(t);var e=fa(t),r=[];for(var n in t)("constructor"!=n||!e&&Et.call(t,n))&&r.push(n);return r}function Pn(t,e){return t<e}function Tn(t,e){var r=-1,i=Oo(t)?n(t.length):[];return Zr(t,(function(t,n,a){i[++r]=e(t,n,a)})),i}function An(t){var e=Ji(t);return 1==e.length&&e[0][2]?da(e[0][0],e[0][1]):function(r){return r===t||wn(r,t,e)}}function Bn(t,e){return ua(t)&&ha(e)?da(Sa(t),e):function(r){var n=ys(r,t);return void 0===n&&n===e?vs(r,t):_n(e,n,3)}}function Rn(t,e,r,n,i){t!==e&&on(e,(function(a,o){if(i||(i=new Ur),Wo(a))!function(t,e,r,n,i,a,o){var s=ga(t,r),u=ga(e,r),l=o.get(u);if(l)return void Hr(t,r,l);var c=a?a(s,u,r+"",t,e,o):void 0,f=void 0===c;if(f){var h=Do(u),d=!h&&No(u),p=!h&&!d&&Jo(u);c=u,h||d||p?Do(s)?c=s:Uo(s)?c=gi(s):d?(f=!1,c=fi(u,!0)):p?(f=!1,c=di(u,!0)):c=[]:qo(u)||Co(u)?(c=s,Co(s)?c=os(s):Wo(s)&&!Fo(s)||(c=ia(u))):f=!1}f&&(o.set(u,c),i(c,u,n,a,o),o.delete(u));Hr(t,r,c)}(t,e,o,r,Rn,n,i);else{var s=n?n(ga(t,o),a,o+"",t,e,i):void 0;void 0===s&&(s=a),Hr(t,o,s)}}),ws)}function Ln(t,e){var r=t.length;if(r)return oa(e+=e<0?r:0,r)?t[e]:void 0}function Cn(t,e,r){e=e.length?de(e,(function(t){return Do(t)?function(e){return fn(e,1===t.length?t[0]:t)}:t})):[Ys];var n=-1;return e=de(e,Re(Ki())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Tn(t,(function(t,r,i){return{criteria:de(e,(function(e){return e(t)})),index:++n,value:t}})),(function(t,e){return function(t,e,r){var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;for(;++n<o;){var u=pi(i[n],a[n]);if(u){if(n>=s)return u;var l=r[n];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,r)}))}function Dn(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=fn(t,o);r(s,o)&&Hn(a,si(o,t),s)}return a}function In(t,e,r,n){var i=n?ke:we,a=-1,o=e.length,s=t;for(t===e&&(e=gi(e)),r&&(s=de(t,Re(r)));++a<o;)for(var u=0,l=e[a],c=r?r(l):l;(u=i(s,c,u,n))>-1;)s!==t&&Xt.call(s,u,1),Xt.call(t,u,1);return t}function On(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==a){var a=i;oa(i)?Xt.call(t,i,1):Zn(t,i)}}return t}function Un(t,e){return t+Ze(lr()*(e-t+1))}function Nn(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=Ze(e/2))&&(t+=t)}while(e);return r}function jn(t,e){return _a(pa(t,e,Ys),t+"")}function Mn(t){return jr(Bs(t))}function Fn(t,e){var r=Bs(t);return xa(r,Gr(e,0,r.length))}function Hn(t,e,r,n){if(!Wo(t))return t;for(var i=-1,a=(e=si(e,t)).length,o=a-1,s=t;null!=s&&++i<a;){var u=Sa(e[i]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=o){var c=s[u];void 0===(l=n?n(c,u,s):void 0)&&(l=Wo(c)?c:oa(e[i+1])?[]:{})}Vr(s,u,l),s=s[u]}return t}var Vn=gr?function(t,e){return gr.set(t,e),t}:Ys,Wn=Pe?function(t,e){return Pe(t,"toString",{configurable:!0,enumerable:!1,value:Ws(e),writable:!0})}:Ys;function zn(t){return xa(Bs(t))}function $n(t,e,r){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=n(a);++i<a;)o[i]=t[i+e];return o}function Yn(t,e){var r;return Zr(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function qn(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var a=n+i>>>1,o=t[a];null!==o&&!Qo(o)&&(r?o<=e:o<e)?n=a+1:i=a}return i}return Gn(t,e,Ys,r)}function Gn(t,e,r,n){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var o=(e=r(e))!=e,s=null===e,u=Qo(e),l=void 0===e;i<a;){var c=Ze((i+a)/2),f=r(t[c]),h=void 0!==f,d=null===f,p=f==f,y=Qo(f);if(o)var v=n||p;else v=l?p&&(n||h):s?p&&h&&(n||!d):u?p&&h&&!d&&(n||!y):!d&&!y&&(n?f<=e:f<e);v?i=c+1:a=c}return or(a,4294967294)}function Xn(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r],s=e?e(o):o;if(!r||!Bo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Kn(t){return"number"==typeof t?t:Qo(t)?NaN:+t}function Qn(t){if("string"==typeof t)return t;if(Do(t))return de(t,Qn)+"";if(Qo(t))return Pr?Pr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Jn(t,e,r){var n=-1,i=fe,a=t.length,o=!0,s=[],u=s;if(r)o=!1,i=he;else if(a>=200){var l=e?null:Ni(t);if(l)return We(l);o=!1,i=Ce,u=new Or}else u=e?[]:s;t:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||0!==c?c:0,o&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(c)}else i(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}function Zn(t,e){return null==(t=ya(t,e=si(e,t)))||delete t[Sa(ja(e))]}function ti(t,e,r,n){return Hn(t,e,r(fn(t,e)),n)}function ei(t,e,r,n){for(var i=t.length,a=n?i:-1;(n?a--:++a<i)&&e(t[a],a,t););return r?$n(t,n?0:a,n?a+1:i):$n(t,n?a+1:0,n?i:a)}function ri(t,e){var r=t;return r instanceof Lr&&(r=r.value()),ye(e,(function(t,e){return e.func.apply(e.thisArg,pe([t],e.args))}),r)}function ni(t,e,r){var i=t.length;if(i<2)return i?Jn(t[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=t[a],u=-1;++u<i;)u!=a&&(o[a]=Jr(o[a]||s,t[u],e,r));return Jn(an(o,1),e,r)}function ii(t,e,r){for(var n=-1,i=t.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:void 0;r(o,t[n],s)}return o}function ai(t){return Uo(t)?t:[]}function oi(t){return"function"==typeof t?t:Ys}function si(t,e){return Do(t)?t:ua(t,e)?[t]:Ea(ss(t))}var ui=jn;function li(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:$n(t,e,r)}var ci=Xe||function(t){return qt.clearTimeout(t)};function fi(t,e){if(e)return t.slice();var r=t.length,n=Vt?Vt(r):new t.constructor(r);return t.copy(n),n}function hi(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function di(t,e){var r=e?hi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function pi(t,e){if(t!==e){var r=void 0!==t,n=null===t,i=t==t,a=Qo(t),o=void 0!==e,s=null===e,u=e==e,l=Qo(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||n&&o&&u||!r&&u||!i)return 1;if(!n&&!a&&!l&&t<e||l&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!u)return-1}return 0}function yi(t,e,r,i){for(var a=-1,o=t.length,s=r.length,u=-1,l=e.length,c=ar(o-s,0),f=n(l+c),h=!i;++u<l;)f[u]=e[u];for(;++a<s;)(h||a<o)&&(f[r[a]]=t[a]);for(;c--;)f[u++]=t[a++];return f}function vi(t,e,r,i){for(var a=-1,o=t.length,s=-1,u=r.length,l=-1,c=e.length,f=ar(o-u,0),h=n(f+c),d=!i;++a<f;)h[a]=t[a];for(var p=a;++l<c;)h[p+l]=e[l];for(;++s<u;)(d||a<o)&&(h[p+r[s]]=t[a++]);return h}function gi(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function mi(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),i?Yr(r,s,u):Vr(r,s,u)}return r}function bi(t,e){return function(r,n){var i=Do(r)?oe:zr,a=e?e():{};return i(r,t,Ki(n,2),a)}}function _i(t){return jn((function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,o&&sa(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=yt(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e}))}function wi(t,e){return function(r,n){if(null==r)return r;if(!Oo(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=yt(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function ki(t){return function(e,r,n){for(var i=-1,a=yt(e),o=n(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===r(a[u],u,a))break}return e}}function xi(t){return function(e){var r=Me(e=ss(e))?Ye(e):void 0,n=r?r[0]:e.charAt(0),i=r?li(r,1).join(""):e.slice(1);return n[t]()+i}}function Ei(t){return function(e){return ye(Fs(Cs(e).replace(Ct,"")),t,"")}}function Si(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Ar(t.prototype),n=t.apply(r,e);return Wo(n)?n:r}}function Pi(t){return function(e,r,n){var i=yt(e);if(!Oo(e)){var a=Ki(r,3);e=_s(e),r=function(t){return a(i[t],t,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}}function Ti(t){return zi((function(e){var r=e.length,n=r,i=Rr.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if("function"!=typeof o)throw new mt(a);if(i&&!s&&"wrapper"==Gi(o))var s=new Rr([],!0)}for(n=s?n:r;++n<r;){var u=Gi(o=e[n]),l="wrapper"==u?qi(o):void 0;s=l&&la(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Gi(l[0])].apply(s,l[3]):1==o.length&&la(o)?s[u]():s.thru(o)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&Do(n))return s.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}}))}function Ai(t,e,r,i,a,o,s,u,l,c){var f=128&e,h=1&e,d=2&e,p=24&e,y=512&e,v=d?void 0:Si(t);return function g(){for(var m=arguments.length,b=n(m),_=m;_--;)b[_]=arguments[_];if(p)var w=Xi(g),k=Oe(b,w);if(i&&(b=yi(b,i,a,p)),o&&(b=vi(b,o,s,p)),m-=k,p&&m<c){var x=Ve(b,w);return Oi(t,e,Ai,g.placeholder,r,b,x,u,l,c-m)}var E=h?r:this,S=d?E[t]:t;return m=b.length,u?b=va(b,u):y&&m>1&&b.reverse(),f&&l<m&&(b.length=l),this&&this!==qt&&this instanceof g&&(S=v||Si(S)),S.apply(E,b)}}function Bi(t,e){return function(r,n){return function(t,e,r,n){return un(t,(function(t,i,a){e(n,r(t),i,a)})),n}(r,t,e(n),{})}}function Ri(t,e){return function(r,n){var i;if(void 0===r&&void 0===n)return e;if(void 0!==r&&(i=r),void 0!==n){if(void 0===i)return n;"string"==typeof r||"string"==typeof n?(r=Qn(r),n=Qn(n)):(r=Kn(r),n=Kn(n)),i=t(r,n)}return i}}function Li(t){return zi((function(e){return e=de(e,Re(Ki())),jn((function(r){var n=this;return t(e,(function(t){return ae(t,n,r)}))}))}))}function Ci(t,e){var r=(e=void 0===e?" ":Qn(e)).length;if(r<2)return r?Nn(e,t):e;var n=Nn(e,Je(t/$e(e)));return Me(e)?li(Ye(n),0,t).join(""):n.slice(0,t)}function Di(t){return function(e,r,i){return i&&"number"!=typeof i&&sa(e,r,i)&&(r=i=void 0),e=rs(e),void 0===r?(r=e,e=0):r=rs(r),function(t,e,r,i){for(var a=-1,o=ar(Je((e-t)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=t,t+=r;return s}(e,r,i=void 0===i?e<r?1:-1:rs(i),t)}}function Ii(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=as(e),r=as(r)),t(e,r)}}function Oi(t,e,r,n,i,a,o,s,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var f=[t,e,i,c?a:void 0,c?o:void 0,c?void 0:a,c?void 0:o,s,u,l],h=r.apply(void 0,f);return la(t)&&ma(h,f),h.placeholder=n,wa(h,t,e)}function Ui(t){var e=pt[t];return function(t,r){if(t=as(t),(r=null==r?0:or(ns(r),292))&&rr(t)){var n=(ss(t)+"e").split("e");return+((n=(ss(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Ni=pr&&1/We(new pr([,-0]))[1]==1/0?function(t){return new pr(t)}:Qs;function ji(t){return function(e){var r=ra(e);return r==y?Fe(e):r==b?ze(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Mi(t,e,r,i,s,u,l,c){var f=2&e;if(!f&&"function"!=typeof t)throw new mt(a);var h=i?i.length:0;if(h||(e&=-97,i=s=void 0),l=void 0===l?l:ar(ns(l),0),c=void 0===c?c:ns(c),h-=s?s.length:0,64&e){var d=i,p=s;i=s=void 0}var y=f?void 0:qi(t),v=[t,e,r,i,s,d,p,u,l,c];if(y&&function(t,e){var r=t[1],n=e[1],i=r|n,a=i<131,s=128==n&&8==r||128==n&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!a&&!s)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?yi(l,u,e[4]):u,t[4]=l?Ve(t[3],o):e[4]}(u=e[5])&&(l=t[5],t[5]=l?vi(l,u,e[6]):u,t[6]=l?Ve(t[5],o):e[6]);(u=e[7])&&(t[7]=u);128&n&&(t[8]=null==t[8]?e[8]:or(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(v,y),t=v[0],e=v[1],r=v[2],i=v[3],s=v[4],!(c=v[9]=void 0===v[9]?f?0:t.length:ar(v[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)g=8==e||16==e?function(t,e,r){var i=Si(t);return function a(){for(var o=arguments.length,s=n(o),u=o,l=Xi(a);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:Ve(s,l);if((o-=c.length)<r)return Oi(t,e,Ai,a.placeholder,void 0,s,c,void 0,void 0,r-o);var f=this&&this!==qt&&this instanceof a?i:t;return ae(f,this,s)}}(t,e,c):32!=e&&33!=e||s.length?Ai.apply(void 0,v):function(t,e,r,i){var a=1&e,o=Si(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,f=n(c+u),h=this&&this!==qt&&this instanceof e?o:t;++l<c;)f[l]=i[l];for(;u--;)f[l++]=arguments[++s];return ae(h,a?r:this,f)}}(t,e,r,i);else var g=function(t,e,r){var n=1&e,i=Si(t);return function e(){var a=this&&this!==qt&&this instanceof e?i:t;return a.apply(n?r:this,arguments)}}(t,e,r);return wa((y?Vn:ma)(g,v),t,e)}function Fi(t,e,r,n){return void 0===t||Bo(t,wt[r])&&!Et.call(n,r)?e:t}function Hi(t,e,r,n,i,a){return Wo(t)&&Wo(e)&&(a.set(e,t),Rn(t,e,void 0,Hi,a),a.delete(e)),t}function Vi(t){return qo(t)?void 0:t}function Wi(t,e,r,n,i,a){var o=1&r,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t),c=a.get(e);if(l&&c)return l==e&&c==t;var f=-1,h=!0,d=2&r?new Or:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var p=t[f],y=e[f];if(n)var v=o?n(y,p,f,e,t,a):n(p,y,f,t,e,a);if(void 0!==v){if(v)continue;h=!1;break}if(d){if(!ge(e,(function(t,e){if(!Ce(d,e)&&(p===t||i(p,t,r,n,a)))return d.push(e)}))){h=!1;break}}else if(p!==y&&!i(p,y,r,n,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function zi(t){return _a(pa(t,void 0,Da),t+"")}function $i(t){return hn(t,_s,ta)}function Yi(t){return hn(t,ws,ea)}var qi=gr?function(t){return gr.get(t)}:Qs;function Gi(t){for(var e=t.name+"",r=mr[e],n=Et.call(mr,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e}function Xi(t){return(Et.call(Tr,"placeholder")?Tr:t).placeholder}function Ki(){var t=Tr.iteratee||qs;return t=t===qs?xn:t,arguments.length?t(arguments[0],arguments[1]):t}function Qi(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Ji(t){for(var e=_s(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,ha(i)]}return e}function Zi(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return kn(r)?r:void 0}var ta=tr?function(t){return null==t?[]:(t=yt(t),ce(tr(t),(function(e){return Gt.call(t,e)})))}:iu,ea=tr?function(t){for(var e=[];t;)pe(e,ta(t)),t=$t(t);return e}:iu,ra=dn;function na(t,e,r){for(var n=-1,i=(e=si(e,t)).length,a=!1;++n<i;){var o=Sa(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&Vo(i)&&oa(o,i)&&(Do(t)||Co(t))}function ia(t){return"function"!=typeof t.constructor||fa(t)?{}:Ar($t(t))}function aa(t){return Do(t)||Co(t)||!!(Qt&&t&&t[Qt])}function oa(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&ut.test(t))&&t>-1&&t%1==0&&t<e}function sa(t,e,r){if(!Wo(r))return!1;var n=typeof e;return!!("number"==n?Oo(r)&&oa(e,r.length):"string"==n&&e in r)&&Bo(r[e],t)}function ua(t,e){if(Do(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Qo(t))||(z.test(t)||!W.test(t)||null!=e&&t in yt(e))}function la(t){var e=Gi(t),r=Tr[e];if("function"!=typeof r||!(e in Lr.prototype))return!1;if(t===r)return!0;var n=qi(r);return!!n&&t===n[0]}(fr&&ra(new fr(new ArrayBuffer(1)))!=E||hr&&ra(new hr)!=y||dr&&"[object Promise]"!=ra(dr.resolve())||pr&&ra(new pr)!=b||yr&&ra(new yr)!=k)&&(ra=function(t){var e=dn(t),r=e==g?t.constructor:void 0,n=r?Pa(r):"";if(n)switch(n){case br:return E;case _r:return y;case wr:return"[object Promise]";case kr:return b;case xr:return k}return e});var ca=kt?Fo:au;function fa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)}function ha(t){return t==t&&!Wo(t)}function da(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in yt(r)))}}function pa(t,e,r){return e=ar(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=ar(i.length-e,0),s=n(o);++a<o;)s[a]=i[e+a];a=-1;for(var u=n(e+1);++a<e;)u[a]=i[a];return u[e]=r(s),ae(t,this,u)}}function ya(t,e){return e.length<2?t:fn(t,$n(e,0,-1))}function va(t,e){for(var r=t.length,n=or(e.length,r),i=gi(t);n--;){var a=e[n];t[n]=oa(a,r)?i[a]:void 0}return t}function ga(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ma=ka(Vn),ba=Qe||function(t,e){return qt.setTimeout(t,e)},_a=ka(Wn);function wa(t,e,r){var n=e+"";return _a(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Q,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return se(s,(function(r){var n="_."+r[0];e&r[1]&&!fe(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(J);return e?e[1].split(Z):[]}(n),r)))}function ka(t){var e=0,r=0;return function(){var n=sr(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xa(t,e){var r=-1,n=t.length,i=n-1;for(e=void 0===e?n:e;++r<e;){var a=Un(r,i),o=t[a];t[a]=t[r],t[r]=o}return t.length=e,t}var Ea=function(t){var e=xo(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace($,(function(t,r,n,i){e.push(n?i.replace(et,"$1"):r||t)})),e}));function Sa(t){if("string"==typeof t||Qo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Pa(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ta(t){if(t instanceof Lr)return t.clone();var e=new Rr(t.__wrapped__,t.__chain__);return e.__actions__=gi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Aa=jn((function(t,e){return Uo(t)?Jr(t,an(e,1,Uo,!0)):[]})),Ba=jn((function(t,e){var r=ja(e);return Uo(r)&&(r=void 0),Uo(t)?Jr(t,an(e,1,Uo,!0),Ki(r,2)):[]})),Ra=jn((function(t,e){var r=ja(e);return Uo(r)&&(r=void 0),Uo(t)?Jr(t,an(e,1,Uo,!0),void 0,r):[]}));function La(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ns(r);return i<0&&(i=ar(n+i,0)),_e(t,Ki(e,3),i)}function Ca(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=ns(r),i=r<0?ar(n+i,0):or(i,n-1)),_e(t,Ki(e,3),i,!0)}function Da(t){return(null==t?0:t.length)?an(t,1):[]}function Ia(t){return t&&t.length?t[0]:void 0}var Oa=jn((function(t){var e=de(t,ai);return e.length&&e[0]===t[0]?gn(e):[]})),Ua=jn((function(t){var e=ja(t),r=de(t,ai);return e===ja(r)?e=void 0:r.pop(),r.length&&r[0]===t[0]?gn(r,Ki(e,2)):[]})),Na=jn((function(t){var e=ja(t),r=de(t,ai);return(e="function"==typeof e?e:void 0)&&r.pop(),r.length&&r[0]===t[0]?gn(r,void 0,e):[]}));function ja(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Ma=jn(Fa);function Fa(t,e){return t&&t.length&&e&&e.length?In(t,e):t}var Ha=zi((function(t,e){var r=null==t?0:t.length,n=qr(t,e);return On(t,de(e,(function(t){return oa(t,r)?+t:t})).sort(pi)),n}));function Va(t){return null==t?t:cr.call(t)}var Wa=jn((function(t){return Jn(an(t,1,Uo,!0))})),za=jn((function(t){var e=ja(t);return Uo(e)&&(e=void 0),Jn(an(t,1,Uo,!0),Ki(e,2))})),$a=jn((function(t){var e=ja(t);return e="function"==typeof e?e:void 0,Jn(an(t,1,Uo,!0),void 0,e)}));function Ya(t){if(!t||!t.length)return[];var e=0;return t=ce(t,(function(t){if(Uo(t))return e=ar(t.length,e),!0})),Be(e,(function(e){return de(t,Se(e))}))}function qa(t,e){if(!t||!t.length)return[];var r=Ya(t);return null==e?r:de(r,(function(t){return ae(e,void 0,t)}))}var Ga=jn((function(t,e){return Uo(t)?Jr(t,e):[]})),Xa=jn((function(t){return ni(ce(t,Uo))})),Ka=jn((function(t){var e=ja(t);return Uo(e)&&(e=void 0),ni(ce(t,Uo),Ki(e,2))})),Qa=jn((function(t){var e=ja(t);return e="function"==typeof e?e:void 0,ni(ce(t,Uo),void 0,e)})),Ja=jn(Ya);var Za=jn((function(t){var e=t.length,r=e>1?t[e-1]:void 0;return r="function"==typeof r?(t.pop(),r):void 0,qa(t,r)}));function to(t){var e=Tr(t);return e.__chain__=!0,e}function eo(t,e){return e(t)}var ro=zi((function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return qr(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Lr&&oa(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:eo,args:[i],thisArg:void 0}),new Rr(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var no=bi((function(t,e,r){Et.call(t,r)?++t[r]:Yr(t,r,1)}));var io=Pi(La),ao=Pi(Ca);function oo(t,e){return(Do(t)?se:Zr)(t,Ki(e,3))}function so(t,e){return(Do(t)?ue:tn)(t,Ki(e,3))}var uo=bi((function(t,e,r){Et.call(t,r)?t[r].push(e):Yr(t,r,[e])}));var lo=jn((function(t,e,r){var i=-1,a="function"==typeof e,o=Oo(t)?n(t.length):[];return Zr(t,(function(t){o[++i]=a?ae(e,t,r):mn(t,e,r)})),o})),co=bi((function(t,e,r){Yr(t,r,e)}));function fo(t,e){return(Do(t)?de:Tn)(t,Ki(e,3))}var ho=bi((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var po=jn((function(t,e){if(null==t)return[];var r=e.length;return r>1&&sa(t,e[0],e[1])?e=[]:r>2&&sa(e[0],e[1],e[2])&&(e=[e[0]]),Cn(t,an(e,1),[])})),yo=Ke||function(){return qt.Date.now()};function vo(t,e,r){return e=r?void 0:e,Mi(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function go(t,e){var r;if("function"!=typeof e)throw new mt(a);return t=ns(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}var mo=jn((function(t,e,r){var n=1;if(r.length){var i=Ve(r,Xi(mo));n|=32}return Mi(t,n,e,r,i)})),bo=jn((function(t,e,r){var n=3;if(r.length){var i=Ve(r,Xi(bo));n|=32}return Mi(e,n,t,r,i)}));function _o(t,e,r){var n,i,o,s,u,l,c=0,f=!1,h=!1,d=!0;if("function"!=typeof t)throw new mt(a);function p(e){var r=n,a=i;return n=i=void 0,c=e,s=t.apply(a,r)}function y(t){return c=t,u=ba(g,e),f?p(t):s}function v(t){var r=t-l;return void 0===l||r>=e||r<0||h&&t-c>=o}function g(){var t=yo();if(v(t))return m(t);u=ba(g,function(t){var r=e-(t-l);return h?or(r,o-(t-c)):r}(t))}function m(t){return u=void 0,d&&n?p(t):(n=i=void 0,s)}function b(){var t=yo(),r=v(t);if(n=arguments,i=this,l=t,r){if(void 0===u)return y(l);if(h)return ci(u),u=ba(g,e),p(l)}return void 0===u&&(u=ba(g,e)),s}return e=as(e)||0,Wo(r)&&(f=!!r.leading,o=(h="maxWait"in r)?ar(as(r.maxWait)||0,e):o,d="trailing"in r?!!r.trailing:d),b.cancel=function(){void 0!==u&&ci(u),c=0,n=l=i=u=void 0},b.flush=function(){return void 0===u?s:m(yo())},b}var wo=jn((function(t,e){return Qr(t,1,e)})),ko=jn((function(t,e,r){return Qr(t,as(e)||0,r)}));function xo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new mt(a);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(xo.Cache||Ir),r}function Eo(t){if("function"!=typeof t)throw new mt(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}xo.Cache=Ir;var So=ui((function(t,e){var r=(e=1==e.length&&Do(e[0])?de(e[0],Re(Ki())):de(an(e,1),Re(Ki()))).length;return jn((function(n){for(var i=-1,a=or(n.length,r);++i<a;)n[i]=e[i].call(this,n[i]);return ae(t,this,n)}))})),Po=jn((function(t,e){return Mi(t,32,void 0,e,Ve(e,Xi(Po)))})),To=jn((function(t,e){return Mi(t,64,void 0,e,Ve(e,Xi(To)))})),Ao=zi((function(t,e){return Mi(t,256,void 0,void 0,void 0,e)}));function Bo(t,e){return t===e||t!=t&&e!=e}var Ro=Ii(pn),Lo=Ii((function(t,e){return t>=e})),Co=bn(function(){return arguments}())?bn:function(t){return zo(t)&&Et.call(t,"callee")&&!Gt.call(t,"callee")},Do=n.isArray,Io=Zt?Re(Zt):function(t){return zo(t)&&dn(t)==x};function Oo(t){return null!=t&&Vo(t.length)&&!Fo(t)}function Uo(t){return zo(t)&&Oo(t)}var No=er||au,jo=te?Re(te):function(t){return zo(t)&&dn(t)==f};function Mo(t){if(!zo(t))return!1;var e=dn(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!qo(t)}function Fo(t){if(!Wo(t))return!1;var e=dn(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ho(t){return"number"==typeof t&&t==ns(t)}function Vo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Wo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zo(t){return null!=t&&"object"==typeof t}var $o=ee?Re(ee):function(t){return zo(t)&&ra(t)==y};function Yo(t){return"number"==typeof t||zo(t)&&dn(t)==v}function qo(t){if(!zo(t)||dn(t)!=g)return!1;var e=$t(t);if(null===e)return!0;var r=Et.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&xt.call(r)==At}var Go=re?Re(re):function(t){return zo(t)&&dn(t)==m};var Xo=ne?Re(ne):function(t){return zo(t)&&ra(t)==b};function Ko(t){return"string"==typeof t||!Do(t)&&zo(t)&&dn(t)==_}function Qo(t){return"symbol"==typeof t||zo(t)&&dn(t)==w}var Jo=ie?Re(ie):function(t){return zo(t)&&Vo(t.length)&&!!Ft[dn(t)]};var Zo=Ii(Pn),ts=Ii((function(t,e){return t<=e}));function es(t){if(!t)return[];if(Oo(t))return Ko(t)?Ye(t):gi(t);if(Jt&&t[Jt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Jt]());var e=ra(t);return(e==y?Fe:e==b?We:Bs)(t)}function rs(t){return t?(t=as(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ns(t){var e=rs(t),r=e%1;return e==e?r?e-r:e:0}function is(t){return t?Gr(ns(t),0,4294967295):0}function as(t){if("number"==typeof t)return t;if(Qo(t))return NaN;if(Wo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Wo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(G,"");var r=at.test(t);return r||st.test(t)?zt(t.slice(2),r?2:8):it.test(t)?NaN:+t}function os(t){return mi(t,ws(t))}function ss(t){return null==t?"":Qn(t)}var us=_i((function(t,e){if(fa(e)||Oo(e))mi(e,_s(e),t);else for(var r in e)Et.call(e,r)&&Vr(t,r,e[r])})),ls=_i((function(t,e){mi(e,ws(e),t)})),cs=_i((function(t,e,r,n){mi(e,ws(e),t,n)})),fs=_i((function(t,e,r,n){mi(e,_s(e),t,n)})),hs=zi(qr);var ds=jn((function(t,e){t=yt(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&sa(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],o=ws(a),s=-1,u=o.length;++s<u;){var l=o[s],c=t[l];(void 0===c||Bo(c,wt[l])&&!Et.call(t,l))&&(t[l]=a[l])}return t})),ps=jn((function(t){return t.push(void 0,Hi),ae(xs,void 0,t)}));function ys(t,e,r){var n=null==t?void 0:fn(t,e);return void 0===n?r:n}function vs(t,e){return null!=t&&na(t,e,vn)}var gs=Bi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),t[e]=r}),Ws(Ys)),ms=Bi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),Et.call(t,e)?t[e].push(r):t[e]=[r]}),Ki),bs=jn(mn);function _s(t){return Oo(t)?Nr(t):En(t)}function ws(t){return Oo(t)?Nr(t,!0):Sn(t)}var ks=_i((function(t,e,r){Rn(t,e,r)})),xs=_i((function(t,e,r,n){Rn(t,e,r,n)})),Es=zi((function(t,e){var r={};if(null==t)return r;var n=!1;e=de(e,(function(e){return e=si(e,t),n||(n=e.length>1),e})),mi(t,Yi(t),r),n&&(r=Xr(r,7,Vi));for(var i=e.length;i--;)Zn(r,e[i]);return r}));var Ss=zi((function(t,e){return null==t?{}:function(t,e){return Dn(t,e,(function(e,r){return vs(t,r)}))}(t,e)}));function Ps(t,e){if(null==t)return{};var r=de(Yi(t),(function(t){return[t]}));return e=Ki(e),Dn(t,r,(function(t,r){return e(t,r[0])}))}var Ts=ji(_s),As=ji(ws);function Bs(t){return null==t?[]:Le(t,_s(t))}var Rs=Ei((function(t,e,r){return e=e.toLowerCase(),t+(r?Ls(e):e)}));function Ls(t){return Ms(ss(t).toLowerCase())}function Cs(t){return(t=ss(t))&&t.replace(lt,Ue).replace(Dt,"")}var Ds=Ei((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Is=Ei((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Os=xi("toLowerCase");var Us=Ei((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Ns=Ei((function(t,e,r){return t+(r?" ":"")+Ms(e)}));var js=Ei((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Ms=xi("toUpperCase");function Fs(t,e,r){return t=ss(t),void 0===(e=r?void 0:e)?function(t){return Nt.test(t)}(t)?function(t){return t.match(Ot)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var Hs=jn((function(t,e){try{return ae(t,void 0,e)}catch(t){return Mo(t)?t:new ht(t)}})),Vs=zi((function(t,e){return se(e,(function(e){e=Sa(e),Yr(t,e,mo(t[e],t))})),t}));function Ws(t){return function(){return t}}var zs=Ti(),$s=Ti(!0);function Ys(t){return t}function qs(t){return xn("function"==typeof t?t:Xr(t,1))}var Gs=jn((function(t,e){return function(r){return mn(r,t,e)}})),Xs=jn((function(t,e){return function(r){return mn(t,r,e)}}));function Ks(t,e,r){var n=_s(e),i=cn(e,n);null!=r||Wo(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=cn(e,_s(e)));var a=!(Wo(r)&&"chain"in r&&!r.chain),o=Fo(t);return se(i,(function(r){var n=e[r];t[r]=n,o&&(t.prototype[r]=function(){var e=this.__chain__;if(a||e){var r=t(this.__wrapped__),i=r.__actions__=gi(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,pe([this.value()],arguments))})})),t}function Qs(){}var Js=Li(de),Zs=Li(le),tu=Li(ge);function eu(t){return ua(t)?Se(Sa(t)):function(t){return function(e){return fn(e,t)}}(t)}var ru=Di(),nu=Di(!0);function iu(){return[]}function au(){return!1}var ou=Ri((function(t,e){return t+e}),0),su=Ui("ceil"),uu=Ri((function(t,e){return t/e}),1),lu=Ui("floor");var cu,fu=Ri((function(t,e){return t*e}),1),hu=Ui("round"),du=Ri((function(t,e){return t-e}),0);return Tr.after=function(t,e){if("function"!=typeof e)throw new mt(a);return t=ns(t),function(){if(--t<1)return e.apply(this,arguments)}},Tr.ary=vo,Tr.assign=us,Tr.assignIn=ls,Tr.assignInWith=cs,Tr.assignWith=fs,Tr.at=hs,Tr.before=go,Tr.bind=mo,Tr.bindAll=Vs,Tr.bindKey=bo,Tr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Do(t)?t:[t]},Tr.chain=to,Tr.chunk=function(t,e,r){e=(r?sa(t,e,r):void 0===e)?1:ar(ns(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,o=0,s=n(Je(i/e));a<i;)s[o++]=$n(t,a,a+=e);return s},Tr.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var a=t[e];a&&(i[n++]=a)}return i},Tr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return pe(Do(r)?gi(r):[r],an(e,1))},Tr.cond=function(t){var e=null==t?0:t.length,r=Ki();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new mt(a);return[r(t[0]),t[1]]})):[],jn((function(r){for(var n=-1;++n<e;){var i=t[n];if(ae(i[0],this,r))return ae(i[1],this,r)}}))},Tr.conforms=function(t){return function(t){var e=_s(t);return function(r){return Kr(r,t,e)}}(Xr(t,1))},Tr.constant=Ws,Tr.countBy=no,Tr.create=function(t,e){var r=Ar(t);return null==e?r:$r(r,e)},Tr.curry=function t(e,r,n){var i=Mi(e,8,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=t.placeholder,i},Tr.curryRight=function t(e,r,n){var i=Mi(e,16,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=t.placeholder,i},Tr.debounce=_o,Tr.defaults=ds,Tr.defaultsDeep=ps,Tr.defer=wo,Tr.delay=ko,Tr.difference=Aa,Tr.differenceBy=Ba,Tr.differenceWith=Ra,Tr.drop=function(t,e,r){var n=null==t?0:t.length;return n?$n(t,(e=r||void 0===e?1:ns(e))<0?0:e,n):[]},Tr.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?$n(t,0,(e=n-(e=r||void 0===e?1:ns(e)))<0?0:e):[]},Tr.dropRightWhile=function(t,e){return t&&t.length?ei(t,Ki(e,3),!0,!0):[]},Tr.dropWhile=function(t,e){return t&&t.length?ei(t,Ki(e,3),!0):[]},Tr.fill=function(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&sa(t,e,r)&&(r=0,n=i),function(t,e,r,n){var i=t.length;for((r=ns(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:ns(n))<0&&(n+=i),n=r>n?0:is(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},Tr.filter=function(t,e){return(Do(t)?ce:nn)(t,Ki(e,3))},Tr.flatMap=function(t,e){return an(fo(t,e),1)},Tr.flatMapDeep=function(t,e){return an(fo(t,e),1/0)},Tr.flatMapDepth=function(t,e,r){return r=void 0===r?1:ns(r),an(fo(t,e),r)},Tr.flatten=Da,Tr.flattenDeep=function(t){return(null==t?0:t.length)?an(t,1/0):[]},Tr.flattenDepth=function(t,e){return(null==t?0:t.length)?an(t,e=void 0===e?1:ns(e)):[]},Tr.flip=function(t){return Mi(t,512)},Tr.flow=zs,Tr.flowRight=$s,Tr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},Tr.functions=function(t){return null==t?[]:cn(t,_s(t))},Tr.functionsIn=function(t){return null==t?[]:cn(t,ws(t))},Tr.groupBy=uo,Tr.initial=function(t){return(null==t?0:t.length)?$n(t,0,-1):[]},Tr.intersection=Oa,Tr.intersectionBy=Ua,Tr.intersectionWith=Na,Tr.invert=gs,Tr.invertBy=ms,Tr.invokeMap=lo,Tr.iteratee=qs,Tr.keyBy=co,Tr.keys=_s,Tr.keysIn=ws,Tr.map=fo,Tr.mapKeys=function(t,e){var r={};return e=Ki(e,3),un(t,(function(t,n,i){Yr(r,e(t,n,i),t)})),r},Tr.mapValues=function(t,e){var r={};return e=Ki(e,3),un(t,(function(t,n,i){Yr(r,n,e(t,n,i))})),r},Tr.matches=function(t){return An(Xr(t,1))},Tr.matchesProperty=function(t,e){return Bn(t,Xr(e,1))},Tr.memoize=xo,Tr.merge=ks,Tr.mergeWith=xs,Tr.method=Gs,Tr.methodOf=Xs,Tr.mixin=Ks,Tr.negate=Eo,Tr.nthArg=function(t){return t=ns(t),jn((function(e){return Ln(e,t)}))},Tr.omit=Es,Tr.omitBy=function(t,e){return Ps(t,Eo(Ki(e)))},Tr.once=function(t){return go(2,t)},Tr.orderBy=function(t,e,r,n){return null==t?[]:(Do(e)||(e=null==e?[]:[e]),Do(r=n?void 0:r)||(r=null==r?[]:[r]),Cn(t,e,r))},Tr.over=Js,Tr.overArgs=So,Tr.overEvery=Zs,Tr.overSome=tu,Tr.partial=Po,Tr.partialRight=To,Tr.partition=ho,Tr.pick=Ss,Tr.pickBy=Ps,Tr.property=eu,Tr.propertyOf=function(t){return function(e){return null==t?void 0:fn(t,e)}},Tr.pull=Ma,Tr.pullAll=Fa,Tr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?In(t,e,Ki(r,2)):t},Tr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?In(t,e,void 0,r):t},Tr.pullAt=Ha,Tr.range=ru,Tr.rangeRight=nu,Tr.rearg=Ao,Tr.reject=function(t,e){return(Do(t)?ce:nn)(t,Eo(Ki(e,3)))},Tr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],a=t.length;for(e=Ki(e,3);++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return On(t,i),r},Tr.rest=function(t,e){if("function"!=typeof t)throw new mt(a);return jn(t,e=void 0===e?e:ns(e))},Tr.reverse=Va,Tr.sampleSize=function(t,e,r){return e=(r?sa(t,e,r):void 0===e)?1:ns(e),(Do(t)?Mr:Fn)(t,e)},Tr.set=function(t,e,r){return null==t?t:Hn(t,e,r)},Tr.setWith=function(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:Hn(t,e,r,n)},Tr.shuffle=function(t){return(Do(t)?Fr:zn)(t)},Tr.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&sa(t,e,r)?(e=0,r=n):(e=null==e?0:ns(e),r=void 0===r?n:ns(r)),$n(t,e,r)):[]},Tr.sortBy=po,Tr.sortedUniq=function(t){return t&&t.length?Xn(t):[]},Tr.sortedUniqBy=function(t,e){return t&&t.length?Xn(t,Ki(e,2)):[]},Tr.split=function(t,e,r){return r&&"number"!=typeof r&&sa(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=ss(t))&&("string"==typeof e||null!=e&&!Go(e))&&!(e=Qn(e))&&Me(t)?li(Ye(t),0,r):t.split(e,r):[]},Tr.spread=function(t,e){if("function"!=typeof t)throw new mt(a);return e=null==e?0:ar(ns(e),0),jn((function(r){var n=r[e],i=li(r,0,e);return n&&pe(i,n),ae(t,this,i)}))},Tr.tail=function(t){var e=null==t?0:t.length;return e?$n(t,1,e):[]},Tr.take=function(t,e,r){return t&&t.length?$n(t,0,(e=r||void 0===e?1:ns(e))<0?0:e):[]},Tr.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?$n(t,(e=n-(e=r||void 0===e?1:ns(e)))<0?0:e,n):[]},Tr.takeRightWhile=function(t,e){return t&&t.length?ei(t,Ki(e,3),!1,!0):[]},Tr.takeWhile=function(t,e){return t&&t.length?ei(t,Ki(e,3)):[]},Tr.tap=function(t,e){return e(t),t},Tr.throttle=function(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new mt(a);return Wo(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),_o(t,e,{leading:n,maxWait:e,trailing:i})},Tr.thru=eo,Tr.toArray=es,Tr.toPairs=Ts,Tr.toPairsIn=As,Tr.toPath=function(t){return Do(t)?de(t,Sa):Qo(t)?[t]:gi(Ea(ss(t)))},Tr.toPlainObject=os,Tr.transform=function(t,e,r){var n=Do(t),i=n||No(t)||Jo(t);if(e=Ki(e,4),null==r){var a=t&&t.constructor;r=i?n?new a:[]:Wo(t)&&Fo(a)?Ar($t(t)):{}}return(i?se:un)(t,(function(t,n,i){return e(r,t,n,i)})),r},Tr.unary=function(t){return vo(t,1)},Tr.union=Wa,Tr.unionBy=za,Tr.unionWith=$a,Tr.uniq=function(t){return t&&t.length?Jn(t):[]},Tr.uniqBy=function(t,e){return t&&t.length?Jn(t,Ki(e,2)):[]},Tr.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Jn(t,void 0,e):[]},Tr.unset=function(t,e){return null==t||Zn(t,e)},Tr.unzip=Ya,Tr.unzipWith=qa,Tr.update=function(t,e,r){return null==t?t:ti(t,e,oi(r))},Tr.updateWith=function(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:ti(t,e,oi(r),n)},Tr.values=Bs,Tr.valuesIn=function(t){return null==t?[]:Le(t,ws(t))},Tr.without=Ga,Tr.words=Fs,Tr.wrap=function(t,e){return Po(oi(e),t)},Tr.xor=Xa,Tr.xorBy=Ka,Tr.xorWith=Qa,Tr.zip=Ja,Tr.zipObject=function(t,e){return ii(t||[],e||[],Vr)},Tr.zipObjectDeep=function(t,e){return ii(t||[],e||[],Hn)},Tr.zipWith=Za,Tr.entries=Ts,Tr.entriesIn=As,Tr.extend=ls,Tr.extendWith=cs,Ks(Tr,Tr),Tr.add=ou,Tr.attempt=Hs,Tr.camelCase=Rs,Tr.capitalize=Ls,Tr.ceil=su,Tr.clamp=function(t,e,r){return void 0===r&&(r=e,e=void 0),void 0!==r&&(r=(r=as(r))==r?r:0),void 0!==e&&(e=(e=as(e))==e?e:0),Gr(as(t),e,r)},Tr.clone=function(t){return Xr(t,4)},Tr.cloneDeep=function(t){return Xr(t,5)},Tr.cloneDeepWith=function(t,e){return Xr(t,5,e="function"==typeof e?e:void 0)},Tr.cloneWith=function(t,e){return Xr(t,4,e="function"==typeof e?e:void 0)},Tr.conformsTo=function(t,e){return null==e||Kr(t,e,_s(e))},Tr.deburr=Cs,Tr.defaultTo=function(t,e){return null==t||t!=t?e:t},Tr.divide=uu,Tr.endsWith=function(t,e,r){t=ss(t),e=Qn(e);var n=t.length,i=r=void 0===r?n:Gr(ns(r),0,n);return(r-=e.length)>=0&&t.slice(r,i)==e},Tr.eq=Bo,Tr.escape=function(t){return(t=ss(t))&&M.test(t)?t.replace(N,Ne):t},Tr.escapeRegExp=function(t){return(t=ss(t))&&q.test(t)?t.replace(Y,"\\$&"):t},Tr.every=function(t,e,r){var n=Do(t)?le:en;return r&&sa(t,e,r)&&(e=void 0),n(t,Ki(e,3))},Tr.find=io,Tr.findIndex=La,Tr.findKey=function(t,e){return be(t,Ki(e,3),un)},Tr.findLast=ao,Tr.findLastIndex=Ca,Tr.findLastKey=function(t,e){return be(t,Ki(e,3),ln)},Tr.floor=lu,Tr.forEach=oo,Tr.forEachRight=so,Tr.forIn=function(t,e){return null==t?t:on(t,Ki(e,3),ws)},Tr.forInRight=function(t,e){return null==t?t:sn(t,Ki(e,3),ws)},Tr.forOwn=function(t,e){return t&&un(t,Ki(e,3))},Tr.forOwnRight=function(t,e){return t&&ln(t,Ki(e,3))},Tr.get=ys,Tr.gt=Ro,Tr.gte=Lo,Tr.has=function(t,e){return null!=t&&na(t,e,yn)},Tr.hasIn=vs,Tr.head=Ia,Tr.identity=Ys,Tr.includes=function(t,e,r,n){t=Oo(t)?t:Bs(t),r=r&&!n?ns(r):0;var i=t.length;return r<0&&(r=ar(i+r,0)),Ko(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&we(t,e,r)>-1},Tr.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ns(r);return i<0&&(i=ar(n+i,0)),we(t,e,i)},Tr.inRange=function(t,e,r){return e=rs(e),void 0===r?(r=e,e=0):r=rs(r),function(t,e,r){return t>=or(e,r)&&t<ar(e,r)}(t=as(t),e,r)},Tr.invoke=bs,Tr.isArguments=Co,Tr.isArray=Do,Tr.isArrayBuffer=Io,Tr.isArrayLike=Oo,Tr.isArrayLikeObject=Uo,Tr.isBoolean=function(t){return!0===t||!1===t||zo(t)&&dn(t)==c},Tr.isBuffer=No,Tr.isDate=jo,Tr.isElement=function(t){return zo(t)&&1===t.nodeType&&!qo(t)},Tr.isEmpty=function(t){if(null==t)return!0;if(Oo(t)&&(Do(t)||"string"==typeof t||"function"==typeof t.splice||No(t)||Jo(t)||Co(t)))return!t.length;var e=ra(t);if(e==y||e==b)return!t.size;if(fa(t))return!En(t).length;for(var r in t)if(Et.call(t,r))return!1;return!0},Tr.isEqual=function(t,e){return _n(t,e)},Tr.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:void 0)?r(t,e):void 0;return void 0===n?_n(t,e,void 0,r):!!n},Tr.isError=Mo,Tr.isFinite=function(t){return"number"==typeof t&&rr(t)},Tr.isFunction=Fo,Tr.isInteger=Ho,Tr.isLength=Vo,Tr.isMap=$o,Tr.isMatch=function(t,e){return t===e||wn(t,e,Ji(e))},Tr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:void 0,wn(t,e,Ji(e),r)},Tr.isNaN=function(t){return Yo(t)&&t!=+t},Tr.isNative=function(t){if(ca(t))throw new ht("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kn(t)},Tr.isNil=function(t){return null==t},Tr.isNull=function(t){return null===t},Tr.isNumber=Yo,Tr.isObject=Wo,Tr.isObjectLike=zo,Tr.isPlainObject=qo,Tr.isRegExp=Go,Tr.isSafeInteger=function(t){return Ho(t)&&t>=-9007199254740991&&t<=9007199254740991},Tr.isSet=Xo,Tr.isString=Ko,Tr.isSymbol=Qo,Tr.isTypedArray=Jo,Tr.isUndefined=function(t){return void 0===t},Tr.isWeakMap=function(t){return zo(t)&&ra(t)==k},Tr.isWeakSet=function(t){return zo(t)&&"[object WeakSet]"==dn(t)},Tr.join=function(t,e){return null==t?"":nr.call(t,e)},Tr.kebabCase=Ds,Tr.last=ja,Tr.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=ns(r))<0?ar(n+i,0):or(i,n-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,i):_e(t,xe,i,!0)},Tr.lowerCase=Is,Tr.lowerFirst=Os,Tr.lt=Zo,Tr.lte=ts,Tr.max=function(t){return t&&t.length?rn(t,Ys,pn):void 0},Tr.maxBy=function(t,e){return t&&t.length?rn(t,Ki(e,2),pn):void 0},Tr.mean=function(t){return Ee(t,Ys)},Tr.meanBy=function(t,e){return Ee(t,Ki(e,2))},Tr.min=function(t){return t&&t.length?rn(t,Ys,Pn):void 0},Tr.minBy=function(t,e){return t&&t.length?rn(t,Ki(e,2),Pn):void 0},Tr.stubArray=iu,Tr.stubFalse=au,Tr.stubObject=function(){return{}},Tr.stubString=function(){return""},Tr.stubTrue=function(){return!0},Tr.multiply=fu,Tr.nth=function(t,e){return t&&t.length?Ln(t,ns(e)):void 0},Tr.noConflict=function(){return qt._===this&&(qt._=Bt),this},Tr.noop=Qs,Tr.now=yo,Tr.pad=function(t,e,r){t=ss(t);var n=(e=ns(e))?$e(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Ci(Ze(i),r)+t+Ci(Je(i),r)},Tr.padEnd=function(t,e,r){t=ss(t);var n=(e=ns(e))?$e(t):0;return e&&n<e?t+Ci(e-n,r):t},Tr.padStart=function(t,e,r){t=ss(t);var n=(e=ns(e))?$e(t):0;return e&&n<e?Ci(e-n,r)+t:t},Tr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),ur(ss(t).replace(X,""),e||0)},Tr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&sa(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=rs(t),void 0===e?(e=t,t=0):e=rs(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=lr();return or(t+i*(e-t+Wt("1e-"+((i+"").length-1))),e)}return Un(t,e)},Tr.reduce=function(t,e,r){var n=Do(t)?ye:Te,i=arguments.length<3;return n(t,Ki(e,4),r,i,Zr)},Tr.reduceRight=function(t,e,r){var n=Do(t)?ve:Te,i=arguments.length<3;return n(t,Ki(e,4),r,i,tn)},Tr.repeat=function(t,e,r){return e=(r?sa(t,e,r):void 0===e)?1:ns(e),Nn(ss(t),e)},Tr.replace=function(){var t=arguments,e=ss(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Tr.result=function(t,e,r){var n=-1,i=(e=si(e,t)).length;for(i||(i=1,t=void 0);++n<i;){var a=null==t?void 0:t[Sa(e[n])];void 0===a&&(n=i,a=r),t=Fo(a)?a.call(t):a}return t},Tr.round=hu,Tr.runInContext=t,Tr.sample=function(t){return(Do(t)?jr:Mn)(t)},Tr.size=function(t){if(null==t)return 0;if(Oo(t))return Ko(t)?$e(t):t.length;var e=ra(t);return e==y||e==b?t.size:En(t).length},Tr.snakeCase=Us,Tr.some=function(t,e,r){var n=Do(t)?ge:Yn;return r&&sa(t,e,r)&&(e=void 0),n(t,Ki(e,3))},Tr.sortedIndex=function(t,e){return qn(t,e)},Tr.sortedIndexBy=function(t,e,r){return Gn(t,e,Ki(r,2))},Tr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=qn(t,e);if(n<r&&Bo(t[n],e))return n}return-1},Tr.sortedLastIndex=function(t,e){return qn(t,e,!0)},Tr.sortedLastIndexBy=function(t,e,r){return Gn(t,e,Ki(r,2),!0)},Tr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=qn(t,e,!0)-1;if(Bo(t[r],e))return r}return-1},Tr.startCase=Ns,Tr.startsWith=function(t,e,r){return t=ss(t),r=null==r?0:Gr(ns(r),0,t.length),e=Qn(e),t.slice(r,r+e.length)==e},Tr.subtract=du,Tr.sum=function(t){return t&&t.length?Ae(t,Ys):0},Tr.sumBy=function(t,e){return t&&t.length?Ae(t,Ki(e,2)):0},Tr.template=function(t,e,r){var n=Tr.templateSettings;r&&sa(t,e,r)&&(e=void 0),t=ss(t),e=cs({},e,n,Fi);var i,a,o=cs({},e.imports,n.imports,Fi),s=_s(o),u=Le(o,s),l=0,c=e.interpolate||ct,f="__p += '",h=vt((e.escape||ct).source+"|"+c.source+"|"+(c===V?rt:ct).source+"|"+(e.evaluate||ct).source+"|$","g"),d="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mt+"]")+"\n";t.replace(h,(function(e,r,n,o,s,u){return n||(n=o),f+=t.slice(l,u).replace(ft,je),r&&(i=!0,f+="' +\n__e("+r+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var p=Et.call(e,"variable")&&e.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(D,""):f).replace(I,"$1").replace(O,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y=Hs((function(){return dt(s,d+"return "+f).apply(void 0,u)}));if(y.source=f,Mo(y))throw y;return y},Tr.times=function(t,e){if((t=ns(t))<1||t>9007199254740991)return[];var r=4294967295,n=or(t,4294967295);t-=4294967295;for(var i=Be(n,e=Ki(e));++r<t;)e(r);return i},Tr.toFinite=rs,Tr.toInteger=ns,Tr.toLength=is,Tr.toLower=function(t){return ss(t).toLowerCase()},Tr.toNumber=as,Tr.toSafeInteger=function(t){return t?Gr(ns(t),-9007199254740991,9007199254740991):0===t?t:0},Tr.toString=ss,Tr.toUpper=function(t){return ss(t).toUpperCase()},Tr.trim=function(t,e,r){if((t=ss(t))&&(r||void 0===e))return t.replace(G,"");if(!t||!(e=Qn(e)))return t;var n=Ye(t),i=Ye(e);return li(n,De(n,i),Ie(n,i)+1).join("")},Tr.trimEnd=function(t,e,r){if((t=ss(t))&&(r||void 0===e))return t.replace(K,"");if(!t||!(e=Qn(e)))return t;var n=Ye(t);return li(n,0,Ie(n,Ye(e))+1).join("")},Tr.trimStart=function(t,e,r){if((t=ss(t))&&(r||void 0===e))return t.replace(X,"");if(!t||!(e=Qn(e)))return t;var n=Ye(t);return li(n,De(n,Ye(e))).join("")},Tr.truncate=function(t,e){var r=30,n="...";if(Wo(e)){var i="separator"in e?e.separator:i;r="length"in e?ns(e.length):r,n="omission"in e?Qn(e.omission):n}var a=(t=ss(t)).length;if(Me(t)){var o=Ye(t);a=o.length}if(r>=a)return t;var s=r-$e(n);if(s<1)return n;var u=o?li(o,0,s).join(""):t.slice(0,s);if(void 0===i)return u+n;if(o&&(s+=u.length-s),Go(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=vt(i.source,ss(nt.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var f=l.index;u=u.slice(0,void 0===f?s:f)}}else if(t.indexOf(Qn(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+n},Tr.unescape=function(t){return(t=ss(t))&&j.test(t)?t.replace(U,qe):t},Tr.uniqueId=function(t){var e=++St;return ss(t)+e},Tr.upperCase=js,Tr.upperFirst=Ms,Tr.each=oo,Tr.eachRight=so,Tr.first=Ia,Ks(Tr,(cu={},un(Tr,(function(t,e){Et.call(Tr.prototype,e)||(cu[e]=t)})),cu),{chain:!1}),Tr.VERSION="4.17.20",se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Tr[t].placeholder=Tr})),se(["drop","take"],(function(t,e){Lr.prototype[t]=function(r){r=void 0===r?1:ar(ns(r),0);var n=this.__filtered__&&!e?new Lr(this):this.clone();return n.__filtered__?n.__takeCount__=or(r,n.__takeCount__):n.__views__.push({size:or(r,4294967295),type:t+(n.__dir__<0?"Right":"")}),n},Lr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),se(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Lr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ki(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),se(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Lr.prototype[t]=function(){return this[r](1).value()[0]}})),se(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Lr.prototype[t]=function(){return this.__filtered__?new Lr(this):this[r](1)}})),Lr.prototype.compact=function(){return this.filter(Ys)},Lr.prototype.find=function(t){return this.filter(t).head()},Lr.prototype.findLast=function(t){return this.reverse().find(t)},Lr.prototype.invokeMap=jn((function(t,e){return"function"==typeof t?new Lr(this):this.map((function(r){return mn(r,t,e)}))})),Lr.prototype.reject=function(t){return this.filter(Eo(Ki(t)))},Lr.prototype.slice=function(t,e){t=ns(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Lr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),void 0!==e&&(r=(e=ns(e))<0?r.dropRight(-e):r.take(e-t)),r)},Lr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Lr.prototype.toArray=function(){return this.take(4294967295)},un(Lr.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),i=Tr[n?"take"+("last"==e?"Right":""):e],a=n||/^find/.test(e);i&&(Tr.prototype[e]=function(){var e=this.__wrapped__,o=n?[1]:arguments,s=e instanceof Lr,u=o[0],l=s||Do(e),c=function(t){var e=i.apply(Tr,pe([t],o));return n&&f?e[0]:e};l&&r&&"function"==typeof u&&1!=u.length&&(s=l=!1);var f=this.__chain__,h=!!this.__actions__.length,d=a&&!f,p=s&&!h;if(!a&&l){e=p?e:new Lr(this);var y=t.apply(e,o);return y.__actions__.push({func:eo,args:[c],thisArg:void 0}),new Rr(y,f)}return d&&p?t.apply(this,o):(y=this.thru(c),d?n?y.value()[0]:y.value():y)})})),se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=bt[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Tr.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(Do(i)?i:[],t)}return this[r]((function(r){return e.apply(Do(r)?r:[],t)}))}})),un(Lr.prototype,(function(t,e){var r=Tr[e];if(r){var n=r.name+"";Et.call(mr,n)||(mr[n]=[]),mr[n].push({name:e,func:r})}})),mr[Ai(void 0,2).name]=[{name:"wrapper",func:void 0}],Lr.prototype.clone=function(){var t=new Lr(this.__wrapped__);return t.__actions__=gi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gi(this.__views__),t},Lr.prototype.reverse=function(){if(this.__filtered__){var t=new Lr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Lr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Do(t),n=e<0,i=r?t.length:0,a=function(t,e,r){var n=-1,i=r.length;for(;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=or(e,t+o);break;case"takeRight":t=ar(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=n?s:o-1,c=this.__iteratees__,f=c.length,h=0,d=or(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return ri(t,this.__actions__);var p=[];t:for(;u--&&h<d;){for(var y=-1,v=t[l+=e];++y<f;){var g=c[y],m=g.iteratee,b=g.type,_=m(v);if(2==b)v=_;else if(!_){if(1==b)continue t;break t}}p[h++]=v}return p},Tr.prototype.at=ro,Tr.prototype.chain=function(){return to(this)},Tr.prototype.commit=function(){return new Rr(this.value(),this.__chain__)},Tr.prototype.next=function(){void 0===this.__values__&&(this.__values__=es(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Tr.prototype.plant=function(t){for(var e,r=this;r instanceof Br;){var n=Ta(r);n.__index__=0,n.__values__=void 0,e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e},Tr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Lr){var e=t;return this.__actions__.length&&(e=new Lr(this)),(e=e.reverse()).__actions__.push({func:eo,args:[Va],thisArg:void 0}),new Rr(e,this.__chain__)}return this.thru(Va)},Tr.prototype.toJSON=Tr.prototype.valueOf=Tr.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},Tr.prototype.first=Tr.prototype.head,Jt&&(Tr.prototype[Jt]=function(){return this}),Tr}();qt._=Ge,void 0===(i=function(){return Ge}.call(e,r,e,n))||(n.exports=i)}).call(this)}).call(this,r(36),r(129)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={data:r(131),read:r(87),save:r(135),resize:r(136),sat:r(137),ssat:r(138),sobel:r(139),scharr:r(140),areaSum:r(89),areaValue:r(141),rgb2gray:r(40),flip:r(142)}},function(t,e,r){"use strict";(function(e){var n=r(132),i=r(87),a=n.join(n.resolve(e),"../../data");function o(t){return i(n.join(a,t))}var s={};Object.defineProperty(s,"digit",{get:function(){return o("five.png")}}),Object.defineProperty(s,"five",{get:function(){return o("five.png")}}),Object.defineProperty(s,"node",{get:function(){return o("nodejs.png")}}),Object.defineProperty(s,"lena",{get:function(){return o("lenna.png")}}),Object.defineProperty(s,"lenna",{get:function(){return o("lenna.png")}}),Object.defineProperty(s,"moon",{get:function(){return o("moon.jpg")}}),t.exports=s}).call(this,"/")},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,i="/"===o.charAt(0))}return(i?"/":"")+(e=r(n(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var a=e.isAbsolute(t),o="/"===i(t,-1);return(t=r(n(t.split("/"),(function(t){return!!t})),!a).join("/"))||a||(t="."),t&&o&&(t+="/"),(a?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),a=n(r.split("/")),o=Math.min(i.length,a.length),s=o,u=0;u<o;u++)if(i[u]!==a[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(a.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!i){n=a;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=function(t){"string"!=typeof t&&(t+="");var e,r=0,n=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){r=e+1;break}}else-1===n&&(i=!1,n=e+1);return-1===n?"":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,n=-1,i=!0,a=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===n&&(i=!1,n=o+1),46===s?-1===e?e=o:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){r=o+1;break}}return-1===e||-1===n||0===a||1===a&&e===n-1&&e===r+1?"":t.slice(e,n)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(133))},function(t,e){var r,n,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!c){var t=s(h);c=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new p(t,e)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n=r(24),i=r(18),a=n({args:["array","array","array"],pre:function(){this.isgray=!0},body:function(t,e,r){t===e&&e===r||(this.isgray=!1)},post:function(){return this.isgray}});t.exports=function(t){t instanceof i&&(t=t.selection);var e=t.shape;return 1!==e.length&&(2===e.length||3===e.length&&1===e[2]||3===e.length&&(3===e[2]||4===e[2])&&a(t.pick(null,null,0),t.pick(null,null,1),t.pick(null,null,2)))}},function(t,e,r){"use strict";var n=r(88),i=r(49);t.exports=function(t,e){var r=t.shape,a=r[0],o=r[1];if(!(e instanceof HTMLCanvasElement))throw new i.ValueError("expect input to be either an HTML Canvas or a (loaded) Image");var s=document.createElement("canvas");s.height=a,s.width=o;var u=s.getContext("2d"),l=u.createImageData(o,a),c=n.setRawData(t.selection,l.data);if(c)throw c;u.putImageData(l,0,0),u.drawImage(s,o,a),e.getContext("2d").drawImage(s,0,0,o,a,0,0,e.width,e.height)}},function(t,e,r){"use strict";var n=r(88),i=r(37),a=r(18);t.exports=function(t,e,r){var o=t.shape,s=o[0],u=o[1],l=o[2]||1,c=document.createElement("canvas");c.height=s,c.width=u;var f=c.getContext("2d"),h=f.createImageData(u,s),d=n.setRawData(t.selection,h.data);if(d)throw d;var p=s/e,y=u/r,v=Math.min(p,y),g=e*v,m=r*v,b=(s-v*e)/2,_=(u-v*r)/2;f.putImageData(h,0,0),f.drawImage(c,_,b,m,g,0,0,r,e);var w=f.getImageData(0,0,r,e),k=[0|r,0|e,4],x=[4,4*r|0,1],E=i(new Uint8Array(w.data),k,x,0).transpose(1,0);return(2===o.length||3===o.length&&1===l)&&(E=E.pick(null,null,0)),new a(E)}},function(t,e,r){"use strict";var n=r(24),i=r(18),a=r(40),o=n({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],body:function(t,e,r,n,i,a){0!==r[0]&&0!==r[1]?e+i+a-n:0===r[0]&&0===r[1]?e:0===r[0]?e+a:e+i}});t.exports=function(t){var e=a(t),r=e.shape,n=r[0],s=r[1],u=new i(new Uint32Array(n*s),[n,s]);return o(u.selection,e.selection),u}},function(t,e,r){"use strict";var n=r(24),i=r(18),a=r(40),o=n({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],body:function(t,e,r,n,i,a){0!==r[0]&&0!==r[1]?e*e+i+a-n:0===r[0]&&0===r[1]?e*e:0===r[0]?e*e+a:e*e+i}});t.exports=function(t){var e=a(t),r=e.shape,n=r[0],s=r[1],u=new i(new Uint32Array(n*s),[n,s]);return o(u.selection,e.selection),u}},function(t,e,r){"use strict";var n=r(24),i=r(38),a=r(18),o=r(39),s=r(40),u=n({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],body:function(t,e,r,n,i,a,o,s,u,l){var c=r+2*n+i-s-2*u-l,f=r-i+2*a-2*o+s-l;Math.sqrt(f*f+c*c)}});t.exports=function(t){var e=s(t),r=e.shape,n=r[0],l=r[1],c=new a(new Float32Array(o.shapeSize(r)),r);return u(c.selection,e.selection),i.assigns(c.selection.pick(0,null),0),i.assigns(c.selection.pick(null,0),0),i.assigns(c.selection.pick(n-1,null),0),i.assigns(c.selection.pick(null,l-1),0),c.divide(4*Math.sqrt(2),!1)}},function(t,e,r){"use strict";var n=r(24),i=r(38),a=r(18),o=r(39),s=r(40),u=n({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],body:function(t,e,r,n,i,a,o,s,u,l){var c=3*r+10*n+3*i-3*s-10*u-3*l,f=3*r-3*i+10*a-10*o+3*s-3*l;Math.sqrt(f*f+c*c)}});t.exports=function(t){var e=s(t),r=e.shape,n=r[0],l=r[1],c=new a(new Float32Array(o.shapeSize(r)),r);return u(c.selection,e.selection),i.assigns(c.selection.pick(0,null),0),i.assigns(c.selection.pick(null,0),0),i.assigns(c.selection.pick(n-1,null),0),i.assigns(c.selection.pick(null,l-1),0),c.divide(16*Math.sqrt(2),!1)}},function(t,e,r){"use strict";var n=r(89);t.exports=function(t,e,r,i,a){return n(t,e,r,i,a)/(r*i)}},function(t,e,r){"use strict";var n=r(18);t.exports=function(t){return new n(t.selection.step(null,-1))}},function(t,e,r){!function(){"use strict";var e=r(60),n=r(144);function i(t){var e=t.getContext("2d"),r=null,i=null,a=null;return this.drawFrame=function(o){var s=o.format;t.width===s.displayWidth&&t.height===s.displayHeight||(t.width=s.displayWidth,t.height=s.displayHeight),null!==r&&r.width==s.width&&r.height==s.height||function(t,n){for(var i=(r=e.createImageData(t,n)).data,a=t*n*4,o=0;o<a;o+=4)i[o+3]=255}(s.width,s.height),n.convertYCbCr(o,r.data);var u,l,c,f=s.cropWidth!=s.displayWidth||s.cropHeight!=s.displayHeight;f?(i||(l=s.cropWidth,c=s.cropHeight,(i=document.createElement("canvas")).width=l,i.height=c,a=i.getContext("2d")),u=a):u=e,u.putImageData(r,-s.cropLeft,-s.cropTop,s.cropLeft,s.cropTop,s.cropWidth,s.cropHeight),f&&e.drawImage(i,0,0,s.displayWidth,s.displayHeight)},this.clear=function(){e.clearRect(0,0,t.width,t.height)},this}i.prototype=Object.create(e.prototype),t.exports=i}()},function(t,e,r){!function(){"use strict";var e=r(145);
/**
	 * Basic YCbCr->RGB conversion
	 *
	 * @author Brion Vibber <brion@pobox.com>
	 * @copyright 2014-2019
	 * @license MIT-style
	 *
	 * @param {YUVFrame} buffer - input frame buffer
	 * @param {Uint8ClampedArray} output - array to draw RGBA into
	 * Assumes that the output array already has alpha channel set to opaque.
	 */t.exports={convertYCbCr:function(t,r){var n=0|t.format.width,i=0|t.format.height,a=0|e(t.format.width/t.format.chromaWidth),o=0|e(t.format.height/t.format.chromaHeight),s=t.y.bytes,u=t.u.bytes,l=t.v.bytes,c=0|t.y.stride,f=0|t.u.stride,h=0|t.v.stride,d=n<<2,p=0,y=0,v=0,g=0,m=0,b=0,_=0,w=0,k=0,x=0,E=0,S=0,P=0,T=0,A=0,B=0,R=0,L=0;if(1==a&&1==o)for(_=0,w=d,L=0,B=0;B<i;B+=2){for(v=(y=B*c|0)+c|0,g=L*f|0,m=L*h|0,A=0;A<n;A+=2)k=0|u[g++],S=(409*(x=0|l[m++])|0)-57088|0,P=(100*k|0)+(208*x|0)-34816|0,T=(516*k|0)-70912|0,E=298*s[y++]|0,r[_]=E+S>>8,r[_+1]=E-P>>8,r[_+2]=E+T>>8,_+=4,E=298*s[y++]|0,r[_]=E+S>>8,r[_+1]=E-P>>8,r[_+2]=E+T>>8,_+=4,E=298*s[v++]|0,r[w]=E+S>>8,r[w+1]=E-P>>8,r[w+2]=E+T>>8,w+=4,E=298*s[v++]|0,r[w]=E+S>>8,r[w+1]=E-P>>8,r[w+2]=E+T>>8,w+=4;_+=d,w+=d,L++}else for(b=0,B=0;B<i;B++)for(R=0,p=B*c|0,g=(L=B>>o)*f|0,m=L*h|0,A=0;A<n;A++)k=0|u[g+(R=A>>a)],S=(409*(x=0|l[m+R])|0)-57088|0,P=(100*k|0)+(208*x|0)-34816|0,T=(516*k|0)-70912|0,E=298*s[p++]|0,r[b]=E+S>>8,r[b+1]=E-P>>8,r[b+2]=E+T>>8,b+=4}}}()},function(t,e){!function(){"use strict";
/**
   * Convert a ratio into a bit-shift count; for instance a ratio of 2
   * becomes a bit-shift of 1, while a ratio of 1 is a bit-shift of 0.
   *
   * @author Brion Vibber <brion@pobox.com>
   * @copyright 2016
   * @license MIT-style
   *
   * @param {number} ratio - the integer ratio to convert.
   * @returns {number} - number of bits to shift to multiply/divide by the ratio.
   * @throws exception if given a non-power-of-two
   */t.exports=function(t){for(var e=0,r=t>>1;0!=r;)r>>=1,e++;if(t!==1<<e)throw"chroma plane dimensions must be power of 2 ratio to luma plane dimensions; got "+t;return e}}()},function(t,e,r){!function(){"use strict";var e=r(60),n=r(147);function i(t){var e,r,a=this,o=i.contextForCanvas(t);if(null===o)throw new Error("WebGL unavailable");function s(t,e){var r=o.createShader(t);if(o.shaderSource(r,e),o.compileShader(r),!o.getShaderParameter(r,o.COMPILE_STATUS)){var n=o.getShaderInfoLog(r);throw o.deleteShader(r),new Error("GL shader compilation for "+t+" failed: "+n)}return r}var u,l,c,f,h,d,p,y,v,g,m=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),b={},_={},w={};function k(t){return b[t]||(b[t]=o.createTexture()),b[t]}function x(t,e,r,n){var a=k(t);if(o.activeTexture(o.TEXTURE0),i.stripe){var s=!b[t+"_temp"],u=k(t+"_temp");o.bindTexture(o.TEXTURE_2D,u),s?(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e/4,r,0,o.RGBA,o.UNSIGNED_BYTE,n)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e/4,r,o.RGBA,o.UNSIGNED_BYTE,n);var l=b[t+"_stripe"],c=!l;c&&(l=k(t+"_stripe")),o.bindTexture(o.TEXTURE_2D,l),c&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,1,0,o.RGBA,o.UNSIGNED_BYTE,function(t){if(w[t])return w[t];for(var e=t,r=new Uint32Array(e),n=0;n<e;n+=4)r[n]=255,r[n+1]=65280,r[n+2]=16711680,r[n+3]=4278190080;return w[t]=new Uint8Array(r.buffer)}(e)))}else o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,e,r,0,o.LUMINANCE,o.UNSIGNED_BYTE,n)}function E(t,e,n){var i=b[t];o.useProgram(r);var a=_[t];a||(o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,n,0,o.RGBA,o.UNSIGNED_BYTE,null),a=_[t]=o.createFramebuffer()),o.bindFramebuffer(o.FRAMEBUFFER,a),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0);var s=b[t+"_temp"];o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,s),o.uniform1i(d,1);var p=b[t+"_stripe"];o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,p),o.uniform1i(h,2),o.bindBuffer(o.ARRAY_BUFFER,u),o.enableVertexAttribArray(l),o.vertexAttribPointer(l,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,c),o.enableVertexAttribArray(f),o.vertexAttribPointer(f,2,o.FLOAT,!1,0,0),o.viewport(0,0,e,n),o.drawArrays(o.TRIANGLES,0,m.length/2),o.bindFramebuffer(o.FRAMEBUFFER,null)}function S(t,r,n){o.activeTexture(r),o.bindTexture(o.TEXTURE_2D,b[t]),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.uniform1i(o.getUniformLocation(e,t),n)}function P(t,e){var r=s(o.VERTEX_SHADER,t),n=s(o.FRAGMENT_SHADER,e),i=o.createProgram();if(o.attachShader(i,r),o.attachShader(i,n),o.linkProgram(i),!o.getProgramParameter(i,o.LINK_STATUS)){var a=o.getProgramInfoLog(i);throw o.deleteProgram(i),new Error("GL program linking failed: "+a)}return i}return a.drawFrame=function(s){var b=s.format,_=!e||t.width!==b.displayWidth||t.height!==b.displayHeight;if(_&&(t.width=b.displayWidth,t.height=b.displayHeight,a.clear()),e||function(){if(i.stripe){r=P(n.vertexStripe,n.fragmentStripe),o.getAttribLocation(r,"aPosition"),c=o.createBuffer();var t=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);o.bindBuffer(o.ARRAY_BUFFER,c),o.bufferData(o.ARRAY_BUFFER,t,o.STATIC_DRAW),f=o.getAttribLocation(r,"aTexturePosition"),h=o.getUniformLocation(r,"uStripe"),d=o.getUniformLocation(r,"uTexture")}e=P(n.vertex,n.fragment),u=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,u),o.bufferData(o.ARRAY_BUFFER,m,o.STATIC_DRAW),l=o.getAttribLocation(e,"aPosition"),p=o.createBuffer(),y=o.getAttribLocation(e,"aLumaPosition"),v=o.createBuffer(),g=o.getAttribLocation(e,"aChromaPosition")}(),_){var w=function(t,e,r){var n=b.cropLeft/r,i=(b.cropLeft+b.cropWidth)/r,a=(b.cropTop+b.cropHeight)/b.height,s=b.cropTop/b.height,u=new Float32Array([n,a,i,a,n,s,n,s,i,a,i,s]);o.bindBuffer(o.ARRAY_BUFFER,t),o.bufferData(o.ARRAY_BUFFER,u,o.STATIC_DRAW)};w(p,0,s.y.stride),w(v,0,s.u.stride*b.width/b.chromaWidth)}x("uTextureY",s.y.stride,b.height,s.y.bytes),x("uTextureCb",s.u.stride,b.chromaHeight,s.u.bytes),x("uTextureCr",s.v.stride,b.chromaHeight,s.v.bytes),i.stripe&&(E("uTextureY",s.y.stride,b.height),E("uTextureCb",s.u.stride,b.chromaHeight),E("uTextureCr",s.v.stride,b.chromaHeight)),o.useProgram(e),o.viewport(0,0,t.width,t.height),S("uTextureY",o.TEXTURE0,0),S("uTextureCb",o.TEXTURE1,1),S("uTextureCr",o.TEXTURE2,2),o.bindBuffer(o.ARRAY_BUFFER,u),o.enableVertexAttribArray(l),o.vertexAttribPointer(l,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,p),o.enableVertexAttribArray(y),o.vertexAttribPointer(y,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,v),o.enableVertexAttribArray(g),o.vertexAttribPointer(g,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,m.length/2)},a.clear=function(){o.viewport(0,0,t.width,t.height),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)},a.clear(),a}i.stripe=-1!==navigator.userAgent.indexOf("Windows"),i.contextForCanvas=function(t){var e={preferLowPowerToHighPerformance:!0,powerPreference:"low-power",failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)},i.isAvailable=function(){var t,e=document.createElement("canvas");e.width=1,e.height=1;try{t=i.contextForCanvas(e)}catch(t){return!1}if(t){var r=t.TEXTURE0,n=t.createTexture(),a=new Uint8Array(16),o=i.stripe?1:4,s=i.stripe?t.RGBA:t.LUMINANCE,u=i.stripe?t.NEAREST:t.LINEAR;return t.activeTexture(r),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,u),t.texImage2D(t.TEXTURE_2D,0,s,o,4,0,s,t.UNSIGNED_BYTE,a),!t.getError()}return!1},i.prototype=Object.create(e.prototype),t.exports=i}()},function(t,e){t.exports={vertex:"precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aLumaPosition;\nattribute vec2 aChromaPosition;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vLumaPosition = aLumaPosition;\n    vChromaPosition = aChromaPosition;\n}\n",fragment:"// inspired by https://github.com/mbebenita/Broadway/blob/master/Player/canvas.js\n\nprecision lowp float;\n\nuniform sampler2D uTextureY;\nuniform sampler2D uTextureCb;\nuniform sampler2D uTextureCr;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n   // Y, Cb, and Cr planes are uploaded as LUMINANCE textures.\n   float fY = texture2D(uTextureY, vLumaPosition).x;\n   float fCb = texture2D(uTextureCb, vChromaPosition).x;\n   float fCr = texture2D(uTextureCr, vChromaPosition).x;\n\n   // Premultipy the Y...\n   float fYmul = fY * 1.1643828125;\n\n   // And convert that to RGB!\n   gl_FragColor = vec4(\n     fYmul + 1.59602734375 * fCr - 0.87078515625,\n     fYmul - 0.39176171875 * fCb - 0.81296875 * fCr + 0.52959375,\n     fYmul + 2.017234375   * fCb - 1.081390625,\n     1\n   );\n}\n",vertexStripe:"precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexturePosition;\nvarying vec2 vTexturePosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vTexturePosition = aTexturePosition;\n}\n",fragmentStripe:"// extra 'stripe' texture fiddling to work around IE 11's poor performance on gl.LUMINANCE and gl.ALPHA textures\n\nprecision lowp float;\n\nuniform sampler2D uStripe;\nuniform sampler2D uTexture;\nvarying vec2 vTexturePosition;\nvoid main() {\n   // Y, Cb, and Cr planes are mapped into a pseudo-RGBA texture\n   // so we can upload them without expanding the bytes on IE 11\n   // which doesn't allow LUMINANCE or ALPHA textures\n   // The stripe textures mark which channel to keep for each pixel.\n   // Each texture extraction will contain the relevant value in one\n   // channel only.\n\n   float fLuminance = dot(\n      texture2D(uStripe, vTexturePosition),\n      texture2D(uTexture, vTexturePosition)\n   );\n\n   gl_FragColor = vec4(fLuminance, fLuminance, fLuminance, 1);\n}\n"}},function(t,e,r){"use strict";r.r(e);var n=r(4),i=r.n(n),a=r(5),o=r.n(a),s=r(0),u=r.n(s),l=r(72),c=r.n(l),f=r(12),h=r.n(f),d=r(20),p=r.n(d),y=r(31),v=r.n(y),g=r(11),m=r(26);function b(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var w=g.a.get("HTTP.js",{level:2}),k=function(){var t=v()(p.a.mark((function t(e){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof Blob)){t.next=5;break}return t.next=3,new Response(e).arrayBuffer();case 3:return r=t.sent,t.abrupt("return",new Uint8Array(r,0));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var x=function(t){if(t)return Object.entries(t).reduce((function(t,e,r){var n=c()(e,2),i=n[0],a=n[1];return t+(0===r?i+"="+encodeURIComponent(a):"&"+i+"="+encodeURIComponent(a))}),"")};function E(t,e){var r=("function"==typeof t.clone?t.clone():void 0)||t,n=function(t,e){var r={body:e,headers:function(t){return t.headers.entries?function(t){var e,r=Object.create(Object.getPrototypeOf(t.headers)),n=b(t.headers.entries());try{for(n.s();!(e=n.n()).done;){var i=c()(e.value,2),a=i[0],o=i[1];r[a]=o}}catch(t){n.e(t)}finally{n.f()}return r}(t):function(t){var e={},r=t.headers.__headers__;for(var n in r)e[n]=r[n].join("");return e}(t)}(t),response:t,status:t.status,statusText:t.statusText};return t.ok?Promise.resolve(r):Promise.reject(r)};return t[e]().then((function(t){return n(r,t)}))}function S(t,e){var r=t.headers.get("content-type"),n=t.clone().body.getReader(),i=0,a=i,o=setInterval((function(){var t=50*(i-a);t<=1||(w.info("HTTP>handleResponse","".concat(a," | ").concat(i),"".concat(t.toFixed(2)," Bytes/s")),self.postMessage({type:"notice",method:"fetch",noticeType:"speed",data:{speed:t,intervalValue:20,lastReceived:a,bytesReceived:i}}),a=i)}),20);return n.read().then((function a(s){return s.done?(clearInterval(o),function(){if("ts"===e||"video"===e)return E(t,"blob");if(r.includes("json"))return E(t,"json");if(r.includes("text"))return E(t,"text");if(r.includes("form"))return E(t,"formData");if(r.includes("video")||r.includes("image")||r.includes("octet-stream"))return E(t,"blob");try{return E(t,"text")}catch(e){return Object(m.a)(e,"[HTTP>handleResponse:unknow content-type]",r,t),Promise.resolve(t)}}()):(i+=s.value.length,n.read().then(a))}))}var P=null,T=(P||(P=new(function(){function t(e){i()(this,t),u()(this,"options",{"content-type":"application/json;charset=UTF-8",cache:"no-cache",mode:"cors"}),Object.assign(this.options,e)}var e;return o()(t,[{key:"setOptions",value:function(t){var e=Object.assign(this.options,t);e.url=function(t){var e=t.url,r=t.params;return r?e+"?"+x(r):e}(e),e.method=e.method||"get",e.headers=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.headers,r=void 0===e?{}:e,n=t.method,i=void 0===n?"get":n,a=t.username,o=t.password,s=t.token,u=new Headers(r);if(a||o){if(!a)throw new TypeError("username required for basic authentication");if(!o)throw new TypeError("password required for basic authentication");var l="object"===("undefined"==typeof win?"undefined":h()(win))&&win.btoa?btoa:function(t){return t};u.set("Authorization","Basic "+l(a+":"+o))}return s&&u.set("Authorization","Bearer "+s),"get"===i||u.get("content-type")||u.set("content-type","application/json"),u}(e),e.body=function(t){var e=t.headers.get("content-type");if(e)return e.includes("json")?JSON.stringify(t.body):e.includes("x-www-form-urlencoded")?x(t.body):t.body}(e),delete e.username,delete e.password,delete e.token,this.options=e}},{key:"request",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(t)return this.setOptions(Object.assign({url:t},e)),fetch(this.options.url,this.options).then((function(t){return S(t,r)}));w.error("[HTTP>request]","url is undefined","url:",t,"options:",e)}},{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=v()(p.a.mark((function t(e){var r,n,i,a,o=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2?o[2]:void 0,i=o.length>3?o[3]:void 0,e){t.next=6;break}return w.wran("[HTTP>fetch]","url is undefined","url:",e,"options:",r),t.abrupt("return");case 6:return this.setOptions(Object.assign({url:e},r)),w.info("[HTTP>fetch]","http fetch","url:",e,"options:",r),t.next=10,fetch(e,r);case 10:(a=t.sent).ok?a.text().then((function(t){self.postMessage({type:"invoke",method:"fetch",fileType:i,name:n,data:t})})):self.postMessage({result:"failed"});case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())},{key:"get",value:(e=v()(p.a.mark((function t(e){var r,n,i,a,o,s=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2?s[2]:void 0,i=s.length>3?s[3]:void 0,r.method="get",w.info("[HTTP>get]","http get","url:",e,"options:",r,"name:",n,"fileType:",i),o={type:"invoke",method:"get",fileType:i,name:n,url:e},t.prev=6,t.next=9,this.request.call(this,e,r,i);case 9:a=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),w.error("[HTTP>get]","networks error","url:",e,"options:",r,"name:",n,"fileType:",i,"ex:",t.t0);case 15:if(!a||!a.body){t.next=24;break}if(o.data=a.body,"ts"!==i&&"video"!==i){t.next=21;break}return t.next=20,k(o.data);case 20:o.arrayBuffer=t.sent;case 21:o.arrayBuffer?self.postMessage(o,[o.arrayBuffer.buffer]):self.postMessage(o),t.next=27;break;case 24:o.type="error",o.data=a,self.postMessage(o);case 27:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(t){return e.apply(this,arguments)})}]),t}())({})),P);e.default=function(t){t.onmessage=function(t){var e=t.data,r=e.type,n=e.method;switch(r){case"invoke":T[n].call(T,e.url,e.options,e.name,e.fileType)}}}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}},function(t,e,r){var n=r(152);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,r){var n=r(155);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(157)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(156)(!1)).push([t.i,'.goldplay{background:transparent}gp-button{cursor:pointer;font-size:14px}@-webkit-keyframes goldplay-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes goldplay-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.goldplay-btn{border:1px outset;text-align:center;display:inline-block;cursor:pointer}.goldplay-hoverbox{background:rgba(70,70,70,.8);border-radius:3px;visibility:hidden;display:inline-block;position:absolute;font-size:14px}.goldplay-hoverbox ul li{height:24px}.goldplay-hoverbox .gp-selected{color:#f60}.goldplay__container{display:block;z-index:9999;font-family:Arial,Helvetica,sans-serif;background:#000}.goldplay__container-fullpage,.goldplay__container-fullscreen{position:absolute;width:100%;height:100%;line-height:100%;left:0;top:0}.goldplay__container *{-webkit-box-sizing:border-box;box-sizing:border-box}.goldplay__container svg{overflow:auto;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;width:auto;height:auto}.goldplay__container li,.goldplay__container ul{list-style:none}.goldplay__screen--bigplay{z-index:299;opacity:0;-webkit-transition:opacity 1s;transition:opacity 1s}.goldplay__screen--bigplay,.goldplay__screen--poster{color:#fff;text-align:center;font-family:Arial,Helvetica,sans-serif;position:absolute;display:inline-block}.goldplay__screen--poster{vertical-align:middle;z-index:399;opacity:1;-webkit-transition:opacity 2s;transition:opacity 2s}.goldplay__screen--poster-image{margin:auto;text-align:center;vertical-align:middle;-webkit-filter:"";filter:""}.goldplay__screen--poster-speed{display:block}.goldplay__control--container{width:auto;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 5px;background:transparent;opacity:0;-webkit-transition:opacity 1s;transition:opacity 1s;display:block}.goldplay__control--container-float{position:absolute;margin-top:-50px}.goldplay__control--nearside{padding-top:4px;margin-left:10px;display:block}.goldplay__control--sidebar{padding-top:4px;float:right;display:block}.goldplay__control--container.canvas{position:absolute}.goldplay__screen--container{width:100%;display:block}.goldplay__progress-bar{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;background:hsla(0,15%,90%,.4);height:3px;border-radius:5px;line-height:3px;margin:6px 0;display:inline-block}.goldplay__progress-bar:hover{height:5px;line-height:5px;margin:5px 0;border-top:1px solid transparent}.goldplay__progress-bar:hover .goldplay__progressbar--load,.goldplay__progress-bar:hover .goldplay__progressbar--play{height:5px;line-height:5px;margin-top:-1px}.goldplay__progress-bar-hover{height:5px;line-height:5px;margin:5px 0;border-radius:5px}.goldplay__progressbar--load-hover,.goldplay__progressbar--play-hover{height:5px!important;line-height:5px!important}.goldplay__control--button-block{display:inline-block}.goldplay__control--play{display:none;width:20px}.goldplay__control--replay{display:none;margin:-4px 0 0 -4px}.goldplay__control--pause{display:none;width:20px}.goldplay__control--pause-loading{margin:-5px 0 0 -5px}.goldplay__waiting-bar{position:absolute;text-align:center;color:#fff;z-index:98;display:none;opacity:.7}.goldplay__waiting-bar--icon{width:120px;text-align:center;display:block}.goldplay__waiting-bar img{opacity:.3}.goldplay__waiting-bar--speed{display:block}.goldplay__progressbar--play{height:3px;border-radius:5px;background-color:rgba(255,80,0,.8);position:absolute}.goldplay__progressbar--load{height:3px;border-radius:5px;background-color:hsla(0,0%,100%,.8);position:absolute}.goldplay__progressbar--dot{position:absolute}.goldplay__progressbar--dot:before{content:"";display:inline-block;width:12px;height:12px;background:#fff;margin-top:-5px;border-radius:50%;border:1px solid #f1f1f1;background-image:-webkit-radial-gradient(circle arthest-corner at 45px 45px,#b0b9be,#191611);-webkit-box-shadow:0 0 2px 0 rgba(0,0,0,.26);box-shadow:0 0 2px 0 rgba(0,0,0,.26);cursor:-webkit-grab;cursor:grab}.goldplay__progressbar--dot-hover:before,.goldplay__progressbar--dot:hover:before{background:#f60;border:1px solid #f60;-webkit-box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);-webkit-transform:scale(1);transform:scale(1);-webkit-transition:-webkit-transform .15s ease-in-out;transition:-webkit-transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.goldplay__control--timer{font-size:.9em;color:#ccc;margin:3px 5px 0;display:inline-block;-webkit-transform:translateY(-5px);transform:translateY(-5px)}.goldplay__control--timer-total{color:#999}.goldplay__volume-bar--handle{height:100px;width:20px;margin:-122px 0 0;cursor:default}.goldplay__volume-bar--column{background:hsla(0,14%,92%,.5);width:4px;top:15px;left:8px;height:80px;position:absolute}.goldplay__volume-bar--precent{position:absolute;top:2px;width:100%;text-align:center;color:#f1f1f1;font-size:10px;cursor:text}.goldplay__volume-bar--size{background:#f60;left:8px;z-index:2;position:absolute}.goldplay__volume-bar--rod{position:absolute;left:5px;z-index:3}.goldplay__volume-bar--rod:before{content:"";display:table;width:12px;height:12px;background:#fff;margin-top:0;margin-left:-2px;border-radius:50%;border:1px solid #f1f1f1;background-image:radial-gradient(circle arthest-corner at 45px,at 45px,#b0b9be,#191611);background-image:radial-gradient(circle arthest-corner at 45px 45px,#b0b9be,#191611);-webkit-box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);cursor:-webkit-grab;cursor:grab}.goldplay__volume-bar--rod-hover:before,.goldplay__volume-bar--rod:hover:before{background:#f60;border:1px solid #f60;-webkit-box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);-webkit-transform:scale(1);transform:scale(1);-webkit-transition:-webkit-transform .15s ease-in-out;transition:-webkit-transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.goldplay__control--fullpage{margin:0 0 0 5px}.goldplay__control--fullscreen{margin:0 12px 0 10px}.goldplay__alter-box{z-index:999;padding:20px;border-radius:10px;color:#fff;position:absolute;word-break:break-word;overflow:auto;-webkit-box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);box-shadow:0 0 6px 2px hsla(0,10%,100%,.5);background:rgba(0,0,0,.6);min-width:50px;min-height:20px;max-width:400px;max-height:300px;opacity:0;-webkit-transition:opacity .3s;transition:opacity .3s}.goldplay__alter--close{margin:5px;display:block;position:absolute;right:0;top:0;cursor:pointer}.goldplay__alter--warn{float:left;margin:-5px 10px 5px 0}.goldplay__rate-bar,.goldplay__speed-bar{display:inline-block;color:#ccc;vertical-align:middle;margin:-14px 10px 0 0}.goldplay__rate-bar--box,.goldplay__speed-bar--box{cursor:default}.goldplay__speed-bar--box ul{margin:6px 0;padding:0;text-align:right}.goldplay__speed-bar--box ul li{height:2em;line-height:2em;padding:0 15px}.goldplay__rate-bar--box ul li:hover,.goldplay__speed-bar--box ul li:hover{background:rgba(0,0,0,.4)}.goldplay__rate-bar--box ul{margin:6px 0;padding:0;text-align:right}.goldplay__rate-bar--box ul li{height:2em;line-height:2em;padding:0 15px}',""])},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=(o=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[r].concat(a).concat([i]).join("\n")}var o;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r})).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(n[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];null!=o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),e.push(o))}},e}},function(t,e,r){var n,i,a={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),s=function(t,e){return e?e.querySelector(t):document.querySelector(t)},u=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=s.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,c=0,f=[],h=r(158);function d(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=a[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(b(n.parts[o],e))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(b(n.parts[o],e));a[n.id]={id:n.id,refs:1,parts:s}}}}function p(t,e){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i],o=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(s):r.push(n[o]={id:o,parts:[s]})}return r}function y(t,e){var r=u(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=f[f.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),f.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(t.insertAt.before,r);r.insertBefore(e,i)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function g(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return m(e,t.attrs),y(t,e),e}function m(t,e){Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])}))}function b(t,e){var r,n,i,a;if(e.transform&&t.css){if(!(a="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=a}if(e.singleton){var o=c++;r=l||(l=g(e)),n=k.bind(null,r,o,!1),i=k.bind(null,r,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),y(t,e),e}(e),n=E.bind(null,r,e),i=function(){v(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(e),n=x.bind(null,r),i=function(){v(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=p(t,e);return d(r,e),function(t){for(var n=[],i=0;i<r.length;i++){var o=r[i];(s=a[o.id]).refs--,n.push(s)}t&&d(p(t,e),e);for(i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete a[s.id]}}}};var _,w=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function k(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var a=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function x(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function E(t,e,r){var n=r.css,i=r.sourceMap,a=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||a)&&(n=h(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?r+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e);var n,i=r(4),a=r.n(i),o=r(5),s=r.n(o),u=r(10),l=(r(117),function(){function t(e){a()(this,t),this.decode=e,this.result=[]}return s()(t,[{key:"openDecode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,r=Module.addFunction((function(t,r,n,i,a,o,s,u,l,c,f){var h=HEAPU8.subarray(t,t+i*u),d=HEAPU8.subarray(r,r+a*u/2),p=HEAPU8.subarray(n,n+o*u/2),y=HEAPU8.subarray(c,c+f),v={stride_y:i,stride_u:a,stride_v:o,width:s,height:u,buf_y:Uint8Array.from(h),buf_u:Uint8Array.from(d),buf_v:Uint8Array.from(p),pts:l,buf_bgr:Uint8Array.from(y),bgr_size:f};e.result.push(v)}),"viiiiiiiiiii");Module._openDecoder(t,r,1)}},{key:"decodeData",value:function(t,e){var r=t.length,n=Module._malloc(r);Module.HEAPU8.set(t,n),Module._decodeData(n,r,e),Module._free(n)}},{key:"flush",value:function(){for(Module._flushDecoder();this.checkData();)this.decode.getDecodeYUV()}},{key:"closeDecode",value:function(){Module._closeDecoder()}},{key:"getYUV",value:function(){var t=null;return this.result.length>0&&(t=this.result.shift()),t}},{key:"checkData",value:function(){return this.result.length>0}}]),t}()),c=function(){function t(e){a()(this,t),this.decode=e}return s()(t,[{key:"openDecode",value:function(){return _web_decoder_open()}},{key:"closeDecode",value:function(t){_web_decoder_close(t)}},{key:"decodeData",value:function(t,e,r){var n=t.length||0;Module.ccall("web_decoder_decode_frame","number",["number","array","number","number"],[r,t,n,e])}},{key:"flush",value:function(t){var e=this.decode;if(_web_decoder_decode_frame)for(;;){if(_web_decoder_decode_frame(t,null,0,0)<0||!_web_got_frame(t))break;e.getDecodeYUV(t)}}},{key:"getYUV",value:function(t){var e=_web_get_stride_y(t),r=_web_get_stride_u(t),n=_web_get_stride_v(t),i=_web_get_width(t),a=_web_get_height(t),o=_web_get_frame_y(t),s=_web_get_frame_u(t),l=_web_get_frame_v(t),c=parseInt(_web_got_frame_pts(t)*u.a*1e3),f=HEAPU8.subarray(o,o+e*a),h=HEAPU8.subarray(s,s+r*a/2),d=HEAPU8.subarray(l,l+n*a/2);return{stride_y:e,stride_u:r,stride_v:n,width:i,height:a,buf_y:new Uint8Array(f),buf_u:new Uint8Array(h),buf_v:new Uint8Array(d),pts:c}}},{key:"checkData",value:function(t){return _web_got_frame(t)}}]),t}(),f=function(){function t(){a()(this,t),this.p=null,this.ptsList=[],this.ptsOffset=0,this.fps=0,this.lastDuration=0,this.previousPTS=0,this.status=!1,this.yuvArray=[],this.decodeTool=null}return s()(t,[{key:"loadWASM",value:function(t){var e=t.data.libPath;this.codec=t.data.codec,self.Module={locateFile:function(t){return e+t}},self.importScripts(e+"libffmpeg2.js"),self.Module.onRuntimeInitialized=function(){Module._web_decoder_open?self.decode.decodeTool=new c(self.decode,this.event):self.decode.decodeTool=new l(self.decode,this.event),self.decode.openDecode(),self.decode.onWasmLoaded()}}},{key:"openDecode",value:function(){try{this.status||(this.p=this.decodeTool.openDecode(this.codec),this.status=!0)}catch(t){console.error(t)}}},{key:"closeDecode",value:function(){this.status&&(this.decodeTool.closeDecode(this.p),this.status=!1)}},{key:"push",value:function(t){var e=this;t.forEach((function(t){var r=t.PTS,n=t.data_byte,i=t.partEnd,a=t.lastTS,o=e.ptsList;e.insertSort(o,parseInt(r*u.a*1e3)),e.decodeTool.decodeData(n,r,e.p),e.decodeTool.checkData(e.p)&&e.getDecodeYUV(e.p,i,a)}))}},{key:"getDecodeYUV",value:function(t,e,r){if(!this.reseting){var n=0;this.fps||(this.fps=this.getFPS());var i=this.decodeTool.getYUV(t),a=this.ptsList.shift();if(i.pts=a,this.previousPTS&&a?(n=parseInt(a-this.previousPTS),this.lastDuration=n):n=this.lastDuration,i.duration=n,i.fps=this.fps,a)this.previousPTS=a,this.yuvArray.push(i),this.yuvArray.length>10&&(self.postMessage({type:"decoded",data:this.yuvArray,no:this.no}),this.yuvArray=[]);e&&(this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray,no:this.no}),this.yuvArray=[]),self.postMessage({type:"partEnd",data:r}))}}},{key:"reset",value:function(){this.reseting=!0,this.ptsList=[],this.ptsOffset=0,this.previousPTS=0,this.fps=0,this.yuvArray=[],this.closeDecode(),this.openDecode(),self.postMessage({type:"resetEnd",data:Date.now()}),this.reseting=!1}},{key:"flush",value:function(){this.decodeTool.flush(this.p),this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]),this.closeDecode(),self.postMessage({type:"flushEnd",data:this.previousPTS})}},{key:"getFPS",value:function(){var t=this.ptsList;return t.length>=2?Math.round(1e3/(t[1]-t[0])):null}},{key:"onWasmLoaded",value:function(){self.postMessage({type:"dataProcessorReady"})}},{key:"insertSort",value:function(t,e){var r=t.length;if(0!==r){for(var n=0;n<r;n++)if(e<t[n]){for(var i=r;i>n;)t[i]=t[i-1],i--;return void(t[n]=e)}t.push(e)}else t.push(e)}}]),t}(),h=r(0),d=r.n(h);!function(t){t.ERROR="ERROR",t.INFO="INFO",t.DATA="DATA",t.DEMUX_DATA="DEMUX_DATA",t.DONE="DONE"}(n||(n={}));var p=Object.create||function(t){var e=function(){};return e.prototype=t,new e},y=Object.keys||function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e);return e},v=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};let g,m=10;class b{constructor(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=p(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}static listenerCount(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):E.call(t,e)}emit(t,...e){var r,n,i,a,o,s,u="error"===t;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(u){if(arguments.length>1&&(r=arguments[1]),r instanceof Error)throw r;var l=new Error('Unhandled "error" event. ('+r+")");throw l.context=r,l}if(!(n=s[t]))return!1;var c="function"==typeof n;switch(i=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=S(t,n),a=0;a<n;++a)try{i[a].call(r)}catch(t){console.error(t)}}(n,c,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,a=S(t,i),o=0;o<i;++o)try{a[o].call(r,n)}catch(t){console.error(t)}}(n,c,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var a=t.length,o=S(t,a),s=0;s<a;++s)try{o[s].call(r,n,i)}catch(t){console.error(t)}}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,a){if(e)t.call(r,n,i,a);else for(var o=t.length,s=S(t,o),u=0;u<o;++u)try{s[u].call(r,n,i,a)}catch(t){console.error(t)}}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(i-1),o=1;o<i;o++)a[o-1]=arguments[o];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,a=S(t,i),o=0;o<i;++o)try{a[o].apply(r,n)}catch(t){console.error(t)}}(n,c,this,a)}return!0}on(t,e){return function(t,e,r){var n,i,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');(i=t._events)?(i.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),a=i[e]):(i=t._events=p(null),t._eventsCount=0);if(a){if("function"==typeof a?a=i[e]=[a,r]:a.push(r),!a.warned&&(n=void 0===(o=t)._maxListeners?b.defaultMaxListeners:o._maxListeners)&&n>0&&a.length>n){a.warned=!0;class r extends Error{}let n=new r("Possible Dispatcher memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');n.name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",n.name,n.message)}}else a=i[e]=r,++t._eventsCount;var o;return t}(this,t,e)}once(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,function(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=v.call(k,n);return i.listener=r,n.wrapFn=i,i}(this,t,e)),this}off(t,e){return w.call(this,t,e)}removeAllListeners(t){var e,r,n;if(!(r=this._events))return this;if(!r.off)return 0===arguments.length?(this._events=p(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=p(null):delete r[t]),this;if(0===arguments.length){var i,a=y(r);for(n=0;n<a.length;++n)"off"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=p(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.off(t,e);else if(e)for(n=e.length-1;n>=0;n--)this.off(t,e[n]);return this}listeners(t){return x(this,t,!0)}rawListeners(t){return x(this,t,!1)}listenerCount(){return b.listenerCount.apply(this,arguments)}}try{var _={};Object.defineProperty&&Object.defineProperty(_,"x",{value:0}),g=0===_.x}catch(t){g=!1}function w(t,e){var r,n,i,a,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=p(null):(delete n[t],n.off&&this.emit("off",t,r.listener||e));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){o=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),n.off&&this.emit("off",t,o||e)}return this}function k(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function x(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):S(i,i.length):[]}function E(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function S(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}g?Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');m=t}}):b.defaultMaxListeners=m;class P extends b{}var T=Object.prototype.toString;function A(t){return!!t&&"object"==typeof t}function B(t){return"number"==typeof t&&!isNaN(t)}function R(t){return A(t)&&"[object arraybuffer]"===T.call(t).toLowerCase()}class L{constructor(){this.list_=[]}get byteLength(){if(!B(this.byteLength_)){let t=0;for(let e,r=0;r<this.list_.length;r++)e=this.list_[r],t+=e.byteLength;this.byteLength_=t}return this.byteLength_}get bytes(){const{bufferList:t}=this;let e=null;return t.length>0&&(e=0===t.length?t[0]:this.toNewBytes()),e}get empty(){return 0===this.list_.length}get bufferList(){return this.list_}clear(){let t=this.list_.length;t>0&&this.list_.splice(0,t),this.byteLength_=null}toNewBytes(){let t=null,e=0;for(;null===t;)try{e++,t=new Uint8Array(this.byteLength)}catch(t){if(e>50)throw t}for(let e=0,r=0;e<this.list_.length;e++){let n=this.list_[e];t.set(n,r),r+=n.byteLength}return t}append(t){t instanceof L?this.list_=this.list_.concat(t.bufferList):this.list_.push(t),this.byteLength_=null}cut(t,e=!0){let r=null;if(t>0&&!this.empty){let n=this.list_,i=0,a=0;for(;n.length>0;){let o=n.shift();if(0!==a){let a=t-i;if(o.byteLength>=a){e&&r.set(o.subarray(0,a),i),o=o.subarray(a),o.byteLength>0&&n.unshift(o);break}e&&r.set(o,i),i+=o.byteLength;break}if(o.byteLength>=t){e&&(r=o.subarray(0,t)),o.byteLength>t&&(o=o.subarray(t),n.unshift(o));break}if(e){try{r=new Uint8Array(t)}catch(e){throw`alloc_memory_error@ cache buffer: ${t} ${e.message}`}r.set(o,0)}i+=o.byteLength,a++}this.byteLength_=null}return r}}class C{constructor(){this.map_={}}push(t,e){Object.prototype.hasOwnProperty.call(this.map_,t)?this.map_[t].push(e):this.map_[t]=[e]}get(t){let e=this.map_[t];return e?e.slice():null}getAll(){let t=[];for(let e in this.map_)t.push.apply(t,this.map_[e]);return t}remove(t,e){let r=this.map_[t];if(r)for(let t=0;t<r.length;++t)r[t]==e&&(r.splice(t,1),--t)}clear(){this.map_={}}forEach(t){for(let e in this.map_)t(e,this.map_[e])}}class D{constructor(t,e,r){this.target=t,this.type=e,this.listener=r,this.target.addEventListener?this.target.addEventListener(e,r,!1):this.target.on&&this.target.on(e,r,!1)}off(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}class I{constructor(){this.bindingMap_=new C}destroy(){this.removeAll(),this.bindingMap_=null}on(t,e,r){if(!this.bindingMap_)return;let n=new D(t,e,r);return this.bindingMap_.push(e,n),this}once(t,e,r){this.on(t,e,function(n){this.off(t,e),r(n)}.bind(this))}off(t,e){if(!this.bindingMap_)return;let r=this.bindingMap_.get(e)||[];for(let n=0;n<r.length;++n){let i=r[n];i.target==t&&(i.off(),this.bindingMap_.remove(e,i))}}removeAll(){if(!this.bindingMap_)return;let t=this.bindingMap_.getAll();for(let e=0;e<t.length;++e)t[e].off();this.bindingMap_.clear()}}let O;O="undefined"==typeof window?self:window;let U=O.console;const N="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof importScripts;let j=new class extends b{constructor(){super(),this._enable=!1}get enable(){return this._enable}set enable(t){this._enable=t,this.MSG_NAME="__log__"}log(...t){N?j.emit(this.MSG_NAME,"log",[...t].join("")):this._enable&&U.log.call(U,">>>",...t)}debug(...t){N?j.emit(this.MSG_NAME,"debug",[...t].join("")):this._enable&&U.debug&&U.debug.call(U,">>>",...t)}assert(...t){if(this._enable&&U.assert){let e=t[0],r=Array.prototype.slice.call(t,1);r.unshift(">>>"),U.assert.call(U,e,...r)}}warn(...t){N?j.emit(this.MSG_NAME,"warn",[...t].join("")):this._enable&&U.warn.call(U,">>>",...t)}error(...t){N?j.emit(this.MSG_NAME,"error",[...t].join("")):this._enable&&U.error.call(U,">>>",...t)}};class M extends b{constructor(){super()}pipe(t){return this.on("reset",(function(){t.reset()})),this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),t}unpipe(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}push(t,e){this.emit("data",t)}flush(t){this.emit("done",t)}reset(){this.emit("reset")}}class F extends M{constructor(t={}){super(),t.debug&&(j.enable=!0),this.ctx_=new P,this.options_=t,this.cache_buffer_=new L}listenEndStream_(){this.eventManager_=new I,this.eventManager_.on(this.endStream,"data",t=>{this.emit(n.DEMUX_DATA,t)}).on(this.endStream,"done",t=>{this.emit(n.DONE,t)}).on(this.ctx_,"error",t=>{this.emit(n.ERROR,t)})}constraintPushData_(t){let e=null;return R(t)||A(r=t)&&"[object uint8array]"===T.call(r).toLowerCase()?(e=R(t)?new Uint8Array(t):t,e):(j.error("Data pushed is not an ArrayBuffer or Uint8Array: "+t),e);var r}reset(){}destroy(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}var H;!function(t){t[t.WORKER_EXCEPTION=0]="WORKER_EXCEPTION",t[t.WORKER_MSG_EXCEPTION=1]="WORKER_MSG_EXCEPTION",t[t.TS_SYNC_BYTE=2]="TS_SYNC_BYTE",t[t.FLV_HEAD_SIGNATURE=3]="FLV_HEAD_SIGNATURE",t[t.FLV_NOT_EXPECTED_ADJACENT_DATA=4]="FLV_NOT_EXPECTED_ADJACENT_DATA"}(H||(H={}));var V=H;function W(t){let e=0;return ArrayBuffer.isView(t)&&(e=t.byteOffset,t=t.buffer),new DataView(t,e)}class z{constructor(){}readUint8(t,e){return W(t).getUint8(e)}readUint16(t,e,r=!1){return W(t).getUint16(e,r)}readUint32(t,e,r=!1){return W(t).getUint32(e,r)}}class $ extends z{constructor(t){super(),this.table_id=t[0],this.section_syntax_indicator=t[1]>>7,this.section_length=(15&t[1])<<8|t[2],this.transport_stream_id=this.readUint16(t,3),this.version_number=t[5]>>1&31,this.current_next_indicator=t[5]&&1,this.section_number=t[6],this.last_section_number=t[7],this.network_PID=0;var e,r=0,n=this.section_length-4-5;for(this.pmtTable=[];r<n;r+=4)0==(e=this.readUint16(t,8+r))?(this.network_PID=(31&t[10+r])<<8|t[11+r],j.log("packet->network_PID %0x /n/n",this.network_PID)):this.pmtTable.push({programNum:e,program_map_PID:(31&t[10+r])<<8|t[11+r]});var i=this.section_length+3;this.CRC_32=(255&t[i-4])<<24|(255&t[i-3])<<16|(255&t[i-2])<<8|255&t[i-1]}}class Y extends z{constructor(t){if(super(),this.table_id=t[0],this.section_syntax_indicator=t[1]>>7,this.section_length=(15&t[1])<<8|t[2],this.program_number=this.readUint16(t,3),this.version_number=t[5]>>1&31,this.current_next_indicator=t[5]&&1,this.section_number=t[6],this.last_section_number=t[7],this.PCR_PID=(31&t[8])<<8|t[9],this.program_info_length=(15&t[10])<<8|t[11],this.program_info_length<0)return;if(this.program_info_length>2){let e=0;for(;e<this.program_info_length;){e+=t[13+e]}}var e=12+this.program_info_length,r=this.section_length-this.program_info_length-9-4,n=e+r;if(e>=n)return void j.warn(`es_section_pos < es_section_end ${e}, ${n}`);this.pes_table=[];let i=0;for(;i<r;){let r=t[e+i],n=8191&this.readUint16(t,e+i+1),a=4095&this.readUint16(t,e+i+3);if(this.pes_table.push({streamType:r,PID:n}),a>2){let r=0,n=e+i+5;for(;r<a;){r+=t[n+r]}}i+=a+5}var a=this.section_length+3;this.CRC_32=(255&t[a-4])<<24|(255&t[a-3])<<16|(255&t[a-2])<<8|255&t[a-1]}parse(){}}class q extends z{constructor(t){super(),this.table_id=t[0],this.section_syntax_indicator=t[1]>>7,this.section_length=(15&t[1])<<8|t[2],this.transport_stream_id=this.readUint16(t,3),this.version_number=t[5]>>1&31,this.current_next_indicator=1&t[5],this.section_number=t[6],this.last_section_number=t[7],this.original_network_id=this.readUint16(t,8);let e=this.section_length-8-4;this.service_table=[];let r=0;for(;r<e;){let e=0,n={service_id:this.readUint16(t,11),EIT_schedule_flag:2&t[13],EIT_present_following_flag:1&t[13],running_status:t[14]>>5,free_CA_mode:t[14]>>4&1,descriptors_loop_length:(15&t[14])<<8|t[15],provider_name:"",name:""};for(;e<n.descriptors_loop_length;){let r=16+e,i=t[r],a=t[r+1];switch(i){case 72:{let e=[],i=t[r+3],a=0,o=0,s=r+4;for(a=0;a<i;a++)e.push(String.fromCharCode(t[s])),s+=1;n.provider_name=e.join("");let u=[],l=t[s];for(s+=1,o=0;o<l;o++)u.push(String.fromCharCode(t[s])),s+=1;n.name=u.join("")}break;default:j.warn("sdt section unhandled descriptor_tag "+i)}e+=2+a}this.service_table.push(n),r+=5+n.descriptors_loop_length}}}class G{}class X{constructor(t){this.context=t,this.metadata=new G,this.pat_table=[],this.pes_streams=[]}get currentProgramPID(){let t=[];for(let e=0;e<this.pat_table.length;e++)t.push(this.pat_table[e].pid);return t.length>0?t[0]:-1}reset(){this.metadata=new G,this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}parse(t){0===t.PID?this._parsePat(t):1===t.PID||2===t.PID||3<=t.PID&&t.PID<=15||(17===t.PID?this._parseSdt(t):t.PID===this.currentProgramPID&&this._parsePmt(t))}findTrack(t){let e=null,r=this.pes_streams;for(let n=0;n<r.length;n++)if(r[n].id===t){e=r[n];break}return e}_parsePat(t){let e;if(t.payload_unit_start_indicator){let r=t.payload[0];e=t.payload.subarray(r+1)}else e=t.payload;let r=new $(e);for(var n=0;n<r.pmtTable.length;n++)this._add_pid_to_pmt(r.pmtTable[n].programNum,r.pmtTable[n].program_map_PID);return r}_add_pid_to_pmt(t,e){let r=this.pat_table;(function(t){for(let e,n=0;n<r.length;n++)if(e=r[n],e.id===t)return{idx:n,item:e};return null})(t)||r.push({id:t,pid:e})}_parsePmt(t){let e;if(t.payload_unit_start_indicator){let r=t.payload[0];e=t.payload.subarray(r+1)}else e=t.payload;let r=new Y(e);for(var n=0;n<r.pes_table.length;n++)this._add_pes_stream(r.pes_table[n],r);return r}_add_pes_stream(t,e){let r=this.pes_streams;(function(t){for(let e,n=0;n<r.length;n++)if(e=r[n],e.id===t)return{idx:n,item:e};return null})(t.PID)||r.push({id:t.PID,stream_type:t.streamType,pcr_pid:e.PCR_PID,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}_parseSdt(t){let e;if(t.payload_unit_start_indicator){let r=t.payload[0];e=t.payload.subarray(r+1)}else e=t.payload;let r=new q(e);return r.service_table.length>0&&(this.metadata.service_name=r.service_table[0].name,this.metadata.service_provider=r.service_table[0].provider_name),r}}class K extends M{constructor(t,e){super(),this.context=t,this.PSI=e,this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}push(t){let e=t;for(let t,r=0;r<e.length;r++)switch(t=e[r],t.type){case"video":this._complexVideo(t);break;case"audio":this._complexAudio(t);break;case"caption":this._complexCaption(t)}}flush(){this.emit("done"),this._clearStream()}reset(){this._clearStream()}_clearStream(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}_complexVideo(t){let e=this.PSI.findTrack(t.trackId);e&&(e.type="video",e.gops=t,e.firstDTS=t[0][0].dts,e.firstPTS=t[0][0].pts,e.duration=Number.POSITIVE_INFINITY,this.videoTrack=e,this.emit("data",{videoTrack:this.videoTrack}))}_complexAudio(t){let e=this.PSI.findTrack(t.trackId);e&&(e.type="audio",e.frames=t,e.firstPTS=e.firstDTS=t[0].dts,e.duration=Number.POSITIVE_INFINITY,this.audioTrack=e,this.emit("data",{audioTrack:this.audioTrack}))}_complexCaption(){}}const Q={mac:!1,iphone:!1,android:!1},J={version:!1,CHROME:!1,SAFARI:!1,FIREFOX:!1,IE11:!1,IE:!1,EDGE:!1,WECHAT:!1};let Z=navigator.userAgent.toLowerCase();var tt=/(edge)\/([\w.]+)/.exec(Z)||/(opr)[/]([\w.]+)/.exec(Z)||/(chrome)[ /]([\w.]+)/.exec(Z)||/(firefox)[ /]([\w.]+)/.exec(Z)||/(iemobile)[/]([\w.]+)/.exec(Z)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Z)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Z)||/(webkit)[ /]([\w.]+)/.exec(Z)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(Z)||/(msie) ([\w.]+)/.exec(Z)||Z.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(Z)||Z.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(Z)||[],et=/(ipad)/.exec(Z)||/(ipod)/.exec(Z)||/(windows phone)/.exec(Z)||/(iphone)/.exec(Z)||/(kindle)/.exec(Z)||/(silk)/.exec(Z)||/(android)/.exec(Z)||/(win)/.exec(Z)||/(mac)/.exec(Z)||/(linux)/.exec(Z)||/(cros)/.exec(Z)||/(playbook)/.exec(Z)||/(bb)/.exec(Z)||/(blackberry)/.exec(Z)||[],rt={version:void 0},nt={browser:tt[5]||tt[3]||tt[1]||"",version:tt[2]||tt[4]||"0",versionNumber:tt[4]||tt[2]||"0",platform:et[0]||""};if(nt.browser){rt[nt.browser]=!0;let t=nt.versionNumber.split(".");rt.version={major:parseInt(nt.versionNumber,10),string:nt.version},t.length>1&&(rt.version.minor=parseInt(t[1],10)),t.length>2&&(rt.version.build=parseInt(t[2],10))}J.version=rt.version,J.CHROME=!!rt.chrome,J.SAFARI=!!rt.safari&&!J.CHROME,J.FIREFOX=!!rt.firefox,J.IE11=/rv:11/.test(Z),J.IE=!!rt.msie||J.IE11,J.EDGE=!!rt.edge,J.WECHAT=/(wechat)|(micromessenger)/.test(Z),Q.mac=!!nt.platform.mac,Q.iphone=!!nt.platform.iphone,Q.android=!!nt.platform.android;var it=J,at=Q;const ot=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];const st=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];class ut extends b{constructor(){super()}push(t){let e,r,n,i,a,{pts:o,dts:s,payload:u}=t,l=u,c=0,f=0;for(;c+5<l.length;){if(255!==l[c]||240!=(246&l[c+1])){c++;continue}if(r=2*(1&~l[c+1]),e=(3&l[c+3])<<11|l[c+4]<<3|(224&l[c+5])>>5,i=1024*(1+(3&l[c+6])),a=9e4*i/st[(60&l[c+2])>>>2],n=c+e,l.byteLength<n)return;let t={pts:o+f*a,dts:s+f*a,sampleCount:i,audioObjectType:1+(l[c+2]>>>6&3),channelCount:(1&l[c+2])<<2|(192&l[c+3])>>>6,sampleRate:st[(60&l[c+2])>>>2],samplingFrequencyIndex:(60&l[c+2])>>>2,sampleSize:16,data:l.subarray(c+7+r,n)};if(this.emit("frame",t),l.byteLength===n)return l=void 0,void this.emit("done");f++,l=l.subarray(n)}}}class lt extends M{constructor(t){super(),this.PSI=t,this.trackId=null,this.codec=new ut,this.codec.on("frame",t=>{this.frames.push(t),this.frames.byteLength+=t.data.byteLength,this.frames.trackId=this.trackId}),this._newFrames()}push(t){15===t.stream_type&&(this.trackId=t.pid,this.codec.push({dts:t.pes.DTS,pts:t.pes.PTS,payload:t.pes.data_byte}))}flush(){if(this.frames.length>0){let t=this.frames.length,e=this.frames[0],r=this.frames[t-1],n=r.sampleRate*r.sampleCount/9e4;this.frames.firstDTS=e.dts,this.frames.firstPTS=e.pts,this.frames.duration=1===t?n:n+(r.pts-e.pts),this._updateTrackMeta(e),this.emit("data",this.frames),this.reset(),this.emit("done")}}reset(){this.trackId=null,this._newFrames()}_newFrames(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}_updateTrackMeta(t){let e=this.PSI.findTrack(this.trackId),r=((t,e,r)=>{let n,i,a=t;if(!(e>ot.length-1))return it.FIREFOX?e>=6?(t=5,i=new Array(4),n=e-3):(t=2,i=new Array(2),n=e):at.android?(t=2,i=new Array(2),n=e):(t=5,i=new Array(4),e>=6?n=e-3:(1===r&&(t=2,i=new Array(2)),n=e)),i[0]=t<<3,i[0]|=(14&e)>>1,i[1]|=(1&e)<<7,i[1]|=r<<3,5===t&&(i[1]|=(14&n)>>1,i[2]=(1&n)<<7,i[2]|=8,i[3]=0),{config:i,sampleRate:ot[e],channelCount:r,codec:"mp4a.40."+t,realCodec:"mp4a.40."+a};j.error("invalid sampling index:"+e)})(t.audioObjectType,t.samplingFrequencyIndex,t.channelCount);e.config=r.config,e.sampleRate=r.sampleRate,e.inputTimeScale=e.inputTimeScale||e.timescale,e.timescale=r.sampleRate,e.channelCount=r.channelCount,e.codec=r.codec,e.realCodec=r.realCodec,e.isAAC=!0}}function ct(t,e=0,r=1){let n=0,i=0,a=0,o="",s=0;for(let a=e;a<e+r;a++)n=Math.floor(a/8),i=7-a%8,s=t[n]>>i&1,o+=s;return a=parseInt(o,2),a}function ft(t,e=0){let r=[],n=8*t.byteLength,i=!1,a=0,o=0,s=0,u="";for(let u=e;u<n;u++)if(a=Math.floor(u/8),o=7-u%8,s=t[a]>>o&1,!i){if(0!==s){i=!0,e=u;break}r.push(0)}let l=r.length+1;for(let r=e;r<e+l;r++)a=Math.floor(r/8),o=7-r%8,s=t[a]>>o&1,u+=s;return{bitLength:r.length+l,value:parseInt(u,2)-1}}var ht={readUEV:ft,readSEV:function(t,e=0){let r=ft(t,e),n=r.value,i=Math.pow(-1,n+1)*Math.ceil(n/2);return{bitLength:r.bitLength,value:i}},readBit:ct,readByte:function(t,e=0){return ct(t,e,8)}};let dt=0;function pt(t,e){let r,n=8,i=8;for(var a=0;a<e;a++)0!=i&&(r=ht.readUEV(t,dt),dt+=r.bitLength,i=(n+r.value+256)%256),n=t[a]}class yt extends z{constructor(t){switch(super(),this.forbidden_zero_bit=t[0]>>7,this.ref_idc=t[0]>>5&3,this.unit_type=31&t[0],this.data=function(t){let e,r=t.byteLength,n=[],i=1,a=new Uint8Array(0);for(;i<r-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return t;e=r-n.length;try{a=new Uint8Array(e)}catch(t){throw"epsb alloc mem error "+e}let o=0;for(i=0;i<e;o++,i++)o===n[0]&&(o++,n.shift()),a[i]=t[o];return a}(t.subarray(1)),this.rawData=t,this.unit_type){case 1:break;case 2:case 3:case 4:case 5:break;case 7:this.sps=function(t){dt=0;let e,r,n,i,a,o,s,u=t[0],l=t[1],c=t[2],f=t.subarray(3),h=0,d=[1,1],p=1,y=0,v=!0,g=ht.readUEV(f,dt);if(dt+=g.bitLength,100==u||110==u||122==u||244==u||44==u||83==u||86==u||118==u||128==u){let t=ht.readUEV(f,dt);dt+=t.bitLength,3==t.value&&(dt+=1);let e=ht.readUEV(f,dt);dt+=e.bitLength;let r=ht.readUEV(f,dt);if(dt+=r.bitLength,dt+=1,h=ht.readBit(f,dt),dt+=1,h)for(let e=0;e<(3!=t.value?8:12);e++){let t=ht.readBit(f,dt);dt+=1,t&&pt(f,e<6?16:64)}}let m=ht.readUEV(f,dt);dt+=m.bitLength;let b=ht.readUEV(f,dt),_=b.value;if(dt+=b.bitLength,0===_)e=ht.readUEV(f,dt),dt+=e.bitLength;else if(1===_){dt+=1,r=ht.readSEV(f,dt),dt+=r.bitLength,n=ht.readSEV(f,dt),dt+=n.bitLength,i=ht.readUEV(f,dt),dt+=i.bitLength;for(let t,e=0;e<i.value;e++)t=ht.readSEV(f,dt),dt+=t.bitLength}let w=ht.readUEV(f,dt);dt+=w.bitLength,dt+=1;let k=ht.readUEV(f,dt);dt+=k.bitLength;let x=ht.readUEV(f,dt);dt+=x.bitLength;let E=ht.readBit(f,dt);dt+=1,E||(dt+=1),dt+=1;let S=ht.readBit(f,dt);dt+=1;let P=0,T=0,A=0,B=0;if(S){let t=ht.readUEV(f,dt);dt+=t.bitLength,P=t.value;let e=ht.readUEV(f,dt);dt+=e.bitLength,T=e.value;let r=ht.readUEV(f,dt);dt+=r.bitLength,A=r.value;let n=ht.readUEV(f,dt);dt+=n.bitLength,B=n.value}let R=ht.readBit(f,dt);if(dt+=1,R){let t=ht.readBit(f,dt);if(dt+=1,t){const t=ht.readByte(f,dt);switch(dt+=8,t){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:{let t=ht.readByte(f,dt);dt+=8;let e=ht.readByte(f,dt);dt+=8;let r=ht.readByte(f,dt);dt+=8;let n=ht.readByte(f,dt);dt+=8,d=[t<<8|e,r<<8|n];break}}d&&(p=d[0]/d[1]),255===t&&(dt+=16,dt+=16)}let e=ht.readBit(f,dt);dt+=1,e&&(dt+=1);let r=ht.readBit(f,dt);if(dt+=1,r){a=ht.readBit(f,dt,3),dt+=3,dt+=1;let t=ht.readBit(f,dt);dt+=1,t&&(dt+=24)}let n=ht.readBit(f,dt);if(dt+=1,n){let t=ht.readUEV(f,dt);dt+=t.bitLength;let e=ht.readUEV(f,dt);dt+=e.bitLength}let i=ht.readBit(f,dt);dt+=1,i&&(o=ht.readBit(f,dt,32),dt+=32,s=ht.readBit(f,dt,32),dt+=32,v=!!ht.readBit(f,dt),dt+=1,y=s/(2*o))}return{payload:f,profile_idc:u,profile_compatibility:l,level_idc:c,sps_id:g.value,log2_max_frame_num_minus4:b.value,pic_order_cnt_type:_,log2_max_pic_order_cnt_lsb_minus4:e?e.value:0,width:Math.ceil((16*(k.value+1)-2*P-2*T)*p),height:(2-E)*(x.value+1)*16-2*A-2*B,pixelRatio:d,video_format:a,fps:y,fixedFPS:v}}(this.data);break;case 8:this.pps=function(t){let e,r,n=0,i=t,a=[],o=0;n+=ht.readUEV(i,n).bitLength,n+=ht.readUEV(i,n).bitLength,n+=1,n+=1;let s=ht.readUEV(i,n);if(n+=s.bitLength,s.value>0){let t=ht.readUEV(i,n);n+=t.bitLength;let u,l=0;switch(t.value){case 0:for(l=0;l<=t.value;l++)u=ht.readUEV(i,n),n+=u.bitLength;break;case 2:for(l=0;l<=t.value;l++)u=ht.readUEV(i,n),n+=u.bitLength,u=ht.readUEV(i,n),n+=u.bitLength;break;case 3:case 4:case 5:n+=1,e=ht.readUEV(i,n),n+=e.bitLength;break;case 6:{r=ht.readUEV(i,n),n+=r.bitLength;let t=Math.ceil(Math.log2(s.value+1));for(o=0;o<=r.value;o++)a.push(ht.readBit(i,n,t)),n+=t}}}return n+=ht.readUEV(i,n).bitLength,n+=ht.readUEV(i,n).bitLength,n+=1,n+=1,n+=ht.readSEV(i,n).bitLength,n+=ht.readSEV(i,n).bitLength,n+=ht.readSEV(i,n).bitLength,n+=1,n+=1,n+=1,{sliceGroupNum:s.value+1}}(this.data);break;case 6:this.sei=(this.data,{});break;case 9:this.primary_pic_type=this.data[0]>>5}}}class vt extends b{constructor(){super(),this.cachedBytes=null}push(t){let e,r=this,n=0,i=0,a=0,{pts:o,dts:s,payload:u,naluSizeLength:l}=t;if(this.cachedBytes){try{e=new Uint8Array(this.cachedBytes.byteLength+u.byteLength)}catch(t){throw`h264 alloc mem error ${this.cachedBytes.byteLength}/${u.byteLength}`}e.set(this.cachedBytes),e.set(u,this.cachedBytes.byteLength)}else e=u;if(l){let t=0,n=0,i=0;do{n=0;for(let r=0;r<l;r++)n|=e[t+r]<<8*(l-r-1);t+=l,i=t+n,i>e.length&&(i=e.length);let a=e.subarray(t,i),u=new yt(a);u.pts=o,u.dts=s,r.emit("nalu",u),t=i}while(t<e.length)}else{let t=e.byteLength-1,u=0;do{if(0!==e[t])break;u++,t--}while(t>0);u>=3&&(e=e.subarray(0,t+1));do{let t=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],l=e.length-n>=4?t:-1,c=0,f=n===e.length-1;if(l>>8==1?c=3:1===l&&(c=4),3===c||4===c||f){let t=i+a,l=f&&u>=3;if(n>i&&(!f||l)){let a=e.subarray(t,l?n+1:n),u=new yt(a);u.pts=o,u.dts=s,r.emit("nalu",u),i=n}f&&(u<3?(this.cachedBytes=e.subarray(i),this.cachedBytes.pts=o,this.cachedBytes.dts=s,this.cachedBytes.startCodeLength=a):this.cachedBytes=null),n===i&&(a=c),n+=c||1}else n++}while(n<e.length)}if(this.cachedBytes){let t=new yt(this.cachedBytes.subarray(this.cachedBytes.startCodeLength));t.pts=this.cachedBytes.pts,t.dts=this.cachedBytes.dts,this.emit("nalu",t),this.cachedBytes=null}this.emit("done")}reset(){this.cachedBytes=null}}class gt extends M{constructor(t){super(),this.PSI=t,this.trackId=null,this.currentFrame=[],this.codec=new vt,this._newGop(),this._newGops(),this.codec.on("nalu",t=>{if(7===t.unit_type){let e=this.PSI.findTrack(this.trackId),r=(t=>{let e="avc1.",r=[t.profile_idc,t.profile_compatibility,t.level_idc];for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return{codec:e}})(t.sps);e.codec=r.codec,e.width=t.sps.width,e.height=t.sps.height,e.profileIdc=t.sps.profile_idc,e.profileCompatibility=t.sps.profile_compatibility,e.levelIdc=t.sps.level_idc,e.pixelRatio=t.sps.pixelRatio,e.sps=[t.rawData]}else if(8===t.unit_type){this.PSI.findTrack(this.trackId).pps=[t.rawData]}this._grouping(t)})}push(t){const{stream_type:e,pes:r,pid:n}=t;if(27===e||36===e){this.trackId=n;let t={pts:r.PTS,dts:r.DTS,payload:r.data_byte};this.codec.push(t)}}flush(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this._pushFrameIntoGop(),this.currentFrame=[]),this.gop.length>0&&this._pushGopIntoGroup()}reset(){this.codec.reset(),this.currentFrame=[],this._newGop(),this._newGops()}_grouping(t){9===t.unit_type?(this.currentFrame.length>0&&(this.currentFrame.duration=t.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this._pushGopIntoGroup()),this.currentFrame.keyframe||this.gop.length>0?this._pushFrameIntoGop():j.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=t.pts,this.currentFrame.dts=t.dts):(5===t.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=t.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(t)),this.currentFrame.duration=t.dts-this.currentFrame.dts}_newGop(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}_pushFrameIntoGop(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}_newGops(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}_pushGopIntoGroup(){let t=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=t.dts,this.gops.firstPTS=t.pts,this.gops.push(this.gop),this.emit("data",this.gops),this._newGop(),this._newGops(),this.emit("done")}}class mt extends M{constructor(t,e,r={}){super(),this.context=t,this.PSI=e,this.options=r,this.tracks=[],this.adtsStream=new lt(e),this.avcStream=new gt(e),this.streams=[this.adtsStream,this.avcStream],r.decodeCodec&&(this.avcStream.on("data",t=>{let e=r.config.stubTime;if(B(e)){let r=(t.firstPTS+t.duration)/9e4;if(r<e)return void j.warn(`drop avc gop, start/end/stubTime(${t.firstPTS}/${r}/${e})`)}this.tracks.push(t),this.emit("data",this.tracks),this.tracks=[],this.adtsStream.flush()}),this.adtsStream.on("data",t=>{let e=r.config.stubTime;if(B(e)){let r=(t.firstPTS+t.duration)/9e4;if(r<e)return void j.warn(`drop adts, start/end/stubTime(${t.firstPTS}/${r}/${e})`)}this.tracks.push(t),this.emit("data",this.tracks),this.tracks=[]}))}push(t){const{options:e,adtsStream:r,avcStream:n}=this;let{stream_type:i}=t;if(e.decodeCodec)switch(i){case 27:case 36:n.push(t);break;case 15:r.push(t);break;default:j.warn("ts elementary encounter unknown stream type "+i)}else this.emit("data",t)}flush(){let{streams:t,tracks:e}=this;for(let e=0;e<this.streams.length;e++){t[e].flush()}e.length>0&&this.emit("data",e),this.emit("done"),e.splice(0,e.length)}reset(){this.tracks=[];for(let t=0;t<this.streams.length;t++){this.streams[t].reset()}this.emit("reset")}}class bt extends z{constructor(t){super(),this.start_code_prefix=this.readUint16(t,0)<<8|t[2],this.stream_id=t[3],this.packet_length=this.readUint16(t,4),this.data_alignment_indicator=4&t[6],this.copyright=2&t[6],this.PTS_DTS_flags=t[7]>>6,this.ESCR_flag=32&t[7],this.ES_rate_flag=16&t[7],this.trick_mode_flag=8&t[7],this.additional_copy_info_flag=4&t[7],this.CRC_flag=2&t[7],this.extension_flag=1&t[7],this.header_data_length=t[8],this.PTS=0,2==(2&this.PTS_DTS_flags)&&(this.PTS=this.calcTimestamp_(t,9)),this.DTS=this.PTS,1==(1&this.PTS_DTS_flags)&&(this.DTS=this.calcTimestamp_(t,14)),this.data_byte=t.subarray(9+this.header_data_length)}calcTimestamp_(t,e){return 536870912*(14&t[e])+(t[e+1]<<22)+(t[e+2]>>1<<15)+(t[e+3]<<7)+(t[e+4]>>1)}valid(){let t=this.start_code_prefix;return 0===t[0]&&0===t[1]&&1===t[2]}}class _t extends M{constructor(t,e){super(),this.context=t,this.PSI=e,this.PID=null,this.cache_buffer=new L}push(t){const e=this;t.PID>255&&t.PID<8191&&(-1==this.PSI.currentProgramPID?e._pushPacket(t):this.PSI.currentProgramPID!==t.PID&&(1===t.payload_unit_start_indicator&&e._assembleOnePES(),e._pushPacket(t)))}flush(){this._assembleOnePES(),this.emit("done")}reset(){this._clearCached(),this.emit("reset")}_clearCached(){this.PID=null,this.cache_buffer.clear()}_pushPacket(t){let e=this.cache_buffer.empty;e&&0===t.payload_unit_start_indicator||(e&&(this.PID=t.PID),this.cache_buffer.append(t.payload))}_assembleOnePES(){const t=this;if(!this.cache_buffer.empty){let e;try{e=this.cache_buffer.toNewBytes()}catch(t){throw"pes alloc mem err "+this.cache_buffer.byteLength}let r=new bt(e),n=this.PSI.findTrack(this.PID);if(n){let e={pid:n.id,stream_type:n.stream_type,pcr_pid:n.pcr_pid,pes:r};t.emit("data",e)}t._clearCached()}}}class wt extends z{constructor(t){if(super(),this.sync_byte=t[0],this.transport_error_indicator=t[1]>>7,this.payload_unit_start_indicator=t[1]>>6&1,this.transport_priority=t[1]>>>5&1,this.PID=8191&this.readUint16(t,1),this.tsc=t[3]>>6,this.afc=t[3]>>4&3,this.continuity_counter=15&t[3],this.has_payload=1&this.afc,this.has_adaptation=2&this.afc,this.has_payload)if(this.has_adaptation){let e=t[4];this.payload=t.subarray(5+e)}else this.payload=t.subarray(4)}valid(){return 71===this.sync_byte&&1===this.has_payload}}class kt extends F{constructor(t={}){super(t),this.psi_=new X(this.ctx_),this.pesStream_=new _t(this.ctx_,this.psi_),this.elementaryStream_=new mt(this.ctx_,this.psi_,t),this.complexStream_=new K(this.ctx_,this.psi_),this.pipe(this.pesStream_),this.pesStream_.pipe(this.elementaryStream_),this.elementaryStream_.pipe(this.complexStream_),super.listenEndStream_()}get endStream(){let t=this.elementaryStream_;return this.options_.decodeCodec&&(t=this.complexStream_),t}push(t,e){const{done:r}=e,{options_:n,ctx_:i,cache_buffer_:a,psi_:o}=this;let s=super.constraintPushData_(t),u=a.byteLength,l=null;for(n.config=e,j.log(`hls demux received ${s.byteLength} bytes, cache ${u} bytes. ${r?"chunk done":""}`),a.append(s);a.byteLength>=188;){let t=a.cut(188);if(t){let e=new wt(t);if(!e.valid()){let r=`Encounter invalid ts packet, packet_length(${t.length}), cache_length(${this.cache_buffer_.byteLength}), has_payload(${e.has_payload}), data(${t})`;j.error(r),this.reset(),i.emit("error",V.TS_SYNC_BYTE,r,{startByte:l,endByte:l+t.byteLength});break}o.parse(e),this.emit("data",e),l+=t.byteLength}}a.empty&&r&&this.emit("done")}reset(){this.cache_buffer_.clear(),this.emit("reset")}}var xt,Et;!function(t){t[t.HEAD=0]="HEAD",t[t.BODY=1]="BODY"}(xt||(xt={})),function(t){t[t.SCRIPT_DATA=18]="SCRIPT_DATA",t[t.VIDEO=9]="VIDEO",t[t.AUDIO=8]="AUDIO"}(Et||(Et={}));var St,Pt,Tt,At;!function(t){t[t.AAC=10]="AAC"}(St||(St={})),function(t){t[t.MONO=0]="MONO",t[t.STEREO=1]="STEREO"}(Pt||(Pt={}));!function(t){t[t.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",t[t.AAC_RAW=1]="AAC_RAW"}(Tt||(Tt={}));!function(t){t[t.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",t[t.NALU=1]="NALU",t[t.SEQUENCE_END=2]="SEQUENCE_END"}(At||(At={}));const Bt=new vt,Rt=[];Bt.on("nalu",t=>{Rt.push(t)});var Lt;!function(t){t[t.AVC=7]="AVC"}(Lt||(Lt={}));var Ct=function(){function t(e){a()(this,t),d()(this,"previousPes",null),d()(this,"maxAudioPTS",0),d()(this,"maxVideoPTS",0),e?(this.init(),this.dataArray=[],this.videoArray=[],this.audioArray=[],this.decode=e):console.error("class TsDemux need pass decode parmas")}return s()(t,[{key:"init",value:function(){var t=this;try{this.demuxer=new kt({enableWorker:!1,debug:!1,onlyDemuxElementary:!0}),this.demuxer.on(n.DEMUX_DATA,(function(e){e instanceof Array?(t.dataArray.push(e),t.demuxed(t.dataArray),t.dataArray=[]):t.dataArray.push(e)})),this.demuxer.on(n.DONE,(function(e){var r={};t.demuxed(t.dataArray),t.dataArray=[],t.previousPes.partEnd=!0,t.previousPes.lastTS=t.isLast,t.isLast?(t.maxPTS=Math.min(t.maxAudioPTS,t.maxVideoPTS),r.audioEnd=!0,t.audioQueue(r),self.postMessage({type:"demuxedAAC",data:t.audioArray,no:t.no}),t.audioArray=[],self.postMessage({type:"maxPTS",data:{maxAudioPTS:t.maxAudioPTS,maxVideoPTS:t.maxVideoPTS}})):(self.postMessage({type:"demuxedAAC",data:t.audioArray,no:t.no}),t.audioArray=[]),t.decode.no=t.no,t.decode.push(t.videoArray),t.videoArray=[],t.previousPes=null}))}catch(t){console.error("init demuxer failed.")}}},{key:"push",value:function(t){this.demuxer.push(t,{done:!0})}},{key:"demuxed",value:function(t){var e=this;t.forEach((function(t){e.tsDemuxed(t)}))}},{key:"tsDemuxed",value:function(t){var e=t.stream_type,r=t.pes||{};switch(e){case 27:case 36:this.videoQueue(r);break;case 3:case 15:case 17:r.PTS=Math.round(r.PTS*u.a*1e3),this.maxAudioPTS=Math.max(r.PTS,this.maxAudioPTS),this.audioQueue(r)}}},{key:"audioQueue",value:function(t){this.audioArray.push(t)}},{key:"videoQueue",value:function(t){this.previousPes=t,this.maxVideoPTS=Math.max(this.maxVideoPTS,t.PTS),this.videoArray.push(t)}},{key:"destroy",value:function(){this.demuxer.destroy()}}]),t}();self.decode=new f,self.demuxer=new Ct(self.decode);e.default=function(t){t.onmessage=function(e){var r=e.data,n=r.type,i=r.data,a=r.no,o=r.isLast;switch(n){case"startDemux":t.demuxer.isLast=o,t.demuxer.no=a,t.demuxer.push(i);break;case"loadwasm":t.decode.loadWASM(e);break;case"flush":t.decode.flush()}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){t.exports=r(222)},function(t,e,r){t.exports=r(110).default}])}));